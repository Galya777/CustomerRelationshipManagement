{"version":3,"mappings":"81DAAA,SAASA,GAAQC,EAAe,CAC9B,OAAAA,EAAgBA,GAAiB,GAC1B,MAAM,QAAQA,CAAa,EAAIA,EAAgB,CAACA,CAAa,CACtE,CAEA,SAASC,EAAIC,EAAK,CAChB,MAAO,mBAAmBA,CAAG,EAC/B,CAEA,SAASC,GAASC,EAAO,CACvB,GAAI,OAAOA,GAAU,SACnB,OAAO,OAAOA,CAAK,EAGrB,MAAMC,EAAa,OAAO,UAAU,SAAS,KAAKD,CAAK,EAAE,MAAM,UAAU,EAAE,CAAC,EAC5E,OAAIC,IAAe,UAAYA,IAAe,QACrC,GAAGA,CAAU,IAAI,KAAK,UAAUD,CAAK,CAAC,GAEtCC,CAEX,CAEA,MAAMC,GAAS,SACTC,GAAW,WACXC,GAAa,CAACF,GAAQC,EAAQ,EAEpC,SAASE,GAAaC,EAAK,CACzB,GAAI,CAACA,EAAI,MAAM,aAAa,EAC1B,MAAM,IAAI,MACRT,EAAI,gCAAgCS,CAAG,0BAA0B,CACvE,CAEA,CAEA,SAASC,GAAYC,EAAO,CAC1B,GAAI,CAACA,GAAS,CAACC,EAASD,EAAM,IAAI,EAChC,MAAM,IAAI,MACRX,EAAI,kGAAkG,CAC5G,EAGE,MAAMa,EAASF,EAAM,OAEfG,EAAa,CAAC,YAAa,WAAY,QAAQ,EACrD,GACE,CAACC,EAAWJ,EAAM,MAAM,GACxB,CAAC,MAAM,QAAQA,EAAM,QAAQ,GAC7B,CAACI,EAAWJ,EAAM,QAAQ,GAC1B,CAACK,GAASH,CAAM,GAChB,CAACC,EAAW,KAAKG,GAAOL,EAASD,EAAMM,CAAG,CAAC,CAAC,EAE5C,MAAM,IAAI,MACRjB,EACE,0BAA0BW,EAAM,IAAI,wBAAwBG,EAAW,KAAK,MAAM,CAAC,wCAE3F,CACA,EAGE,GAAID,EACF,GAAID,EAASC,CAAM,EACjBL,GAAaK,CAAM,UACTN,GAAW,KAAKU,GAAOA,KAAOJ,CAAM,EAK9CN,GAAW,QAAQU,GAAOA,KAAOJ,GAAUL,GAAaK,EAAOI,CAAG,CAAC,CAAC,MAJpE,OAAM,IAAI,MACRjB,EAAI,4CAA8CM,GAAW,SAAWD,GAAS,iBAAiB,CAC1G,EAMMM,EAAM,UACR,CAAC,SAAU,WAAW,EAAE,QAAQO,GAAkB,CAC5CA,KAAkBP,GACpB,QAAQ,KACNX,EACE,iBAAiBW,EAAM,IAAI,8BAA8BO,CAAc,2FACMA,CAAc,IACvG,CACA,CAEI,CAAC,CAEL,CAEA,SAASC,GAAaC,EAAQ,CAC5BtB,GAAQsB,CAAM,EAAE,QAAQT,GAASD,GAAYC,CAAK,CAAC,CACrD,CAEA,SAASU,GAAWZ,EAAKQ,EAAK,CAC5B,IAAIK,EAAS,SAAS,KAAK,cAAc,eAAiBb,EAAM,WAAW,EAC3E,OAAKa,IACHA,EAAS,SAAS,cAAc,QAAQ,EACxCA,EAAO,aAAa,MAAOb,CAAG,EAC1BQ,IAAQZ,GACViB,EAAO,aAAa,OAAQjB,EAAM,EACzBY,IAAQX,IACjBgB,EAAO,aAAahB,GAAU,EAAE,EAElCgB,EAAO,MAAQ,IAEV,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtCF,EAAO,mBAAqBA,EAAO,OAASG,GAAK,CAC/CH,EAAO,sBAAwB,GAC/BC,EAAQE,CAAC,CACX,EACAH,EAAO,QAAUG,GAAK,CAChBH,EAAO,YACTA,EAAO,WAAW,YAAYA,CAAM,EAEtCE,EAAOC,CAAC,CACV,EACIH,EAAO,aAAe,KACxB,SAAS,KAAK,YAAYA,CAAM,EACvBA,EAAO,uBAChBC,EAAO,CAEX,CAAC,CACH,CAEA,SAASG,GAAWb,EAAQ,CAC1B,OAAID,EAASC,CAAM,EACVQ,GAAWR,CAAM,EAEjB,QAAQ,KACbN,GACG,OAAOU,GAAOA,KAAOJ,CAAM,EAC3B,IAAII,GAAOI,GAAWR,EAAOI,CAAG,EAAGA,CAAG,CAAC,CAChD,CAEA,CAEA,SAASU,GAAgBC,EAAMC,EAAQ,CACrC,MAAO,CAAC,OAAO,cAAc,IAAI,YAC/B,iBAAiBD,CAAI,GACrB,CAAC,WAAYA,IAAS,KAAM,OAAAC,CAAM,CACtC,CAAG,CACH,CAEA,SAASb,GAASc,EAAG,CAEnB,OAAO,OAAOA,GAAM,UAAY,CAAC,CAACA,CACpC,CAEA,SAASf,EAAWgB,EAAG,CACrB,OAAO,OAAOA,GAAM,UACtB,CAEA,SAASnB,EAASoB,EAAG,CACnB,OAAO,OAAOA,GAAM,QACtB,CAEA,SAASC,GAAiBC,EAAS,CACjC,MAAMC,EAAQ,IAAI,MAAMnC,EAAI,mBAAmBkC,EAAQ,QAAQ,GAAG,CAAC,EACnE,OAAAC,EAAM,QAAUD,EAChBC,EAAM,KAAO,IACNA,CACT,CAEA,MAAMC,EAAiB,IAAK,KAAqB,GAGjD,SAASC,GAAgBC,EAAQ,CAG/B,MAAMC,EAAOD,EAAO,KACdE,EAAWF,EAAO,SAGlBG,EAFcD,IAAa,SAAWD,IAAS,MAChCC,IAAa,UAAYD,IAAS,MAEnDD,EAAO,SACPA,EAAO,KACX,MAAO,GAAGE,CAAQ,KAAKC,CAAI,EAC7B,CAKA,SAASC,GAA+BC,EAAO,CAY7C,GAVIA,EAAM,kBAKNA,EAAM,SAAW,GAKjBA,EAAM,UAAYA,EAAM,SAAWA,EAAM,QAAUA,EAAM,QAC3D,OAIF,IAAIL,EAASK,EAAM,OACnB,MAAMC,EAAOD,EAAM,aACfA,EAAM,aAAY,EACjBA,EAAM,MAAQ,GAInB,QAASE,EAAI,EAAGA,EAAID,EAAK,OAAQC,IAAK,CACpC,MAAMC,EAASF,EAAKC,CAAC,EACrB,GAAIC,EAAO,UAAYA,EAAO,SAAS,YAAW,IAAO,IAAK,CAC5DR,EAASQ,EACT,KACF,CACF,CAEA,KAAOR,GAAUA,EAAO,SAAS,YAAW,IAAO,KACjDA,EAASA,EAAO,WA+BlB,GA3BI,CAACA,GAAUA,EAAO,SAAS,YAAW,IAAO,KAK7CA,EAAO,QAAUA,EAAO,OAAO,YAAW,IAAO,SAKjDA,EAAO,aAAa,UAAU,GAK9BA,EAAO,aAAa,eAAe,GAKnCA,EAAO,WAAa,OAAO,SAAS,UAAYA,EAAO,OAAS,KAMrDA,EAAO,QAAUD,GAAgBC,CAAM,KACvC,OAAO,SAAS,OAC7B,OAIF,KAAM,CAAC,SAAAS,EAAU,OAAAC,EAAQ,KAAAC,CAAI,EAAIX,EAC7BX,GAAgB,KAAM,CAAC,SAAAoB,EAAU,OAAAC,EAAQ,KAAAC,CAAI,CAAC,IAChDN,EAAM,eAAc,EAEhBA,GAASA,EAAM,OAAS,SAC1B,OAAO,SAAS,EAAG,CAAC,EAG1B,CAYA,MAAMO,GAAQ,CACZ,UAAW,CACT,OAAO,SAAS,iBAAiB,QAASR,EAA8B,CAC1E,EAEA,YAAa,CACX,OAAO,SAAS,oBAAoB,QAASA,EAA8B,CAC7E,CACF,EAGMS,GAAO,UAAU,KAAK,UAAU,SAAS,EAG3CA,IAAQ,CAACpC,EAAW,OAAO,aAAa,IAC1C,OAAO,cAAgB,SAASqC,EAAQC,EAAQ,CAC9CA,EAASA,GAAU,GACnB,IAAI5B,EAAI,SAAS,YAAY,OAAO,EACpC,OAAAA,EAAE,UAAU2B,EAAQ,EAAQC,EAAO,QAAU,EAAQA,EAAO,UAAW,EACvE5B,EAAE,MAAQ4B,EAAO,OAAS,KACnB5B,CACT,EACA,OAAO,cAAc,UAAY,OAAO,MAAM,WAGhD,SAAS6B,GAAkCX,EAAO,CAChD,GAAIA,EAAM,QAAU,uBAClB,OAEF,KAAM,CAAC,SAAAI,EAAU,OAAAC,EAAQ,KAAAC,CAAI,EAAI,OAAO,SACxCtB,GAAgB,KAAM,CAAC,SAAAoB,EAAU,OAAAC,EAAQ,KAAAC,CAAI,CAAC,CAChD,CASA,MAAMM,GAAW,CACf,UAAW,CACT,OAAO,iBAAiB,WAAYD,EAAiC,CACvE,EAEA,YAAa,CACX,OAAO,oBAAoB,WAAYA,EAAiC,CAC1E,CACF,EAKA,IAAIE,GAAiBC,GACjBC,GAAUC,GACVC,GAAYC,GACZC,GAAqBC,GACrBC,GAAmBC,GAKnBC,GAAoB,IACpBC,GAAqB,KAOrBC,GAAc,IAAI,OAAO,CAG3B,UAMA,qFACF,EAAE,KAAK,GAAG,EAAG,GAAG,EAShB,SAAST,GAAOU,EAAKC,EAAS,CAU5B,QATIC,EAAS,GACTtD,EAAM,EACNuD,EAAQ,EACR5B,EAAO,GACP6B,EAAoBH,GAAWA,EAAQ,WAAcJ,GACrDQ,EAAcJ,GAAWA,EAAQ,YAAeH,GAChDQ,EAAc,GACdC,GAEIA,EAAMR,GAAY,KAAKC,CAAG,KAAO,MAAM,CAC7C,IAAIQ,EAAID,EAAI,CAAC,EACTE,EAAUF,EAAI,CAAC,EACfG,EAASH,EAAI,MAKjB,GAJAhC,GAAQyB,EAAI,MAAMG,EAAOO,CAAM,EAC/BP,EAAQO,EAASF,EAAE,OAGfC,EAAS,CACXlC,GAAQkC,EAAQ,CAAC,EACjBH,EAAc,GACd,QACF,CAEA,IAAIK,EAAO,GACPC,EAAOZ,EAAIG,CAAK,EAChBU,EAAON,EAAI,CAAC,EACZO,EAAUP,EAAI,CAAC,EACfQ,EAAQR,EAAI,CAAC,EACbS,EAAWT,EAAI,CAAC,EAEpB,GAAI,CAACD,GAAe/B,EAAK,OAAQ,CAC/B,IAAI0C,EAAI1C,EAAK,OAAS,EAElB8B,EAAW,QAAQ9B,EAAK0C,CAAC,CAAC,EAAI,KAChCN,EAAOpC,EAAK0C,CAAC,EACb1C,EAAOA,EAAK,MAAM,EAAG0C,CAAC,EAE1B,CAGI1C,IACF2B,EAAO,KAAK3B,CAAI,EAChBA,EAAO,GACP+B,EAAc,IAGhB,IAAIY,GAAUP,IAAS,IAAMC,IAAS,QAAaA,IAASD,EACxDQ,GAASH,IAAa,KAAOA,IAAa,IAC1CI,GAAWJ,IAAa,KAAOA,IAAa,IAC5CK,GAAYV,GAAQP,EACpBkB,GAAUR,GAAWC,EAEzBb,EAAO,KAAK,CACV,KAAMW,GAAQjE,IACd,OAAQ+D,EACR,UAAWU,GACX,SAAUD,GACV,OAAQD,GACR,QAASD,GACT,QAASI,GAAUC,GAAYD,EAAO,EAAI,KAAOE,EAAaH,EAAS,EAAI,KACjF,CAAK,CACH,CAGA,OAAI9C,GAAQ4B,EAAQH,EAAI,SACtBE,EAAO,KAAK3B,EAAOyB,EAAI,OAAOG,CAAK,CAAC,EAG/BD,CACT,CASA,SAASV,GAASQ,EAAKC,EAAS,CAC9B,OAAOP,GAAiBJ,GAAMU,EAAKC,CAAO,CAAC,CAC7C,CAKA,SAASP,GAAkBQ,EAAQ,CAKjC,QAHIuB,EAAU,IAAI,MAAMvB,EAAO,MAAM,EAG5B1B,EAAI,EAAGA,EAAI0B,EAAO,OAAQ1B,IAC7B,OAAO0B,EAAO1B,CAAC,GAAM,WACvBiD,EAAQjD,CAAC,EAAI,IAAI,OAAO,OAAS0B,EAAO1B,CAAC,EAAE,QAAU,IAAI,GAI7D,OAAO,SAAUkD,EAAMzB,EAAS,CAI9B,QAHI1B,EAAO,GACPoD,EAAU1B,GAAWA,EAAQ,QAAW,mBAEnCzB,EAAI,EAAGA,EAAI0B,EAAO,OAAQ1B,IAAK,CACtC,IAAIoD,EAAQ1B,EAAO1B,CAAC,EAEpB,GAAI,OAAOoD,GAAU,SAAU,CAC7BrD,GAAQqD,EACR,QACF,CAEA,IAAI9F,EAAQ4F,EAAOA,EAAKE,EAAM,IAAI,EAAI,OAClCC,EAEJ,GAAI,MAAM,QAAQ/F,CAAK,EAAG,CACxB,GAAI,CAAC8F,EAAM,OACT,MAAM,IAAI,UAAU,aAAeA,EAAM,KAAO,gCAAgC,EAGlF,GAAI9F,EAAM,SAAW,EAAG,CACtB,GAAI8F,EAAM,SAAU,SAEpB,MAAM,IAAI,UAAU,aAAeA,EAAM,KAAO,mBAAmB,CACrE,CAEA,QAASE,EAAI,EAAGA,EAAIhG,EAAM,OAAQgG,IAAK,CAGrC,GAFAD,EAAUF,EAAO7F,EAAMgG,CAAC,EAAGF,CAAK,EAE5B,CAACH,EAAQjD,CAAC,EAAE,KAAKqD,CAAO,EAC1B,MAAM,IAAI,UAAU,iBAAmBD,EAAM,KAAO,eAAiBA,EAAM,QAAU,GAAG,EAG1FrD,IAASuD,IAAM,EAAIF,EAAM,OAASA,EAAM,WAAaC,CACvD,CAEA,QACF,CAEA,GAAI,OAAO/F,GAAU,UAAY,OAAOA,GAAU,UAAY,OAAOA,GAAU,UAAW,CAGxF,GAFA+F,EAAUF,EAAO,OAAO7F,CAAK,EAAG8F,CAAK,EAEjC,CAACH,EAAQjD,CAAC,EAAE,KAAKqD,CAAO,EAC1B,MAAM,IAAI,UAAU,aAAeD,EAAM,KAAO,eAAiBA,EAAM,QAAU,eAAiBC,EAAU,GAAG,EAGjHtD,GAAQqD,EAAM,OAASC,EACvB,QACF,CAEA,GAAID,EAAM,SAAU,CAEdA,EAAM,UAASrD,GAAQqD,EAAM,QAEjC,QACF,CAEA,MAAM,IAAI,UAAU,aAAeA,EAAM,KAAO,YAAcA,EAAM,OAAS,WAAa,WAAW,CACvG,CAEA,OAAOrD,CACT,CACF,CAQA,SAASiD,EAAcxB,EAAK,CAC1B,OAAOA,EAAI,QAAQ,4BAA6B,MAAM,CACxD,CAQA,SAASuB,GAAaR,EAAO,CAC3B,OAAOA,EAAM,QAAQ,eAAgB,MAAM,CAC7C,CAQA,SAASgB,GAAO9B,EAAS,CACvB,OAAOA,GAAWA,EAAQ,UAAY,GAAK,GAC7C,CASA,SAAS+B,GAAgBzD,EAAM0D,EAAM,CACnC,GAAI,CAACA,EAAM,OAAO1D,EAGlB,IAAI2D,EAAS3D,EAAK,OAAO,MAAM,WAAW,EAE1C,GAAI2D,EACF,QAAS1D,EAAI,EAAGA,EAAI0D,EAAO,OAAQ1D,IACjCyD,EAAK,KAAK,CACR,KAAMzD,EACN,OAAQ,KACR,UAAW,KACX,SAAU,GACV,OAAQ,GACR,QAAS,GACT,QAAS,IACjB,CAAO,EAIL,OAAOD,CACT,CAUA,SAAS4D,GAAe5D,EAAM0D,EAAMhC,EAAS,CAG3C,QAFImC,EAAQ,GAEH,EAAI,EAAG,EAAI7D,EAAK,OAAQ,IAC/B6D,EAAM,KAAKhD,GAAeb,EAAK,CAAC,EAAG0D,EAAMhC,CAAO,EAAE,MAAM,EAG1D,OAAO,IAAI,OAAO,MAAQmC,EAAM,KAAK,GAAG,EAAI,IAAKL,GAAM9B,CAAO,CAAC,CACjE,CAUA,SAASoC,GAAgB9D,EAAM0D,EAAMhC,EAAS,CAC5C,OAAOL,GAAeN,GAAMf,EAAM0B,CAAO,EAAGgC,EAAMhC,CAAO,CAC3D,CAUA,SAASL,GAAgBM,EAAQ+B,EAAMhC,EAAS,CAC9CA,EAAUA,GAAW,GAYrB,QAVIqC,EAASrC,EAAQ,OACjBsC,EAAQtC,EAAQ,QAAU,GAC1BuC,EAAMvC,EAAQ,MAAQ,GACtBoB,EAAYG,EAAavB,EAAQ,WAAaJ,EAAiB,EAC/DQ,EAAaJ,EAAQ,YAAcH,GACnC2C,EAAW,GAAG,OAAOxC,EAAQ,UAAY,EAAE,EAAE,IAAIuB,CAAY,EAAE,OAAO,GAAG,EAAE,KAAK,GAAG,EACnFlF,EAAQiG,EAAQ,IAAM,GACtBG,EAAiBxC,EAAO,SAAW,EAG9B1B,EAAI,EAAGA,EAAI0B,EAAO,OAAQ1B,IAAK,CACtC,IAAIoD,EAAQ1B,EAAO1B,CAAC,EAEpB,GAAI,OAAOoD,GAAU,SACnBtF,GAASkF,EAAaI,CAAK,EAC3Bc,EAAiBlE,IAAM0B,EAAO,OAAS,GAAKG,EAAW,QAAQuB,EAAMA,EAAM,OAAS,CAAC,CAAC,EAAI,OACrF,CACL,IAAId,EAAUc,EAAM,OAChB,MAAQA,EAAM,QAAU,OAASJ,EAAaI,EAAM,SAAS,EAAI,MAAQA,EAAM,QAAU,MACzFA,EAAM,QAENK,GAAMA,EAAK,KAAKL,CAAK,EAErBA,EAAM,SACJA,EAAM,QACRtF,GAASkF,EAAaI,EAAM,MAAM,EAAI,IAAMd,EAAU,KAEtDxE,GAAS,MAAQkF,EAAaI,EAAM,MAAM,EAAI,IAAMd,EAAU,MAGhExE,GAASkF,EAAaI,EAAM,MAAM,EAAI,IAAMd,EAAU,GAE1D,CACF,CAEA,OAAI0B,GACGF,IAAQhG,GAAS,MAAQ+E,EAAY,MAE1C/E,GAASmG,IAAa,IAAM,IAAM,MAAQA,EAAW,MAEhDH,IAAQhG,GAAS,MAAQ+E,EAAY,MAAQoB,EAAW,OACxDC,IAAgBpG,GAAS,MAAQ+E,EAAY,IAAMoB,EAAW,MAG9D,IAAI,OAAOnG,EAAOyF,GAAM9B,CAAO,CAAC,CACzC,CAcA,SAASb,GAAgBb,EAAM0D,EAAMhC,EAAS,CAC5C,OAAI1B,aAAgB,OACXyD,GAAezD,EAAM0D,CAAI,EAG9B,MAAM,QAAQ1D,CAAI,EACb4D,GAAqC5D,EAAO0D,EAAMhC,CAAO,EAG3DoC,GAAsC9D,EAAO0D,EAAMhC,CAAO,CACnE,CACAd,GAAe,MAAQE,GACvBF,GAAe,QAAUI,GACzBJ,GAAe,iBAAmBM,GAClCN,GAAe,eAAiBQ,GAWhC,KAAM,CAAC,eAAAgD,EAAc,EAAI,OAAO,UAC1BC,GAAU,IAAI,IAEpBA,GAAQ,IAAI,SAAU,CACpB,KAAM,GACN,QAAS,MACX,CAAC,EAED,SAASC,GAAYC,EAAK,CACxB,GAAI,CACF,OAAO,mBAAmBA,CAAG,CAC/B,MAAc,CACZ,OAAOA,CACT,CACF,CAEA,SAASC,GAAUC,EAAWzE,EAAM0E,EAAOC,EAAYC,EAAc,CACnEF,EAAQ,CAAC,CAACA,EACV,MAAMG,EAAW,GAAGJ,CAAS,IAAIC,CAAK,GACtC,IAAII,EAAST,GAAQ,IAAIQ,CAAQ,EAEjC,GAAI,CAACC,EAAQ,CACX,MAAMpB,EAAO,GACboB,EAAS,CACP,KAAApB,EACA,QAAS9C,GAAe6D,EAAWf,EAAM,CACvC,IAAKgB,EACL,OAAQD,IAAc,EAC9B,CAAO,CACP,EACIJ,GAAQ,IAAIQ,EAAUC,CAAM,CAC9B,CAEA,MAAM7C,EAAI6C,EAAO,QAAQ,KAAK9E,CAAI,EAClC,GAAI,CAACiC,EACH,OAAO,KAGT,MAAMxB,EAAS,OAAO,OAAO,GAAImE,CAAY,EAE7C,QAAS3E,EAAI,EAAGA,EAAIgC,EAAE,OAAQhC,IAAK,CACjC,MAAM5B,EAAMyG,EAAO,KAAK7E,EAAI,CAAC,EACvB8E,EAAO1G,EAAI,KACXd,EAAQ0E,EAAEhC,CAAC,GACb1C,IAAU,QAAa,CAAC6G,GAAe,KAAK3D,EAAQsE,CAAI,KACtD1G,EAAI,OACNoC,EAAOsE,CAAI,EAAIxH,EAAQA,EAAM,MAAMc,EAAI,SAAS,EAAE,IAAIiG,EAAW,EAAI,GAErE7D,EAAOsE,CAAI,EAAIxH,GAAQ+G,GAAY/G,CAAK,EAG9C,CAEA,MAAO,CACL,KAAM0E,EAAE,CAAC,EACT,MAAO0C,GAAc,IAAI,OAAOG,EAAO,IAAI,EAC3C,OAAArE,CACJ,CACA,CAwDA,SAASuE,GAAWjH,EAAOoC,EAAU8E,EAAoBN,EAAYC,EAAc,CACjF,IAAIM,EACAC,EACAC,EAAa,EACbX,EAAY1G,EAAM,MAAQ,GAC9B,OAAI0G,EAAU,OAAO,CAAC,IAAM,MACtBQ,IACFR,EAAYA,EAAU,OAAO,CAAC,GAEhCQ,EAAqB,IAGhB,CACL,KAAKI,EAAa,CAChB,GAAItH,IAAUsH,EACZ,MAAO,CAAC,KAAM,EAAI,EAGpB,MAAMC,EAAWvH,EAAM,WAAaA,EAAM,YAAcA,EAAM,SAE9D,GAAI,CAACmH,IACHA,EAAQV,GAAUC,EAAWtE,EAAU,CAACmF,EAAUX,EAAYC,CAAY,EAEtEM,GACF,MAAO,CACL,KAAM,GACN,MAAO,CACL,MAAAnH,EACA,KAAMmH,EAAM,KACZ,OAAQA,EAAM,OACd,KAAMA,EAAM,IAC1B,CACA,EAIM,GAAIA,GAASI,EACX,KAAOF,EAAaE,EAAS,QAAQ,CACnC,GAAI,CAACH,EAAc,CACjB,MAAMI,EAAaD,EAASF,CAAU,EACtCG,EAAW,OAASxH,EAEpB,IAAIyH,EAAgBN,EAAM,KAAK,OAC3BM,EAAgB,GAAKrF,EAAS,OAAOqF,CAAa,IAAM,MAC1DA,GAAiB,GAGnBL,EAAeH,GACbO,EACApF,EAAS,OAAOqF,CAAa,EAC7BP,EACAC,EAAM,KACNA,EAAM,MACpB,CACU,CAEA,MAAMO,EAAaN,EAAa,KAAKE,CAAW,EAChD,GAAI,CAACI,EAAW,KACd,MAAO,CACL,KAAM,GACN,MAAOA,EAAW,KAChC,EAGUN,EAAe,KACfC,GACF,CAGF,MAAO,CAAC,KAAM,EAAI,CACpB,CACJ,CACA,CAWA,SAASM,GAAapG,EAAS,CAC7B,GAAInB,EAAWmB,EAAQ,MAAM,MAAM,EACjC,OAAOA,EAAQ,MAAM,OAAOA,CAAO,CAGvC,CAWA,SAASqG,GAAaC,EAAaL,EAAY,CAC7C,IAAIxH,EAAQwH,EACZ,KAAOxH,GAEL,GADAA,EAAQA,EAAM,OACVA,IAAU6H,EACZ,MAAO,GAGX,MAAO,EACT,CAEA,SAASC,GAAqBC,EAAgB,CAC5C,IAAIC,EAAe,SAASD,EAAe,QAAQ,8CACnD,MAAME,GAAaF,EAAe,OAAS,IAAI,KAC/C,OAAIE,IACFD,GAAgB,qCAAqCC,CAAS,KAEzDD,CACT,CAEA,SAASE,GAAoB3G,EAAS4F,EAAO,CAC3C,KAAM,CAAC,MAAAnH,EAAO,KAAAiC,CAAI,EAAIkF,EAEtB,GAAInH,GAAS,CAACA,EAAM,YAAa,CAC/B,MAAMmI,EAAO,CAAC,KAAAlG,EAAM,MAAAjC,CAAK,EACzB,GAAI,CAACuB,EAAQ,MACXA,EAAQ,MAAQ,WAGZvB,EAAM,OAAQ,CAChB,IAAIkC,EAAIX,EAAQ,MAAM,OACtB,KAAOW,KAAOX,EAAQ,MAAMW,CAAC,EAAE,OAASX,EAAQ,MAAMW,CAAC,EAAE,QAAUlC,EAAM,QACvEuB,EAAQ,MAAM,IAAG,CAErB,CAEFA,EAAQ,MAAM,KAAK4G,CAAI,CACzB,CACF,CAIA,MAAMC,EAAS,CACb,YAAY3H,EAAQkD,EAAU,GAAI,CAChC,GAAI,OAAOlD,CAAM,IAAMA,EACrB,MAAM,IAAI,UAAU,gBAAgB,EAGtC,KAAK,QAAUkD,EAAQ,SAAW,GAClC,KAAK,aAAeA,EAAQ,aAC5B,KAAK,aAAeA,EAAQ,cAAgBgE,GAC5C,KAAK,QAAU,OAAO,OAAO,CAAC,SAAU,IAAI,EAAGhE,EAAQ,OAAO,EAC9D,KAAK,KAAO,MAAM,QAAQlD,CAAM,EAAI,CAAC,KAAM,GAAI,WAAYA,EAAQ,OAAQ,KAAM,YAAa,EAAI,EAAIA,EACtG,KAAK,KAAK,OAAS,IACrB,CASA,WAAY,CACV,MAAO,CAAC,GAAG,KAAK,KAAK,UAAU,CACjC,CAQA,UAAUA,EAAQ,CAChBD,GAAaC,CAAM,EACnB,MAAM4H,EAAY,CAAC,GAAGlJ,GAAQsB,CAAM,CAAC,EACrC,KAAK,KAAK,WAAa4H,CACzB,CAWA,UAAU5H,EAAQ,CAChB,OAAAD,GAAaC,CAAM,EACnB,KAAK,KAAK,WAAW,KAAK,GAAGtB,GAAQsB,CAAM,CAAC,EACrC,KAAK,UAAS,CACvB,CAKA,cAAe,CACb,KAAK,UAAU,EAAE,CACnB,CAmBA,QAAQ6H,EAAmB,CACzB,MAAM/G,EAAU,OAAO,OACrB,GACA,KAAK,QACLtB,EAASqI,CAAiB,EAAI,CAAC,SAAUA,CAAiB,EAAIA,CACpE,EACUnB,EAAQF,GACZ,KAAK,KACL,KAAK,oBAAoB1F,EAAQ,QAAQ,EACzC,KAAK,OACX,EACUX,EAAU,KAAK,aACrB,IAAIuE,EAAU,KACVoD,EAAc,KACdR,EAAiBxG,EAErB,SAAS+C,EAAKkE,EAAQC,EAAStD,EAAQ,MAAM,MAAOuD,EAAY,CAC9D,MAAMpB,EAAcoB,IAAe,MAAQvD,EAAQ,MAAM,MAIzD,OAHAA,EAAUoD,GAAepB,EAAM,KAAKG,CAAW,EAC/CiB,EAAc,KAEV,CAACC,IACCrD,EAAQ,MAAQ,CAACyC,GAAaa,EAAQtD,EAAQ,MAAM,KAAK,IAC3DoD,EAAcpD,EACP,QAAQ,QAAQ1D,CAAc,GAIrC0D,EAAQ,KACH,QAAQ,OAAO7D,GAAiBC,CAAO,CAAC,GAGjDwG,EAAiB,OAAO,OACtBA,EACI,CAAC,MAAQA,EAAe,MAAQA,EAAe,MAAM,MAAM,CAAC,EAAI,EAAG,EACnE,GACJxG,EACA4D,EAAQ,KAChB,EACM+C,GAAoBH,EAAgB5C,EAAQ,KAAK,EAE1C,QAAQ,QAAQvE,EAAQmH,CAAc,CAAC,EAAE,KAAKY,GAC/CA,GAAe,MAAoCA,IAAelH,GACpEsG,EAAe,OAASY,EAAW,QAAUA,EACtCZ,GAEFzD,EAAKkE,EAAQC,EAAQE,CAAU,CACvC,EACH,CAEA,OAAApH,EAAQ,KAAO+C,EAER,QAAQ,QAAO,EACnB,KAAK,IAAMA,EAAK,GAAM,KAAK,IAAI,CAAC,EAChC,MAAO9C,GAAU,CAChB,MAAMwG,EAAeF,GAAqBC,CAAc,EAWxD,GAVKvG,EAGH,QAAQ,KAAKwG,CAAY,EAFzBxG,EAAQ,IAAI,MAAMwG,CAAY,EAIhCxG,EAAM,QAAUA,EAAM,SAAWuG,EAE3BvG,aAAiB,eACrBA,EAAM,KAAOA,EAAM,MAAQ,KAEzB,KAAK,aACP,OAAAuG,EAAe,OAAS,KAAK,aAAavG,CAAK,EACxCuG,EAET,MAAMvG,CACR,CAAC,CACL,CAKA,OAAO,YAAYoH,EAAKC,EAAM,CAC5B,OAAO,IAAI,IAAID,EAAKC,CAAI,CAC1B,CASA,IAAI,oBAAqB,CACvB,OAAO,KAAK,QACR,KAAK,YAAY,YACjB,KAAK,QACL,SAAS,SAAW,SAAS,GACrC,EAAQ,KAAK,QAAQ,UAAW,EAAE,EAC1B,EACN,CAUA,oBAAoBzG,EAAU,CAC5B,GAAI,CAAC,KAAK,QAER,OAAOA,EAGT,MAAMyG,EAAO,KAAK,mBACZC,EAAgB,KAAK,YAAY,YAAY1G,EAAUyG,CAAI,EAAE,KACnE,GAAIC,EAAc,MAAM,EAAGD,EAAK,MAAM,IAAMA,EAC1C,OAAOC,EAAc,MAAMD,EAAK,MAAM,CAE1C,CACF,CAEAT,GAAS,aAAevF,GAWxB,KAAM,CAAC,aAAAkG,EAAY,EAAIX,GACjBY,GAAQ,IAAI,IAElB,SAASC,GAAYC,EAAclJ,EAAOS,EAAQ,CAChD,MAAM8D,EAAOvE,EAAM,MAAQA,EAAM,UASjC,GARIuE,IACE2E,EAAa,IAAI3E,CAAI,EACvB2E,EAAa,IAAI3E,CAAI,EAAE,KAAKvE,CAAK,EAEjCkJ,EAAa,IAAI3E,EAAM,CAACvE,CAAK,CAAC,GAI9B,MAAM,QAAQS,CAAM,EACtB,QAAS,EAAI,EAAG,EAAIA,EAAO,OAAQ,IAAK,CACtC,MAAM+G,EAAa/G,EAAO,CAAC,EAC3B+G,EAAW,OAASxH,EACpBiJ,GAAYC,EAAc1B,EAAYA,EAAW,YAAcA,EAAW,QAAQ,CACpF,CAEJ,CAEA,SAAS2B,GAAeD,EAAcE,EAAW,CAC/C,MAAM3I,EAASyI,EAAa,IAAIE,CAAS,EACzC,GAAI3I,GAAUA,EAAO,OAAS,EAC5B,MAAM,IAAI,MACR,8BAA8B2I,CAAS,+CAE7C,EAEE,OAAO3I,GAAUA,EAAO,CAAC,CAC3B,CAEA,SAAS4I,GAAarJ,EAAO,CAC3B,IAAIiC,EAAOjC,EAAM,KACjB,OAAAiC,EAAO,MAAM,QAAQA,CAAI,EAAIA,EAAK,CAAC,EAAIA,EAChCA,IAAS,OAAYA,EAAO,EACrC,CAEA,SAASqH,GAAaC,EAAQ5F,EAAU,GAAI,CAC1C,GAAI,EAAE4F,aAAkBnB,IACtB,MAAM,IAAI,UAAU,qCAAqC,EAG3D,MAAMc,EAAe,IAAI,IAEzB,MAAO,CAACE,EAAW1G,IAAW,CAC5B,IAAI1C,EAAQmJ,GAAeD,EAAcE,CAAS,EAClD,GAAI,CAACpJ,IACHkJ,EAAa,MAAK,EAClBD,GAAYC,EAAcK,EAAO,KAAMA,EAAO,KAAK,UAAU,EAE7DvJ,EAAQmJ,GAAeD,EAAcE,CAAS,EAC1C,CAACpJ,GACH,MAAM,IAAI,MAAM,UAAUoJ,CAAS,aAAa,EAIpD,IAAIrC,EAASiC,GAAM,IAAIhJ,EAAM,QAAQ,EACrC,GAAI,CAAC+G,EAAQ,CACX,IAAIyC,EAAWH,GAAarJ,CAAK,EAC7ByJ,EAAKzJ,EAAM,OACf,KAAOyJ,GAAI,CACT,MAAMxH,EAAOoH,GAAaI,CAAE,EACxBxH,IACFuH,EAAWvH,EAAK,QAAQ,MAAO,EAAE,EAAI,IAAMuH,EAAS,QAAQ,MAAO,EAAE,GAEvEC,EAAKA,EAAG,MACV,CACA,MAAM7F,EAASmF,GAAa,MAAMS,CAAQ,EACpCE,EAASX,GAAa,iBAAiBnF,CAAM,EAC7C+B,EAAO,OAAO,OAAO,IAAI,EAC/B,QAASzD,EAAI,EAAGA,EAAI0B,EAAO,OAAQ1B,IAC5BjC,EAAS2D,EAAO1B,CAAC,CAAC,IACrByD,EAAK/B,EAAO1B,CAAC,EAAE,IAAI,EAAI,IAG3B6E,EAAS,CAAC,OAAA2C,EAAQ,KAAA/D,CAAI,EACtBqD,GAAM,IAAIQ,EAAUzC,CAAM,EAC1B/G,EAAM,SAAWwJ,CACnB,CAEA,IAAIZ,EAAM7B,EAAO,OAAOrE,EAAQiB,CAAO,GAAK,IAE5C,GAAIA,EAAQ,sBAAwBjB,EAAQ,CAC1C,MAAMiH,EAAc,GACdhE,EAAO,OAAO,KAAKjD,CAAM,EAC/B,QAASR,EAAI,EAAGA,EAAIyD,EAAK,OAAQzD,IAAK,CACpC,MAAM5B,EAAMqF,EAAKzD,CAAC,EACb6E,EAAO,KAAKzG,CAAG,IAClBqJ,EAAYrJ,CAAG,EAAIoC,EAAOpC,CAAG,EAEjC,CACA,MAAMsJ,EAAQjG,EAAQ,qBAAqBgG,CAAW,EAClDC,IACFhB,GAAOgB,EAAM,OAAO,CAAC,IAAM,IAAMA,EAAQ,IAAIA,CAAK,GAEtD,CAEA,OAAOhB,CACT,CACF,CAUA,IAAIiB,GAAW,GAEf,SAASC,GAAsBC,EAAa,CAC1CF,GAAS,QAAQG,GAAWA,EAAQ,WAAU,CAAE,EAEhDD,EAAY,QAAQC,GAAWA,EAAQ,SAAQ,CAAE,EAEjDH,GAAWE,CACb,CAEA,MAAME,GAAcC,GAAQ,CAC1B,MAAM3F,EAAO,iBAAiB2F,CAAI,EAAE,iBAAiB,gBAAgB,EACrE,OAAO3F,GAAQA,IAAS,MAC1B,EAEM4F,GAAmB,CAACD,EAAME,IAAO,CACrC,MAAMC,EAAW,IAAM,CACrBH,EAAK,oBAAoB,eAAgBG,CAAQ,EACjDD,EAAE,CACJ,EACAF,EAAK,iBAAiB,eAAgBG,CAAQ,CAChD,EAEA,SAASC,GAAQJ,EAAMK,EAAW,CAChC,OAAAL,EAAK,UAAU,IAAIK,CAAS,EAErB,IAAI,QAAQ3J,GAAW,CAC5B,GAAIqJ,GAAYC,CAAI,EAAG,CACrB,MAAMM,EAAON,EAAK,sBAAqB,EACjCO,EAAO,WAAWD,EAAK,OAASA,EAAK,GAAG,cAAcA,EAAK,MAAQA,EAAK,IAAI,KAClFN,EAAK,aAAa,QAAS,uBAAuBO,CAAI,EAAE,EACxDN,GAAiBD,EAAM,IAAM,CAC3BA,EAAK,UAAU,OAAOK,CAAS,EAC/BL,EAAK,gBAAgB,OAAO,EAC5BtJ,EAAO,CACT,CAAC,CACH,MACEsJ,EAAK,UAAU,OAAOK,CAAS,EAC/B3J,EAAO,CAEX,CAAC,CACH,CAEA,MAAM8J,GAAqB,IAE3B,SAASC,GAAiBC,EAAQ,CAChC,OAAOA,GAAW,IACpB,CAEA,SAASC,GAAuBtJ,EAAS,CACvC,MAAMuJ,EAAO,OAAO,OAAO,GAAIvJ,CAAO,EACtC,cAAOuJ,EAAK,KACLA,CACT,CAEA,SAASC,EAAe,CAAC,SAAA3I,EAAW,GAAI,OAAAC,EAAS,GAAI,KAAAC,EAAO,GAAI,MAAA0I,EAAQ,GAAI,OAAAtI,EAAS,GAAI,aAAAuI,EAAc,SAAAC,CAAQ,EAAGlL,EAAO,CACvH,MAAMS,EAASuK,EAAM,IAAI7C,GAAQA,EAAK,KAAK,EAC3C,MAAO,CACL,QAAS+C,GAAYA,EAAS,SAAW,GACzC,SAAA9I,EACA,OAAAC,EACA,KAAAC,EACA,OAAA7B,EACA,MAAOT,GAASS,EAAO,QAAUA,EAAOA,EAAO,OAAS,CAAC,GAAK,KAC9D,OAAAiC,EACA,aAAAuI,EACA,OAAQ,CAACE,EAAa,KAAOC,GAC3BC,EAAO,aAAa,QAClBC,GAAe7K,CAAM,CAC7B,EAAQ,OAAO,OAAO,GAAIiC,EAAQyI,CAAU,CAAC,EACvCD,CACN,CACA,CACA,CAEA,SAASK,GAAehK,EAASa,EAAU,CACzC,MAAMM,EAAS,OAAO,OAAO,GAAInB,EAAQ,MAAM,EAC/C,MAAO,CACL,SAAU,CACR,SAAAa,EACA,KAAMb,EAAQ,SACd,OAAAmB,CACN,CACA,CACA,CAEA,SAAS8I,GAAcjK,EAASkK,EAAS,CACvCA,EAAQ,SAAWV,EAAexJ,CAAO,EACzC,MAAMsC,EAAQtC,EAAQ,MAAM,IAAI4G,GAAQA,EAAK,KAAK,EAAE,QAAQ5G,EAAQ,KAAK,EACzE,OAAAA,EAAQ,MAAMsC,CAAK,EAAE,QAAU4H,EACxBA,CACT,CAEA,SAASC,GAAsBC,EAAUC,EAAMC,EAAS,CACtD,GAAIzL,EAAWuL,CAAQ,EACrB,OAAOA,EAAS,MAAME,EAASD,CAAI,CAEvC,CAEA,SAASE,GAAMC,EAAmBH,EAAMH,EAAS,CAC/C,OAAOO,GAAmB,CACxB,GAAIA,IAAoBA,EAAgB,QAAUA,EAAgB,UAChE,OAAOA,EAGT,GAAIP,EACF,OAAOC,GAAsBD,EAAQM,CAAiB,EAAGH,EAAMH,CAAO,CAE1E,CACF,CAEA,SAASQ,GAAmBC,EAAalM,EAAO,CAC9C,GAAI,CAAC,MAAM,QAAQkM,CAAW,GAAK,CAAC7L,GAAS6L,CAAW,EACtD,MAAM,IAAI,MACR7M,EACE,4CAA4CW,EAAM,IAAI,uCAAuCkM,CAAW,EAChH,CACA,EAGElM,EAAM,WAAa,GACnB,MAAMmM,EAAchN,GAAQ+M,CAAW,EACvC,QAAShK,EAAI,EAAGA,EAAIiK,EAAY,OAAQjK,IACtCnC,GAAYoM,EAAYjK,CAAC,CAAC,EAC1BlC,EAAM,WAAW,KAAKmM,EAAYjK,CAAC,CAAC,CAExC,CAEA,SAASkK,GAAeC,EAAO,CAC7B,GAAIA,GAASA,EAAM,OAAQ,CACzB,MAAM5D,EAAS4D,EAAM,CAAC,EAAE,WACxB,QAASnK,EAAI,EAAGA,EAAImK,EAAM,OAAQnK,IAChCuG,EAAO,YAAY4D,EAAMnK,CAAC,CAAC,CAE/B,CACF,CAEA,SAASkJ,GAAqBhJ,EAAUmH,EAAQ,CAC9C,MAAMV,EAAOU,EAAO,mBACpB,OAAOV,EACHU,EAAO,YAAY,YAAYnH,EAAS,QAAQ,MAAO,EAAE,EAAGyG,CAAI,EAAE,SAClEzG,CACN,CAEA,SAASkJ,GAAeN,EAAO,CAC7B,OAAOA,EAAM,IAAI7C,GAAQA,EAAK,IAAI,EAAE,OAAO,CAACmE,EAAGC,IACzCA,EAAE,OACGD,EAAE,QAAQ,MAAO,EAAE,EAAI,IAAMC,EAAE,QAAQ,MAAO,EAAE,EAElDD,EACN,EAAE,CACP,CAqCA,MAAMjB,UAAejD,EAAS,CAc5B,YAAYoE,EAAQ7I,EAAS,CAC3B,MAAM8I,EAAc,SAAS,KAAK,cAAc,MAAM,EAChDC,EAAWD,GAAeA,EAAY,aAAa,MAAM,EAC/D,MAAM,GAAI,OAAO,OAAO,CAEtB,QAASC,GAAYtE,GAAS,YAAYsE,EAAU,SAAS,GAAG,EAAE,SAAS,QAAQ,UAAW,EAAE,CACtG,EAAO/I,CAAO,CAAC,EAEX,KAAK,aAAepC,GAAW,KAAK,eAAeA,CAAO,EAE1D,MAAMsI,EAAWwB,EAAO,kBACxBA,EAAO,YAAY,MAAMA,EAAQ,OAAO,KAAKxB,CAAQ,EAAE,IAAIvJ,GAAOuJ,EAASvJ,CAAG,CAAC,CAAC,EAWhF,KAAK,QAUL,KAAK,MACL,KAAK,MAAQ,QAAQ,QAAQkM,CAAM,EAWnC,KAAK,SACL,KAAK,SAAWzB,EAAe,CAAC,SAAU,IAAI,CAAC,EAE/C,KAAK,sBAAwB,EAC7B,KAAK,yBAA2B,KAAK,oBAAoB,KAAK,IAAI,EAClE,KAAK,UAAUyB,CAAM,EACrB,KAAK,UAAS,EAEd,KAAK,kBAAoB,IAAI,QAC7B,KAAK,gBAAkB,IAAI,OAC7B,CAEA,eAAejL,EAAS,CACtB,MAAMvB,EAAQuB,EAAQ,MAEtB,IAAIoL,EAAY,QAAQ,QAAO,EAE3BvM,EAAWJ,EAAM,QAAQ,IAC3B2M,EAAYA,EACT,KAAK,IAAM3M,EAAM,SAAS6K,GAAuBtJ,CAAO,CAAC,CAAC,EAC1D,KAAKgG,GAAY,CAGZ,CAACoD,GAAiBpD,CAAQ,GAAK,CAACnH,EAAWJ,EAAM,QAAQ,IAC3DuH,EAAWvH,EAAM,UAEnBiM,GAAmB1E,EAAUvH,CAAK,CACpC,CAAC,GAGL,MAAM4M,EAAW,CACf,SAAU3K,GAAQsJ,GAAehK,EAASU,CAAI,EAC9C,UAAY4K,GAAc,CACxB,MAAMpB,EAAU,SAAS,cAAcoB,CAAS,EAChD,YAAK,kBAAkB,IAAIpB,EAAS,EAAI,EACjCA,CACT,CACN,EAEI,OAAOkB,EACJ,KAAK,IAAM,CACV,GAAI,KAAK,iBAAiBpL,CAAO,EAC/B,OAAOmK,GAAsB1L,EAAM,OAAQ,CAACuB,EAASqL,CAAQ,EAAG5M,CAAK,CAEzE,CAAC,EACA,KAAK4K,GAAU,CACd,GAAID,GAAiBC,CAAM,IAIrBA,aAAkB,aAClBA,EAAO,UACPA,IAAWnJ,GACb,OAAOmJ,EAIX,GAAI3K,EAASD,EAAM,QAAQ,EACzB,OAAO4M,EAAS,SAAS5M,EAAM,QAAQ,EAGzC,GAAIA,EAAM,OACR,OAAOe,GAAWf,EAAM,MAAM,EAC3B,KAAK,IAAM,CAAC,EAAG,IAAM,CACpB,MAAM,IAAI,MAAMX,EAAI,qBAAqBW,EAAM,MAAM,qCAAqC,CAAC,CAC7F,CAAC,CAEP,CAAC,EACA,KAAK4K,GAAU,CACd,GAAID,GAAiBC,CAAM,EACzB,OAAOA,EAET,GAAI3K,EAASD,EAAM,SAAS,EAC1B,OAAO4M,EAAS,UAAU5M,EAAM,SAAS,CAE7C,CAAC,CACL,CAYA,UAAUwM,EAAQ,CACZA,GACF,KAAK,eAAeA,CAAM,EAE5B,KAAK,SAAWA,CAClB,CAOA,WAAY,CACV,OAAO,KAAK,QACd,CA0FA,UAAU/L,EAAQqM,EAAa,GAAO,CACpC,YAAK,kBAAoB,OACzB,KAAK,aAAe,OACpB,MAAM,UAAUrM,CAAM,EACjBqM,GACH,KAAK,oBAAmB,EAEnB,KAAK,KACd,CAuBA,OAAOxE,EAAmByE,EAAqB,CAC7C,MAAMC,EAAW,EAAE,KAAK,sBAClBzL,EAAU,OAAO,OACrB,CACE,OAAQ,GACR,KAAM,EACd,EACMtB,EAASqI,CAAiB,EACtB,CAAC,SAAUA,CAAiB,EAC5BA,EACJ,CACE,WAAY0E,CACpB,CACA,EAGI,YAAK,MAAQ,KAAK,QAAQzL,CAAO,EAM9B,KAAKA,GAAW,KAAK,oBAAoBA,CAAO,CAAC,EAEjD,KAAKA,GAAW,CACf,GAAI,KAAK,iBAAiBA,CAAO,EAAG,CAClC,MAAM0L,EAAkB,KAAK,kBAG7B,GAAI1L,IAAY0L,EAGd,YAAK,uBAAuBA,EAAiB,EAAI,EAC1C,KAAK,SAcd,GAXA,KAAK,SAAWlC,EAAexJ,CAAO,EAElCwL,GAGF,KAAK,uBAAuBxL,EAASyL,IAAa,CAAC,EAGrDhM,GAAgB,mBAAoB,CAAC,OAAQ,KAAM,SAAU,KAAK,QAAQ,CAAC,EAGvEO,EAAQ,aACV,YAAK,wBAAwBA,EAAS0L,CAAe,EACrD,KAAK,kBAAoB1L,EAClB,KAAK,SAGd,KAAK,sBAAsBA,EAAS0L,CAAe,EACnD,MAAMC,EAAgB,KAAK,kBAAkB3L,CAAO,EAEpD,YAAK,2BAA2BA,CAAO,EACvC,KAAK,2BAA2BA,EAAS0L,CAAe,EAEjDC,EAAc,KAAK,IAAM,CAC9B,GAAI,KAAK,iBAAiB3L,CAAO,EAI/B,YAAK,4BAA2B,EAEhC,KAAK,kBAAoBA,EAClB,KAAK,QAEhB,CAAC,CACH,CACF,CAAC,EACA,MAAMC,GAAS,CACd,GAAIwL,IAAa,KAAK,sBACpB,MAAID,GACF,KAAK,uBAAuBxL,CAAO,EAErC6K,GAAe,KAAK,UAAY,KAAK,SAAS,QAAQ,EACtD,KAAK,SAAWrB,EAAe,OAAO,OAAOxJ,EAAS,CAAC,SAAU,IAAI,CAAC,CAAC,EACvEP,GAAgB,QAAS,OAAO,OAAO,CAAC,OAAQ,KAAM,MAAAQ,CAAK,EAAGD,CAAO,CAAC,EAChEC,CAEV,CAAC,EACI,KAAK,KACd,CAaA,oBAAoB2L,EAClBC,EAAyBD,EAAqC,CAC9D,OAAO,KAAK,wCAAwCC,CAAsB,EAGvE,KAAKC,GAAyB,CAE7B,MAAMC,EADoBD,IAA0BD,EAE9BC,EAAwBF,EAMxCI,EAJcnC,GAClBE,GAAe+B,EAAsB,KAAK,EAC1CA,EAAsB,QAChC,IACyCA,EAAsB,SAGjDG,EAAuB,CAACjM,EAASkH,EAASlH,EAAQ,MAAOmH,IACtDnH,EAAQ,KAAK,OAAWkH,EAAQC,CAAU,EAAE,KAAK+E,GAClDA,IAAgB,MAAQA,IAAgBhM,EAEtC8L,EAEKhM,EACEkH,EAAO,SAAW,KAEpB+E,EAAqBjM,EAASkH,EAAO,OAAQgF,CAAW,EAExDA,EAIJA,CACR,EAGH,OAAOD,EAAqBH,CAAqB,EAAE,KAAKI,GAAe,CACrE,GAAIA,IAAgB,MAAQA,IAAgBhM,EAC1C,MAAMH,GAAiBgM,CAAkC,EAG3D,OAAOG,GACJA,IAAgBhM,GAChBgM,IAAgBJ,EACf,KAAK,oBAAoBC,EAAoCG,CAAW,EACxE,KAAK,6BAA6BJ,CAAqB,CAC7D,CAAC,CACH,CAAC,CACL,CAEA,wCAAwC9L,EAAS,CAC/C,MAAMqJ,EAASrJ,EAAQ,OACvB,OAAIqJ,aAAkB,aACpBY,GAAcjK,EAASqJ,CAAM,EACtB,QAAQ,QAAQrJ,CAAO,GACrBqJ,EAAO,SACT,KAAK,WAAWA,EAAO,SAAUrJ,EAAQ,gBAAiBA,EAAQ,UAAU,EAChF,KAAKA,GAAW,KAAK,wCAAwCA,CAAO,CAAC,EAC/DqJ,aAAkB,MACpB,QAAQ,OAAOA,CAAM,EAErB,QAAQ,OACb,IAAI,MACFvL,EACE,6CAA6CkC,EAAQ,QAAQ,0DACNhC,GAASqL,CAAM,CAAC,wDAEnF,CACA,CAAS,CAEP,CAEA,6BAA6B8C,EAAsB,CACjD,OAAO,KAAK,uBAAuBA,CAAoB,EAAE,KAAKC,GACxDA,IAAmB,KAAK,mBAAqBA,IAAmBD,EAC3DC,EAEF,KAAK,oBAAoBA,CAAc,CAC/C,CACH,CAEA,uBAAuBC,EAAY,CACjC,MAAMX,EAAkB,KAAK,mBAAqB,GAC5CY,EAAgBZ,EAAgB,OAAS,GACzCa,EAAWF,EAAW,MAE5B,IAAIjB,EAAY,QAAQ,QAAO,EAC/B,MAAMoB,EAAU,KAAO,CAAC,OAAQ,EAAI,GAC9BC,EAAY5L,GAAamJ,GAAeqC,EAAYxL,CAAQ,EAIlE,GAFAwL,EAAW,qBAAuB,EAClCA,EAAW,aAAe,GACtBC,EAAc,OAAQ,CACxB,QAAS3L,EAAI,EAAGA,EAAI,KAAK,IAAI2L,EAAc,OAAQC,EAAS,MAAM,GAC5D,EAAAD,EAAc3L,CAAC,EAAE,QAAU4L,EAAS5L,CAAC,EAAE,OACtC2L,EAAc3L,CAAC,EAAE,OAAS4L,EAAS5L,CAAC,EAAE,MAAQ2L,EAAc3L,CAAC,EAAE,UAAY4L,EAAS5L,CAAC,EAAE,SACvF,CAAC,KAAK,oBAAoB2L,EAAc3L,CAAC,EAAE,QAAS4L,EAAS5L,CAAC,EAAE,OAAO,GAHTA,EAAI,EAAE0L,EAAW,qBACpF,CAcF,GANAA,EAAW,aAETE,EAAS,SAAWD,EAAc,QAAUD,EAAW,sBAAwBE,EAAS,QAExF,KAAK,oBAAoBF,EAAW,OAAQX,EAAgB,MAAM,EAEhEW,EAAW,aAAc,CAE3B,QAAS1L,EAAI4L,EAAS,OAAS,EAAG5L,GAAK,EAAGA,IACxCyK,EAAY,KAAK,4BAA4BA,EAAWiB,EAAY,CAAC,QAAAG,CAAO,EAAGF,EAAc3L,CAAC,CAAC,EAGjG,QAASA,EAAI,EAAGA,EAAI4L,EAAS,OAAQ5L,IACnCyK,EAAY,KAAK,4BAA4BA,EAAWiB,EAAY,CAAC,QAAAG,EAAS,SAAAC,CAAQ,EAAGF,EAAS5L,CAAC,CAAC,EACpG2L,EAAc3L,CAAC,EAAE,QAAQ,SAAW6I,EAAe6C,EAAYC,EAAc3L,CAAC,EAAE,KAAK,CAGzF,KAEE,SAASA,EAAI2L,EAAc,OAAS,EAAG3L,GAAK0L,EAAW,qBAAsB1L,IAC3EyK,EAAY,KAAK,4BAA4BA,EAAWiB,EAAY,CAAC,QAAAG,CAAO,EAAGF,EAAc3L,CAAC,CAAC,CAGrG,CAEA,GAAI,CAAC0L,EAAW,aACd,QAAS1L,EAAI,EAAGA,EAAI4L,EAAS,OAAQ5L,IAC/BA,EAAI0L,EAAW,qBACb1L,EAAI2L,EAAc,QAAUA,EAAc3L,CAAC,EAAE,UAC/C2L,EAAc3L,CAAC,EAAE,QAAQ,SAAW6I,EAAe6C,EAAYC,EAAc3L,CAAC,EAAE,KAAK,IAGvFyK,EAAY,KAAK,4BAA4BA,EAAWiB,EAAY,CAAC,QAAAG,EAAS,SAAAC,CAAQ,EAAGF,EAAS5L,CAAC,CAAC,EAChG4L,EAAS5L,CAAC,EAAE,UACd4L,EAAS5L,CAAC,EAAE,QAAQ,SAAW6I,EAAe6C,EAAYE,EAAS5L,CAAC,EAAE,KAAK,IAKnF,OAAOyK,EAAU,KAAKX,GAAmB,CACvC,GAAIA,EAAiB,CACnB,GAAIA,EAAgB,OAClB,YAAK,kBAAkB,WAAa4B,EAAW,WACxC,KAAK,kBAEd,GAAI5B,EAAgB,SAClB,OAAO,KAAK,WAAWA,EAAgB,SAAU4B,EAAW,gBAAiBA,EAAW,UAAU,CAEtG,CACA,OAAOA,CACT,CAAC,CACH,CAEA,4BAA4BjB,EAAWiB,EAAYhB,EAAUqB,EAAc,CACzE,MAAMC,EAAWnD,EAAe6C,CAAU,EAC1C,OAAOjB,EAAU,KAAK/B,GAAU,CAC9B,GAAI,KAAK,iBAAiBgD,CAAU,EAElC,OAD2B9B,GAAM,gBAAiB,CAACoC,EAAUtB,EAAU,IAAI,EAAGqB,EAAa,OAAO,EACxErD,CAAM,CAEpC,CAAC,EAAE,KAAKA,GAAU,CAChB,GAAI,EAAEA,GAAU,IAAI,SAClB,OAAOA,CAEX,CAAC,CACH,CAEA,4BAA4B+B,EAAWiB,EAAYhB,EAAUqB,EAAc,CACzE,MAAMC,EAAWnD,EAAe6C,EAAYK,EAAa,KAAK,EAC9D,OAAOtB,EAAU,KAAK/B,GAAU,CAC9B,GAAI,KAAK,iBAAiBgD,CAAU,EAElC,OAD4B9B,GAAM,gBAAiB,CAACoC,EAAUtB,EAAU,IAAI,EAAGqB,EAAa,OAAO,EACxErD,CAAM,CAErC,CAAC,CACH,CAEA,oBAAoBa,EAAS0C,EAAc,CACzC,OAAI1C,GAAW0C,EACN,KAAK,kBAAkB,IAAI1C,CAAO,GAAK,KAAK,kBAAkB,IAAI0C,CAAY,EACjF1C,EAAQ,YAAc0C,EAAa,UACnC1C,IAAY0C,EAEX,EACT,CAEA,iBAAiB5M,EAAS,CACxB,OAAOA,EAAQ,aAAe,KAAK,qBACrC,CAEA,WAAW6M,EAAcC,EAASrB,EAAU,CAC1C,GAAIqB,EAAU3D,GACZ,MAAM,IAAI,MAAMrL,EAAI,qCAAqC+O,EAAa,IAAI,EAAE,CAAC,EAG/E,OAAO,KAAK,QAAQ,CAClB,SAAU,KAAK,WACbA,EAAa,SACbA,EAAa,MACrB,EACM,aAAcA,EAAa,KAC3B,iBAAkBC,GAAW,GAAK,EAClC,WAAYrB,CAClB,CAAK,CACH,CAEA,eAAeR,EAAS,KAAK,SAAU,CACrC,GAAI,EAAEA,aAAkB,MACtB,MAAM,IAAI,UAAUnN,EAAI,0DAA0DmN,CAAM,GAAG,CAAC,CAEhG,CAEA,uBAAuB,CAAC,SAAApK,EAAU,OAAAC,EAAS,GAAI,KAAAC,EAAO,EAAE,EAAGgM,EAAS,CAClE,GAAI,OAAO,SAAS,WAAalM,GAC1B,OAAO,SAAS,SAAWC,GAC3B,OAAO,SAAS,OAASC,EAC9B,CACA,MAAMiM,EAAcD,EAAU,eAAiB,YAC/C,OAAO,QAAQC,CAAW,EAAE,KAAM,SAAS,MAAOnM,EAAWC,EAASC,CAAI,EAC1E,OAAO,cAAc,IAAI,cAAc,WAAY,CAAC,MAAO,sBAAsB,CAAC,CAAC,CACrF,CACF,CAEA,wBAAwBf,EAAS0L,EAAiB,CAGhD,IAAIuB,EAAsB,KAAK,SAC/B,QAAS,EAAI,EAAG,EAAIjN,EAAQ,qBAAsB,IAAK,CACrD,MAAMkN,EAAmBxB,GAAmBA,EAAgB,MAAM,CAAC,EAAE,QACrE,GAAIwB,EACF,GAAIA,EAAiB,aAAeD,EAClCjN,EAAQ,MAAM,CAAC,EAAE,QAAUkN,EAC3BD,EAAsBC,MAEtB,MAGN,CACA,OAAOD,CACT,CAEA,sBAAsBjN,EAAS0L,EAAiB,CAC9C,KAAK,eAAc,EAInB,KAAK,yBAAwB,EAG7B,MAAMuB,EAAsB,KAAK,wBAAwBjN,EAAS0L,CAAe,EAKjF,KAAK,mBAAqB,GAC1B,KAAK,sBAAwB,MAC1B,KAAKuB,EAAoB,QAAQ,EACjC,OAEC1N,GAAK,KAAK,gBAAgB,IAAIA,CAAC,GAE/BA,IAAMS,EAAQ,MAAM,EAMxB,IAAImN,EAAgBF,EACpB,QAAStM,EAAIX,EAAQ,qBAAsBW,EAAIX,EAAQ,MAAM,OAAQW,IAAK,CACxE,MAAMyM,EAAepN,EAAQ,MAAMW,CAAC,EAAE,QAClCyM,IACFD,EAAc,YAAYC,CAAY,EACtC,KAAK,gBAAgB,IAAIA,EAAc,EAAI,EACvCD,IAAkBF,GACpB,KAAK,mBAAmB,KAAKG,CAAY,EAE3CD,EAAgBC,EAEpB,CACF,CAEA,6BAA8B,CACxB,KAAK,uBACPvC,GAAe,KAAK,qBAAqB,EAE3C,KAAK,sBAAwB,KAC7B,KAAK,mBAAqB,IAC5B,CAEA,0BAA2B,CACrB,KAAK,uBAAyB,KAAK,qBACrCA,GAAe,KAAK,kBAAkB,EACtC,KAAK,sBAAwB,KAC7B,KAAK,mBAAqB,KAE9B,CAEA,2BAA2BrE,EAAgB6G,EAAe,CACxD,GAAKA,EAKL,QAAS1M,EAAI0M,EAAc,MAAM,OAAS,EAAG1M,GAAK6F,EAAe,sBAC1D,KAAK,iBAAiBA,CAAc,EAD4C7F,IAAK,CAI1F,MAAM2M,EAAmBD,EAAc,MAAM1M,CAAC,EAAE,QAChD,GAAK2M,EAGL,GAAI,CACF,MAAMX,EAAWnD,EAAehD,CAAc,EAC9C2D,GACEmD,EAAiB,aACjB,CAACX,EAAU,GAAIU,EAAc,QAAQ,EACrCC,CAAgB,CACpB,QAAC,CACK,KAAK,sBAAsB,QAAQA,CAAgB,EAAI,IACzDzC,GAAeyC,EAAiB,QAAQ,CAE5C,CACF,CACF,CAEA,2BAA2B9G,EAAgB,CAEzC,QAAS7F,EAAI6F,EAAe,qBAAsB7F,EAAI6F,EAAe,MAAM,QACpE,KAAK,iBAAiBA,CAAc,EADwC7F,IAAK,CAItF,MAAM2M,EAAmB9G,EAAe,MAAM7F,CAAC,EAAE,SAAW,GACtDgM,EAAWnD,EAAehD,EAAgBA,EAAe,MAAM7F,CAAC,EAAE,KAAK,EAC7EwJ,GACEmD,EAAiB,aACjB,CAACX,EAAU,GAAInG,EAAe,QAAQ,EACtC8G,CAAgB,CACpB,CACF,CAEA,kBAAkBtN,EAAS,CACzB,MAAMuN,GAAQ,KAAK,uBAAyB,IAAI,CAAC,EAC3CC,GAAM,KAAK,oBAAsB,IAAI,CAAC,EACtCC,EAAW,GAEXhE,EAAQzJ,EAAQ,MACtB,IAAI0N,EACJ,QAAS/M,EAAI8I,EAAM,OAAQ9I,EAAI,EAAGA,IAChC,GAAI8I,EAAM9I,EAAI,CAAC,EAAE,MAAM,QAAS,CAC9B+M,EAASjE,EAAM9I,EAAI,CAAC,EAAE,MAAM,QAC5B,KACF,CAGF,GAAI4M,GAAQC,GAAME,EAAQ,CACxB,MAAMC,EAAQ7O,GAAS4O,CAAM,GAAKA,EAAO,OAAS,UAC5CE,EAAQ9O,GAAS4O,CAAM,GAAKA,EAAO,OAAS,WAClDD,EAAS,KAAK1E,GAAQwE,EAAMI,CAAK,CAAC,EAClCF,EAAS,KAAK1E,GAAQyE,EAAII,CAAK,CAAC,CAClC,CAEA,OAAO,QAAQ,IAAIH,CAAQ,EAAE,KAAK,IAAMzN,CAAO,CACjD,CAQA,WAAY,CACV,OAAO,iBAAiB,mBAAoB,KAAK,wBAAwB,CAC3E,CAMA,aAAc,CACZ,OAAO,oBAAoB,mBAAoB,KAAK,wBAAwB,CAC9E,CAEA,oBAAoBS,EAAO,CACzB,KAAM,CAAC,SAAAI,EAAU,OAAAC,EAAQ,KAAAC,CAAI,EAAIN,EAAQA,EAAM,OAAS,OAAO,SAC3D/B,EAAS,KAAK,oBAAoBmC,CAAQ,CAAC,IACzCJ,GAASA,EAAM,gBACjBA,EAAM,eAAc,EAEtB,KAAK,OAAO,CAAC,SAAAI,EAAU,OAAAC,EAAQ,KAAAC,CAAI,EAAG,EAAI,EAE9C,CAkBA,OAAO,eAAeuH,EAAU,CAC9BC,GAAsBD,CAAQ,CAChC,CAqBA,WAAWtF,EAAM7B,EAAQ,CACvB,OAAK,KAAK,eACR,KAAK,aAAe4G,GAAa,IAAI,GAEhC8B,GACL,KAAK,aAAa7G,EAAM7B,CAAM,EAC9B,IACN,CACE,CAaA,WAAWT,EAAMS,EAAQ,CACvB,OAAO0I,GACLC,EAAO,aAAa,QAAQpJ,CAAI,EAAES,CAAM,EACxC,IACN,CACE,CAaA,OAAO,GAAGT,EAAM,CACd,KAAM,CAAC,SAAAG,EAAU,OAAAC,EAAQ,KAAAC,CAAI,EAAIrC,EAASgC,CAAI,EAC1C,KAAK,YAAYA,EAAM,UAAU,EACjCA,EACJ,OAAOjB,GAAgB,KAAM,CAAC,SAAAoB,EAAU,OAAAC,EAAQ,KAAAC,CAAI,CAAC,CACvD,CACF,CAEA,MAAM8M,GACJ,0EAEIC,GAAc,OAAO,QAAU,OAAO,OAAO,MAAQ,OAAO,OAAO,KAAK,QAE9E,SAASC,IAAa,CACpB,SAASC,GAAO,CAId,MAAO,EACT,CACA,OAAOC,GAAgBD,CAAI,CAC7B,CAEA,SAASE,IAAoB,CAC3B,GAAI,CACF,OAAIC,GAAuB,EAClB,GAGJC,GAAW,EAIZN,GACK,CAACO,GAAoB,EAGvB,CAACN,GAAU,EAPT,EAQX,MAAY,CAEV,MAAO,EACT,CACF,CAEA,SAASI,IAA0B,CACjC,OAAO,aAAa,QAAQ,8BAA8B,CAC5D,CAEA,SAASC,IAAc,CACrB,MAAQ,CAAC,YAAY,WAAW,EAAE,QAAQ,OAAO,SAAS,QAAQ,GAAK,CACzE,CAEA,SAASC,IAAuB,CAC9B,MAAIP,OACyB,OAAO,KAAKA,EAAW,EAC/C,IAAI/O,GAAO+O,GAAY/O,CAAG,CAAC,EAC3B,OAAOuP,GAAUA,EAAO,cAAc,EAClB,OAAS,EAKpC,CAEA,SAASL,GAAgB7D,EAAUC,EAAM,CACvC,GAAI,OAAOD,GAAa,WACtB,OAGF,MAAMxE,EAAQiI,GAAqB,KAAKzD,EAAS,SAAQ,CAAE,EAC3D,GAAIxE,EACF,GAAI,CAEFwE,EAAW,IAAI,SAASxE,EAAM,CAAC,CAAC,CAClC,OAASrG,EAAG,CAEV,QAAQ,IAAI,6DAA8DA,CAAC,CAC7E,CAGF,OAAO6K,EAASC,CAAI,CACtB,CAIA,OAAO,OAAY,OAAO,QAAa,GAcvC,MAAMkE,GAAuB,SAASnE,EAAUC,EAAM,CACpD,GAAI,OAAO,OAAO,gBAChB,OAAO4D,GAAgB7D,EAAUC,CAAI,CAEzC,EAEI,OAAO,OAAO,kBAAoB,SACpC,OAAO,OAAO,gBAAkB6D,GAAiB,GAKnD,SAASM,IAA0B,CAgenC,CAEA,MAAMC,GAAkB,UAAW,CACjC,GAAI,OAAOF,IAAyB,WAClC,OAAOA,GAAqBC,EAAuB,CAEvD,EAEA,OAAO,OAAS,OAAO,QAAU,GACjC,OAAO,OAAO,cAAgB,OAAO,OAAO,eAAiB,GAE7D,OAAO,OAAO,cAAc,KAAK,CAC/B,GAAI,iBACJ,QAAS,OACX,CAAC,EAEDC,GAAe,EAEf3E,EAAO,kBAAoB,CAAC,SAAAzI,GAAU,MAAAL,EAAK,2HCz2F3C;AAAA;AAAA;AAAA;AAAA,GAKA,MAAM0N,GAAE,WAAWnP,GAAEmP,GAAE,aAAsBA,GAAE,WAAX,QAAqBA,GAAE,SAAS,eAAe,uBAAuB,SAAS,WAAW,YAAY,cAAc,UAAU5O,GAAE,OAAM,EAAGF,GAAE,IAAI,QAAO,IAAA+O,GAAC,KAAO,CAAC,YAAYD,EAAEnP,EAAEK,EAAE,CAAC,GAAG,KAAK,aAAa,GAAGA,IAAIE,GAAE,MAAM,MAAM,mEAAmE,EAAE,KAAK,QAAQ4O,EAAE,KAAK,EAAEnP,CAAC,CAAC,IAAI,YAAY,CAAC,IAAImP,EAAE,KAAK,EAAE,MAAM5O,EAAE,KAAK,EAAE,GAAGP,IAAYmP,IAAT,OAAW,CAAC,MAAMnP,EAAWO,IAAT,QAAgBA,EAAE,SAAN,EAAaP,IAAImP,EAAE9O,GAAE,IAAIE,CAAC,GAAY4O,IAAT,UAAc,KAAK,EAAEA,EAAE,IAAI,eAAe,YAAY,KAAK,OAAO,EAAEnP,GAAGK,GAAE,IAAIE,EAAE4O,CAAC,EAAE,CAAC,OAAOA,CAAC,CAAC,UAAU,CAAC,OAAO,KAAK,OAAO,CAAC,EAAC,MAAME,GAAEF,GAAG,IAAIG,GAAY,OAAOH,GAAjB,SAAmBA,EAAEA,EAAE,GAAG,OAAO5O,EAAC,EAAEa,EAAE,CAAC+N,KAAK,IAAI,CAAC,MAAM9O,EAAM8O,EAAE,SAAN,EAAaA,EAAE,CAAC,EAAE,EAAE,OAAQ,CAACnP,EAAEO,EAAE,IAAIP,GAAGmP,GAAG,CAAC,GAAQA,EAAE,eAAP,GAAoB,OAAOA,EAAE,QAAQ,GAAa,OAAOA,GAAjB,SAAmB,OAAOA,EAAE,MAAM,MAAM,mEAAmEA,EAAE,sFAAsF,CAAC,GAAG5O,CAAC,EAAE4O,EAAE,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EAAE,OAAO,IAAIG,GAAEjP,EAAE8O,EAAE5O,EAAC,CAAC,EAAEgP,GAAE,CAAChP,EAAEF,IAAI,CAAC,GAAGL,GAAEO,EAAE,mBAAmBF,EAAE,IAAK,GAAG,aAAa,cAAc,EAAE,EAAE,gBAAkB,WAAUL,KAAKK,EAAE,CAAC,MAAMA,EAAE,SAAS,cAAc,OAAO,EAAEiP,EAAEH,GAAE,SAAkBG,IAAT,QAAYjP,EAAE,aAAa,QAAQiP,CAAC,EAAEjP,EAAE,YAAYL,EAAE,QAAQO,EAAE,YAAYF,CAAC,CAAC,CAAC,EAAEmP,GAAExP,GAAEmP,GAAGA,EAAEA,GAAGA,aAAa,eAAeA,GAAG,CAAC,IAAInP,EAAE,GAAG,UAAUO,KAAK4O,EAAE,SAASnP,GAAGO,EAAE,QAAQ,OAAO8O,GAAErP,CAAC,CAAC,GAAGmP,CAAC,EAAEA,ECJ3zC;AAAA;AAAA;AAAA;AAAA,GAIG,KAAK,CAAC,GAAG/N,GAAE,eAAepB,GAAE,yBAAyByP,GAAE,oBAAoBJ,GAAE,sBAAsBhP,GAAE,eAAeiP,EAAC,EAAE,OAAO9D,EAAE,WAAWgE,GAAEhE,EAAE,aAAakE,GAAEF,GAAEA,GAAE,YAAY,GAAGG,GAAEnE,EAAE,+BAA+BoE,GAAE,CAACT,EAAE5O,IAAI4O,EAAEU,GAAE,CAAC,YAAYV,EAAE5O,EAAE,CAAC,OAAOA,EAAC,CAAE,KAAK,QAAQ4O,EAAEA,EAAEO,GAAE,KAAK,MAAM,KAAK,OAAO,KAAK,MAAMP,EAAQA,GAAN,KAAQA,EAAE,KAAK,UAAUA,CAAC,CAAC,CAAC,OAAOA,CAAC,EAAE,cAAcA,EAAE5O,EAAE,CAAC,IAAIa,EAAE+N,EAAE,OAAO5O,GAAG,KAAK,QAAQa,EAAS+N,IAAP,KAAS,MAAM,KAAK,OAAO/N,EAAS+N,IAAP,KAAS,KAAK,OAAOA,CAAC,EAAE,MAAM,KAAK,OAAO,KAAK,MAAM,GAAG,CAAC/N,EAAE,KAAK,MAAM+N,CAAC,CAAC,MAAS,CAAC/N,EAAE,IAAI,CAAC,CAAC,OAAOA,CAAC,CAAC,EAAEd,GAAE,CAAC6O,EAAE5O,IAAI,CAACa,GAAE+N,EAAE5O,CAAC,EAAEkL,GAAE,CAAC,UAAU,GAAG,KAAK,OAAO,UAAUoE,GAAE,QAAQ,GAAG,WAAW,GAAG,WAAWvP,EAAC,EAAE,OAAO,WAAP,OAAO,SAAW,OAAO,UAAU,GAAEkL,EAAE,sBAAFA,EAAE,oBAAsB,IAAI,eAAQ,cAAgB,WAAW,CAAC,OAAO,eAAe2D,EAAE,CAAC,KAAK,KAAI,GAAI,KAAK,IAAL,KAAK,EAAI,KAAI,KAAKA,CAAC,CAAC,CAAC,WAAW,oBAAoB,CAAC,OAAO,KAAK,SAAQ,EAAG,KAAK,MAAM,CAAC,GAAG,KAAK,KAAK,MAAM,CAAC,CAAC,OAAO,eAAeA,EAAE5O,EAAEkL,GAAE,CAAC,GAAGlL,EAAE,QAAQA,EAAE,UAAU,IAAI,KAAK,KAAI,EAAG,KAAK,UAAU,eAAe4O,CAAC,KAAK5O,EAAE,OAAO,OAAOA,CAAC,GAAG,QAAQ,IAAI,KAAK,kBAAkB,IAAI4O,EAAE5O,CAAC,EAAE,CAACA,EAAE,WAAW,CAAC,MAAMa,EAAE,OAAM,EAAGqO,EAAE,KAAK,sBAAsBN,EAAE/N,EAAEb,CAAC,EAAWkP,IAAT,QAAYzP,GAAE,KAAK,UAAUmP,EAAEM,CAAC,CAAC,CAAC,CAAC,OAAO,sBAAsBN,EAAE5O,EAAEa,EAAE,CAAC,KAAK,CAAC,IAAIpB,EAAE,IAAIqP,CAAC,EAAEI,GAAE,KAAK,UAAUN,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,KAAK5O,CAAC,CAAC,EAAE,IAAI4O,EAAE,CAAC,KAAK5O,CAAC,EAAE4O,CAAC,CAAC,EAAE,MAAM,CAAC,IAAInP,EAAE,IAAI,EAAE,CAAC,MAAMyP,EAAEzP,GAAA,YAAAA,EAAG,KAAK,MAAMqP,GAAA,MAAAA,EAAG,KAAK,KAAK,GAAG,KAAK,cAAcF,EAAEM,EAAErO,CAAC,CAAC,EAAE,aAAa,GAAG,WAAW,EAAE,CAAC,CAAC,OAAO,mBAAmB+N,EAAE,CAAC,OAAO,KAAK,kBAAkB,IAAIA,CAAC,GAAG1D,EAAC,CAAC,OAAO,MAAM,CAAC,GAAG,KAAK,eAAemE,GAAE,mBAAmB,CAAC,EAAE,OAAO,MAAMT,EAAEG,GAAE,IAAI,EAAEH,EAAE,SAAQ,EAAYA,EAAE,IAAX,SAAe,KAAK,EAAE,CAAC,GAAGA,EAAE,CAAC,GAAG,KAAK,kBAAkB,IAAI,IAAIA,EAAE,iBAAiB,CAAC,CAAC,OAAO,UAAU,CAAC,GAAG,KAAK,eAAeS,GAAE,WAAW,CAAC,EAAE,OAAO,GAAG,KAAK,UAAU,GAAG,KAAK,KAAI,EAAG,KAAK,eAAeA,GAAE,YAAY,CAAC,EAAE,CAAC,MAAM,EAAE,KAAK,WAAWrP,EAAE,CAAC,GAAG8O,GAAE,CAAC,EAAE,GAAGhP,GAAE,CAAC,CAAC,EAAE,UAAU,KAAKE,EAAE,KAAK,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM4O,EAAE,KAAK,OAAO,QAAQ,EAAE,GAAUA,IAAP,KAAS,CAAC,MAAM5O,EAAE,oBAAoB,IAAI4O,CAAC,EAAE,GAAY5O,IAAT,OAAW,SAAS,CAAC4O,EAAE,CAAC,IAAI5O,EAAE,KAAK,kBAAkB,IAAI4O,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,IAAI,SAAS,CAAC,EAAE5O,CAAC,IAAI,KAAK,kBAAkB,CAAC,MAAM,EAAE,KAAK,KAAK,EAAEA,CAAC,EAAW,IAAT,QAAY,KAAK,KAAK,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,cAAc,KAAK,eAAe,KAAK,MAAM,CAAC,CAAC,OAAO,eAAeA,EAAE,CAAC,MAAMa,EAAE,GAAG,GAAG,MAAM,QAAQb,CAAC,EAAE,CAAC,MAAMP,EAAE,IAAI,IAAIO,EAAE,KAAK,GAAG,EAAE,QAAO,CAAE,EAAE,UAAUA,KAAKP,EAAEoB,EAAE,QAAQ+N,GAAE5O,CAAC,CAAC,CAAC,MAAeA,IAAT,QAAYa,EAAE,KAAK+N,GAAE5O,CAAC,CAAC,EAAE,OAAOa,CAAC,CAAC,OAAO,KAAK+N,EAAE5O,EAAE,CAAC,MAAMa,EAAEb,EAAE,UAAU,OAAWa,IAAL,GAAO,OAAiB,OAAOA,GAAjB,SAAmBA,EAAY,OAAO+N,GAAjB,SAAmBA,EAAE,YAAW,EAAG,MAAM,CAAC,aAAa,CAAC,MAAK,EAAG,KAAK,KAAK,OAAO,KAAK,gBAAgB,GAAG,KAAK,WAAW,GAAG,KAAK,KAAK,KAAK,KAAK,KAAI,CAAE,CAAC,MAAM,OAAC,KAAK,KAAK,IAAI,QAAS,GAAG,KAAK,eAAe,CAAC,EAAG,KAAK,KAAK,IAAI,IAAI,KAAK,KAAI,EAAG,KAAK,cAAa,GAAGW,EAAA,KAAK,YAAY,IAAjB,MAAAA,EAAoB,QAAS,GAAG,EAAE,IAAI,EAAG,CAAC,cAAcX,EAAE,QAAE,KAAK,OAAL,KAAK,KAAO,IAAI,MAAK,IAAIA,CAAC,EAAW,KAAK,aAAd,QAA0B,KAAK,eAAaW,EAAAX,EAAE,gBAAF,MAAAW,EAAA,KAAAX,GAAmB,CAAC,iBAAiBA,EAAE,QAACW,EAAA,KAAK,OAAL,MAAAA,EAAW,OAAOX,EAAE,CAAC,MAAM,CAAC,MAAMA,EAAE,IAAI,IAAI5O,EAAE,KAAK,YAAY,kBAAkB,UAAUa,KAAKb,EAAE,KAAI,EAAG,KAAK,eAAea,CAAC,IAAI+N,EAAE,IAAI/N,EAAE,KAAKA,CAAC,CAAC,EAAE,OAAO,KAAKA,CAAC,GAAG+N,EAAE,KAAK,IAAI,KAAK,KAAKA,EAAE,CAAC,kBAAkB,CAAC,MAAMA,EAAE,KAAK,YAAY,KAAK,aAAa,KAAK,YAAY,iBAAiB,EAAE,OAAO5O,GAAE4O,EAAE,KAAK,YAAY,aAAa,EAAEA,CAAC,CAAC,mBAAmB,OAAC,KAAK,aAAL,KAAK,WAAa,KAAK,iBAAgB,GAAG,KAAK,eAAe,EAAE,GAAEW,EAAA,KAAK,OAAL,MAAAA,EAAW,QAAS,GAAC,OAAE,OAAAA,EAAA,EAAE,gBAAF,YAAAA,EAAA,SAAqB,CAAC,eAAeX,EAAE,CAAC,CAAC,sBAAsB,QAACW,EAAA,KAAK,OAAL,MAAAA,EAAW,QAAS,GAAC,OAAE,OAAAA,EAAA,EAAE,mBAAF,YAAAA,EAAA,SAAwB,CAAC,yBAAyBX,EAAE5O,EAAEa,EAAE,CAAC,KAAK,KAAK+N,EAAE/N,CAAC,CAAC,CAAC,KAAK+N,EAAE5O,EAAE,OAAC,MAAMa,EAAE,KAAK,YAAY,kBAAkB,IAAI+N,CAAC,EAAEnP,EAAE,KAAK,YAAY,KAAKmP,EAAE/N,CAAC,EAAE,GAAYpB,IAAT,QAAiBoB,EAAE,UAAP,GAAe,CAAC,MAAMqO,KAAYK,EAAA1O,EAAE,YAAF,YAAA0O,EAAa,eAAtB,OAAkC1O,EAAE,UAAUyO,IAAG,YAAYtP,EAAEa,EAAE,IAAI,EAAE,KAAK,KAAK+N,EAAQM,GAAN,KAAQ,KAAK,gBAAgBzP,CAAC,EAAE,KAAK,aAAaA,EAAEyP,CAAC,EAAE,KAAK,KAAK,IAAI,CAAC,CAAC,KAAKN,EAAE5O,EAAE,SAAC,MAAMa,EAAE,KAAK,YAAYpB,EAAEoB,EAAE,KAAK,IAAI+N,CAAC,EAAE,GAAYnP,IAAT,QAAY,KAAK,OAAOA,EAAE,CAAC,MAAMmP,EAAE/N,EAAE,mBAAmBpB,CAAC,EAAEyP,EAAc,OAAON,EAAE,WAArB,WAA+B,CAAC,cAAcA,EAAE,SAAS,IAAWW,EAAAX,EAAE,YAAF,YAAAW,EAAa,iBAAtB,OAAoCX,EAAE,UAAUU,GAAE,KAAK,KAAK7P,EAAE,MAAMqP,EAAEI,EAAE,cAAclP,EAAE4O,EAAE,IAAI,EAAE,KAAKnP,CAAC,EAAEqP,KAAGU,EAAA,KAAK,OAAL,YAAAA,EAAW,IAAI/P,KAAIqP,EAAE,KAAK,KAAK,IAAI,CAAC,CAAC,cAAcF,EAAE5O,EAAEa,EAAE,OAAC,GAAY+N,IAAT,OAAW,CAAC,MAAMnP,EAAE,KAAK,YAAYyP,EAAE,KAAKN,CAAC,EAAE,GAAG/N,MAAIpB,EAAE,mBAAmBmP,CAAC,GAAE,GAAG/N,EAAE,YAAYd,IAAGmP,EAAElP,CAAC,GAAGa,EAAE,YAAYA,EAAE,SAASqO,MAAIK,EAAA,KAAK,OAAL,YAAAA,EAAW,IAAIX,KAAI,CAAC,KAAK,aAAanP,EAAE,KAAKmP,EAAE/N,CAAC,CAAC,GAAG,OAAO,KAAK,EAAE+N,EAAE5O,EAAEa,CAAC,CAAC,CAAM,KAAK,kBAAV,KAA4B,KAAK,KAAK,KAAK,KAAI,EAAG,CAAC,EAAE+N,EAAE5O,EAAE,CAAC,WAAWa,EAAE,QAAQpB,EAAE,QAAQyP,CAAC,EAAEJ,EAAE,CAACjO,GAAG,EAAE,KAAK,OAAL,KAAK,KAAO,IAAI,MAAK,IAAI+N,CAAC,IAAI,KAAK,KAAK,IAAIA,EAAEE,GAAG9O,GAAG,KAAK4O,CAAC,CAAC,EAAOM,IAAL,IAAiBJ,IAAT,UAAc,KAAK,KAAK,IAAIF,CAAC,IAAI,KAAK,YAAY/N,IAAIb,EAAE,QAAQ,KAAK,KAAK,IAAI4O,EAAE5O,CAAC,GAAQP,IAAL,IAAQ,KAAK,OAAOmP,IAAI,KAAK,OAAL,KAAK,KAAO,IAAI,MAAK,IAAIA,CAAC,EAAE,CAAC,MAAM,MAAM,CAAC,KAAK,gBAAgB,GAAG,GAAG,CAAC,MAAM,KAAK,IAAI,OAAO,EAAE,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,MAAMA,EAAE,KAAK,eAAc,EAAG,OAAaA,GAAN,MAAS,MAAMA,EAAE,CAAC,KAAK,eAAe,CAAC,gBAAgB,CAAC,OAAO,KAAK,cAAa,CAAE,CAAC,eAAe,OAAC,GAAG,CAAC,KAAK,gBAAgB,OAAO,GAAG,CAAC,KAAK,WAAW,CAAC,GAAG,KAAK,aAAL,KAAK,WAAa,KAAK,iBAAgB,GAAG,KAAK,KAAK,CAAC,SAAS,CAACA,EAAE,CAAC,IAAI,KAAK,KAAK,KAAKA,CAAC,EAAE,EAAE,KAAK,KAAK,MAAM,CAAC,MAAMA,EAAE,KAAK,YAAY,kBAAkB,GAAGA,EAAE,KAAK,EAAE,SAAS,CAAC5O,EAAEa,CAAC,IAAI+N,EAAE,CAAC,KAAK,CAAC,QAAQA,CAAC,EAAE/N,EAAEpB,EAAE,KAAKO,CAAC,EAAO4O,IAAL,IAAQ,KAAK,KAAK,IAAI5O,CAAC,GAAYP,IAAT,QAAY,KAAK,EAAEO,EAAE,OAAOa,EAAEpB,CAAC,CAAC,CAAC,CAAC,IAAImP,EAAE,GAAG,MAAM5O,EAAE,KAAK,KAAK,GAAG,CAAC4O,EAAE,KAAK,aAAa5O,CAAC,EAAE4O,GAAG,KAAK,WAAW5O,CAAC,GAAEuP,EAAA,KAAK,OAAL,MAAAA,EAAW,QAASX,GAAC,OAAE,OAAAW,EAAAX,EAAE,aAAF,YAAAW,EAAA,KAAAX,KAAmB,KAAK,OAAO5O,CAAC,GAAG,KAAK,KAAI,CAAE,OAAOA,EAAE,CAAC,MAAM4O,EAAE,GAAG,KAAK,KAAI,EAAG5O,CAAC,CAAC4O,GAAG,KAAK,KAAK5O,CAAC,CAAC,CAAC,WAAW4O,EAAE,CAAC,CAAC,KAAKA,EAAE,QAACW,EAAA,KAAK,OAAL,MAAAA,EAAW,QAASX,GAAC,OAAE,OAAAW,EAAAX,EAAE,cAAF,YAAAW,EAAA,KAAAX,KAAoB,KAAK,aAAa,KAAK,WAAW,GAAG,KAAK,aAAaA,CAAC,GAAG,KAAK,QAAQA,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,KAAK,IAAI,IAAI,KAAK,gBAAgB,EAAE,CAAC,IAAI,gBAAgB,CAAC,OAAO,KAAK,kBAAiB,CAAE,CAAC,mBAAmB,CAAC,OAAO,KAAK,IAAI,CAAC,aAAaA,EAAE,CAAC,MAAM,EAAE,CAAC,OAAOA,EAAE,CAAC,KAAK,OAAL,KAAK,KAAO,KAAK,KAAK,QAAS,GAAG,KAAK,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,KAAI,CAAE,CAAC,QAAQA,EAAE,CAAC,CAAC,aAAaA,EAAE,CAAC,CAAC,EAACa,EAAE,cAAc,GAAGA,EAAE,kBAAkB,CAAC,KAAK,MAAM,EAAEA,EAAEJ,GAAE,mBAAmB,CAAC,EAAE,IAAI,IAAII,EAAEJ,GAAE,WAAW,CAAC,EAAE,IAAI,IAAID,aAAI,CAAC,gBAAgBK,CAAC,IAAIxE,EAAE,0BAAFA,EAAE,wBAA0B,KAAI,KAAK,OAAO,ECL7xL;AAAA;AAAA;AAAA;AAAA,GAKK,MAAC2D,GAAE,WAAW/N,GAAE+N,GAAE,aAAa5O,GAAEa,GAAEA,GAAE,aAAa,WAAW,CAAC,WAAW+N,GAAGA,CAAC,CAAC,EAAE,OAAOnP,GAAE,QAAQyP,EAAE,OAAO,KAAK,OAAM,EAAG,QAAQ,CAAC,EAAE,MAAM,CAAC,CAAC,IAAIpP,GAAE,IAAIoP,EAAEH,GAAE,IAAIjP,EAAC,IAAIgP,EAAE,SAASK,GAAE,IAAIL,EAAE,cAAc,EAAE,EAAEG,GAAEL,GAAUA,IAAP,MAAoB,OAAOA,GAAjB,UAAgC,OAAOA,GAAnB,WAAqB3D,GAAE,MAAM,QAAQqE,GAAEV,GAAG3D,GAAE2D,CAAC,GAAe,OAAOA,GAAA,YAAAA,EAAI,OAAO,YAA9B,WAAwCS,GAAE;AAAA,OAActP,GAAE,sDAAsD2P,GAAE,OAAOC,GAAE,KAAK9M,EAAE,OAAO,KAAKwM,EAAC,qBAAqBA,EAAC,KAAKA,EAAC;AAAA,0BAAsC,GAAG,EAAED,GAAE,KAAKQ,GAAE,KAAKC,GAAE,qCAAqCJ,GAAEb,GAAG,CAAC/N,KAAKb,KAAK,CAAC,WAAW4O,EAAE,QAAQ/N,EAAE,OAAOb,CAAC,GAAG8P,GAAEL,GAAE,CAAC,EAAgBM,GAAE,OAAO,IAAI,cAAc,EAAEC,EAAE,OAAO,IAAI,aAAa,EAAEC,GAAE,IAAI,QAAQC,EAAEpB,EAAE,iBAAiBA,EAAE,GAAG,EAAE,SAASqB,GAAEvB,EAAE/N,EAAE,CAAC,GAAG,CAACoK,GAAE2D,CAAC,GAAG,CAACA,EAAE,eAAe,KAAK,EAAE,MAAM,MAAM,gCAAgC,EAAE,OAAgB5O,KAAT,OAAWA,GAAE,WAAWa,CAAC,EAAEA,CAAC,CAAC,MAAMuP,GAAE,CAACxB,EAAE/N,IAAI,CAAC,MAAMb,EAAE4O,EAAE,OAAO,EAAE9O,EAAE,GAAG,IAAIgP,EAAEK,EAAMtO,IAAJ,EAAM,QAAYA,IAAJ,EAAM,SAAS,GAAGoO,EAAElP,GAAE,QAAQc,EAAE,EAAEA,EAAEb,EAAEa,IAAI,CAAC,MAAMb,EAAE4O,EAAE/N,CAAC,EAAE,IAAIoK,EAAEqE,EAAED,EAAE,GAAGI,EAAE,EAAE,KAAKA,EAAEzP,EAAE,SAASiP,EAAE,UAAUQ,EAAEH,EAAEL,EAAE,KAAKjP,CAAC,EAASsP,IAAP,OAAWG,EAAER,EAAE,UAAUA,IAAIlP,GAAUuP,EAAE,CAAC,IAAX,MAAaL,EAAES,GAAWJ,EAAE,CAAC,IAAZ,OAAcL,EAAEU,GAAWL,EAAE,CAAC,IAAZ,QAAeO,GAAE,KAAKP,EAAE,CAAC,CAAC,IAAIR,EAAE,OAAO,KAAKQ,EAAE,CAAC,EAAE,GAAG,GAAGL,EAAEpM,GAAYyM,EAAE,CAAC,IAAZ,SAAgBL,EAAEpM,GAAGoM,IAAIpM,EAAQyM,EAAE,CAAC,IAAT,KAAYL,EAAEH,GAAG/O,GAAEsP,EAAE,IAAaC,EAAE,CAAC,IAAZ,OAAcD,EAAE,IAAIA,EAAEJ,EAAE,UAAUK,EAAE,CAAC,EAAE,OAAOrE,EAAEqE,EAAE,CAAC,EAAEL,EAAWK,EAAE,CAAC,IAAZ,OAAczM,EAAQyM,EAAE,CAAC,IAAT,IAAWM,GAAER,IAAGH,IAAIW,IAAGX,IAAIG,GAAEH,EAAEpM,EAAEoM,IAAIS,IAAGT,IAAIU,GAAEV,EAAElP,IAAGkP,EAAEpM,EAAEiM,EAAE,QAAQ,MAAMgB,EAAEb,IAAIpM,GAAG+L,EAAE/N,EAAE,CAAC,EAAE,WAAW,IAAI,EAAE,IAAI,GAAGsO,GAAGF,IAAIlP,GAAEC,EAAE+O,GAAEM,GAAG,GAAGvP,EAAE,KAAKmL,CAAC,EAAEjL,EAAE,MAAM,EAAEqP,CAAC,EAAE5P,GAAEO,EAAE,MAAMqP,CAAC,EAAEH,EAAEY,GAAG9P,EAAEkP,GAAQG,IAAL,GAAOxO,EAAEiP,EAAE,CAAC,MAAM,CAACK,GAAEvB,EAAEO,GAAGP,EAAE5O,CAAC,GAAG,QAAYa,IAAJ,EAAM,SAAaA,IAAJ,EAAM,UAAU,GAAG,EAAEf,CAAC,CAAC,EAAE,MAAMuQ,EAAC,CAAC,YAAY,CAAC,QAAQzB,EAAE,WAAW5O,CAAC,EAAE,EAAE,CAAC,IAAI8O,EAAE,KAAK,MAAM,GAAG,IAAIG,EAAE,EAAEhE,EAAE,EAAE,MAAMqE,EAAEV,EAAE,OAAO,EAAES,EAAE,KAAK,MAAM,CAACtP,EAAE2P,CAAC,EAAEU,GAAExB,EAAE5O,CAAC,EAAE,GAAG,KAAK,GAAGqQ,GAAE,cAActQ,EAAE,CAAC,EAAEmQ,EAAE,YAAY,KAAK,GAAG,QAAYlQ,IAAJ,GAAWA,IAAJ,EAAM,CAAC,MAAM4O,EAAE,KAAK,GAAG,QAAQ,WAAWA,EAAE,YAAY,GAAGA,EAAE,UAAU,CAAC,CAAC,MAAaE,EAAEoB,EAAE,cAAZ,MAAyBb,EAAE,OAAOC,GAAG,CAAC,GAAOR,EAAE,WAAN,EAAe,CAAC,GAAGA,EAAE,gBAAgB,UAAUF,KAAKE,EAAE,kBAAiB,EAAG,GAAGF,EAAE,SAASnP,EAAC,EAAE,CAAC,MAAMoB,EAAE6O,EAAEzE,GAAG,EAAEjL,EAAE8O,EAAE,aAAaF,CAAC,EAAE,MAAMM,CAAC,EAAEzP,EAAE,eAAe,KAAKoB,CAAC,EAAEwO,EAAE,KAAK,CAAC,KAAK,EAAE,MAAMJ,EAAE,KAAKxP,EAAE,CAAC,EAAE,QAAQO,EAAE,KAAWP,EAAE,CAAC,IAAT,IAAW6Q,GAAQ7Q,EAAE,CAAC,IAAT,IAAW8Q,GAAQ9Q,EAAE,CAAC,IAAT,IAAW+Q,GAAElN,EAAC,CAAC,EAAEwL,EAAE,gBAAgBF,CAAC,CAAC,MAAMA,EAAE,WAAWM,CAAC,IAAIG,EAAE,KAAK,CAAC,KAAK,EAAE,MAAMJ,CAAC,CAAC,EAAEH,EAAE,gBAAgBF,CAAC,GAAG,GAAGiB,GAAE,KAAKf,EAAE,OAAO,EAAE,CAAC,MAAMF,EAAEE,EAAE,YAAY,MAAMI,CAAC,EAAElP,EAAE4O,EAAE,OAAO,EAAE,GAAG5O,EAAE,EAAE,CAAC8O,EAAE,YAAYjO,GAAEA,GAAE,YAAY,GAAG,QAAQA,EAAE,EAAEA,EAAEb,EAAEa,IAAIiO,EAAE,OAAOF,EAAE/N,CAAC,EAAEsO,GAAC,CAAE,EAAEe,EAAE,SAAQ,EAAGb,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAEJ,CAAC,CAAC,EAAEH,EAAE,OAAOF,EAAE5O,CAAC,EAAEmP,IAAG,CAAC,CAAC,CAAC,SAAaL,EAAE,WAAN,EAAe,GAAGA,EAAE,OAAOhP,GAAEuP,EAAE,KAAK,CAAC,KAAK,EAAE,MAAMJ,CAAC,CAAC,MAAM,CAAC,IAAIL,EAAE,GAAG,MAAWA,EAAEE,EAAE,KAAK,QAAQI,EAAEN,EAAE,CAAC,KAA5B,IAAgCS,EAAE,KAAK,CAAC,KAAK,EAAE,MAAMJ,CAAC,CAAC,EAAEL,GAAGM,EAAE,OAAO,CAAC,CAACD,GAAG,CAAC,CAAC,OAAO,cAAcL,EAAE/N,EAAE,CAAC,MAAMb,EAAE8O,EAAE,cAAc,UAAU,EAAE,OAAO9O,EAAE,UAAU4O,EAAE5O,CAAC,CAAC,CAAC,SAASgP,GAAEJ,EAAE/N,EAAEb,EAAE4O,EAAEnP,EAAE,SAAC,GAAGoB,IAAIkP,GAAE,OAAOlP,EAAE,IAAIqO,EAAWzP,IAAT,QAAW8P,EAAAvP,EAAE,OAAF,YAAAuP,EAAS9P,GAAGO,EAAE,KAAK,MAAM,EAAEiP,GAAEpO,CAAC,EAAE,OAAOA,EAAE,gBAAgB,OAAOqO,GAAA,YAAAA,EAAG,eAAc,KAAIM,EAAAN,GAAA,YAAAA,EAAG,OAAH,MAAAM,EAAA,KAAAN,EAAU,IAAa,IAAT,OAAWA,EAAE,QAAQA,EAAE,IAAI,EAAEN,CAAC,EAAEM,EAAE,KAAKN,EAAE5O,EAAEP,CAAC,GAAYA,IAAT,QAAYO,EAAE,OAAFA,EAAE,KAAO,KAAIP,CAAC,EAAEyP,EAAElP,EAAE,KAAKkP,GAAYA,IAAT,SAAarO,EAAEmO,GAAEJ,EAAEM,EAAE,KAAKN,EAAE/N,EAAE,MAAM,EAAEqO,EAAEzP,CAAC,GAAGoB,CAAC,CAAC,MAAM4P,EAAC,CAAC,YAAY7B,EAAE/N,EAAE,CAAC,KAAK,KAAK,GAAG,KAAK,KAAK,OAAO,KAAK,KAAK+N,EAAE,KAAK,KAAK/N,CAAC,CAAC,IAAI,YAAY,CAAC,OAAO,KAAK,KAAK,UAAU,CAAC,IAAI,MAAM,CAAC,OAAO,KAAK,KAAK,IAAI,CAAC,EAAE+N,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ/N,CAAC,EAAE,MAAMb,CAAC,EAAE,KAAK,KAAKP,IAAGmP,GAAA,YAAAA,EAAG,gBAAeE,GAAG,WAAWjO,EAAE,EAAE,EAAEqP,EAAE,YAAYzQ,EAAE,IAAIyP,EAAEgB,EAAE,SAAQ,EAAGpQ,EAAE,EAAEiP,EAAE,EAAE,EAAE/O,EAAE,CAAC,EAAE,KAAc,IAAT,QAAY,CAAC,GAAGF,IAAI,EAAE,MAAM,CAAC,IAAIe,EAAM,EAAE,OAAN,EAAWA,EAAE,IAAI6P,GAAExB,EAAEA,EAAE,YAAY,KAAKN,CAAC,EAAM,EAAE,OAAN,EAAW/N,EAAE,IAAI,EAAE,KAAKqO,EAAE,EAAE,KAAK,EAAE,QAAQ,KAAKN,CAAC,EAAM,EAAE,OAAN,IAAa/N,EAAE,IAAI8P,GAAEzB,EAAE,KAAKN,CAAC,GAAG,KAAK,KAAK,KAAK/N,CAAC,EAAE,EAAEb,EAAE,EAAE+O,CAAC,CAAC,CAACjP,KAAI,iBAAG,SAAQoP,EAAEgB,EAAE,SAAQ,EAAGpQ,IAAI,CAAC,OAAOoQ,EAAE,YAAYpB,EAAErP,CAAC,CAAC,EAAEmP,EAAE,CAAC,IAAI/N,EAAE,EAAE,UAAUb,KAAK,KAAK,KAAcA,IAAT,SAAsBA,EAAE,UAAX,QAAoBA,EAAE,KAAK4O,EAAE5O,EAAEa,CAAC,EAAEA,GAAGb,EAAE,QAAQ,OAAO,GAAGA,EAAE,KAAK4O,EAAE/N,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,MAAM6P,EAAC,CAAC,IAAI,MAAM,OAAC,QAAOnB,EAAA,KAAK,OAAL,YAAAA,EAAW,OAAM,KAAK,IAAI,CAAC,YAAYX,EAAE/N,EAAEb,EAAEP,EAAE,CAAC,KAAK,KAAK,EAAE,KAAK,KAAKuQ,EAAE,KAAK,KAAK,OAAO,KAAK,KAAKpB,EAAE,KAAK,KAAK/N,EAAE,KAAK,KAAKb,EAAE,KAAK,QAAQP,EAAE,KAAK,MAAKA,GAAA,YAAAA,EAAG,cAAa,EAAE,CAAC,IAAI,YAAY,CAAC,IAAImP,EAAE,KAAK,KAAK,WAAW,MAAM/N,EAAE,KAAK,KAAK,OAAgBA,IAAT,SAAiB+N,GAAA,YAAAA,EAAG,YAAR,KAAmBA,EAAE/N,EAAE,YAAY+N,CAAC,CAAC,IAAI,WAAW,CAAC,OAAO,KAAK,IAAI,CAAC,IAAI,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,KAAKA,EAAE/N,EAAE,KAAK,CAAC+N,EAAEI,GAAE,KAAKJ,EAAE/N,CAAC,EAAEoO,GAAEL,CAAC,EAAEA,IAAIoB,GAASpB,GAAN,MAAcA,IAAL,IAAQ,KAAK,OAAOoB,GAAG,KAAK,KAAI,EAAG,KAAK,KAAKA,GAAGpB,IAAI,KAAK,MAAMA,IAAImB,IAAG,KAAK,EAAEnB,CAAC,EAAWA,EAAE,aAAX,OAAsB,KAAK,EAAEA,CAAC,EAAWA,EAAE,WAAX,OAAoB,KAAK,EAAEA,CAAC,EAAEU,GAAEV,CAAC,EAAE,KAAK,EAAEA,CAAC,EAAE,KAAK,EAAEA,CAAC,CAAC,CAAC,EAAEA,EAAE,CAAC,OAAO,KAAK,KAAK,WAAW,aAAaA,EAAE,KAAK,IAAI,CAAC,CAAC,EAAEA,EAAE,CAAC,KAAK,OAAOA,IAAI,KAAK,KAAI,EAAG,KAAK,KAAK,KAAK,EAAEA,CAAC,EAAE,CAAC,EAAEA,EAAE,CAAC,KAAK,OAAOoB,GAAGf,GAAE,KAAK,IAAI,EAAE,KAAK,KAAK,YAAY,KAAKL,EAAE,KAAK,EAAEE,EAAE,eAAeF,CAAC,CAAC,EAAE,KAAK,KAAKA,CAAC,CAAC,EAAEA,EAAE,OAAC,KAAK,CAAC,OAAO/N,EAAE,WAAWb,CAAC,EAAE4O,EAAEnP,EAAY,OAAOO,GAAjB,SAAmB,KAAK,KAAK4O,CAAC,GAAY5O,EAAE,KAAX,SAAgBA,EAAE,GAAGqQ,GAAE,cAAcF,GAAEnQ,EAAE,EAAEA,EAAE,EAAE,CAAC,CAAC,EAAE,KAAK,OAAO,GAAGA,GAAG,KAAGuP,EAAA,KAAK,OAAL,YAAAA,EAAW,QAAO9P,EAAE,KAAK,KAAK,EAAEoB,CAAC,MAAM,CAAC,MAAM+N,EAAE,IAAI6B,GAAEhR,EAAE,IAAI,EAAEO,EAAE4O,EAAE,EAAE,KAAK,OAAO,EAAEA,EAAE,EAAE/N,CAAC,EAAE,KAAK,EAAEb,CAAC,EAAE,KAAK,KAAK4O,CAAC,CAAC,CAAC,KAAKA,EAAE,CAAC,IAAI/N,EAAEoP,GAAE,IAAIrB,EAAE,OAAO,EAAE,OAAgB/N,IAAT,QAAYoP,GAAE,IAAIrB,EAAE,QAAQ/N,EAAE,IAAIwP,GAAEzB,CAAC,CAAC,EAAE/N,CAAC,CAAC,EAAE+N,EAAE,CAAC3D,GAAE,KAAK,IAAI,IAAI,KAAK,KAAK,GAAG,KAAK,KAAI,GAAI,MAAMpK,EAAE,KAAK,KAAK,IAAIb,EAAEP,EAAE,EAAE,UAAUyP,KAAKN,EAAEnP,IAAIoB,EAAE,OAAOA,EAAE,KAAKb,EAAE,IAAI0Q,GAAE,KAAK,EAAEvB,GAAC,CAAE,EAAE,KAAK,EAAEA,IAAG,EAAE,KAAK,KAAK,OAAO,CAAC,EAAEnP,EAAEa,EAAEpB,CAAC,EAAEO,EAAE,KAAKkP,CAAC,EAAEzP,IAAIA,EAAEoB,EAAE,SAAS,KAAK,KAAKb,GAAGA,EAAE,KAAK,YAAYP,CAAC,EAAEoB,EAAE,OAAOpB,EAAE,CAAC,KAAKmP,EAAE,KAAK,KAAK,YAAY/N,EAAE,OAAC,KAAI0O,EAAA,KAAK,OAAL,YAAAA,EAAA,UAAY,GAAG,GAAG1O,GAAG+N,IAAI,KAAK,MAAM,CAAC,MAAM,EAAEA,EAAE,YAAYA,EAAE,OAAM,EAAGA,EAAE,CAAC,CAAC,CAAC,aAAaA,EAAE,OAAU,KAAK,OAAd,SAAqB,KAAK,KAAKA,GAAEW,EAAA,KAAK,OAAL,MAAAA,EAAA,UAAYX,GAAG,CAAC,CAAC,MAAMtL,EAAC,CAAC,IAAI,SAAS,CAAC,OAAO,KAAK,QAAQ,OAAO,CAAC,IAAI,MAAM,CAAC,OAAO,KAAK,KAAK,IAAI,CAAC,YAAYsL,EAAE/N,EAAEb,EAAEP,EAAEyP,EAAE,CAAC,KAAK,KAAK,EAAE,KAAK,KAAKc,EAAE,KAAK,KAAK,OAAO,KAAK,QAAQpB,EAAE,KAAK,KAAK/N,EAAE,KAAK,KAAKpB,EAAE,KAAK,QAAQyP,EAAElP,EAAE,OAAO,GAAQA,EAAE,CAAC,IAAR,IAAgBA,EAAE,CAAC,IAAR,IAAW,KAAK,KAAK,MAAMA,EAAE,OAAO,CAAC,EAAE,KAAK,IAAI,MAAM,EAAE,KAAK,QAAQA,GAAG,KAAK,KAAKgQ,CAAC,CAAC,KAAKpB,EAAE/N,EAAE,KAAKb,EAAEP,EAAE,CAAC,MAAMyP,EAAE,KAAK,QAAQ,IAAIpP,EAAE,GAAG,GAAYoP,IAAT,OAAWN,EAAEI,GAAE,KAAKJ,EAAE/N,EAAE,CAAC,EAAEf,EAAE,CAACmP,GAAEL,CAAC,GAAGA,IAAI,KAAK,MAAMA,IAAImB,GAAEjQ,IAAI,KAAK,KAAK8O,OAAO,CAAC,MAAMnP,EAAEmP,EAAE,IAAIG,EAAED,EAAE,IAAIF,EAAEM,EAAE,CAAC,EAAEH,EAAE,EAAEA,EAAEG,EAAE,OAAO,EAAEH,IAAID,EAAEE,GAAE,KAAKvP,EAAEO,EAAE+O,CAAC,EAAElO,EAAEkO,CAAC,EAAED,IAAIiB,KAAIjB,EAAE,KAAK,KAAKC,CAAC,GAAGjP,MAAI,CAACmP,GAAEH,CAAC,GAAGA,IAAI,KAAK,KAAKC,CAAC,GAAED,IAAIkB,EAAEpB,EAAEoB,EAAEpB,IAAIoB,IAAIpB,IAAIE,GAAG,IAAII,EAAEH,EAAE,CAAC,GAAG,KAAK,KAAKA,CAAC,EAAED,CAAC,CAAChP,GAAG,CAACL,GAAG,KAAK,EAAEmP,CAAC,CAAC,CAAC,EAAEA,EAAE,CAACA,IAAIoB,EAAE,KAAK,QAAQ,gBAAgB,KAAK,IAAI,EAAE,KAAK,QAAQ,aAAa,KAAK,KAAKpB,GAAG,EAAE,CAAC,CAAC,CAAC,MAAM0B,WAAUhN,EAAC,CAAC,aAAa,CAAC,MAAM,GAAG,SAAS,EAAE,KAAK,KAAK,CAAC,CAAC,EAAEsL,EAAE,CAAC,KAAK,QAAQ,KAAK,IAAI,EAAEA,IAAIoB,EAAE,OAAOpB,CAAC,CAAC,CAAC,MAAM2B,WAAUjN,EAAC,CAAC,aAAa,CAAC,MAAM,GAAG,SAAS,EAAE,KAAK,KAAK,CAAC,CAAC,EAAEsL,EAAE,CAAC,KAAK,QAAQ,gBAAgB,KAAK,KAAK,CAAC,CAACA,GAAGA,IAAIoB,CAAC,CAAC,CAAC,CAAC,MAAMQ,WAAUlN,EAAC,CAAC,YAAYsL,EAAE/N,EAAEb,EAAEP,EAAEyP,EAAE,CAAC,MAAMN,EAAE/N,EAAEb,EAAEP,EAAEyP,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,KAAKN,EAAE/N,EAAE,KAAK,CAAC,IAAI+N,EAAEI,GAAE,KAAKJ,EAAE/N,EAAE,CAAC,GAAGmP,KAAKD,GAAE,OAAO,MAAM/P,EAAE,KAAK,KAAKP,EAAEmP,IAAIoB,GAAGhQ,IAAIgQ,GAAGpB,EAAE,UAAU5O,EAAE,SAAS4O,EAAE,OAAO5O,EAAE,MAAM4O,EAAE,UAAU5O,EAAE,QAAQkP,EAAEN,IAAIoB,IAAIhQ,IAAIgQ,GAAGvQ,GAAGA,GAAG,KAAK,QAAQ,oBAAoB,KAAK,KAAK,KAAKO,CAAC,EAAEkP,GAAG,KAAK,QAAQ,iBAAiB,KAAK,KAAK,KAAKN,CAAC,EAAE,KAAK,KAAKA,CAAC,CAAC,YAAYA,EAAE,OAAa,OAAO,KAAK,MAAxB,WAA6B,KAAK,KAAK,OAAKW,EAAA,KAAK,UAAL,YAAAA,EAAc,OAAM,KAAK,QAAQX,CAAC,EAAE,KAAK,KAAK,YAAYA,CAAC,CAAC,CAAC,CAAC,MAAM+B,EAAC,CAAC,YAAY/B,EAAE/N,EAAEb,EAAE,CAAC,KAAK,QAAQ4O,EAAE,KAAK,KAAK,EAAE,KAAK,KAAK,OAAO,KAAK,KAAK/N,EAAE,KAAK,QAAQb,CAAC,CAAC,IAAI,MAAM,CAAC,OAAO,KAAK,KAAK,IAAI,CAAC,KAAK4O,EAAE,CAACI,GAAE,KAAKJ,CAAC,CAAC,CAAC,CAAM,MAA6DzK,GAAEyK,GAAE,uBAAuBzK,IAAA,MAAAA,GAAIkM,GAAEK,KAAI9B,GAAE,kBAAFA,GAAE,gBAAkB,KAAI,KAAK,OAAO,EAAE,MAAMgC,GAAE,CAAChC,EAAE/N,EAAEb,IAAI,CAAC,MAAMP,GAAEO,GAAA,YAAAA,EAAG,eAAca,EAAE,IAAIqO,EAAEzP,EAAE,WAAW,GAAYyP,IAAT,OAAW,CAAC,MAAMN,GAAE5O,GAAA,YAAAA,EAAG,eAAc,KAAKP,EAAE,WAAWyP,EAAE,IAAIwB,GAAE7P,EAAE,aAAasO,GAAC,EAAGP,CAAC,EAAEA,EAAE,OAAO5O,GAAG,EAAE,CAAC,CAAC,OAAOkP,EAAE,KAAKN,CAAC,EAAEM,CAAC,ECJ16N;AAAA;AAAA;AAAA;AAAA,GAIG,MAAMlP,EAAE,WAAW,MAAMa,UAAU+N,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,SAAS,EAAE,KAAK,cAAc,CAAC,KAAK,IAAI,EAAE,KAAK,KAAK,MAAM,CAAC,kBAAkB,OAAC,MAAMA,EAAE,MAAM,iBAAgB,EAAG,OAAOW,EAAA,KAAK,eAAc,eAAnBA,EAAmB,aAAeX,EAAE,YAAWA,CAAC,CAAC,OAAOA,EAAE,CAAC,MAAME,EAAE,KAAK,OAAM,EAAG,KAAK,aAAa,KAAK,cAAc,YAAY,KAAK,aAAa,MAAM,OAAOF,CAAC,EAAE,KAAK,KAAKnP,GAAEqP,EAAE,KAAK,WAAW,KAAK,aAAa,CAAC,CAAC,mBAAmB,OAAC,MAAM,kBAAiB,GAAGS,EAAA,KAAK,OAAL,MAAAA,EAAW,aAAa,GAAG,CAAC,sBAAsB,OAAC,MAAM,qBAAoB,GAAGA,EAAA,KAAK,OAAL,MAAAA,EAAW,aAAa,GAAG,CAAC,QAAQ,CAAC,OAAOT,EAAC,CAAC,QAACjO,EAAE,cAAc,GAAGA,EAAE,UAAa,IAAG0O,GAAAvP,EAAE,2BAAF,MAAAuP,GAAA,KAAAvP,EAA6B,CAAC,WAAWa,CAAC,GAAG,MAAMf,GAAEE,EAAE,0BAA0BF,aAAI,CAAC,WAAWe,CAAC,IAAyDb,EAAE,qBAAFA,EAAE,mBAAqB,KAAI,KAAK,OAAO,ECL/xB;AAAA;AAAA;AAAA;AAAA,GAKA,MAAM4O,GAAEA,GAAG,CAAC,EAAE9O,IAAI,CAAUA,WAAEA,EAAE,eAAgB,IAAI,CAAC,eAAe,OAAO8O,EAAE,CAAC,CAAC,CAAC,EAAG,eAAe,OAAOA,EAAE,CAAC,CAAC,ECJ7G;AAAA;AAAA;AAAA;AAAA,GAIG,MAAM9O,GAAE,CAAC,UAAU,GAAG,KAAK,OAAO,UAAU8O,GAAE,QAAQ,GAAG,WAAWnP,EAAC,EAAEqP,GAAE,CAACF,EAAE9O,GAAE,EAAEgP,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,SAAS,CAAC,EAAEA,EAAE,IAAI9O,EAAE,WAAW,oBAAoB,IAAI,CAAC,EAAE,GAAYA,IAAT,QAAY,WAAW,oBAAoB,IAAI,EAAEA,EAAE,IAAI,GAAG,EAAa,IAAX,YAAgB4O,EAAE,OAAO,OAAOA,CAAC,GAAG,QAAQ,IAAI5O,EAAE,IAAI8O,EAAE,KAAKF,CAAC,EAAe,IAAb,WAAe,CAAC,KAAK,CAAC,KAAK9O,CAAC,EAAEgP,EAAE,MAAM,CAAC,IAAIA,EAAE,CAAC,MAAMC,EAAE,EAAE,IAAI,KAAK,IAAI,EAAE,EAAE,IAAI,KAAK,KAAKD,CAAC,EAAE,KAAK,cAAchP,EAAEiP,EAAEH,CAAC,CAAC,EAAE,KAAKnP,EAAE,CAAC,OAAgBA,IAAT,QAAY,KAAK,EAAEK,EAAE,OAAO8O,EAAEnP,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,GAAc,IAAX,SAAa,CAAC,KAAK,CAAC,KAAKK,CAAC,EAAEgP,EAAE,OAAO,SAASA,EAAE,CAAC,MAAMC,EAAE,KAAKjP,CAAC,EAAE,EAAE,KAAK,KAAKgP,CAAC,EAAE,KAAK,cAAchP,EAAEiP,EAAEH,CAAC,CAAC,CAAC,CAAC,MAAM,MAAM,mCAAmC,CAAC,CAAC,EAAE,SAASG,GAAEH,EAAE,CAAC,MAAM,CAAC,EAAE9O,IAAc,OAAOA,GAAjB,SAAmBgP,GAAEF,EAAE,EAAE9O,CAAC,GAAG,CAAC8O,EAAEnP,EAAE,IAAI,CAAC,MAAMqP,EAAErP,EAAE,eAAe,CAAC,EAAE,OAAOA,EAAE,YAAY,eAAe,EAAEmP,CAAC,EAAEE,EAAE,OAAO,yBAAyBrP,EAAE,CAAC,EAAE,MAAM,GAAGmP,EAAE,EAAE9O,CAAC,CAAC,CCJryB;AAAA;AAAA;AAAA;AAAA,GAIG,SAASgP,EAAE,EAAE,CAAC,OAAOF,GAAE,CAAC,GAAG,EAAE,MAAM,GAAG,UAAU,EAAE,CAAC,CAAC,qTCDhD,IAAMiC,EAAN,cAAwBC,CAAW,CAKxC,aAAc,CACZ,QALeC,EAAA,iBACAA,EAAA,iBACAA,EAAA,cAIf,KAAK,SAAW,GAChB,KAAK,SAAW,GAChB,KAAK,MAAQ,IACf,CA0FQ,QAAQ,EAAU,CACxB,MAAM,EAAI,EAAE,OACX,KAAa,EAAE,IAAI,EAAI,EAAE,KAC5B,CACA,MAAc,SAAS,EAAU,CAI/B,GAHA,EAAE,iBACF,KAAK,MAAQ,KAET,CAAC,KAAK,SAAS,QAAU,CAAC,KAAK,SAAS,OAAQ,CAClD,KAAK,MAAQ,qCACb,MACF,CAEA,GAAI,CAEF,KAAM,CAAE,WAAAC,CAAA,EAAe,MAAAC,EAAA,2BAAAD,CAAA,QAAM,2BAAAE,EAAA,EAAwB,kBAAAF,CAAA,WACrD,MAAMA,EAAW,MAAM,CAAE,SAAU,KAAK,SAAU,SAAU,KAAK,SAAU,EAE3EC,EAAA,uBAAAjH,CAAA,iEAAyB,KAAK,CAAC,CAAE,OAAAA,KAAaA,EAAO,GAAG,QAAQ,CAAC,CACnE,OAASmH,EAAK,CACZ,KAAK,MAAQ,+BACb,QAAQ,MAAM,eAAgBA,CAAG,CACnC,CACF,CAEA,QAAS,CACP,OAAOC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,YAKC,KAAK,MAAQA,wBAA0B,KAAK,KAAK,SAAW,EAAE;AAAA,0BAChD,KAAK,QAAQ;AAAA;AAAA;AAAA,wEAGiC,KAAK,QAAQ,WAAW,KAAK,OAAO;AAAA;AAAA;AAAA;AAAA,4EAIhC,KAAK,QAAQ,WAAW,KAAK,OAAO;AAAA;AAAA;AAAA;AAAA,+DAIjD,IAAM,CAAiDH,EAAA,uBAAAjH,CAAA,iEAAyB,KAAK,CAAC,CAAE,OAAAA,KAAaA,EAAO,GAAG,WAAW,CAAC,CAAG,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQ5L,CACF,EA5IE+G,GAZWF,EAYJ,SAASQ;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAAA,EAXCC,GAAA,CAAhBC,EAAA,CAAM,EADIV,EACM,wBACAS,GAAA,CAAhBC,EAAA,CAAM,EAFIV,EAEM,wBACAS,GAAA,CAAhBC,EAAA,CAAM,EAHIV,EAGM,qBAHNA,EAANS,GAAA,CADNE,GAAc,YAAY,GACdX,CAAA,gICJPY,GAAe,OACrB,MAAMC,EAAW,CACb,MAAM,QAAQC,EAAUrP,EAAU,GAAI,CAClC,MAAMiF,EAAM,GAAGkK,EAAY,GAAGE,CAAQ,GAChCC,EAAW,MAAM,MAAMrK,EAAK,CAC9B,QAAS,CACL,eAAgB,mBAChB,GAAGjF,EAAQ,OAC3B,EACY,GAAGA,CACf,CAAS,EACD,GAAI,CAACsP,EAAS,GACV,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,IAAIA,EAAS,UAAU,EAAE,EAEnF,OAAOA,EAAS,KAAI,CACxB,CAEA,MAAM,aAAc,CAChB,OAAO,KAAK,QAAQ,QAAQ,CAChC,CACA,MAAM,YAAYC,EAAI,CAClB,OAAO,KAAK,QAAQ,UAAUA,CAAE,EAAE,CACtC,CACA,MAAM,WAAWC,EAAM,CAEnB,MAAMC,EAAc,CAChB,UAAWD,EAAK,KAAK,MAAM,GAAG,EAAE,CAAC,GAAK,GACtC,SAAUA,EAAK,KAAK,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG,GAAK,GACrD,MAAOA,EAAK,MACZ,SAAUA,EAAK,UAAY,qBAC3B,MAAOA,EAAK,KACxB,EACQ,OAAO,KAAK,QAAQ,kBAAmB,CACnC,OAAQ,OACR,KAAM,KAAK,UAAUC,CAAW,CAC5C,CAAS,CACL,CACA,MAAM,WAAWF,EAAIC,EAAM,CAEvB,MAAMC,EAAc,CAChB,UAAWD,EAAK,KAAK,MAAM,GAAG,EAAE,CAAC,GAAK,GACtC,SAAUA,EAAK,KAAK,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG,GAAK,GACrD,MAAOA,EAAK,MACZ,MAAOA,EAAK,KACxB,EACQ,OAAO,KAAK,QAAQ,UAAUD,CAAE,GAAI,CAChC,OAAQ,MACR,KAAM,KAAK,UAAUE,CAAW,CAC5C,CAAS,CACL,CACA,MAAM,WAAWF,EAAI,CACjB,MAAM,KAAK,QAAQ,UAAUA,CAAE,GAAI,CAC/B,OAAQ,QACpB,CAAS,CACL,CACJ,CACO,MAAMb,GAAa,IAAIU,kaC7CvB,IAAMM,EAAN,cAA2BlB,CAAW,CAS3C,aAAc,CACZ,QAReC,EAAA,aACAA,EAAA,cACAA,EAAA,iBACAA,EAAA,cACAA,EAAA,cACAA,EAAA,gBAKf,KAAK,KAAO,GACZ,KAAK,MAAQ,GACb,KAAK,SAAW,GAChB,KAAK,MAAQ,GACb,KAAK,MAAQ,KACb,KAAK,QAAU,IACjB,CAmGQ,QAAQ,EAAU,CACxB,MAAM,EAAI,EAAE,OACX,KAAa,EAAE,IAAI,EAAI,EAAE,KAC5B,CAEA,MAAc,SAAS,EAAU,CAK/B,GAJA,EAAE,iBACF,KAAK,MAAQ,KACb,KAAK,QAAU,KAEX,CAAC,KAAK,KAAK,QAAU,CAAC,KAAK,MAAM,QAAU,CAAC,KAAK,SAAS,OAAQ,CACpE,KAAK,MAAQ,2CACb,MACF,CAEA,GAAI,CACF,MAAMC,GAAW,WAAW,CAAE,KAAM,KAAK,KAAM,MAAO,KAAK,MAAO,SAAU,KAAK,SAAU,MAAO,KAAK,MAAO,EAC9G,KAAK,QAAU,yDAEf,WAAW,IAAM,mCACf,+BAAuB,cAAAhH,CAAA,WAAE,KAAK,CAAC,CAAE,OAAAA,KAAaA,EAAO,GAAG,QAAQ,CAAC,CACnE,EAAG,GAAG,CACR,OAASmH,EAAK,CACZ,KAAK,MAAQA,aAAe,MAAQA,EAAI,QAAU,qBAClD,QAAQ,MAAMA,CAAG,CACnB,CACF,CAEA,QAAS,CACP,OAAOC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,YAKC,KAAK,MAAQA,wBAA0B,KAAK,KAAK,SAAW,EAAE;AAAA,YAC9D,KAAK,QAAUA,0BAA4B,KAAK,OAAO,SAAW,EAAE;AAAA,0BACtD,KAAK,QAAQ;AAAA;AAAA;AAAA,gGAGyD,KAAK,IAAI,WAAW,KAAK,OAAO;AAAA;AAAA;AAAA;AAAA,2FAIrC,KAAK,KAAK,WAAW,KAAK,OAAO;AAAA;AAAA;AAAA;AAAA,mGAIzB,KAAK,QAAQ,WAAW,KAAK,OAAO;AAAA;AAAA;AAAA;AAAA,sGAIjC,KAAK,KAAK,WAAW,KAAK,OAAO;AAAA;AAAA;AAAA;AAAA,+DAIxE,IAAM,CAAEH,EAAA,uBAAAjH,CAAA,iEAAyB,KAAK,CAAC,CAAE,OAAAA,KAAaA,EAAO,GAAG,QAAQ,CAAC,CAAG,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQ1I,CACF,EAjKE+G,GApBWiB,EAoBJ,SAASX;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAAA,EAlBCC,EAAA,CAAhBC,EAAA,CAAM,EAFIS,EAEM,oBACAV,EAAA,CAAhBC,EAAA,CAAM,EAHIS,EAGM,qBACAV,EAAA,CAAhBC,EAAA,CAAM,EAJIS,EAIM,wBACAV,EAAA,CAAhBC,EAAA,CAAM,EALIS,EAKM,qBACAV,EAAA,CAAhBC,EAAA,CAAM,EANIS,EAMM,qBACAV,EAAA,CAAhBC,EAAA,CAAM,EAPIS,EAOM,uBAPNA,EAANV,EAAA,CADNE,GAAc,eAAe,GACjBQ,CAAA,mICXb;AAAA;AAAA;AAAA;AAAA,GAMA,OAAO,SAAP,OAAO,OAAW,YAClBzC,GAAA,OAAO,QAAO,eAAdA,GAAc,aAAiB,IAE/B,SAAS0C,GAAgBC,EAAM,CAC7B,OAAOA,EAAK,QAAQ,WAAarP,GAAMA,EAAE,CAAC,EAAE,aAAa,CAC3D,CAEA,MAAMsP,EAAkB,GAEjB,SAASC,GAAoBC,EAAeC,EAAU,SAAU,CAOrE,GANA,OAAO,eAAeD,EAAe,UAAW,CAC9C,KAAM,CACJ,OAAOC,CACT,CACJ,CAAG,EAEGD,EAAc,aAAc,CAC9B,MAAME,EACJ,OAAOF,EAAc,cAAiB,SAClCA,EAAc,aACd,GAAGJ,GAAgBI,EAAc,GAAG,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC,YAExE,GAAI,CAAC,OAAO,OAAO,aAAaE,CAAc,GAAK,CAACJ,EAAgBI,CAAc,EAAG,CAEnFJ,EAAgBI,CAAc,EAAI,IAAI,IACtCJ,EAAgBI,CAAc,EAAE,IAAIF,CAAa,EAEjD,OAAO,eAAe,OAAO,OAAO,aAAcE,EAAgB,CAChE,KAAM,CACJ,OAAOJ,EAAgBI,CAAc,EAAE,OAAS,CAClD,EACA,IAAIpU,EAAO,CACHA,GAASgU,EAAgBI,CAAc,EAAE,KAAO,IACpDJ,EAAgBI,CAAc,EAAE,QAASC,GAAiB,CACxD,eAAe,OAAOA,EAAa,GAAIA,CAAY,CACrD,CAAC,EACDL,EAAgBI,CAAc,EAAE,MAAK,EAEzC,CACR,CAAO,EAED,MACF,SAAWJ,EAAgBI,CAAc,EAAG,CAE1CJ,EAAgBI,CAAc,EAAE,IAAIF,CAAa,EACjD,MACF,CACF,CAEA,MAAMI,EAAU,eAAe,IAAIJ,EAAc,EAAE,EACnD,GAAI,CAACI,EACH,eAAe,OAAOJ,EAAc,GAAIA,CAAa,MAChD,CACL,MAAMK,EAAiBD,EAAQ,QAC3BC,GAAkBL,EAAc,SAAWK,IAAmBL,EAAc,QAE9E,QAAQ,KAAK,iBAAiBA,EAAc,EAAE,wBAAwB,EAEtE,QAAQ,MACN,mBAAmBA,EAAc,EAAE,YAAYA,EAAc,OAAO,iBAAiBI,EAAQ,OAAO,oDAC5G,CAEE,CACF,CCrEA;AAAA;AAAA;AAAA;AAAA,GAaA,MAAME,WAAa,WAAY,CAC7B,WAAW,IAAK,CACd,MAAO,oBACT,CACF,CAEAP,GAAoBO,EAAI,ECnBxB;AAAA;AAAA;AAAA;AAAA,GAgBA,SAASC,GAAmBpH,EAAW,CACrC,MAAMqH,EAAiBrH,EAAU,YAE3BsH,EAAatH,EAAU,wBAC7B,OAAIsH,EACK,CAAC,GAAGD,EAAe,WAAYC,EAAY,GAAGD,EAAe,WAAW,EAG1EA,EAAe,aACxB,CAOO,SAASE,GAAoBvH,EAAW,CAG7C,CAAC,GAAGA,EAAU,WAAW,iBAAiB,OAAO,CAAC,EAAE,QAASwH,GAAUA,EAAM,OAAM,CAAE,EAErFC,GAAYzH,EAAU,WAAYoH,GAAmBpH,CAAS,CAAC,CACjE,CCtCA;AAAA;AAAA;AAAA;AAAA,GAQO,MAAM0H,GAAsBC,GACjC,cAAuCA,CAAW,CAChD,WAAW,YAAa,CACtB,MAAO,CAkBL,OAAQ,CACN,KAAM,OACN,SAAU,EACpB,CACA,CACI,CAEA,WAAW,oBAAqB,CAC9B,MAAO,CAAC,GAAG,MAAM,mBAAoB,OAAO,CAC9C,CAGA,yBAAyBjQ,EAAMkQ,EAAUC,EAAU,CACjD,MAAM,yBAAyBnQ,EAAMkQ,EAAUC,CAAQ,EAEnDnQ,IAAS,SACX,KAAK,WAAWmQ,CAAQ,CAE5B,CACJ,EChDA;AAAA;AAAA;AAAA;AAAA,GAwBA,MAAMC,GAAgB,GAKhBC,GAAoB,IAAI,IAKxBC,GAAmB,IAAI,IAO7B,SAASC,GAAejB,EAAc,CACpC,OAAOA,GAAgB,OAAO,UAAU,eAAe,KAAKA,EAAc,UAAU,CACtF,CAOA,SAASkB,GAAUC,EAAS,CAC1B,OAAOF,GAAe,eAAe,IAAIE,CAAO,CAAC,CACnD,CAQA,SAASC,GAAcC,EAAS,GAAI,CAClC,MAAO,CAACA,CAAM,EAAE,KAAK,GAAQ,EAAE,OAAQb,GACjCA,aAAiBc,GACZ,IAET,QAAQ,KAAK,uEAAuE,EAC7E,GACR,CACH,CAQA,SAASC,GAAgBC,EAAUL,EAAS,CAC1C,OAAQK,GAAY,IAAI,MAAM,GAAG,EAAE,KAAMC,GAChC,IAAI,OAAO,IAAIA,EAAc,MAAM,GAAG,EAAE,KAAK,IAAI,CAAC,IAAK,GAAG,EAAE,KAAKN,CAAO,CAChF,CACH,CAOA,SAASO,GAAWL,EAAQ,CAC1B,OAAOA,EAAO,IAAKb,GAAUA,EAAM,OAAO,EAAE,KAAK;AAAA,CAAI,CACvD,CAEA,MAAMmB,GAAW,8BAOjB,SAASC,GAAoBP,EAAQQ,EAAU,CAC7C,MAAMC,EAAU,SAAS,cAAc,OAAO,EAC9CA,EAAQ,GAAKH,GACbG,EAAQ,YAAcJ,GAAWL,CAAM,EACvCQ,EAAS,QAAQ,YAAYC,CAAO,CACtC,CAMA,SAASC,GAAqBC,EAAU,CACtC,GAAI,CAACA,EAAS,WACZ,OAGF,MAAM3B,EAAiB2B,EAAS,YAEhC,GAAIA,aAAoB1D,EAEtBiC,GAAoByB,CAAQ,MACvB,CAIL,MAAMxB,EAAQwB,EAAS,WAAW,eAAeL,EAAQ,EACnDE,EAAWxB,EAAe,UAAU,UAC1CG,EAAM,YAAcqB,EAAS,QAAQ,eAAeF,EAAQ,EAAE,WAChE,CACF,CAMA,SAASM,GAA2B5B,EAAgB,CAElDU,GAAkB,QAASmB,GAAQ,CACjC,MAAMF,EAAWE,EAAI,MAAK,EACtBF,aAAoB3B,EACtB0B,GAAqBC,CAAQ,EACnBA,GAEVjB,GAAkB,OAAOmB,CAAG,CAEhC,CAAC,CACH,CAMA,SAASC,GAAsB9B,EAAgB,CAC7C,GAAIA,EAAe,qBAAqB/B,EAEtC+B,EAAe,cAAgBA,EAAe,eAAeA,EAAe,MAAM,MAC7E,CAEL,MAAMwB,EAAWxB,EAAe,UAAU,UAC1CwB,EAAS,QAAQ,eAAeF,EAAQ,EAAE,YAAcD,GAAWrB,EAAe,kBAAkB,CACtG,CAGAW,GAAiB,QAASoB,GAAsB,CAC9C,MAAMC,EAAkB,eAAe,IAAID,CAAiB,EACxDC,IAAoBhC,GAAkBgC,EAAgB,qBAAqBhC,GAC7E8B,GAAsBE,CAAe,CAEzC,CAAC,CACH,CASA,SAASC,GAAiBjC,EAAgBgB,EAAQ,CAChD,MAAMkB,EAASlC,EAAe,SAC9B,MAAI,CAACkC,GAAU,CAAClB,EACP,GAGFkB,EAAO,KAAMC,GAClBA,EAAM,OAAO,KAAMC,GAAepB,EAAO,KAAMb,GAAUA,EAAM,UAAYiC,EAAW,OAAO,CAAC,CAClG,CACA,CAYO,SAASC,GAAelB,EAAUH,EAAQvR,EAAU,GAAI,CAC7DuR,EAASD,GAAcC,CAAM,EAEzB,OAAO,QAAU,OAAO,OAAO,aACjC,OAAO,OAAO,aAAa,eAAeG,EAAUH,EAAQvR,CAAO,EAEnEgR,GAAc,KAAK,CACjB,SAAAU,EACA,OAAAH,EACA,QAASvR,EAAQ,QACjB,SAAUA,EAAQ,QACxB,CAAK,EAGC0R,GAEFR,GAAiB,QAASG,GAAY,CACpC,GAAII,GAAgBC,EAAUL,CAAO,GAAKD,GAAUC,CAAO,EAAG,CAC5D,MAAMd,EAAiB,eAAe,IAAIc,CAAO,EAE7CmB,GAAiBjC,EAAgBgB,CAAM,EAEzC,QAAQ,KAAK,6CAA6CF,CAAO,EAAE,GAC1D,CAAC,OAAO,QAAU,CAAC,OAAO,OAAO,oCAE1C,QAAQ,KACN,sCAAsCA,CAAO,+PAKzD,EAIQgB,GAAsB9B,CAAc,EAEpC4B,GAA2B5B,CAAc,CAC3C,CACF,CAAC,CAEL,CAOA,SAASsC,IAAe,CACtB,OAAI,OAAO,QAAU,OAAO,OAAO,aAC1B,OAAO,OAAO,aAAa,aAAY,EAEzC7B,EACT,CAQA,SAAS8B,GAAmBC,EAAa,GAAI,CAC3C,IAAIC,EAAkB,EACtB,OAAID,EAAW,WAAW,OAAO,GAAKA,EAAW,WAAW,WAAW,EACrEC,EAAkB,EACTD,EAAW,WAAW,SAAS,IACxCC,EAAkB,GAEbA,CACT,CAOA,SAASC,GAAkBP,EAAO,CAChC,MAAMQ,EAAiB,GACvB,OAAIR,EAAM,SACR,GAAG,OAAOA,EAAM,OAAO,EAAE,QAASS,GAAoB,CACpD,MAAMC,EAAgBP,GAAY,EAAG,KAAMnV,GAAMA,EAAE,WAAayV,CAAe,EAC3EC,EACFF,EAAe,KAAK,GAAGD,GAAkBG,CAAa,EAAG,GAAGA,EAAc,MAAM,EAEhF,QAAQ,KAAK,qBAAqBD,CAAe,8BAA8B,CAEnF,EAAGT,EAAM,MAAM,EAEVQ,CACT,CAQA,SAASG,GAAUhC,EAAS,CAC1B,MAAMiC,EAAoB,GAAGjC,CAAO,iBAE9BoB,EAASI,GAAY,EAExB,OAAQH,GAAUA,EAAM,WAAaY,GAAqB7B,GAAgBiB,EAAM,SAAUrB,CAAO,CAAC,EAClG,IAAKqB,IAAW,CACf,GAAGA,EAEH,OAAQ,CAAC,GAAGO,GAAkBP,CAAK,EAAG,GAAGA,EAAM,MAAM,EAErD,gBAAiBI,GAAmBJ,EAAM,QAAQ,CACxD,EAAM,EAED,KAAK,CAACa,EAAQC,IAAWA,EAAO,gBAAkBD,EAAO,eAAe,EAE3E,OAAId,EAAO,OAAS,EACXA,EAGFI,GAAY,EAAG,OAAQH,GAAUA,EAAM,WAAaY,CAAiB,CAC9E,CAMO,MAAMG,GAAiB5C,GAC5B,cAAkCD,GAAmBC,CAAU,CAAE,CAC/D,aAAc,CACZ,MAAK,EAELI,GAAkB,IAAI,IAAI,QAAQ,IAAI,CAAC,CACzC,CAMA,OAAO,UAAW,CAQhB,GAPA,MAAM,SAAQ,EAEV,KAAK,IACPC,GAAiB,IAAI,KAAK,EAAE,EAI1B,KAAK,cACP,OAGF,MAAMa,EAAW,KAAK,UAAU,UAC5B,CAACA,GAAYZ,GAAe,IAAI,GAIpCW,GAAoB,KAAK,iBAAgB,EAAIC,CAAQ,CACvD,CAOA,OAAO,eAAeR,EAAQ,CAG5B,YAAK,WAAaA,EAAS,CAACA,CAAM,EAAE,KAAK,GAAQ,EAAI,GAIrD,KAAK,YAAc,KAAK,iBAAgB,EAGjC,CAAC,GAAG,KAAK,WAAY,GAAG,KAAK,WAAW,CACjD,CAOA,OAAO,kBAAmB,CACxB,MAAMmC,EAAmB7C,EAAW,UAAY,GAC1C/L,EAAS,OAAO,eAAe,KAAK,SAAS,EAC7C6O,GAAmB7O,EAASA,EAAO,YAAY,SAAW,KAAO,GACvE,KAAK,SAAW,CAAC,GAAG4O,EAAkB,GAAGC,EAAiB,GAAGN,GAAU,KAAK,EAAE,CAAC,EAC/E,MAAMO,EAAc,KAAK,SAAS,QAASlB,GAAUA,EAAM,MAAM,EAEjE,OAAOkB,EAAY,OAAO,CAAClD,EAAOxQ,IAAUA,IAAU0T,EAAY,YAAYlD,CAAK,CAAC,CACtF,CACJ,ECjYA;AAAA;AAAA;AAAA;AAAA,GAaO,MAAMmD,GAAuB,CAACtE,KAAOgC,IAAW,CACrD,MAAMuC,EAAW,SAAS,cAAc,OAAO,EAC/CA,EAAS,GAAKvE,EACduE,EAAS,YAAcvC,EACpB,IAAKb,GAAUA,EAAM,SAAQ,CAAE,EAC/B,KAAK;AAAA,CAAI,EACT,QAAQ,QAAS,MAAM,EAE1B,SAAS,KAAK,sBAAsB,aAAcoD,CAAQ,CAC5D,ECpBaC,GAAsB,CAACxE,KAAOgC,IAAW,CACpDsC,GAAqB,QAAQtE,CAAE,GAAIgC,CAAM,CAC3C,ECJA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMyC,GAAYjF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAuFlBgF,GAAoB,cAAeC,EAAS,EAE5C,MAAMC,GAAQlF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAwHd6D,GAAe,GAAIqB,GAAO,CAAE,SAAU,YAAY,CAAE,EC1NpD;AAAA;AAAA;AAAA;AAAA,GASA,MAAMC,GAASnF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAiBfgF,GAAoB,eAAgBG,EAAM,EC1B1C;AAAA;AAAA;AAAA;AAAA,GASA,MAAMC,GAAUpF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAyBhBgF,GAAoB,gBAAiBI,EAAO,EClC5C;AAAA;AAAA;AAAA;AAAA,GASA,MAAMzD,GAAQ3B;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAsBEA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAqFhBgF,GAAoB,cAAerD,EAAK,ECpHxC;AAAA;AAAA;AAAA;AAAA,GASA,MAAM0D,GAAOrF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAsBPsF,GAAatF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EA8FnB6D,GAAe,GAAIyB,GAAY,CAAE,SAAU,iBAAiB,CAAE,EAC9DN,GAAoB,mBAAoBK,EAAI,ECvH5C,MAAME,GAASvF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAqRf6D,GAAe,gBAAiB0B,GAAQ,CAAE,SAAU,aAAa,CAAE,EC5RnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAmBA,OAAO,0BAA4B,SAASjR,EAAMkR,EAAK,CACrD,OAAOlR,CACT,ECrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,IAAImR,GAAa,sBACbC,GAAU,+BACVC,GACAC,EAYG,SAASC,GAAW3P,EAAK4P,EAAS,CAIvC,GAHI5P,GAAOwP,GAAQ,KAAKxP,CAAG,GAGvBA,IAAQ,KACV,OAAOA,EAGT,GAAIyP,KAAe,OAAW,CAC5BA,GAAa,GACb,GAAI,CACF,MAAM1H,EAAI,IAAI,IAAI,IAAK,UAAU,EACjCA,EAAE,SAAW,QACb0H,GAAc1H,EAAE,OAAS,gBAC3B,MAAY,CAEZ,CACF,CAIA,GAHK6H,IACHA,EAAU,SAAS,SAAW,OAAO,SAAS,MAE5CH,GACF,GAAI,CACF,OAAQ,IAAI,IAAIzP,EAAK4P,CAAO,EAAG,IACjC,MAAY,CAEV,OAAO5P,CACT,CAGF,OAAK0P,IACHA,EAAa,SAAS,eAAe,mBAAmB,MAAM,EAC9DA,EAAW,KAAOA,EAAW,cAAc,MAAM,EACjDA,EAAW,KAAK,YAAYA,EAAW,IAAI,EAC3CA,EAAW,OAASA,EAAW,cAAc,GAAG,EAChDA,EAAW,KAAK,YAAYA,EAAW,MAAM,GAE/CA,EAAW,KAAK,KAAOE,EACvBF,EAAW,OAAO,KAAO1P,EAClB0P,EAAW,OAAO,MAAQ1P,CAEnC,CAUO,SAAS6P,GAAWC,EAASF,EAAS,CAC3C,OAAOE,EAAQ,QAAQP,GAAY,SAASjU,EAAGyU,EAAK/P,EAAKgQ,EAAM,CAC7D,OAAOD,EAAM,IACXJ,GAAW3P,EAAI,QAAQ,QAAS,EAAE,EAAG4P,CAAO,EAC5C,IAAOI,CACX,CAAC,CACH,CASO,SAASC,GAAYjQ,EAAK,CAC/B,OAAOA,EAAI,UAAU,EAAGA,EAAI,YAAY,GAAG,EAAI,CAAC,CAClD,CC9FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWO,MAAMkQ,GAAY,CAAE,OAAO,UAAa,CAAE,OAAO,SAAS,MACnB,CAAC,OAAO,UAAY,OAAO,SAAS,UAE3E,MAAMC,GAA8BD,IACtC,uBAAwB,SAAS,WACjC,gBAAiB,cAAc,YAE/B,IAAM,CACL,GAAI,CACF,MAAME,EAAQ,IAAI,cAClBA,EAAM,YAAY,EAAE,EACpB,MAAMlX,EAAO,SAAS,cAAc,KAAK,EACzC,OAAAA,EAAK,aAAa,CAAC,KAAM,MAAM,CAAC,EAChCA,EAAK,WAAW,mBAAqB,CAACkX,CAAK,EACnClX,EAAK,WAAW,mBAAmB,CAAC,IAAMkX,CACpD,MAAW,CACT,MAAO,EACT,CACF,GAAC,EAUE,IAAIC,GAAW,OAAO,SAAW,OAAO,QAAQ,UACrDJ,GAAY,SAAS,SAAW,OAAO,SAAS,IAAI,EA4B3CK,GACT,OAAO,SAAW,OAAO,QAAQ,kBAAoB,OA6BrD,OAAO,SAAW,OAAO,QAAQ,wBAkB5B,IAAIC,GACT,OAAO,SAAW,OAAO,QAAQ,sBAAwB,GAmBhDC,GACT,OAAO,SAAW,OAAO,QAAQ,4BAA8B,GAoBtDC,GACT,OAAO,SAAW,OAAO,QAAQ,qBAAuB,GAiB/CC,GACT,OAAO,SAAW,OAAO,QAAQ,gBAAkB,GAgB1CC,GACT,OAAO,SAAW,OAAO,QAAQ,mBAAqB,GAmB7CC,GACT,OAAO,SAAW,OAAO,QAAQ,iBAAmB,GAkB3CC,GACT,OAAO,SAAW,OAAO,QAAQ,iBAAmB,GAqC3CC,GACT,OAAO,SAAW,OAAO,QAAQ,uBAAyB,GAsBjDC,GAAY,OAAO,SAAW,OAAO,QAAQ,WAAa,GAmBnE,OAAO,SAAW,OAAO,QAAQ,8BAmBjC,OAAO,SAAW,OAAO,QAAQ,2BAiB5B,IAAIC,GACT,OAAO,SAAW,OAAO,QAAQ,mCAAqC,GC5VxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYA,IAAIC,GAAW,EAwBR,MAAMC,GAAgB,SAASC,EAAO,CAC3C,IAAIC,EAAkDD,EAAO,oBACxDC,IACHA,EAAoB,IAAI,QACMD,EAAO,oBAAsBC,GAG7D,IAAIC,EAAgBJ,KACpB,SAASC,EAAcjR,EAAM,CAC3B,IAAIqR,EAAwCrR,EAAM,WAClD,GAAIqR,GAAWA,EAAQD,CAAa,EAClC,OAAOpR,EAET,IAAIsR,EAAMH,EACNI,EAAWD,EAAI,IAAItR,CAAI,EAC3B,GAAI,CAACuR,EAAU,CACbA,EAAoCL,EAAOlR,CAAI,EAC/CsR,EAAI,IAAItR,EAAMuR,CAAQ,EAItB,IAAIC,EAAW,OAAO,OAAqCD,EAAU,YAAcF,GAAW,IAAI,EAClGG,EAASJ,CAAa,EAAI,GACIG,EAAU,WAAaC,CACvD,CACA,OAAOD,CACT,CAEA,OAAON,CACT,ECjEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcA,IAAIQ,GAAU,GACVC,GAAY,GAQhB,SAASC,GAAUtH,EAAIuH,EAAQ,CAI7BH,GAAQpH,CAAE,EAAIqH,GAAUrH,EAAG,YAAW,CAAE,EAAIuH,CAC9C,CAOA,SAASC,GAAWxH,EAAI,CACtB,OAAOoH,GAAQpH,CAAE,GAAKqH,GAAUrH,EAAG,YAAW,CAAE,CAClD,CAEA,SAASyH,GAA0BC,EAAM,CACnCA,EAAK,cAAc,OAAO,GAC5B,QAAQ,KAAK,2CAA4CA,EAAK,EAAE,CAEpE,CA2BO,MAAMC,WAAkB,WAAY,CAGzC,WAAW,oBAAqB,CAAE,MAAO,CAAC,IAAI,CAAG,CAajD,OAAO,OAAO3H,EAAI4H,EAAU,CAC1B,GAAI5H,EAAI,CACN,IAAIhP,EAAIwW,GAAWxH,CAAE,EACrB,OAAIhP,GAAK4W,EACA5W,EAAE,cAAc4W,CAAQ,EAE1B5W,CACT,CACA,OAAO,IACT,CAWA,yBAAyBK,EAAMwW,EAAKvb,EAAOwb,EAAW,CAChDD,IAAQvb,GACV,KAAK,SAAQ,CAEjB,CAcA,IAAI,WAAY,CAEd,GAAI,CAAC,KAAK,YAAa,CAGrB,MAAMyb,EAAQ,OAAO,aAAe,YAAY,iBAC9C,YAAY,iBAAiB,IAAI,GAAK,SAAW,KAAK,cAClDrS,EAAM2P,GACV,KAAK,aAAa,WAAW,GAAK,GAAI0C,EAAM,OAAO,EACrD,KAAK,YAAcpC,GAAYjQ,CAAG,CACpC,CACA,OAAO,KAAK,WACd,CASA,SAASsK,EAAI,CAEX,GADAA,EAAKA,GAAM,KAAK,GACZA,EAAI,CAGN,GAAIiG,IAAwBuB,GAAWxH,CAAE,IAAM,OAC7C,MAAAsH,GAAUtH,EAAI,IAAI,EACZ,IAAI,MAAM,oCAAoCA,CAAE,gBAAgB,EAExE,KAAK,GAAKA,EACVsH,GAAUtH,EAAI,IAAI,EAClByH,GAA0B,IAAI,CAChC,CACF,CACF,CAEAE,GAAU,UAAU,QAAaP,GAEjC,eAAe,OAAO,aAAcO,EAAS,ECnK7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBA,MAAMK,GAA6B,8BAC7BC,GAAe,UACfC,GAAsB,iBAM5B,SAASC,GAAaC,EAAU,CAC9B,OAAiCT,GAAU,OAAOS,CAAQ,CAC5D,CAEA,SAASC,GAAeC,EAAW,CAIjC,IAAIC,EAAYD,EAAU,KAAOA,EAAU,KAAOA,EAClD,MAAME,EAAYjD,GAAWgD,EAAU,YACrCD,EAAU,OAAO,EACbnH,EAAQ,SAAS,cAAc,OAAO,EAC5C,OAAAA,EAAM,YAAcqH,EACbrH,CACT,CAcO,SAASsH,GAAkBC,EAAW,CAC5C,MAAMtB,EAAUsB,EAAU,KAAI,EAAG,MAAM,KAAK,EACtC1G,EAAS,GACf,QAAShT,EAAE,EAAGA,EAAIoY,EAAQ,OAAQpY,IAChCgT,EAAO,KAAK,GAAG2G,GAAiBvB,EAAQpY,CAAC,CAAC,CAAC,EAE7C,OAAOgT,CACR,CAWO,SAAS2G,GAAiBP,EAAU,CACzC,MAAMpX,EAAImX,GAAaC,CAAQ,EAE/B,GAAI,CAACpX,EACH,eAAQ,KAAK,4CAA6CoX,CAAQ,EAC3D,GAGT,GAAIpX,EAAE,UAAY,OAAW,CAC3B,MAAMgR,EAAS,GAEfA,EAAO,KAAK,GAAG4G,GAAyB5X,CAAC,CAAC,EAE1C,MAAMwR,EACFxR,EAAE,cAAc,UAAU,EAC1BwR,GACFR,EAAO,KAAK,GAAG6G,GAAmBrG,EACKxR,EAAG,SAAS,CAAC,EAGtDA,EAAE,QAAUgR,CACd,CAEA,OAAOhR,EAAE,OACX,CASO,SAAS6X,GAAmBrG,EAAU8C,EAAS,CACpD,GAAI,CAAC9C,EAAS,QAAS,CACrB,MAAMR,EAAS,GAET8G,EAAKtG,EAAS,QAAQ,iBAAiB,OAAO,EACpD,QAAS,EAAE,EAAG,EAAIsG,EAAG,OAAQ,IAAK,CAChC,IAAIlb,EAAIkb,EAAG,CAAC,EAGRC,EAAUnb,EAAE,aAAaqa,EAAY,EACrCc,GACF/G,EAAO,KAAK,GAAGyG,GAAkBM,CAAO,EAAE,OAAO,SAAS9T,EAAMtE,EAAOqY,EAAM,CAC3E,OAAOA,EAAK,QAAQ/T,CAAI,IAAMtE,CAChC,CAAC,CAAC,EAEA2U,IACF1X,EAAE,YACE2X,GAAW3X,EAAE,YAAoC0X,CAAO,GAE9DtD,EAAO,KAAKpU,CAAC,CACf,CACA4U,EAAS,QAAUR,CACrB,CACA,OAAOQ,EAAS,OAClB,CAQO,SAASyG,GAAwBb,EAAU,CACjD,IAAIpX,EAAImX,GAAaC,CAAQ,EAC7B,OAAOpX,EAAI4X,GAAyB5X,CAAC,EAAI,EAC1C,CAMA,SAAS4X,GAAyBrB,EAAQ,CACxC,MAAMvF,EAAS,GACTkH,EAAK3B,EAAO,iBAAiBS,EAA0B,EAC7D,QAAShZ,EAAE,EAAGA,EAAIka,EAAG,OAAQla,IAAK,CAChC,IAAIuO,EAAI2L,EAAGla,CAAC,EACZ,GAAIuO,EAAE,OAAQ,CACZ,MAAM+K,EAAY/K,EAAE,OACd4L,EAAW5L,EAAE,aAAa2K,EAAmB,EACnD,GAAIiB,GAAY,CAACb,EAAU,eAAgB,CACzC,MAAMnH,EAAQkH,GAAeC,CAAS,EACtCnH,EAAM,aAAa+G,GAAqB,EAAE,EAC1CI,EAAU,eAAiBnH,CAC7B,MAAYmH,EAAU,SACpBA,EAAU,OAASD,GAAeC,CAAS,GAE7CtG,EAAO,KAAKmH,EAAWb,EAAU,eAAiBA,EAAU,MAAM,CACpE,CACF,CACA,OAAOtG,CACT,CCvKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBO,MAAMoH,EAAQ,OAAO,UAAe,OAAO,SAAY,SAAc,OAAO,SAAY,KAC7F,OAAO,SAAY,KAClB,OAAO,SAAelM,GAAM,SAAS,MAASA,CAAC,EAAKA,GAAMA,ECtB7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8BO,SAASmM,GAAOta,EAAM,CAC3B,OAAOA,EAAK,QAAQ,GAAG,GAAK,CAC9B,CAeO,SAASua,EAAKva,EAAM,CACzB,IAAIwa,EAAWxa,EAAK,QAAQ,GAAG,EAC/B,OAAIwa,IAAa,GACRxa,EAEFA,EAAK,MAAM,EAAGwa,CAAQ,CAC/B,CAkBO,SAASC,GAAW7T,EAAM5G,EAAM,CAErC,OAAO4G,EAAK,QAAQ5G,EAAO,GAAG,IAAM,CACtC,CAiBO,SAAS0a,GAAa9T,EAAM5G,EAAM,CAEvC,OAAOA,EAAK,QAAQ4G,EAAO,GAAG,IAAM,CACtC,CAmBO,SAAS+T,GAAU/T,EAAMgU,EAAS5a,EAAM,CAC7C,OAAO4a,EAAU5a,EAAK,MAAM4G,EAAK,MAAM,CACzC,CA2BO,SAASiU,GAAU7a,EAAM,CAC9B,GAAI,MAAM,QAAQA,CAAI,EAAG,CACvB,IAAI6D,EAAQ,GACZ,QAAS5D,EAAE,EAAGA,EAAED,EAAK,OAAQC,IAAK,CAChC,IAAI0J,EAAO3J,EAAKC,CAAC,EAAE,SAAQ,EAAG,MAAM,GAAG,EACvC,QAASsD,EAAE,EAAGA,EAAEoG,EAAK,OAAQpG,IAC3BM,EAAM,KAAK8F,EAAKpG,CAAC,CAAC,CAEtB,CACA,OAAOM,EAAM,KAAK,GAAG,CACvB,KACE,QAAO7D,CAEX,CAiBO,SAAS8a,GAAM9a,EAAM,CAC1B,OAAI,MAAM,QAAQA,CAAI,EACb6a,GAAU7a,CAAI,EAAE,MAAM,GAAG,EAE3BA,EAAK,WAAW,MAAM,GAAG,CAClC,CAaO,SAAS+a,EAAIR,EAAMva,EAAMgb,EAAM,CACpC,IAAIjW,EAAOwV,EACP1W,EAAQiX,GAAM9a,CAAI,EAEtB,QAASC,EAAE,EAAGA,EAAE4D,EAAM,OAAQ5D,IAAK,CACjC,GAAI,CAAC8E,EACH,OAEF,IAAIkW,EAAOpX,EAAM5D,CAAC,EAClB8E,EAAOA,EAAKkW,CAAI,CAClB,CACA,OAAID,IACFA,EAAK,KAAOnX,EAAM,KAAK,GAAG,GAErBkB,CACT,CAWO,SAASmW,GAAIX,EAAMva,EAAMzC,EAAO,CACrC,IAAIwH,EAAOwV,EACP1W,EAAQiX,GAAM9a,CAAI,EAClBmb,EAAOtX,EAAMA,EAAM,OAAO,CAAC,EAC/B,GAAIA,EAAM,OAAS,EAAG,CAEpB,QAAS5D,EAAE,EAAGA,EAAE4D,EAAM,OAAO,EAAG5D,IAAK,CACnC,IAAIgb,EAAOpX,EAAM5D,CAAC,EAElB,GADA8E,EAAOA,EAAKkW,CAAI,EACZ,CAAClW,EACH,MAEJ,CAEAA,EAAKoW,CAAI,EAAI5d,CACf,MAEEwH,EAAK/E,CAAI,EAAIzC,EAEf,OAAOsG,EAAM,KAAK,GAAG,CACvB,CC5OA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,MAAMuX,GAAU,GACVC,GAAgB,UAChBC,GAAgB,WAcf,SAASjK,GAAgBC,EAAM,CACpC,OAAO8J,GAAQ9J,CAAI,IACjB8J,GAAQ9J,CAAI,EAAIA,EAAK,QAAQ,GAAG,EAAI,EAAIA,EAAOA,EAAK,QAAQ+J,GACzDpZ,GAAMA,EAAE,CAAC,EAAE,YAAW,CAC7B,EAEA,CASO,SAASsZ,GAAgBC,EAAO,CACrC,OAAOJ,GAAQI,CAAK,IAClBJ,GAAQI,CAAK,EAAIA,EAAM,QAAQF,GAAe,KAAK,EAAE,YAAW,EAEpE,CC9CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBA,IAAIG,GAAsB,EACtBC,GAAsB,EACtBC,GAAqB,GACrBC,GAAuB,EACvBC,GAAqB,GACrBC,GAAgB,SAAS,eAAe,EAAE,EAC9C,IAAI,OAAO,iBAAiBC,EAAc,EAAE,QAAQD,GAAe,CAAC,cAAe,EAAI,CAAC,EAExF,SAASC,IAAiB,CACxBF,GAAqB,GACrB,MAAMG,EAAML,GAAmB,OAC/B,QAAS1b,EAAI,EAAGA,EAAI+b,EAAK/b,IAAK,CAC5B,IAAIkI,EAAKwT,GAAmB1b,CAAC,EAC7B,GAAIkI,EACF,GAAI,CACFA,EAAE,CACJ,OAAStJ,EAAG,CACV,WAAW,IAAM,CAAE,MAAMA,CAAG,CAAC,CAC/B,CAEJ,CACA8c,GAAmB,OAAO,EAAGK,CAAG,EAChCN,IAAuBM,CACzB,CA+HA,MAAMC,GAAY,CAShB,IAAIvS,EAAU,CACZ,OAAKmS,KACHA,GAAqB,GACrBC,GAAc,YAAcF,MAE9BD,GAAmB,KAAKjS,CAAQ,EACzB+R,IACT,EASA,OAAOS,EAAQ,CACb,MAAMC,EAAMD,EAASR,GACrB,GAAIS,GAAO,EAAG,CACZ,GAAI,CAACR,GAAmBQ,CAAG,EACzB,MAAM,IAAI,MAAM,yBAA2BD,CAAM,EAEnDP,GAAmBQ,CAAG,EAAI,IAC5B,CACF,CAEF,EClNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBA,MAAMC,GAAYH,GAuBLI,GAAoBxE,GAM5BtF,GAAe,CAQlB,MAAM8J,UAA0B9J,CAAW,CASzC,OAAO,iBAAiB+J,EAAO,CAC7B,MAAMC,EAAQ,KAAK,UACnB,QAASxX,KAAQuX,EAETvX,KAAQwX,GACZA,EAAM,wBAAwBxX,CAAI,CAGxC,CAYA,OAAO,yBAAyByX,EAAU,CACxC,OAAOA,EAAS,YAAW,CAC7B,CAUA,OAAO,gBAAgBla,EAAM,CAAE,CAmB/B,wBAAwBka,EAAUC,EAAU,CAC1C,KAAK,2BAA2BD,CAAQ,EACnC,KAAK,eAAe,0BAA0B,oBAAqB,IAAI,CAAC,IAC3E,KAAK,kBAAoB,OAAO,OAAO,GAAI,KAAK,iBAAiB,GAE9D,KAAK,kBAAkBA,CAAQ,IAClC,KAAK,kBAAkBA,CAAQ,EAAI,GACnC,KAAK,wBAAwBA,EAAUC,CAAQ,EAEnD,CAUA,2BAA2BD,EAAU,CAC9B,KAAK,eAAe,0BAA0B,mBAAoB,IAAI,CAAC,IAC1E,KAAK,iBAAmB,OAAO,OAAO,GAAI,KAAK,gBAAgB,GAQjE,IAAIE,EAAO,KAAK,iBAAiBF,CAAQ,EACzC,OAAKE,IACHA,EAAO,KAAK,YAAY,yBAAyBF,CAAQ,EACzD,KAAK,iBAAiBE,CAAI,EAAIF,GAEzBE,CACT,CASC,wBAAwBF,EAAUC,EAAU,CAC3C,OAAO,eAAe,KAAMD,EAAU,CAGpC,KAAM,CAEJ,OAAO,KAAK,OAAOA,CAAQ,CAC7B,EAEA,IAAKC,EAAW,UAAY,CAAC,EAAI,SAAUlf,EAAO,CAE5C,KAAK,oBAAoBif,EAAUjf,EAAO,EAAI,GAChD,KAAK,sBAAqB,CAE9B,CAER,CAAO,CACH,CAEA,aAAc,CACZ,MAAK,EAEL,KAAK,cAAgB,GACrB,KAAK,YAAc,GACnB,KAAK,cAAgB,GACrB,KAAK,OAAS,GACd,KAAK,cAAgB,KACrB,KAAK,UAAY,KACjB,KAAK,oBAAsB,KAG3B,KAAK,cAAgB,EACrB,KAAK,cAAgB,GACrB,KAAK,sBAAqB,CAC5B,CAiBA,OAAQ,CACN,KAAK,YAAc,GACnB,KAAK,iBAAgB,CACvB,CAYA,uBAAwB,CAItB,QAASiR,KAAK,KAAK,kBACb,KAAK,eAAeA,CAAC,IACvB,KAAK,oBAAsB,KAAK,qBAAuB,GACvD,KAAK,oBAAoBA,CAAC,EAAI,KAAKA,CAAC,EACpC,OAAO,KAAKA,CAAC,EAGnB,CAgBA,8BAA8B8N,EAAO,CACnC,OAAO,OAAO,KAAMA,CAAK,CAC3B,CAYA,aAAaE,EAAUjf,EAAO,CACxB,KAAK,oBAAoBif,EAAUjf,CAAK,GAC1C,KAAK,sBAAqB,CAE9B,CASA,aAAaif,EAAU,CACrB,OAAO,KAAK,OAAOA,CAAQ,CAC7B,CAgBA,oBAAoBA,EAAUjf,EAAOof,EAAK,CACxC,IAAI7D,EAAM,KAAK,OAAO0D,CAAQ,EAC1BI,EAAU,KAAK,sBAAsBJ,EAAUjf,EAAOub,CAAG,EAC7D,OAAI8D,IACG,KAAK,gBACR,KAAK,cAAgB,GACrB,KAAK,UAAY,IAGf,KAAK,WAAa,EAAEJ,KAAY,KAAK,aACvC,KAAK,UAAUA,CAAQ,EAAI1D,GAE7B,KAAK,OAAO0D,CAAQ,EAAIjf,EACxB,KAAK,cAAcif,CAAQ,EAAIjf,GAE1Bqf,CACT,CAOA,mBAAmBJ,EAAU,CAC3B,MAAO,CAAC,EAAE,KAAK,eAAiB,KAAK,cAAc,eAAeA,CAAQ,EAC5E,CAUA,uBAAwB,CAClB,CAAC,KAAK,eAAiB,KAAK,cAC9B,KAAK,cAAgB,GACrBJ,GAAU,IAAI,IAAM,CACd,KAAK,gBACP,KAAK,cAAgB,GACrB,KAAK,iBAAgB,EAEzB,CAAC,EAEL,CAcA,mBAAoB,CACb,KAAK,gBACR,KAAK,cAAgB,GACjB,KAAK,sBACP,KAAK,8BAA8B,KAAK,mBAAmB,EAC3D,KAAK,oBAAsB,MAE7B,KAAK,MAAK,EAEd,CAYA,kBAAmB,CACjB,KAAK,gBACL,MAAME,EAAQ,KAAK,OACbO,EAAe,KAAK,cACpB/D,EAAM,KAAK,UACb,KAAK,wBAAwBwD,EAAOO,EAAc/D,CAAG,IACvD,KAAK,cAAgB,KACrB,KAAK,UAAY,KACjB,KAAK,mBAAmBwD,EAAOO,EAAc/D,CAAG,GAElD,KAAK,eACP,CAeA,wBAAwBgE,EAAcD,EAAcE,EAAU,CAC5D,MAAO,EAAQF,CACjB,CAeA,mBAAmBC,EAAcD,EAAcE,EAAU,CACzD,CAqBA,sBAAsBP,EAAUjf,EAAOub,EAAK,CAC1C,OAEGA,IAAQvb,IAENub,IAAQA,GAAOvb,IAAUA,EAEhC,CAcA,yBAAyB+E,EAAMwW,EAAKvb,EAAOwb,EAAW,CAChDD,IAAQvb,GACV,KAAK,qBAAqB+E,EAAM/E,CAAK,EAEnC,MAAM,0BACR,MAAM,yBAAyB+E,EAAMwW,EAAKvb,EAAOwb,CAAS,CAE9D,CAeA,qBAAqBiE,EAAWzf,EAAOyB,EAAM,CAC3C,GAAI,CAAC,KAAK,cAAe,CACvB,MAAMkZ,EAAM,KAAK,iBACXsE,EAAWtE,GAAOA,EAAI8E,CAAS,GAAKA,EAC1C,KAAKR,CAAQ,EAAI,KAAK,kBAAkBjf,EAAOyB,GAC7C,KAAK,YAAY,gBAAgBwd,CAAQ,CAAC,CAC9C,CACF,CAaA,qBAAqBA,EAAUQ,EAAWzf,EAAO,CAC/C,KAAK,cAAgB,GACrBA,EAAS,UAAU,OAAS,EAAK,KAAKif,CAAQ,EAAIjf,EAClD,KAAK,sBAAkD,KAAOA,EAC5Dyf,GAAa,KAAK,YAAY,yBAAyBR,CAAQ,CAAC,EAClE,KAAK,cAAgB,EACvB,CAgBA,sBAAsBS,EAAM1f,EAAOyf,EAAW,CAC5C,MAAMvb,EAAM,KAAK,gBAAgBlE,CAAK,GAClCyf,IAAc,SAAWA,IAAc,QAAUA,IAAc,UACjEC,EAA+B5C,EAAK4C,CAAI,GAEtCxb,IAAQ,OACVwb,EAAK,gBAAgBD,CAAS,EAE9BC,EAAK,aACDD,EAGCvb,IAAQ,IAAM,OAAO,aACA,OAAO,aAAa,YACtCA,CAAG,CAEf,CAcA,gBAAgBlE,EAAO,CACrB,OAAQ,OAAOA,EAAK,CAClB,IAAK,UACH,OAAOA,EAAQ,GAAK,OACtB,QACE,OAAOA,GAAS,KAAOA,EAAM,SAAQ,EAAK,MACpD,CACI,CAeA,kBAAkBA,EAAOyB,EAAM,CAC7B,OAAQA,EAAI,CACV,KAAK,QACH,OAAQzB,IAAU,KACpB,KAAK,OACH,OAAO,OAAOA,CAAK,EACrB,QACE,OAAOA,CACjB,CACI,CAEJ,CAEE,OAAO8e,CACT,CAAC,EC/kBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBA,MAAMa,GAAmB,GACzB,IAAIX,GAAQ,YAAY,UACxB,KAAOA,IAAO,CACZ,IAAID,EAAQ,OAAO,oBAAoBC,EAAK,EAC5C,QAAStc,EAAE,EAAGA,EAAEqc,EAAM,OAAQrc,IAC5Bid,GAAiBZ,EAAMrc,CAAC,CAAC,EAAI,GAE/Bsc,GAAQ,OAAO,eAAeA,EAAK,CACrC,CAEA,MAAMY,GACC,OAAO,aAGJ5Y,GAAQ,aAAa,OAAOA,CAAG,GACjC,aAAa,SAASA,CAAG,GAAK,aAAa,YAAYA,CAAG,EAHvD,IAAM,GAoBjB,SAAS6Y,GAAkBC,EAAOb,EAAU,CAE1C,GAAI,CAACU,GAAiBV,CAAQ,EAAG,CAC/B,IAAIjf,EAAQ8f,EAAMb,CAAQ,EACtBjf,IAAU,SACR8f,EAAM,OAGRA,EAAM,oBAAoBb,EAAUjf,CAAK,GAGpC8f,EAAM,YAECA,EAAM,eAAe,0BAA0B,cAAeA,CAAK,CAAC,IAC9EA,EAAM,YAAc,OAAO,OAAOA,EAAM,WAAW,GAFnDA,EAAM,YAAc,GAItBA,EAAM,YAAYb,CAAQ,EAAIjf,GAGpC,CACF,CAmCO,MAAM+f,GAAoBzF,GAActF,GAAc,CAQ1D,MAAM3L,EAAOyV,GAAkB9J,CAAU,EAS1C,MAAM+K,UAA0B1W,CAAK,CAYnC,OAAO,+BAAgC,CACrC,IAAI2W,EAAwB,KAAM,mBAClC,QAAStd,EAAE,EAAGA,EAAIsd,EAAG,OAAQtd,IAC3B,KAAK,UAAU,wBAAwBoR,GAAgBkM,EAAGtd,CAAC,CAAC,CAAC,CAEjE,CAWA,OAAO,yBAAyBuc,EAAU,CACxC,OAAOjB,GAAgBiB,CAAQ,CACjC,CAWA,uBAAwB,CAClB,KAAK,cACP,KAAK,2BAA2B,KAAK,WAAW,EAChD,KAAK,YAAc,MAErB,MAAM,sBAAqB,CAC7B,CAgBA,2BAA2BF,EAAO,CAChC,QAAS9N,KAAK8N,EACZ,KAAK,aAAa9N,EAAG8N,EAAM9N,CAAC,CAAC,CAEjC,CAcA,iBAAiBwO,EAAWzf,EAAO,CACjC,MAAMigB,EAAiC,KAClCA,EAAG,aAAaR,CAAS,GAC5B,KAAK,sBAAsBQ,EAAIjgB,EAAOyf,CAAS,CAEnD,CAUA,gBAAgBzf,EAAO,CAErB,OAAQ,OAAOA,EAAK,CAClB,IAAK,SACH,GAAIA,aAAiB,KACnB,OAAOA,EAAM,SAAQ,EAChB,GAAIA,EAAO,CAChB,GAAI4f,GAAc5f,CAAK,EAMrB,OAAyBA,EAE3B,GAAI,CACF,OAAO,KAAK,UAAUA,CAAK,CAC7B,MAAW,CACT,MAAO,EACT,CACF,CAEF,QACE,OAAO,MAAM,gBAAgBA,CAAK,CAC5C,CACI,CAkBA,kBAAkBA,EAAOyB,EAAM,CAI7B,IAAIye,EACJ,OAAQze,EAAI,CACV,KAAK,OACH,GAAI,CACFye,EAAW,KAAK,MAA4BlgB,CAAK,CACnD,MAAW,CAETkgB,EAAWlgB,CACb,CACA,MACF,KAAK,MACH,GAAI,CACFkgB,EAAW,KAAK,MAA4BlgB,CAAK,CACnD,MAAW,CACTkgB,EAAW,KACX,QAAQ,KAAK,uDAAuDlgB,CAAK,EAAE,CAC7E,CACA,MACF,KAAK,KACHkgB,EAAW,MAAMlgB,CAAK,EAAI,OAAOA,CAAK,EAAI,OAAOA,CAAK,EACtDkgB,EAAW,IAAI,KAAKA,CAAQ,EAC5B,MACF,QACEA,EAAW,MAAM,kBAAkBlgB,EAAOyB,CAAI,EAC9C,KACV,CACM,OAAOye,CACT,CAmBA,wBAAwBjB,EAAUC,EAAU,CAC1CW,GAAkB,KAAMZ,CAAQ,EAChC,MAAM,wBAAwBA,EAAUC,CAAQ,CAClD,CASA,aAAaD,EAAU,CACrB,OAAO,KAAK,mBAAqB,KAAK,kBAAkBA,CAAQ,CAClE,CAUA,mBAAmBzX,EAAM,CACvB,MAAO,GAAQ,KAAK,eAAkBA,KAAQ,KAAK,cACrD,CAEJ,CAEE,OAAOuY,CAET,CAAC,ECvVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBA,MAAMI,GAAqB,CACzB,SAAU,GACV,aAAc,EAChB,EAEA,IAAIC,GAAuB,GACvBC,GAAiB,GAErB,SAASC,IAAoB,CAC3B,GAAI,CAACF,GAAsB,CACzBA,GAAuB,GACvB,MAAM3P,EAAI,SAAS,cAAc,UAAU,EAC3CA,EAAE,YAAc,IAChB4P,GAAiB5P,EAAE,cAAgBA,EAAE,WACvC,CACA,OAAO4P,EACT,CA4BA,SAASE,GAAeb,EAAM,CACxBY,GAAiB,GAAMZ,EAAK,YAAc,YAAcA,EAAK,aACxDA,EAAK,cAAgBA,EAAK,cACjCA,EAAK,YAAc,KAEvB,CAUA,MAAMc,IAAwC,IAAM,CAmBlD,MAAMC,EAAsC,OAAO,cAC/C,OAAO,aAAa,aAChB,0CAA2C,CACzC,aAAc9O,GAAKA,CAC/B,CAAW,EAET,MAAO,CAAC+O,EAAMpgB,EAAKyE,IAAS,CAC1B,MAAM/E,EAAQM,EAAI,aAAayE,CAAI,EAEnC,GAAI0b,GAAuC1b,EAAK,WAAW,KAAK,EAAG,CACjE2b,EAAK,aACD3b,EAAM0b,EAAoC,aAAazgB,EAAO+E,CAAI,CAAC,EACvE,MACF,CAEA2b,EAAK,aAAa3b,EAAM/E,CAAK,CAC/B,CACF,GAAC,EAED,SAAS2gB,GAAsBjB,EAAM,CACnC,IAAIkB,EAAKlB,EAAK,aAAa,IAAI,EAC/B,GAAIkB,GAAMT,GAAmBS,CAAE,EAAG,CAChC,IAAI,EAAIlB,EAKR,IAJA,EAAE,gBAAgB,IAAI,EACtBA,EAAO,EAAE,cAAc,cAAckB,CAAE,EACvC,EAAE,WAAW,aAAalB,EAAM,CAAC,EACjCA,EAAK,YAAY,CAAC,EACZ,EAAE,WAAW,QAAQ,CACzB,KAAM,CAAC,KAAA3a,CAAI,EAAI,EAAE,WAAW,CAAC,EAC7Byb,GAAqCd,EAAM,EAAG3a,CAAI,EAClD,EAAE,gBAAgBA,CAAI,CACxB,CACF,CACA,OAAO2a,CACT,CAEA,SAASmB,GAAiB7D,EAAM8D,EAAU,CAExC,IAAI7X,EAAS6X,EAAS,YAAcD,GAAiB7D,EAAM8D,EAAS,UAAU,EAE9E,GAAI7X,GAGF,QAAS,EAAEA,EAAO,WAAY,EAAE,EAAG,EAAG,EAAE,EAAE,YACxC,GAAI6X,EAAS,cAAgB,IAC3B,OAAO,MAIX,QAAO9D,CAEX,CAGA,SAAS+D,GAAa3F,EAAMT,EAAK+E,EAAMoB,EAAU,CAC3CA,EAAS,KACXnG,EAAImG,EAAS,EAAE,EAAIpB,EAEvB,CAGA,SAASsB,GAAmB5F,EAAMsE,EAAMoB,EAAU,CAChD,GAAIA,EAAS,QAAUA,EAAS,OAAO,OACrC,QAAS9a,EAAE,EAAGwW,EAAGsE,EAAS,OAAQxf,EAAI0E,EAAEwW,EAAG,SAAYlb,EAAEkb,EAAGxW,CAAC,GAAIA,IAC/DoV,EAAK,8BAA8BsE,EAAMpe,EAAE,KAAMA,EAAE,MAAO8Z,CAAI,CAGpE,CAGA,SAAS6F,GAAkB7F,EAAMsE,EAAMoB,EAAUI,EAAoB,CAC/DJ,EAAS,eAEXpB,EAAK,cAAgBoB,EAAS,aAC9BpB,EAAK,oBAAsBwB,EAE/B,CAEA,SAASC,GAAuBpf,EAASqf,EAAWC,EAAY,CAG9D,OAAAtf,EAAUA,EAAQ,aAAeA,EACnB,SAAST,EAAG,CACpBS,EAAQsf,CAAU,EACpBtf,EAAQsf,CAAU,EAAE/f,EAAGA,EAAE,MAAM,EAE/B,QAAQ,KAAK,oBAAsB+f,EAAa,eAAe,CAEnE,CAEF,CAeO,MAAMC,GAAgBhH,GAMxBtF,GAAe,CAOlB,MAAMsM,UAAsBtM,CAAW,CA8ErC,OAAO,eAAekB,EAAUqL,EAAmB,CAEjD,GAAI,CAACrL,EAAS,cAAe,CAE3B,IAAasL,EAAetL,EAAS,cAAgB,GACrDsL,EAAa,aAAe,GAC5BA,EAAa,eAAiB,EAAQD,EACtCC,EAAa,gBACVD,GAAqBA,EAAkB,iBACvCrL,EAAS,cAAgBA,EAAS,aAAa,kBAAkB,EAEnE,KAAK,sBACDA,EAAUsL,EAAgC,CAAC,OAAQ,IAAI,CAAC,CAC/D,CACA,OAAOtL,EAAS,aAClB,CAWA,OAAO,sBAAsBA,EAAUsL,EAAcV,EAAU,CAC7D,OAAO,KAAK,mBAAmB5K,EAAS,QAASsL,EAAcV,CAAQ,CACzE,CAgBA,OAAO,mBAAmBpB,EAAM8B,EAAcV,EAAU,CACtD,IAAIW,EAAQ,GACRxV,EAA+CyT,EACnD,OAAIzT,EAAQ,WAAa,YAAc,CAACA,EAAQ,aAAa,kBAAkB,EAC7EwV,EAAQ,KAAK,6BAA6BxV,EAASuV,EAAcV,CAAQ,GAAKW,EACrExV,EAAQ,YAAc,SAE/BuV,EAAa,kBAAoB,IAEnCjB,GAAetU,CAAO,EAClBA,EAAQ,YACV,KAAK,yBAAyBA,EAASuV,EAAcV,CAAQ,EAE3D7U,EAAQ,eAAiBA,EAAQ,cAAa,IAChDwV,EAAQ,KAAK,6BAA6BxV,EAASuV,EAAcV,CAAQ,GAAKW,GAMzEA,GAASX,EAAS,KAC3B,CAeA,OAAO,yBAAyB9D,EAAMwE,EAAcV,EAAU,CAC5D,GAAI,EAAA9D,EAAK,YAAc,UAAYA,EAAK,YAAc,SAGtD,QAAS0C,EAAK1C,EAAK,WAAY0E,EAAY,EAAG5c,EAAM4a,EAAMA,EAAK5a,EAAM,CAUnE,GARI4a,EAAK,WAAa,aACpBA,EAAOiB,GAAsBjB,CAAI,GAMnC5a,EAAO4a,EAAK,YACRA,EAAK,WAAa,KAAK,UAAW,CACpC,IAAgB9O,EAAI9L,EACpB,KAAO8L,GAAMA,EAAE,WAAa,KAAK,WAC/B8O,EAAK,aAAe9O,EAAE,YACtB9L,EAAO8L,EAAE,YACToM,EAAK,YAAYpM,CAAC,EAClBA,EAAI9L,EAGN,GAAI0c,EAAa,iBAAmB,CAAC9B,EAAK,YAAY,KAAI,EAAI,CAC5D1C,EAAK,YAAY0C,CAAI,EACrB,QACF,CACF,CACA,IAAIiC,EAC0B,CAAC,YAAAD,EAAa,WAAYZ,CAAQ,EAC5D,KAAK,mBAAmBpB,EAAM8B,EAAcG,CAAS,IACvDA,EAAU,UAAYH,EAAa,aAAa,KAAKG,CAAS,EAAI,GAGhEjC,EAAK,YACPgC,GAEJ,CACF,CAoBA,OAAO,6BAA6BhC,EAAM6B,EAAmBT,EAAU,CAErE,IAAI7U,EAA+CyT,EAC/C8B,EAAe,KAAK,eAAevV,EAASsV,CAAiB,EAGjE,OAFcC,EAAa,QACvBvV,EAAQ,QAAQ,cAAc,uBAAsB,GAChD,YAAYA,EAAQ,OAAO,EACnC6U,EAAS,aAAeU,EACjB,EACT,CAcA,OAAO,6BAA6B9B,EAAM8B,EAAcV,EAAU,CAGhE,IAAIW,EAAQ,GACRG,EAAQ,MAAM,KAAKlC,EAAK,UAAU,EACtC,QAAShd,EAAEkf,EAAM,OAAO,EAAG9U,EAAIA,EAAE8U,EAAMlf,CAAC,EAAIA,IAC1C+e,EAAQ,KAAK,4BAA4B/B,EAAM8B,EAAcV,EAAUhU,EAAE,KAAMA,EAAE,KAAK,GAAK2U,EAE7F,OAAOA,CACT,CAkBA,OAAO,4BAA4B/B,EAAM8B,EAAcV,EAAU/b,EAAM/E,EAAO,CAE5E,OAAI+E,EAAK,MAAM,EAAG,CAAC,IAAM,OACvB2a,EAAK,gBAAgB3a,CAAI,EACzB+b,EAAS,OAASA,EAAS,QAAU,GACrCA,EAAS,OAAO,KAAK,CACnB,KAAM/b,EAAK,MAAM,CAAC,EAClB,MAAA/E,CACV,CAAS,EACM,IAGA+E,IAAS,MAChB+b,EAAS,GAAK9gB,EACP,IAEF,EACT,CAaA,OAAO,oBAAoBkW,EAAU,CACnC,IAAIsL,EAA2DtL,EAAU,cACzE,OAAQsL,GAAgBA,EAAa,SAAYtL,EAAS,OAC5D,CA4BA,eAAeA,EAAUsL,EAAc,CAEjCtL,GAAY,CAACA,EAAS,SACtB,OAAO,qBAAuB,oBAAoB,UACpD,oBAAoB,SAASA,CAAQ,EAKvCsL,EAAeA,GAAgB,KAAK,YAAY,eAAetL,CAAQ,EACvE,IAAI4K,EAAWU,EAAa,aACxBK,EAAUL,EAAa,SAAWtL,EAAS,QAC3C4L,EAAuC,SAAS,WAAWD,EAAS,EAAI,EAE5EC,EAAI,mBAAqB,CAACN,EAAa,kBACvC,IAAI3U,EAAQiV,EAAI,SAAW,IAAI,MAAMhB,EAAS,MAAM,EACpDgB,EAAI,EAAI,GACR,QAASpf,EAAE,EAAGsO,EAAE8P,EAAS,OAAQrD,EAAO/a,EAAEsO,IAAOyM,EAAKqD,EAASpe,CAAC,GAAIA,IAAK,CACvE,IAAIgd,EAAO7S,EAAMnK,CAAC,EAAIme,GAAiBiB,EAAKrE,CAAI,EAChDsD,GAAa,KAAMe,EAAI,EAAGpC,EAAMjC,CAAI,EACpCwD,GAAkB,KAAMvB,EAAMjC,EAAM+D,CAAY,EAChDR,GAAmB,KAAMtB,EAAMjC,CAAI,CACrC,CACA,OAAAqE,EAAsCA,EAC/BA,CACT,CAgBA,8BAA8BpC,EAAM0B,EAAWC,EAAYtf,EAAS,CAClEA,EAAUA,GAAW2d,EACrB,IAAIqC,EAAUZ,GAAuBpf,EAASqf,EAAWC,CAAU,EACnE,YAAK,wBAAwB3B,EAAM0B,EAAWW,CAAO,EAC9CA,CACT,CAWA,wBAAwBrC,EAAM0B,EAAWW,EAAS,CAChDrC,EAAK,iBAAiB0B,EAAWW,CAAO,CAC1C,CAWA,6BAA6BrC,EAAM0B,EAAWW,EAAS,CACrDrC,EAAK,oBAAoB0B,EAAWW,CAAO,CAC7C,CAEJ,CAEE,OAAOT,CAET,CAAC,EC7mBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAyBA,IAAIjH,GAAW,EAEf,MAAM2H,GAAO,GAMPC,EAAQ,CACZ,QAAS,mBACT,QAAS,mBACT,OAAQ,kBACR,UAAW,qBACX,QAAS,mBACT,UAAW,YACb,EAEMC,GAAe,gBAGfC,GAAwB,QA4C9B,SAASC,GAAmBtC,EAAOre,EAAM4gB,EAAa,CACpD,IAAIC,EAAUxC,EAAMre,CAAI,EACxB,GAAI,CAAC6gB,EACHA,EAAUxC,EAAMre,CAAI,EAAI,WACf,CAACqe,EAAM,eAAere,CAAI,IACnC6gB,EAAUxC,EAAMre,CAAI,EAAI,OAAO,OAAOqe,EAAMre,CAAI,CAAC,EAC7C4gB,GACF,QAASpR,KAAKqR,EAAS,CACrB,IAAIC,EAAUD,EAAQrR,CAAC,EAEnBuR,EAASF,EAAQrR,CAAC,EAAI,MAAMsR,EAAQ,MAAM,EAC9C,QAAS7f,EAAE,EAAGA,EAAE6f,EAAQ,OAAQ7f,IAC9B8f,EAAO9f,CAAC,EAAI6f,EAAQ7f,CAAC,CAEzB,CAGJ,OAAO4f,CACT,CAiBA,SAASG,GAAWrH,EAAMkH,EAASvD,EAAOS,EAAUkD,EAAUC,EAAW,CACvE,GAAIL,EAAS,CACX,IAAIM,EAAM,GACV,MAAMlP,EAAK2G,KACX,QAAS7S,KAAQuX,EAAO,CAEtB,IAAI8D,EAAeH,EAAW1F,EAAKxV,CAAI,EAAIA,EACvCsb,EAAMR,EAAQO,CAAY,EAC9B,GAAIC,EACF,QAASpgB,EAAE,EAAGsO,EAAE8R,EAAI,OAAQC,EAAKrgB,EAAEsO,IAAO+R,EAAGD,EAAIpgB,CAAC,GAAIA,KAC/C,CAACqgB,EAAG,MAAQA,EAAG,KAAK,UAAYrP,KAChC,CAACgP,GAAYM,GAAmBxb,EAAMub,EAAG,OAAO,KAC/CA,EAAG,OACLA,EAAG,KAAK,QAAUrP,GAEpBqP,EAAG,GAAG3H,EAAM5T,EAAMuX,EAAOS,EAAUuD,EAAG,KAAML,EAAUC,CAAS,EAC/DC,EAAM,GAId,CACA,OAAOA,CACT,CACA,MAAO,EACT,CAgBA,SAASK,GAAsB7H,EAAMkH,EAASjI,EAAU7S,EAAMuX,EAAOS,EAAUkD,EAAUC,EAAW,CAClG,IAAIC,EAAM,GACNC,EAAeH,EAAW1F,EAAKxV,CAAI,EAAIA,EACvCsb,EAAMR,EAAQO,CAAY,EAC9B,GAAIC,EACF,QAASpgB,EAAE,EAAGsO,EAAE8R,EAAI,OAAQC,EAAKrgB,EAAEsO,IAAO+R,EAAGD,EAAIpgB,CAAC,GAAIA,KAC/C,CAACqgB,EAAG,MAAQA,EAAG,KAAK,UAAY1I,KAChC,CAACqI,GAAYM,GAAmBxb,EAAMub,EAAG,OAAO,KAC/CA,EAAG,OACLA,EAAG,KAAK,QAAU1I,GAEpB0I,EAAG,GAAG3H,EAAM5T,EAAMuX,EAAOS,EAAUuD,EAAG,KAAML,EAAUC,CAAS,EAC/DC,EAAM,IAIZ,OAAOA,CACT,CAoBA,SAASI,GAAmBvgB,EAAM+H,EAAS,CACzC,GAAIA,EAAS,CACX,IAAI0Y,EAAqC1Y,EAAQ,KACjD,OAAQ0Y,GAAezgB,GACnB,CAAC,EAAE+H,EAAQ,YAAc0S,GAAWgG,EAAazgB,CAAI,IACrD,CAAC,EAAE+H,EAAQ,UAAY2S,GAAa+F,EAAazgB,CAAI,EAC3D,KACE,OAAO,EAEX,CAgBA,SAAS0gB,GAAkB/H,EAAM6D,EAAUF,EAAOS,EAAU/B,EAAM,CAChE,IAAI2F,EAAK,OAAO3F,EAAK,QAAW,SAAWrC,EAAKqC,EAAK,MAAM,EAAIA,EAAK,OAChE4F,EAAc5F,EAAK,SACnB2F,EACFA,EAAG,KAAKhI,EAAMA,EAAK,OAAOiI,CAAW,EAAG7D,EAAS6D,CAAW,CAAC,EACnD5F,EAAK,WACf,QAAQ,KAAK,oBAAsBA,EAAK,OAAS,eAAe,CAEpE,CAoBA,SAAS6F,GAAiBlI,EAAMmI,EAAaxE,EAAOS,EAAUkD,EAAU,CAEtE,IAAII,EAAM1H,EAAK6G,EAAM,MAAM,EACvBuB,EACA9P,EAAK2G,KAET,QAAS7S,KAAQ+b,EACXA,EAAY/b,CAAI,IACdsb,GAAOG,GAAsB7H,EAAM0H,EAAKpP,EAAIlM,EAAMuX,EAAOS,EAAUkD,CAAQ,GAEpEA,GAAYe,GAAWrI,EAAM5T,EAAMuX,CAAK,KACjDyE,EAAW,IAOjB,IAAIlhB,EACAkhB,IAAalhB,EAAO8Y,EAAK,aAAe9Y,EAAK,uBAC/CA,EAAK,sBAAqB,CAE9B,CAaA,SAASmhB,GAAWrI,EAAM3Y,EAAMsc,EAAO,CACrC,IAAI8D,EAAe7F,EAAKva,CAAI,EAC5B,GAAIogB,IAAiBpgB,EAAM,CACzB,IAAI2e,EAAYpD,GAAgB6E,CAAY,EAAI,WAChD,OAAAa,GAAoBtI,EAAMgG,EAAWrC,EAAMtc,CAAI,EAAGA,CAAI,EAC/C,EACT,CACA,MAAO,EACT,CAiBA,SAASihB,GAAoBtI,EAAMgG,EAAWphB,EAAOyC,EAAM,CACzD,IAAIf,EAAS,CACX,MAAO1B,EACP,cAAe,EACnB,EACMyC,IACFf,EAAO,KAAOe,GAOhBqa,EAAiC1B,CAAI,EAAG,cAAc,IAAI,YAAYgG,EAAW,CAAE,OAAA1f,CAAM,CAAE,CAAC,CAC9F,CAiBA,SAASiiB,GAAgBvI,EAAM6D,EAAUF,EAAOS,EAAU/B,EAAMiF,EAAU,CAExE,IAAIjgB,GADeigB,EAAW1F,EAAKiC,CAAQ,EAAIA,IACpBA,EAAWA,EAAW,KAC7Cjf,EAAQyC,EAAO+a,EAAIpC,EAAM3Y,CAAI,EAAI2Y,EAAK,OAAO6D,CAAQ,EACrDxc,GAAQzC,IAAU,SACpBA,EAAQ+e,EAAME,CAAQ,GAExByE,GAAoBtI,EAAMqC,EAAK,UAAWzd,EAAOyC,CAAI,CACvD,CAoBA,SAASmhB,GAAmBphB,EAAO4Y,EAAMyI,EAAU3Z,EAAQ4Z,EAAQ,CACjE,IAAI9jB,EACA0B,EAA+Bc,EAAM,OACrCuhB,EAAWriB,GAAUA,EAAO,KAC5BqiB,GACF7Z,EAASkT,GAAUyG,EAAU3Z,EAAQ6Z,CAAQ,EAC7C/jB,EAAQ0B,GAAUA,EAAO,OAEzB1B,EAAQwC,EAAM,cAAcqhB,CAAQ,EAEtC7jB,EAAQ8jB,EAAS,CAAC9jB,EAAQA,GACtB,CAACob,EAAK6G,EAAM,SAAS,GAAK,CAAC7G,EAAK6G,EAAM,SAAS,EAAE/X,CAAM,IACrDkR,EAAK,0BAA0BlR,EAAQlK,EAAO,GAAM,EAAQ+jB,CAAS,IACnE,CAACriB,GAAU,CAACA,EAAO,gBACvB0Z,EAAK,sBAAqB,CAGhC,CAeA,SAAS4I,GAAiB5I,EAAM6D,EAAUF,EAAOS,EAAU/B,EAAM,CAC/D,IAAIzd,EAAQob,EAAK,OAAO6D,CAAQ,EAC5BvF,KACF1Z,EAAQ0Z,GAAiB1Z,EAAOyd,EAAK,SAAU,YAAiCrC,CAAI,GAEtFA,EAAK,qBAAqB6D,EAAUxB,EAAK,SAAUzd,CAAK,CAC1D,CAmBA,SAASikB,GAAmB7I,EAAMkE,EAAcE,EAAUkD,EAAU,CAClE,IAAIwB,EAAiB9I,EAAK6G,EAAM,OAAO,EACvC,GAAIiC,EACF,GAAIjK,GAAiB,CAInBI,KACA,MAAM8J,EAAQC,GAAiBhJ,CAAI,EAC7BiJ,EAAQ,GACd,QAASpT,KAAKqO,EACZgF,GAAkBrT,EAAGiT,EAAgBG,EAAOF,EAAOzB,CAAQ,EAE7D,IAAIjF,EACJ,KAAQA,EAAO4G,EAAM,SACfE,GAAkBnJ,EAAM,GAAIkE,EAAcE,EAAU/B,CAAI,GAC1D6G,GAAkB7G,EAAK,WAAYyG,EAAgBG,EAAOF,EAAOzB,CAAQ,EAG7E,OAAO,OAA+BlD,EAAWpE,EAAK,SAAS,EAC/D,OAAO,OAA+BkE,EAAelE,EAAK,aAAa,EACvEA,EAAK,cAAgB,IACvB,KAAO,CAGL,IAAIoJ,EAAalF,EACjB,KAAOmD,GAAWrH,EAAM8I,EAAgBM,EAAYhF,EAAUkD,CAAQ,GACpE,OAAO,OAA+BlD,EAAWpE,EAAK,SAAS,EAC/D,OAAO,OAA+BkE,EAAelE,EAAK,aAAa,EACvEoJ,EAAapJ,EAAK,cAClBA,EAAK,cAAgB,IAEzB,CAEJ,CAaA,MAAMqJ,GAAe,CAAChH,EAAM4G,EAAOF,IAAU,CAC3C,IAAI1d,EAAQ,EACRC,EAAM2d,EAAM,OAAS,EACrBzF,EAAM,GACV,KAAOnY,GAASC,GAAK,CACnB,MAAMge,EAAOje,EAAQC,GAAQ,EAGvBie,EAAMR,EAAM,IAAIE,EAAMK,CAAG,EAAE,UAAU,EAAIP,EAAM,IAAI1G,EAAK,UAAU,EACxE,GAAIkH,EAAM,EACRle,EAAQie,EAAM,UACLC,EAAM,EACfje,EAAMge,EAAM,MACP,CACL9F,EAAM8F,EACN,KACF,CACF,CACI9F,EAAM,IACRA,EAAMlY,EAAM,GAEd2d,EAAM,OAAOzF,EAAK,EAAGnB,CAAI,CAC3B,EAgBM6G,GAAoB,CAAC9c,EAAM0c,EAAgBG,EAAOF,EAAOzB,IAAa,CAC1E,MAAMG,EAAeH,EAAW1F,EAAKxV,CAAI,EAAIA,EACvCsb,EAAMoB,EAAerB,CAAY,EACvC,GAAIC,EACF,QAASpgB,EAAE,EAAGA,EAAEogB,EAAI,OAAQpgB,IAAK,CAC/B,MAAMqgB,EAAKD,EAAIpgB,CAAC,EACXqgB,EAAG,KAAK,UAAY1I,KACpB,CAACqI,GAAYM,GAAmBxb,EAAMub,EAAG,OAAO,KACnDA,EAAG,KAAK,QAAU1I,GAClBoK,GAAa1B,EAAG,KAAMsB,EAAOF,CAAK,EAEtC,CAEJ,EAuBA,SAASC,GAAiBhJ,EAAM,CAC9B,IAAIwJ,EAAUxJ,EAAK,YAAY,sBAC/B,GAAI,CAACwJ,EAAS,CACZA,EAAU,IAAI,IACd,MAAMtC,EAAUlH,EAAK6G,EAAM,OAAO,EAClC,GAAI,CAAC,OAAA4C,EAAQ,MAAAC,EAAO,MAAAC,CAAK,EAAIC,GAAiB5J,CAAI,EAC9C6J,EACJ,KAAQA,EAAOH,EAAM,SAAU,CAC7BF,EAAQ,IAAIK,EAAML,EAAQ,IAAI,EAC9B,MAAMM,EAAiB5C,EAAQ2C,CAAI,EAC/BC,GACFA,EAAe,QAAQnC,GAAM,CAE3B,MAAMoC,EAAepC,EAAG,KAAK,WAC7B,EAAEgC,EACE,EAAEF,EAAOM,CAAY,IAAM,GAC7BL,EAAM,KAAKK,CAAY,CAE3B,CAAC,CAEL,CACIJ,IAAU,GAEZ,QAAQ,KAAK,sBAD0B3J,EACD,SAAS,wBAAwB,EAEzEA,EAAK,YAAY,sBAAwBwJ,CAC3C,CACA,OAAOA,CACT,CAiBA,SAASI,GAAiB5J,EAAM,CAC9B,MAAMgK,EAAkBhK,EAAK8G,EAAY,EACnC2C,EAAS,GACTQ,EAAejK,EAAK6G,EAAM,OAAO,EACjC6C,EAAQ,GACd,IAAIC,EAAQ,EAEZ,QAAS9T,KAAKmU,EAAiB,CAC7B,MAAM3H,EAAO2H,EAAgBnU,CAAC,EAE9B8T,GAASF,EAAO5T,CAAC,EACfwM,EAAK,KAAK,OAAO3Q,GAAK,CAACA,EAAE,OAAO,EAAE,QAAU2Q,EAAK,UAAY,EAAI,EACrE,CAEA,QAASxM,KAAKoU,EACPD,EAAgBnU,CAAC,GACpB6T,EAAM,KAAK7T,CAAC,EAGhB,MAAO,CAAC,OAAA4T,EAAQ,MAAAC,EAAO,MAAAC,CAAK,CAC9B,CAeA,SAASR,GAAkBnJ,EAAM6D,EAAUK,EAAcE,EAAU/B,EAAM,CAEvE,IAAIrS,EAASka,GAAgBlK,EAAM6D,EAAUK,EAAcE,EAAU/B,CAAI,EAEzE,GAAIrS,IAAW4W,GACb,MAAO,GAET,IAAImD,EAAe1H,EAAK,WACxB,OAAIrC,EAAK,mBAAqBA,EAAK,kBAAkB+J,CAAY,EACxD/J,EAAK,oBAAoB+J,EAAc/Z,EAAQ,EAAI,GAE1DgQ,EAAK+J,CAAY,EAAI/Z,EACd,GAEX,CAYA,SAASma,GAAmBnK,EAAM3Y,EAAMzC,EAAO,CAC7C,IAAIwlB,EAAQpK,EAAK,kBACjB,GAAIoK,EAAO,CACT,IAAIC,EACJ,QAAS3Y,KAAK0Y,EAAO,CACnB,IAAIzY,EAAIyY,EAAM1Y,CAAC,EACXqQ,GAAarQ,EAAGrK,CAAI,GACtBgjB,EAAOrI,GAAUtQ,EAAGC,EAAGtK,CAAI,EAC3B2Y,EAAK,0BAA0BqK,EAAMzlB,EAAO,GAAM,EAAI,GAC7Cmd,GAAapQ,EAAGtK,CAAI,IAC7BgjB,EAAOrI,GAAUrQ,EAAGD,EAAGrK,CAAI,EAC3B2Y,EAAK,0BAA0BqK,EAAMzlB,EAAO,GAAM,EAAI,EAE1D,CACF,CACF,CAqBA,SAAS0lB,GAAWC,EAAanE,EAAcV,EAAU8E,EAAMjjB,EAAQ2D,EAAOuf,EAAS,CAErF/E,EAAS,SAAWA,EAAS,UAAY,GACzC,IAAmBgF,EAAU,CAAE,KAAAF,EAAM,OAAAjjB,EAAQ,MAAA2D,EAAO,QAAAuf,EAAS,WAAavf,EAAM,SAAW,CAAE,EAG7F,GAFAwa,EAAS,SAAS,KAAKgF,CAAO,EAE1BC,GAAkBD,CAAO,EAAG,CAC9B,GAAI,CAAC,MAAAtjB,EAAO,OAAAshB,CAAM,EAAIgC,EAAQ,MAAM,CAAC,EACrCA,EAAQ,cAAgBtjB,GAAUwb,GAAgBrb,CAAM,EAAI,WAC5DmjB,EAAQ,eAAiBhC,CAC3B,CAEA,IAAIzf,EAAQmd,EAAa,aAAa,OACtC,QAAS9e,EAAE,EAAGA,EAAEojB,EAAQ,MAAM,OAAQpjB,IAAK,CACzC,IAAIgb,EAAOoI,EAAQ,MAAMpjB,CAAC,EAC1Bgb,EAAK,cAAgBhb,EACrBsjB,GAAwBL,EAAanE,EAAcsE,EAASpI,EAAMrZ,CAAK,CACzE,CACF,CAcA,SAAS2hB,GAAwBL,EAAanE,EAAcsE,EAASpI,EAAMrZ,EAAO,CAChF,GAAI,CAACqZ,EAAK,QACR,GAAIoI,EAAQ,OAAS,aAAeA,EAAQ,OAAO,CAAC,IAAM,IACxD,QAAQ,KAAK,wBAA0BA,EAAQ,OAC7C,0DAA0D,MACvD,CACL,IAAIG,EAAevI,EAAK,aACpBD,EAAO,CAAE,MAAApZ,EAAO,QAAAyhB,EAAS,KAAApI,EAAM,UAAWiI,CAAW,EACzD,QAAS3f,EAAE,EAAGA,EAAEigB,EAAa,OAAQjgB,IAAK,CACxC,IAAIwE,EAAUyb,EAAajgB,CAAC,EACxB,OAAOwE,GAAW,WACpBA,EAAU0b,GAAS1b,CAAO,EAC1BA,EAAQ,SAAW,IAErBmb,EAAY,2BAA2BnE,EAAchX,EAAQ,aAAc,CACzE,GAAI2b,GACJ,KAAA1I,EAAM,QAAAjT,CAChB,CAAS,CACH,CACF,CAEJ,CAsBA,SAAS2b,GAAiB/K,EAAM3Y,EAAMsc,EAAOS,EAAU/B,EAAMiF,EAAU0D,EAAU,CAC/E,IAAI1G,EAAO0G,EAAS3I,EAAK,KAAK,EAC1BqI,EAAUrI,EAAK,QACfC,EAAOD,EAAK,KAGhB,GAAIiF,GAAYhF,EAAK,QAAWjb,EAAK,OAASib,EAAK,OAAO,QACrDoI,EAAQ,MAAQ,YAAe,CAACA,EAAQ,YACzCpG,EAAK,2BACLA,EAAK,mBAAqBA,EAAK,kBAAkBoG,EAAQ,MAAM,EAAG,CACpE,IAAI9lB,EAAQ+e,EAAMtc,CAAI,EACtBA,EAAO2a,GAAUM,EAAK,OAAQoI,EAAQ,OAAQrjB,CAAI,EAC9Cid,EAAK,0BAA0Bjd,EAAMzC,EAAO,GAAO,EAAI,GACzDob,EAAK,eAAesE,CAAI,CAE5B,KAAO,CACL,IAAI1f,EAAQyd,EAAK,UAAU,iBAAiBrC,EAAMsC,EAAMjb,EAAMsc,EAAOS,EAAUkD,CAAQ,EAGnF1iB,IAAUgiB,IACZqE,GAAkBjL,EAAMsE,EAAMoG,EAASpI,EAAM1d,CAAK,CAEtD,CACF,CAcA,SAASqmB,GAAkBjL,EAAMsE,EAAMoG,EAASpI,EAAM1d,EAAO,CAK3D,GAJAA,EAAQsmB,GAAoB5G,EAAM1f,EAAO8lB,EAASpI,CAAI,EAClDhE,KACF1Z,EAAQ0Z,GAAiB1Z,EAAO8lB,EAAQ,OAAQA,EAAQ,KAAMpG,CAAI,GAEhEoG,EAAQ,MAAQ,YAElB1K,EAAK,sBAA6CsE,EAAO1f,EAAO8lB,EAAQ,MAAM,MACzE,CAEL,IAAIte,EAAOse,EAAQ,OACfpG,EAAK,2BACLA,EAAK,mBAAqBA,EAAK,kBAAkBlY,CAAI,GACnD,CAACkY,EAAKuC,EAAM,SAAS,GAAK,CAACvC,EAAKuC,EAAM,SAAS,EAAEza,CAAI,IACnDkY,EAAK,oBAAoBlY,EAAMxH,CAAK,GACtCob,EAAK,eAAesE,CAAI,EAM5BtE,EAAK,4BAA4BsE,EAAMlY,EAAMxH,CAAK,CAEtD,CACF,CAaA,SAASsmB,GAAoB5G,EAAM1f,EAAO8lB,EAASpI,EAAM,CACvD,GAAIoI,EAAQ,WAAY,CACtB,IAAIS,EAAU7G,EAAK,sBAAsBoG,EAAQ,MAAM,EACvDS,EAAQ7I,EAAK,aAAa,EAAI1d,EAC9BA,EAAQumB,EAAQ,KAAK,EAAE,CACzB,CACA,OAAIT,EAAQ,OAAS,cAEfA,EAAQ,SAAW,eAClBA,EAAQ,SAAW,UACjBpG,EAAK,YAAc,SAAWA,EAAK,YAAc,eACtD1f,EAAQA,GAAqB,IAG1BA,CACT,CAeA,SAAS+lB,GAAkBD,EAAS,CAClC,MAAO,EAAQA,EAAQ,QAChBA,EAAQ,MAAQ,aAChBA,EAAQ,MAAQ,QAChB,CAACA,EAAQ,YACTA,EAAQ,MAAM,CAAC,EAAE,OAAS,GACnC,CAYA,SAASU,GAAcpL,EAAMoG,EAAc,CAEzC,GAAI,CAAC,SAAA4E,EAAU,aAAAK,CAAY,EAAIjF,EAC/B,GAAIiF,EAAa,OACf,QAAS,EAAE,EAAG,EAAIA,EAAa,OAAQ,IAAK,CAC1C,IAAIhJ,EAAOgJ,EAAa,CAAC,EACrB/G,EAAO0G,EAAS,CAAC,EACjBM,EAAWjJ,EAAK,SACpB,GAAIiJ,EACF,QAAShkB,EAAE,EAAGA,EAAEgkB,EAAS,OAAQhkB,IAAK,CACpC,IAAIojB,EAAUY,EAAShkB,CAAC,EACxBikB,GAAqBjH,EAAMoG,CAAO,EAClCc,GAAkBlH,EAAMtE,EAAM0K,CAAO,CACvC,CAIFpG,EAAK,WAAatE,CACpB,CAEJ,CAgBA,SAASuL,GAAqBjH,EAAMoG,EAAS,CAC3C,GAAIA,EAAQ,WAAY,CAEtB,IAAIS,EAAU7G,EAAK,wBAChBA,EAAK,sBAAwB,IAC5BpZ,EAAQwf,EAAQ,MAEhBe,EAAW,IAAI,MAAMvgB,EAAM,MAAM,EACrC,QAASN,EAAE,EAAGA,EAAEM,EAAM,OAAQN,IAC5B6gB,EAAS7gB,CAAC,EAAIM,EAAMN,CAAC,EAAE,QAEzB,IAAIrD,EAASmjB,EAAQ,OACrBS,EAAQ5jB,CAAM,EAAIkkB,EAEdf,EAAQ,SAAWA,EAAQ,MAAQ,aAIjCnjB,IAAW,cACb+c,EAAO5C,EAAK4C,CAAI,GAElBA,EAAK/c,CAAM,EAAImjB,EAAQ,QAE3B,CACF,CAYA,SAASc,GAAkBlH,EAAMtE,EAAM0K,EAAS,CAC9C,GAAIA,EAAQ,cAAe,CACzB,IAAIpI,EAAOoI,EAAQ,MAAM,CAAC,EAC1BpG,EAAK,iBAAiBoG,EAAQ,cAAe,SAASxkB,EAAG,CACvDsiB,GAAmBtiB,EAAG8Z,EAAM0K,EAAQ,OAAQpI,EAAK,OAAQA,EAAK,MAAM,CACtE,CAAC,CACH,CACF,CAqBA,SAASoJ,GAAmBhH,EAAOiH,EAAKtlB,EAAMulB,EAAUC,EAAYC,EAAW,CAC7EA,EAAYH,EAAI,QAAWG,IACxB,OAAOA,GAAc,UAAYA,EAAUH,EAAI,UAAU,GAC5D,IAAItJ,EAAO,CACT,WAAYsJ,EAAI,WAChB,KAAMA,EAAI,KACV,WAAAE,EACA,UAAAC,CACJ,EACE,QAASxkB,EAAE,EAAGykB,EAAMzkB,EAAEqkB,EAAI,KAAK,SAAYI,EAAIJ,EAAI,KAAKrkB,CAAC,GAAIA,IACtDykB,EAAI,SACPrH,EAAM,mBAAmBqH,EAAI,aAAc1lB,EAAM,CAC/C,GAAIulB,EAAU,KAAMvJ,EAAM,QAAS0J,CAC3C,CAAO,EAGL,OAAID,GACFpH,EAAM,mBAAmBiH,EAAI,WAAYtlB,EAAM,CAC7C,GAAIulB,EAAU,KAAMvJ,CAC1B,CAAK,EAEIA,CACT,CAkBA,SAAS6H,GAAgBlK,EAAM6D,EAAUF,EAAOS,EAAU/B,EAAM,CAG9D,IAAI1b,EAAUqZ,EAAK,aAAeA,EAC9BgI,EAAKrhB,EAAQ0b,EAAK,UAAU,EAChC,GAAI2F,EAAI,CACN,IAAIhX,EAAOgP,EAAK,aAAaqC,EAAK,KAAMwB,EAAUF,CAAK,EACvD,OAAO3S,IAAS4V,GAAOA,GAAOoB,EAAG,MAAMrhB,EAASqK,CAAI,CACtD,MAAYqR,EAAK,WACf,QAAQ,KAAK,WAAaA,EAAK,WAAa,eAAe,CAE/D,CAEA,MAAM2J,GAAa,GAGbC,GAAS,8BACTC,GAAS,gDACTC,GAAgB,4BAChBC,GAAgB,4BAChBC,GAAS,MAAQF,GAAgB,IAAMC,GAAgB,IACvDE,GAAW,OAASL,GAAQ,IAAMC,GAAS,IAAOG,GAAS,SAC3DE,GAAY,MAAQD,GAAW,WAAaA,GAAW,MACvDE,GAAgB,gBACgBD,GAAY,aAE5CE,GAAU,IAAMR,GAAQ,OAASO,GAAgB,KACjDE,GAAe,kBACfC,GAAgB,YAChBC,GAAS,eACTC,GAAaH,GAAeE,GAASH,GAAUE,GAC/CG,GAAe,IAAI,OAAOD,GAAY,GAAG,EAQ/C,SAASE,GAAiB7hB,EAAO,CAC/B,IAAIzE,EAAI,GACR,QAASa,EAAE,EAAGA,EAAE4D,EAAM,OAAQ5D,IAAK,CACjC,IAAImjB,EAAUvf,EAAM5D,CAAC,EAAE,QACvBb,GAAKgkB,GAAW,EAClB,CACA,OAAOhkB,CACT,CAYA,SAASumB,GAAYC,EAAY,CAE/B,IAAI3jB,EAAI2jB,EAAW,MAAM,wBAAwB,EACjD,GAAI3jB,EAAG,CAEL,IAAIqiB,EAAM,CAAE,WADKriB,EAAE,CAAC,EACI,OAAQ,GAAM,KAAM0iB,EAAU,EACtD,GAAI1iB,EAAE,CAAC,EAAE,OAAQ,CAEf,IAAI0H,EAAO1H,EAAE,CAAC,EAAE,QAAQ,OAAQ,SAAS,EAAE,MAAM,GAAG,EACpD,OAAO4jB,GAAUlc,EAAM2a,CAAG,CAC5B,KACE,QAAOA,CAEX,CACA,OAAO,IACT,CAYA,SAASuB,GAAUC,EAASxB,EAAK,CAC/B,OAAAA,EAAI,KAAOwB,EAAQ,IAAI,SAASC,EAAQ,CACtC,IAAIrB,EAAMjB,GAASsC,CAAM,EACzB,OAAKrB,EAAI,UACPJ,EAAI,OAAS,IAERI,CACT,EAAG,IAAI,EACAJ,CACT,CAkBA,SAASb,GAASsC,EAAQ,CAExB,IAAIrB,EAAMqB,EAAO,KAAI,EAElB,QAAQ,WAAY,GAAG,EAIvB,QAAQ,SAAU,IAAI,EAGrB1b,EAAI,CACN,KAAMqa,EACN,MAAO,GACP,QAAS,EACb,EAEMsB,EAAKtB,EAAI,CAAC,EAOd,OANIsB,IAAO,MACTA,EAAKtB,EAAI,CAAC,GAERsB,GAAM,KAAOA,GAAM,MACrBA,EAAK,KAEAA,EAAE,CACP,IAAK,IACL,IAAK,IACH3b,EAAE,MAAQqa,EAAI,MAAM,EAAG,EAAE,EACzBra,EAAE,QAAU,GACZ,MACF,IAAK,IACHA,EAAE,MAAQ,OAAOqa,CAAG,EACpBra,EAAE,QAAU,GACZ,KACN,CAEE,OAAKA,EAAE,UACLA,EAAE,aAAekQ,EAAKmK,CAAG,EAEzBra,EAAE,WAAaiQ,GAAOoK,CAAG,EACrBra,EAAE,aACJA,EAAE,SAAYqa,EAAI,MAAM,EAAE,GAAK,KAC3Bra,EAAE,WACJA,EAAE,KAAOqa,EAAI,MAAM,EAAG,EAAE,KAIvBra,CACT,CAEA,SAAS4b,GAAY9iB,EAAMmZ,EAAOtc,EAAM,CACtC,IAAIzC,EAAQwd,EAAI5X,EAAMnD,CAAI,EAM1B,OAAIzC,IAAU,SACZA,EAAQ+e,EAAMtc,CAAI,GAEbzC,CACT,CAgBA,SAAS2oB,GAAcvN,EAAMwN,EAAOnmB,EAAMomB,EAAS,CACjD,MAAMC,EAAc,CAAE,aAAcD,CAAO,EAGvC7O,IAAmB,CAACoB,EAAK,2BAC3BwN,EAAM,QAAUE,GAElB1N,EAAK,WAAW3Y,EAAO,WAAYqmB,CAAW,EAC9C1N,EAAK,WAAW3Y,EAAO,UAAWmmB,EAAM,MAAM,EAE1C5O,IAAmB,CAACoB,EAAK,2BAC3B0N,EAAY,aAAe,GAE/B,CAiBA,SAASC,GAAa3N,EAAMwN,EAAOnmB,EAAM4B,EAAO2kB,EAAYC,EAAS,CACnEN,GAAcvN,EAAMwN,EAAOnmB,EAAM,CAAC,CAChC,MAAO4B,EACP,WAAY2kB,EACZ,QAASC,EACT,OAAQL,EACR,KAAM,QACV,CAAG,CAAC,CACJ,CASA,SAASM,GAAMnkB,EAAM,CACnB,OAAOA,EAAK,CAAC,EAAE,YAAW,EAAKA,EAAK,UAAU,CAAC,CACjD,CAqCO,MAAMokB,GAAkB7O,GAActF,GAAc,CASzD,MAAMoU,EAAsB9H,GAAcvB,GAAkB/K,CAAU,CAAC,EASvE,MAAMmU,UAAwBC,CAAoB,CAEhD,aAAc,CACZ,MAAK,EAGL,KAAK,0BAA4B,GAEjC,KAAK,mBAEL,KAAK,qBAEL,KAAK,eAEL,KAAK,kBAEL,KAAK,eAEL,KAAK,sBAEL,KAAK,WAEL,KAAK,WAEL,KAAK,yBAEL,KAAK,OAEL,KAAK,cAEL,KAAK,UAEL,KAAK,iBAEL,KAAK,cAEL,KAAK,iBAEL,KAAK,gBAEL,KAAK,mBAEL,KAAK,iBAEL,KAAK,WAEL,KAAK,eAEL,KAAK,wBACP,CAEA,IAAI,uBAAwB,CAC1B,OAAOnH,CACT,CAMA,uBAAwB,CACtB,MAAM,sBAAqB,EAC3B,KAAK,cAAa,EAClB,KAAK,mBAAqB,GAC1B,KAAK,qBAAuB,KAC5B,KAAK,eAAiB,KACtB,KAAK,kBAAoB,KACzB,KAAK,eAAiB,GAEtB,KAAK,sBAAwB,KAAK,uBAAyB,KAC3D,KAAK,WAAa,KAAK,YAAc,KACrC,KAAK,WAAa,GAClB,KAAK,yBAA2B,EAClC,CAEA,eAAgB,CACd,GAAIoH,GAAU,OAAQ,CACpB,IAAI/mB,EAAO+mB,GAAUA,GAAU,OAAO,CAAC,EACvC/mB,EAAK,eAAe,IAAI,EAGxB,KAAK,WAAaA,CACpB,CACF,CAWA,2BAA2Byc,EAAO,CAChC,KAAK,OAAS,OAAO,OAAOA,CAAK,EACjC,KAAK,cAAgB,OAAO,OAAOA,CAAK,EACxC,KAAK,UAAY,EACnB,CAUA,8BAA8BA,EAAO,CACnC,IAAIG,EAAW,KAAK+C,EAAM,SAAS,EACnC,QAASza,KAAQuX,GACX,CAACG,GAAY,CAACA,EAAS1X,CAAI,KAC7B,KAAK,cAAgB,KAAK,eAAiB,GAC3C,KAAK,UAAY,KAAK,WAAa,GACnC,KAAK,OAAOA,CAAI,EAAI,KAAK,cAAcA,CAAI,EAAIuX,EAAMvX,CAAI,EAG/D,CAgBA,mBAAmByX,EAAUxd,EAAM6nB,EAAQ,CACzC,KAAK,wBAAwBrK,EAAUxd,GAAQwgB,EAAM,SAAS,EAE9D,IAAIK,EAAUF,GAAmB,KAAM3gB,EAAM,EAAI,EAAEwd,CAAQ,EACtDqD,IACHA,EAAU,KAAK7gB,CAAI,EAAEwd,CAAQ,EAAI,IAEnCqD,EAAQ,KAAKgH,CAAM,CACrB,CAWA,sBAAsBrK,EAAUxd,EAAM6nB,EAAQ,CAC5C,IAAIhH,EAAUF,GAAmB,KAAM3gB,EAAM,EAAI,EAAEwd,CAAQ,EACvDL,EAAM0D,EAAQ,QAAQgH,CAAM,EAC5B1K,GAAO,GACT0D,EAAQ,OAAO1D,EAAK,CAAC,CAEzB,CAaA,mBAAmBK,EAAUxd,EAAM,CACjC,IAAI6gB,EAAU,KAAK7gB,CAAI,EACvB,MAAO,GAAQ6gB,GAAWA,EAAQrD,CAAQ,EAC5C,CAYA,mBAAmBA,EAAU,CAC3B,OAAO,KAAK,mBAAmBA,EAAUgD,EAAM,SAAS,CAC1D,CAYA,iBAAiBhD,EAAU,CACzB,OAAO,KAAK,mBAAmBA,EAAUgD,EAAM,MAAM,CACvD,CAYA,kBAAkBhD,EAAU,CAC1B,OAAO,KAAK,mBAAmBA,EAAUgD,EAAM,OAAO,CACxD,CAYA,mBAAmBhD,EAAU,CAC3B,OAAO,KAAK,mBAAmBA,EAAUgD,EAAM,OAAO,CACxD,CAiCA,0BAA0Bxf,EAAMzC,EAAOupB,EAAcC,EAAoB,CACvE,GAAIA,GACAxM,EAAK,MAAM,QAAQva,CAAI,EAAIA,EAAK,CAAC,EAAIA,CAAI,IAAMA,EAAM,CASvD,GAAI,CAAC+mB,EAAoB,CACvB,IAAIjO,EAAMiC,EAAI,KAAM/a,CAAI,EAGxB,GAFAA,EAA8Bkb,GAAI,KAAMlb,EAAMzC,CAAK,EAE/C,CAACyC,GAAQ,CAAC,MAAM,sBAAsBA,EAAMzC,EAAOub,CAAG,EACxD,MAAO,EAEX,CAEA,GADA,KAAK,eAAiB,GAClB,KAAK,oBAAuC9Y,EAAOzC,EAAOupB,CAAY,EACxE,OAAAhE,GAAmB,KAA0B9iB,EAAOzC,CAAK,EAClD,EAEX,KAAO,CACL,GAAI,KAAK,mBAAqB,KAAK,kBAAkByC,CAAI,EACvD,OAAO,KAAK,oBAAuCA,EAAOzC,EAAOupB,CAAY,EAE7E,KAAK9mB,CAAI,EAAIzC,CAEjB,CACA,MAAO,EACT,CAwBA,4BAA4B0f,EAAMlY,EAAMxH,EAAO,EAKzCA,IAAU0f,EAAKlY,CAAI,GAAK,OAAOxH,GAAS,YAEtCwH,IAAS,cACXkY,EAA4B5C,EAAK4C,CAAI,GAEvCA,EAAKlY,CAAI,EAAIxH,EAEjB,CAqCA,oBAAoBif,EAAUjf,EAAOupB,EAAc,CACjD,IAAIE,EAAa,KAAK,gBAAkB1M,GAAOkC,CAAQ,EACnDyK,EAAYD,EAAa,KAAK,WAAa,KAAK,OACpD,OAAI,KAAK,sBAAsBxK,EAAUjf,EAAO0pB,EAAUzK,CAAQ,CAAC,GAC5D,KAAK,gBACR,KAAK,cAAgB,GACrB,KAAK,UAAY,IAGbA,KAAY,KAAK,YACrB,KAAK,UAAUA,CAAQ,EAAI,KAAK,OAAOA,CAAQ,GAI7CwK,EACF,KAAK,WAAWxK,CAAQ,EAAIjf,EAE5B,KAAK,OAAOif,CAAQ,EAAIjf,EAG1B,KAAK,cAAcif,CAAQ,EAAIjf,GAE3BypB,GAAe,KAAKxH,EAAM,MAAM,GAAK,KAAKA,EAAM,MAAM,EAAEhD,CAAQ,KAClE,KAAK,eAAiB,KAAK,gBAAkB,GAC7C,KAAK,eAAeA,CAAQ,EAAIsK,GAE3B,IAEF,EACT,CAWA,aAAatK,EAAUjf,EAAO,CACxB,KAAK,oBAAoBif,EAAUjf,EAAO,EAAI,GAChD,KAAK,sBAAqB,CAE9B,CAWA,uBAAwB,CAClB,KAAK,aACP,KAAK,iBAAgB,CAEzB,CAYA,eAAeqQ,EAAQ,CACrB,KAAK,qBAAuB,KAAK,sBAAwB,GACrDA,IAAW,MACb,KAAK,qBAAqB,KAAKA,CAAM,CAEzC,CAUA,eAAgB,CACT,KAAK,mBAQR,KAAK,uBAAsB,GAP3B,KAAK,mBAAqB,GAC1B,KAAK,cAAa,EAIlB,KAAK,YAAc,GAIvB,CAcA,wBAAyB,CACvB,IAAIsZ,EAAU,KAAK,qBACnB,GAAIA,EAAS,CACX,KAAK,qBAAuB,KAC5B,QAASjnB,EAAE,EAAGA,EAAIinB,EAAQ,OAAQjnB,IAAK,CACrC,IAAI2N,EAASsZ,EAAQjnB,CAAC,EACjB2N,EAAO,cAEDA,EAAO,eAChBA,EAAO,iBAAgB,EAFvBA,EAAO,kBAAiB,CAI5B,CACF,CACF,CAWA,eAAgB,CACd,KAAK,uBAAsB,CAC7B,CAkBA,cAAc0O,EAAO6K,EAAa,CAChC,QAASnnB,KAAQsc,GACX6K,GAAe,CAAC,KAAK3H,EAAM,SAAS,GAAK,CAAC,KAAKA,EAAM,SAAS,EAAExf,CAAI,IAKtE,KAAK,0BAA0BA,EAAMsc,EAAMtc,CAAI,EAAG,EAAI,EAG1D,KAAK,sBAAqB,CAC5B,CAWA,OAAQ,CAKN,KAAK,iBAAgB,EAGhB,KAAK,oBACR,KAAK,cAAa,EAIhB,KAAK,eACP,KAAK,iBAAgB,CAEzB,CAgBA,mBAAmB8c,EAAcD,EAAcE,EAAU,CAMvD,IAAIkD,EAAW,KAAK,eACpB,KAAK,eAAiB,GACtB,IAAIa,EAEJU,GAAmB,KAAM3E,EAAcE,EAAUkD,CAAQ,EAGzDa,EAAc,KAAK,eACnB,KAAK,eAAiB,KAEtB,KAAK,0BAA0BjE,EAAcE,EAAUkD,CAAQ,EAE/D,KAAK,cAAa,EAElBD,GAAW,KAAM,KAAKR,EAAM,OAAO,EAAG3C,EAAcE,EAAUkD,CAAQ,EAEtED,GAAW,KAAM,KAAKR,EAAM,OAAO,EAAG3C,EAAcE,EAAUkD,CAAQ,EAElEa,GACFD,GAAiB,KAAMC,EAAajE,EAAcE,EAAUkD,CAAQ,EAGlE,KAAK,eAAiB,IACxB,KAAK,WAAa,GAKtB,CAaA,0BAA0BpD,EAAcE,EAAUkD,EAAU,CACtD,KAAKT,EAAM,SAAS,GACtBQ,GAAW,KAAM,KAAKR,EAAM,SAAS,EAAG3C,EAAcE,EAAUkD,CAAQ,EAEtE,KAAK,gBACP,KAAK,uBAAuB,KAAK,eAAgBpD,EAAcE,EAAUkD,CAAQ,CAErF,CAEA,uBAAuBlB,EAAclC,EAAcE,EAAUkD,EAAU,CACrE,MAAMmH,EAAiB,CAACvK,EAAcoD,IAAa,CACjDD,GAAW,KAAMjB,EAAa,gBAAiBlC,EAAcE,EAC3DkD,EAAUlB,EAAa,QAAQ,EACjC,QAAS/D,EAAK+D,EAAa,WAAY/D,EAAMA,EAAKA,EAAK,YACrD,KAAK,uBAAuBA,EAAM6B,EAAcE,EAAUkD,CAAQ,CAEtE,EACIlB,EAAa,WACfA,EAAa,WAAWqI,EAAgBvK,EAAcoD,CAAQ,EAE9DmH,EAAevK,EAAcoD,CAAQ,CAEzC,CAYA,UAAUnT,EAAID,EAAM,CAClBC,EAAK+N,GAAU/N,CAAE,EACjBD,EAAOgO,GAAUhO,CAAI,EACrB,KAAK,kBAAoB,KAAK,mBAAqB,GACnD,KAAK,kBAAkBC,CAAE,EAAID,CAC/B,CAaA,YAAY7M,EAAM,CAChBA,EAAO6a,GAAU7a,CAAI,EACjB,KAAK,mBACP,OAAO,KAAK,kBAAkBA,CAAI,CAEtC,CAoCA,cAAcA,EAAMomB,EAAS,CAC3B,IAAIpL,EAAO,CAAC,KAAM,EAAE,EAChBmL,EAA6BpL,EAAI,KAAM/a,EAAMgb,CAAI,EACrDkL,GAAc,KAAMC,EAAOnL,EAAK,KAAMoL,CAAO,CAC/C,CAsBA,IAAIpmB,EAAMua,EAAM,CACd,OAAOQ,EAAIR,GAAQ,KAAMva,CAAI,CAC/B,CAwBA,IAAIA,EAAMzC,EAAOgd,EAAM,CACjBA,EACFW,GAAIX,EAAMva,EAAMzC,CAAK,GAEjB,CAAC,KAAKiiB,EAAM,SAAS,GAAK,CAAC,KAAKA,EAAM,SAAS,EAAwBxf,KACrE,KAAK,0BAA0BA,EAAMzC,EAAO,EAAI,GAClD,KAAK,sBAAqB,CAIlC,CAiBA,KAAKyC,KAASqnB,EAAO,CACnB,IAAIrM,EAAO,CAAC,KAAM,EAAE,EAChBmL,EAA4BpL,EAAI,KAAM/a,EAAMgb,CAAI,EAChDgB,EAAMmK,EAAM,OACZmB,EAAMnB,EAAM,KAAK,GAAGkB,CAAK,EAC7B,OAAIA,EAAM,QACRf,GAAa,KAAMH,EAAOnL,EAAK,KAAMgB,EAAKqL,EAAM,OAAQ,EAAE,EAErDC,CACT,CAgBA,IAAItnB,EAAM,CACR,IAAIgb,EAAO,CAAC,KAAM,EAAE,EAChBmL,EAA6BpL,EAAI,KAAM/a,EAAMgb,CAAI,EACjDuM,EAAY,EAAQpB,EAAM,OAC1BmB,EAAMnB,EAAM,IAAG,EACnB,OAAIoB,GACFjB,GAAa,KAAMH,EAAOnL,EAAK,KAAMmL,EAAM,OAAQ,EAAG,CAACmB,CAAG,CAAC,EAEtDA,CACT,CAoBA,OAAOtnB,EAAMgE,EAAOwjB,KAAgBH,EAAO,CACzC,IAAIrM,EAAO,CAAC,KAAO,EAAE,EACjBmL,EAA6BpL,EAAI,KAAM/a,EAAMgb,CAAI,EAEjDhX,EAAQ,EACVA,EAAQmiB,EAAM,OAAS,KAAK,MAAM,CAACniB,CAAK,EAC/BA,IACTA,EAAQ,KAAK,MAAMA,CAAK,GAU1B,IAAIsjB,EAEJ,OAAI,UAAU,SAAW,EACvBA,EAAMnB,EAAM,OAAOniB,CAAK,EAQxBsjB,EAAMnB,EAAM,OAAOniB,EAAOwjB,EAAa,GAAGH,CAAK,GAK7CA,EAAM,QAAUC,EAAI,SACtBhB,GAAa,KAAMH,EAAOnL,EAAK,KAAMhX,EAAOqjB,EAAM,OAAQC,CAAG,EAExDA,CACT,CAgBA,MAAMtnB,EAAM,CACV,IAAIgb,EAAO,CAAC,KAAM,EAAE,EAChBmL,EAA6BpL,EAAI,KAAM/a,EAAMgb,CAAI,EACjDuM,EAAY,EAAQpB,EAAM,OAC1BmB,EAAMnB,EAAM,MAAK,EACrB,OAAIoB,GACFjB,GAAa,KAAMH,EAAOnL,EAAK,KAAM,EAAG,EAAG,CAACsM,CAAG,CAAC,EAE3CA,CACT,CAiBA,QAAQtnB,KAASqnB,EAAO,CACtB,IAAIrM,EAAO,CAAC,KAAM,EAAE,EAChBmL,EAA6BpL,EAAI,KAAM/a,EAAMgb,CAAI,EACjDsM,EAAMnB,EAAM,QAAQ,GAAGkB,CAAK,EAChC,OAAIA,EAAM,QACRf,GAAa,KAAMH,EAAOnL,EAAK,KAAM,EAAGqM,EAAM,OAAQ,EAAE,EAEnDC,CACT,CAgBA,WAAWtnB,EAAMzC,EAAO,CAEtB,IAAIkqB,EACJ,GAAI,UAAU,QAAU,EAAG,CAEzB,IAAIzM,EAAO,CAAC,KAAM,EAAE,EACpBzd,EAAQwd,EAAI,KAAM/a,EAAMgb,CAAI,EAC5ByM,EAAWzM,EAAK,IAClB,MAAW,MAAM,QAAQhb,CAAI,EAE3BynB,EAAW5M,GAAU7a,CAAI,EAEzBynB,EAAgCznB,EAE9B,KAAK,0BAA0BynB,EAAUlqB,EAAO,GAAM,EAAI,GAC5D,KAAK,sBAAqB,CAE9B,CAcA,wBAAwBif,EAAUkL,EAAiB,CACjD,KAAK,mBAAmBlL,EAAUgD,EAAM,SAAS,EAC7CkI,IACF,KAAK,OAASjB,GAAMjK,CAAQ,CAAC,EAAkC,SAASjf,EAAO,CAC7E,KAAK,aAAaif,EAAUjf,CAAK,CACnC,EAEJ,CAgBA,wBAAwBif,EAAUmL,EAAQlD,EAAW,CACnD,IAAIzJ,EAAO,CAAE,SAAAwB,EAAU,OAAAmL,EAAQ,UAAW,EAAQlD,CAAU,EAC5D,KAAK,mBAAmBjI,EAAUgD,EAAM,QAAS,CAC/C,GAAIkB,GAAmB,KAAA1F,EAAM,QAAS,CAAC,KAAMwB,CAAQ,CAC7D,CAAO,EACGiI,GACF,KAAK,mBAAyCkD,EAASnI,EAAM,QAAS,CACpE,GAAIkB,GAAmB,KAAA1F,EAAM,QAAS,CAAC,KAAM2M,CAAM,CAC7D,CAAS,CAEL,CAcA,sBAAsB/B,EAAYnB,EAAW,CAC3C,IAAIH,EAAMqB,GAAYC,CAAU,EAChC,GAAI,CAACtB,EACH,MAAM,IAAI,MAAM,kCAAoCsB,EAAa,GAAG,EAEtEvB,GAAmB,KAAMC,EAAK9E,EAAM,QAASqD,GAAiB,KAAM4B,CAAS,CAC/E,CAYA,yBAAyBjI,EAAU,CACjC,KAAK,mBAAmBA,EAAUgD,EAAM,OAAQ,CAC9C,GAAI0B,GACJ,KAAM,CACJ,UAAW3F,GAAgBiB,CAAQ,EAAI,WACvC,SAAUA,CACpB,CACA,CAAO,CACH,CAaA,yBAAyBA,EAAU,CACjC,IAAIE,EAAO,KAAK,YAAY,yBAAyBF,CAAQ,EACzDE,EAAK,CAAC,IAAM,IACd,QAAQ,KAAK,YAAcF,EAAW,qCACpCE,EAAO,6GAA6G,EAEtH,KAAK,mBAAmBF,EAAUgD,EAAM,QAAS,CAC/C,GAAI+B,GACJ,KAAM,CACJ,SAAU7E,CACtB,CACA,CAAS,CAEL,CAeA,wBAAwBF,EAAUoJ,EAAYnB,EAAW,CACvD,IAAIH,EAAMqB,GAAYC,CAAU,EAChC,GAAI,CAACtB,EACH,MAAM,IAAI,MAAM,kCAAoCsB,EAAa,GAAG,EAEtE,MAAM5K,EAAOqJ,GAAmB,KAAMC,EAAK9E,EAAM,QAASsC,GAAmBtF,EAAUiI,CAAS,EAGhG9E,GAAmB,KAAMF,EAAY,EAAEjD,CAAQ,EAAIxB,CACrD,CAeA,aAAarR,EAAM3J,EAAMsc,EAAO,CAC9B,MAAMnZ,EAAO,KAAK,OACZykB,EAAS,GACf,QAAS3nB,EAAE,EAAGsO,EAAE5E,EAAK,OAAQ1J,EAAEsO,EAAGtO,IAAK,CACrC,GAAI,CAAC,KAAAqC,EAAM,WAAAulB,EAAY,SAAAC,EAAU,MAAAvqB,EAAO,QAAA6lB,CAAO,EAAIzZ,EAAK1J,CAAC,EACzD,GAAI,CAACmjB,EACH,GAAI0E,EAAU,CACZ,MAAM5kB,EAAUwX,GAAapY,EAAMtC,CAAI,EACjC+nB,EAAY9B,GAAY9iB,EAAMmZ,EAAOpZ,EAAUlD,EAAOsC,CAAI,EAChE/E,EAAQ,CACN,KAAM2F,EAAUlD,EAAOsC,EACvB,MAAOylB,EACP,KAAM7kB,EAAU6X,EAAI5X,EAAMb,CAAI,EAAIylB,CAChD,CACU,MACExqB,EAAQsqB,EAAa5B,GAAY9iB,EAAMmZ,EAAOha,CAAI,EAAIa,EAAKb,CAAI,EAKnE,GAAIiV,IAAmB,CAAC,KAAK,0BAA4Bha,IAAU,QAAaoM,EAAK,OAAS,EAC5F,OAAO4V,GAETqI,EAAO3nB,CAAC,EAAI1C,CACd,CACA,OAAOqqB,CACT,CAyCA,OAAO,kBAAkBpL,EAAUxd,EAAM6nB,EAAQ,CAC/C,KAAK,UAAU,mBAAmBrK,EAAUxd,EAAM6nB,CAAM,CAC1D,CAaA,OAAO,uBAAuBrK,EAAUmL,EAAQlD,EAAW,CACzD,KAAK,UAAU,wBAAwBjI,EAAUmL,EAAQlD,CAAS,CACpE,CAgBA,OAAO,qBAAqBmB,EAAYnB,EAAW,CACjD,KAAK,UAAU,sBAAsBmB,EAAYnB,CAAS,CAC5D,CAWA,OAAO,wBAAwBjI,EAAU,CACvC,KAAK,UAAU,yBAAyBA,CAAQ,CAClD,CAmBA,OAAO,uBAAuBA,EAAUkL,EAAiB,CACvD,KAAK,UAAU,wBAAwBlL,EAAUkL,CAAe,CAClE,CAWA,OAAO,wBAAwBlL,EAAU,CACvC,KAAK,UAAU,yBAAyBA,CAAQ,CAClD,CAiBA,OAAO,uBAAuBA,EAAUoJ,EAAYnB,EAAW,CAC7D,KAAK,UAAU,wBAAwBjI,EAAUoJ,EAAYnB,CAAS,CACxE,CAeA,OAAO,aAAahR,EAAU,CAC5B,OAAO,KAAK,UAAU,cAAcA,CAAQ,CAC9C,CA6DA,cAAcA,EAAUuU,EAAiB,CACvC,IAAIjJ,EAAe,KAAK,YAAY,eAAetL,CAAQ,EACvDwU,EAAc,KAAK,wBAA0BlJ,EAGjD,GAAI,CAACkJ,EACH,QAASljB,KAAQga,EAAa,gBAC5B,KAAK,wBAAwBha,CAAI,EAGrC,GAAIijB,EAKF,GAFAjJ,EAA4C,OAAO,OAAOA,CAAY,EACtEA,EAAa,YAAckJ,EACvB,CAAC,KAAK,eAER,KAAK,eAAiBlJ,MACjB,CAaL,MAAMvY,EAASiN,EAAS,qBAAuB,KAAK,eAC9CyU,EAAW1hB,EAAO,UACxBuY,EAAa,OAASvY,EACtBA,EAAO,UAAYuY,EACnBA,EAAa,gBAAkBmJ,EAC3BA,EACFA,EAAS,YAAcnJ,EAEvBvY,EAAO,WAAauY,CAExB,MAEA,KAAK,uBAAyBA,EAEhC,OAAOA,CACT,CAgBA,OAAO,2BAA2BA,EAAcha,EAAM8hB,EAAQ,CAC5D,IAAIsB,EAAYpJ,EAAa,UAAYA,EAAa,WAAa,GACnEoJ,EAAUpjB,CAAI,EAAI,GAClB,IAAI8a,EAAUd,EAAa,gBAAkBA,EAAa,iBAAmB,IAC3Dc,EAAQ9a,CAAI,EAAI8a,EAAQ9a,CAAI,GAAK,IACvC,KAAK8hB,CAAM,CACzB,CAyBA,eAAepT,EAAUsL,EAAc,CACrCA,EAAgBA,GAA6C,KAAK,cAActL,EAAU,EAAI,EAG9FmT,GAAU,KAAK,IAAI,EACnB,IAAIvH,EAAM,MAAM,eAAe5L,EAAUsL,CAAY,EAKrD,GAJA6H,GAAU,IAAG,EAEb7H,EAAa,SAAWM,EAAI,SAExB,CAACN,EAAa,YAAa,CAC7B,IAAI3U,EAAQ2U,EAAa,WAAa,GACtC,QAAS5Q,EAAEkR,EAAI,WAAYlR,EAAGA,EAAEA,EAAE,YAChC/D,EAAM,KAAK+D,CAAC,CAEhB,CACA,OAAAkR,EAAI,aAAeN,EAEnBgF,GAAc,KAAMhF,CAAY,EAU5B,KAAK,qBACP,KAAK,uBAAuBA,EAAc,KAAK,OAAQ,KAAM,EAAK,EAClE,KAAK,cAAa,GAEbM,CACT,CAYA,gBAAgBA,EAAK,CAKnB,MAAMN,EAAeM,EAAI,aACnB,CAAC,gBAAA+I,EAAiB,YAAAC,EAAa,OAAA7hB,CAAM,EAAIuY,EAC3CqJ,EACFA,EAAgB,YAAcC,EACrB7hB,IACTA,EAAO,WAAa6hB,GAElBA,EACFA,EAAY,gBAAkBD,EACrB5hB,IACTA,EAAO,UAAY4hB,GAErBrJ,EAAa,YAAcA,EAAa,gBAAkB,KAE1D,IAAI3U,EAAQ2U,EAAa,WACzB,QAAS9e,EAAE,EAAGA,EAAEmK,EAAM,OAAQnK,IAAK,CACjC,IAAIgd,EAAO7S,EAAMnK,CAAC,EAClBoa,EAAKA,EAAK4C,CAAI,EAAE,UAAU,EAAE,YAAYA,CAAI,CAC9C,CACF,CAmBA,OAAO,mBAAmBA,EAAM8B,EAAcV,EAAU,CAGtD,IAAIW,EAAQ2H,EAAoB,mBAAmB,KACjD,KAAM1J,EAAM8B,EAAcV,CAAQ,EACpC,GAAIpB,EAAK,WAAa,KAAK,UAAW,CACpC,IAAIpZ,EAAQ,KAAK,eAAeoZ,EAAK,YAAa8B,CAAY,EAC1Dlb,IAIFoZ,EAAK,YAAcyI,GAAiB7hB,CAAK,GAAK,IAC9Cof,GAAW,KAAMlE,EAAcV,EAAU,OAAQ,cAAexa,CAAK,EACrEmb,EAAQ,GAEZ,CACA,OAAOA,CACT,CAqBA,OAAO,4BAA4B/B,EAAM8B,EAAcV,EAAU/b,EAAM/E,EAAO,CAC5E,IAAIsG,EAAQ,KAAK,eAAetG,EAAOwhB,CAAY,EACnD,GAAIlb,EAAO,CAET,IAAIykB,EAAWhmB,EACX6gB,EAAO,WAIPzD,GAAsB,KAAKpd,CAAI,EACjC6gB,EAAO,YACE7gB,EAAKA,EAAK,OAAO,CAAC,GAAK,MAChCA,EAAOA,EAAK,MAAM,EAAG,EAAE,EACvB6gB,EAAO,aAGT,IAAIC,EAAUsC,GAAiB7hB,CAAK,EACpC,OAAIuf,GAAWD,GAAQ,cAGjB7gB,GAAQ,SAAW2a,EAAK,aAAa,OAAO,IAC9CmG,GAAW,IAAMnG,EAAK,aAAa3a,CAAI,GAEzC2a,EAAK,aAAa3a,EAAM8gB,CAAO,GAG7BD,GAAQ,aAAemF,GAAY,oBACrCrL,EAAK,aAAa3a,EAAM,EAAE,EAMxB2a,EAAK,YAAc,SAAWqL,IAAa,SAC7CrL,EAAK,aAAaqL,EAAU,EAAE,EAGhCrL,EAAK,gBAAgBqL,CAAQ,EAKzBnF,IAAS,aACX7gB,EAAO+O,GAAgB/O,CAAI,GAE7B2gB,GAAW,KAAMlE,EAAcV,EAAU8E,EAAM7gB,EAAMuB,EAAOuf,CAAO,EAC5D,EACT,KAGE,QAAOuD,EAAoB,4BAA4B,KACrD,KAAM1J,EAAM8B,EAAcV,EAAU/b,EAAM/E,CAAK,CAErD,CAgBA,OAAO,6BAA6B0f,EAAM8B,EAAcV,EAAU,CAGhE,IAAIW,EAAQ2H,EAAoB,6BAA6B,KAC3D,KAAM1J,EAAM8B,EAAcV,CAAQ,EACpC,MAAM7X,EAASyW,EAAK,WACdsL,EAAqBlK,EAAS,aAC9BmK,EAAUhiB,EAAO,YAAc,SAC/BiiB,EAAcjiB,EAAO,YAAc,aAGrCiR,KAA0B+Q,GAAWC,KACvCjiB,EAAO,YAAYyW,CAAI,EAGvBoB,EAAWA,EAAS,WACpBA,EAAS,aAAekK,EAGxBlK,EAAS,MAAQ,GACjBW,EAAQ,IAGV,IAAImJ,EAAYI,EAAmB,UACnC,GAAI7Q,IAAa8Q,EAQXL,IACFpJ,EAAa,UACX,OAAO,OAAOA,EAAa,WAAa,GAAIoJ,CAAS,EAIlD1Q,KACH4G,EAAS,WAAW,MAAQ,SAG3B,CACL,IAAIqK,EAAO,IACX,QAASC,KAAUR,EAAW,CAC5B,IAAItkB,EAAQ,CAAC,CAAE,KAAA6kB,EAAM,OAAAC,EAAQ,aAAc,CAACA,CAAM,EAAG,SAAU,GAAM,EACrE1F,GAAW,KAAMlE,EAAcV,EAAU,WAAY,SAAWsK,EAAQ9kB,CAAK,CAC/E,CACF,CACA,OAAOmb,CACT,CA+CA,OAAO,eAAe4J,EAAM7J,EAAc,CACxC,IAAIlb,EAAQ,GACRglB,EAAY,EACZ5mB,EAOJ,MAAQA,EAAIwjB,GAAa,KAAKmD,CAAI,KAAO,MAAM,CAEzC3mB,EAAE,MAAQ4mB,GACZhlB,EAAM,KAAK,CAAC,QAAS+kB,EAAK,MAAMC,EAAW5mB,EAAE,KAAK,CAAC,CAAC,EAGtD,IAAIymB,EAAOzmB,EAAE,CAAC,EAAE,CAAC,EACbof,EAAS,EAAQpf,EAAE,CAAC,EACpB0mB,EAAS1mB,EAAE,CAAC,EAAE,KAAI,EAClB6mB,EAAc,GAAOC,EAAc,GAAIC,EAAQ,GAC/CN,GAAQ,MAAQM,EAAQL,EAAO,QAAQ,IAAI,GAAK,IAClDI,EAAcJ,EAAO,UAAUK,EAAQ,CAAC,EACxCL,EAASA,EAAO,UAAU,EAAGK,CAAK,EAClCF,EAAc,IAEhB,IAAIG,EAAYtD,GAAYgD,CAAM,EAC9BnF,EAAe,GACnB,GAAIyF,EAAW,CAEb,GAAI,CAAC,KAAAtf,EAAM,WAAAiV,CAAU,EAAIqK,EACzB,QAAShpB,GAAE,EAAGA,GAAE0J,EAAK,OAAQ1J,KAAK,CAChC,IAAIykB,GAAM/a,EAAK1J,EAAC,EACXykB,GAAI,SACPlB,EAAa,KAAKkB,EAAG,CAEzB,CACA,IAAIwE,EAAanK,EAAa,YAC1BmK,GAAcA,EAAWtK,CAAU,GAAKqK,EAAU,UACpDzF,EAAa,KAAK5E,CAAU,EAC5BqK,EAAU,UAAY,GAE1B,MAEEzF,EAAa,KAAKmF,CAAM,EAE1B9kB,EAAM,KAAK,CACT,OAAA8kB,EAAQ,KAAAD,EAAM,OAAArH,EAAQ,YAAAyH,EAAa,UAAAG,EAAW,aAAAzF,EAC9C,MAAOuF,CACjB,CAAS,EACDF,EAAYpD,GAAa,SAC3B,CAEA,GAAIoD,GAAaA,EAAYD,EAAK,OAAQ,CACxC,IAAIxF,EAAUwF,EAAK,UAAUC,CAAS,EAClCzF,GACFvf,EAAM,KAAK,CACT,QAASuf,CACrB,CAAW,CAEL,CACA,OAAIvf,EAAM,OACDA,EAEA,IAEX,CAiBA,OAAO,iBAAiB8U,EAAMsC,EAAMjb,EAAMsc,EAAOS,EAAUkD,EAAU,CACnE,IAAI1iB,EACJ,OAAI0d,EAAK,UACP1d,EAAQslB,GAAgBlK,EAAM3Y,EAAMsc,EAAOS,EAAU9B,EAAK,SAAS,EAC1Djb,GAAQib,EAAK,OACtB1d,EAAQwd,EAAIpC,EAAMsC,EAAK,MAAM,EAEzBgF,GAAY3F,GAAOta,CAAI,EACzBzC,EAAQwd,EAAIpC,EAAM3Y,CAAI,EAEtBzC,EAAQob,EAAK,OAAO3Y,CAAI,EAGxBib,EAAK,SACP1d,EAAQ,CAACA,GAEJA,CACT,CAEJ,CAEE,OAAOmpB,CACT,CAAC,EAyBKE,GAAY,GCpoGlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;ECAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwBA,SAASuC,GAAoB7M,EAAO,CAClC,MAAM8M,EAAS,GACf,QAAS5a,KAAK8N,EAAO,CACnB,MAAMpd,EAAIod,EAAM9N,CAAC,EACjB4a,EAAO5a,CAAC,EAAK,OAAOtP,GAAM,WAAc,CAAC,KAAMA,CAAC,EAAIA,CACtD,CACA,OAAOkqB,CACT,CAsBO,MAAMC,GAAkBxR,GAActF,GAAc,CAO1D,MAAM3L,EAAOyV,GAAkB9J,CAAU,EASzC,SAAS+W,EAAqBpG,EAAa,CACzC,MAAMqG,EAAY,OAAO,eAAerG,CAAW,EAMnD,OAAQqG,EAAU,qBAAqBF,EACOE,EAAa,IAC7D,CAUA,SAASC,EAActG,EAAa,CAClC,GAAI,CAACA,EAAY,eAAe,0BAA0B,kBAAmBA,CAAW,CAAC,EAAG,CAC1F,IAAI5G,EAAQ,KAEZ,GAAI4G,EAAY,eAAe,0BAA0B,aAAcA,CAAW,CAAC,EAAG,CACpF,MAAMuG,EAAavG,EAAY,WAE3BuG,IACHnN,EAAQ6M,GAAoBM,CAAU,EAEzC,CAEAvG,EAAY,gBAAkB5G,CAChC,CACA,OAAO4G,EAAY,eACrB,CASA,MAAMmG,UAAwBziB,CAAK,CAQjC,WAAW,oBAAqB,CAC9B,GAAI,CAAC,KAAK,eAAe,0BAA0B,uBAAwB,IAAI,CAAC,EAAG,CACxE,KAAK,UACd,MAAM0V,EAAQ,KAAK,YACnB,KAAK,qBAAuBA,EAAQ,OAAO,KAAKA,CAAK,EAAE,IAAI9N,GAAK,KAAK,UAAU,2BAA2BA,CAAC,CAAC,EAAI,EAClH,CACA,OAAO,KAAK,oBACd,CAUA,OAAO,UAAW,CAChB,GAAI,CAAC,KAAK,eAAe,0BAA0B,cAAe,IAAI,CAAC,EAAG,CACxE,MAAM+a,EAAYD,EAAgE,IAAI,EAClFC,GACFA,EAAU,SAAQ,EAEpB,KAAK,YAAc,GACnB,KAAK,eAAc,CACrB,CACF,CAUA,OAAO,gBAAiB,CACtB,MAAMjN,EAAQkN,EAAyD,IAAI,EACvElN,GACgB,KAAM,iBAAiBA,CAAK,CAElD,CAWA,WAAW,aAAc,CACvB,GAAI,CAAC,KAAK,eACR,0BAA0B,eAAgB,IAAI,CAAC,EAAG,CAClD,MAAMiN,EAAYD,EAAgE,IAAI,EACtF,KAAK,aAAe,OAAO,OAAO,GAChCC,GAAaA,EAAU,YACvBC,EAAwD,IAAI,CAAE,CAClE,CACA,OAAO,KAAK,YACd,CAWA,OAAO,gBAAgBlnB,EAAM,CAC3B,MAAM0Y,EAAO,KAAK,YAAY1Y,CAAI,EAClC,OAAO0Y,GAAQA,EAAK,IACtB,CAQA,uBAAwB,CAEtB,KAAK,YAAY,SAAQ,EACzB,MAAM,sBAAqB,CAC7B,CAUA,mBAAoB,CACd,MAAM,mBACR,MAAM,kBAAiB,EAEzB,KAAK,kBAAiB,CACxB,CAQA,sBAAuB,CACjB,MAAM,sBACR,MAAM,qBAAoB,CAE9B,CAEH,CAEC,OAAOqO,CAER,CAAC,EChPD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GA0BO,MAAM3X,GAAU,QAEVgY,GAAW,OAAO,UAAY,OAAO,SAAS,SAyE9CC,GAAe9R,GAAcjR,GAAQ,CAQhD,MAAMgjB,EAAqBP,GAAgB3C,GAAgB9f,CAAI,CAAC,EAahE,SAASijB,EAAiB3G,EAAa,CACrC,GAAI,CAACA,EAAY,eACf,0BAA0B,qBAAsBA,CAAW,CAAC,EAAG,CAC/DA,EAAY,mBAAqB,KACjC,IAAI5G,EAAQ4G,EAAY,YACxB,QAAS1U,KAAK8N,EAAO,CACnB,IAAItB,EAAOsB,EAAM9N,CAAC,EACd,UAAWwM,IACbkI,EAAY,mBAAqBA,EAAY,oBAAsB,GACnEA,EAAY,mBAAmB1U,CAAC,EAAIwM,EAExC,CACF,CACA,OAAOkI,EAAY,kBACrB,CAQA,SAAS4G,EAAa5G,EAAa,CACjC,OAAKA,EAAY,eACf,0BAA0B,iBAAkBA,CAAW,CAAC,IACxDA,EAAY,eACRA,EAAY,eACR,0BAA0B,YAAaA,CAAW,CAAC,EACbA,EAAa,UACvD,MAECA,EAAY,cACrB,CA4DA,SAAS6G,EAAyBxN,EAAOja,EAAM0Y,EAAMgP,EAAU,CAEzDhP,EAAK,WACPA,EAAK,SAAW,IAOdA,EAAK,WACHuB,EAAM,mBAAmBja,CAAI,EAC/B,QAAQ,KAAK,sCAAsCA,CAAI,IAAI,EAE3Dia,EAAM,wBAAwBja,EAAM0Y,EAAK,SAAUgP,CAAQ,GAG3DhP,EAAK,UAAY,CAACuB,EAAM,mBAAmBja,CAAI,EACjDia,EAAM,wBAAwBja,EAAM,CAAC0Y,EAAK,QAAQ,EACzCA,EAAK,WAAa,IAASuB,EAAM,mBAAmBja,CAAI,GACjE,QAAQ,KAAK,kCAAkCA,CAAI,iBAAiB,EAElE0Y,EAAK,oBAAsB,CAACuB,EAAM,kBAAkBja,CAAI,EAC1Dia,EAAM,yBAAyBja,CAAI,EAC1B0Y,EAAK,qBAAuB,IAASuB,EAAM,kBAAkBja,CAAI,GAC1E,QAAQ,KAAK,mCAAmCA,CAAI,kBAAkB,EAEpE0Y,EAAK,QAAU,CAACuB,EAAM,iBAAiBja,CAAI,EAC7Cia,EAAM,yBAAyBja,CAAI,EAC1B0Y,EAAK,SAAW,IAASuB,EAAM,iBAAiBja,CAAI,GAC7D,QAAQ,KAAK,gCAAgCA,CAAI,eAAe,EAG9D0Y,EAAK,UACPuB,EAAM,wBAAwBja,EAAM0Y,EAAK,SAAUgP,EAAShP,EAAK,QAAQ,CAAC,EAG5EuB,EAAM,2BAA2Bja,CAAI,CACvC,CAYA,SAAS2nB,EAAqBC,EAAOzW,EAAU0K,EAAI5H,EAAS,CAC1D,GAAI,CAACmT,GAAU,CACb,MAAMS,EAAiB1W,EAAS,QAAQ,iBAAiB,OAAO,EAC1D2W,EAAoBtQ,GAAmBrG,CAAQ,EAE/C4W,EAAenQ,GAAwBiE,CAAE,EACzCmM,EAAqB7W,EAAS,QAAQ,kBAC5C,QAAS0I,EAAM,EAAGA,EAAMkO,EAAa,OAAQlO,IAAO,CAClD,IAAI/c,EAAIirB,EAAalO,CAAG,EACxB/c,EAAE,YAAc8qB,EAAM,kBAAkB9qB,EAAE,YAAamX,CAAO,EAC9D9C,EAAS,QAAQ,aAAarU,EAAGkrB,CAAkB,CACrD,CAEA,IAAIC,EAAqB,EAEzB,QAAStqB,EAAI,EAAGA,EAAImqB,EAAkB,OAAQnqB,IAAK,CACjD,IAAIb,EAAIgrB,EAAkBnqB,CAAC,EACvBuqB,EAAgBL,EAAeI,CAAkB,EAGjDC,IAAkBprB,GACpBA,EAAIA,EAAE,UAAU,EAAI,EACpBorB,EAAc,WAAW,aAAaprB,EAAGorB,CAAa,GAEtDD,IAEFnrB,EAAE,YAAc8qB,EAAM,kBAAkB9qB,EAAE,YAAamX,CAAO,CAChE,CACF,CAcA,GAbI,OAAO,UACT,OAAO,SAAS,gBAAgB9C,EAAU0K,CAAE,EAY1CxG,IAAqC+R,IACrC5S,GAA6B,CAE/B,MAAM7D,EAASQ,EAAS,QAAQ,iBAAiB,OAAO,EACxD,GAAIR,EAAQ,CACV,IAAIxC,EAAM,GACV,MAAM,KAAKwC,CAAM,EAAE,QAAQ7T,GAAK,CAC9BqR,GAAOrR,EAAE,YACTA,EAAE,WAAW,YAAYA,CAAC,CAC5B,CAAC,EACD8qB,EAAM,YAAc,IAAI,cACxBA,EAAM,YAAY,YAAYzZ,CAAG,CACnC,CACF,CACF,CAUA,SAASga,EAAyBtM,EAAI,CACpC,IAAI1K,EAAW,KAGf,GAAI0K,IAAO,CAACjH,IAAwBC,MAClC1D,EACImF,GAAU,OAAOuF,EAAI,UAAU,EAG/BjH,IAAwB,CAACzD,GAC3B,MAAM,IAAI,MAAM,mEAAmE0K,CAAE,EAAE,EAG3F,OAAO1K,CACT,CASA,MAAMiX,UAAuBd,CAAmB,CAO9C,WAAW,uBAAwB,CACjC,OAAOlY,EACT,CAUA,OAAO,gBAAiB,CAGtBkY,EAAmB,eAAe,KAAK,IAAI,EAC3C,MAAMe,EAAYb,EAAa,IAAI,EAC/Ba,GACF,KAAK,gBAAgBA,EAAW,KAAK,WAAW,EAElD,KAAK,iBAAgB,CACvB,CAGA,OAAO,kBAAmB,CAExB,IAAIlX,EAAqD,KAAM,SAC3DA,IACE,OAAOA,GAAa,UACtB,QAAQ,MAAM,iDAAiD,EAC/DA,EAAW,MACD2D,KACV3D,EAAWA,EAAS,UAAU,EAAI,IAKtC,KAAK,UAAU,UAAYA,CAC7B,CAUA,OAAO,iBAAiB6I,EAAO,CAC7B,QAAS9N,KAAK8N,EACZyN,EACsB,KAAK,UAAYvb,EAAG8N,EAAM9N,CAAC,EAAG8N,CAAK,CAE7D,CAcA,OAAO,gBAAgBqO,EAAWzB,EAAY,CAC5C,MAAM3M,EAAQ,KAAK,UACnB,QAAStc,EAAE,EAAGA,EAAI0qB,EAAU,OAAQ1qB,IAClCsc,EAAM,sBAAsBoO,EAAU1qB,CAAC,EAAGipB,CAAU,CAExD,CA2CA,WAAW,UAAW,CAcpB,GAAI,CAAC,KAAK,eAAe,0BAA0B,YAAa,IAAI,CAAC,EAAG,CACtE,IAAI0B,EAAgB,KAAK,UAAU,eACjC,0BAA0B,YAAa,KAAK,SAAS,CAAC,EACtD,KAAK,UAAU,UAAY,OAGzB,OAAOA,GAAkB,aAC3BA,EAAgBA,EAAa,GAE/B,KAAK,UAOHA,IAAkB,OAAYA,EAE5B,KAAK,eAAe,0BAA0B,KAAM,IAAI,CAAC,GAC1DH,EAAkE,KAAM,EAAE,GAG3E,OAAO,eAAwD,KAAM,SAAS,EAAE,YAAY,QAChG,CACA,OAAO,KAAK,SACd,CAQA,WAAW,SAASltB,EAAO,CACzB,KAAK,UAAYA,CACnB,CAsBA,WAAW,YAAa,CACtB,GAAI,CAAC,KAAK,eAAe,0BAA0B,cAAe,IAAI,CAAC,EAAG,CACxE,MAAMstB,EAAO,KAAK,WAClB,GAAIA,EACF,KAAK,YAAcjU,GAAYiU,EAAK,GAAG,MAClC,CACL,MAAMrS,EAASI,GAAU,OAAiD,KAAM,EAAE,EAClF,KAAK,YAAeJ,GAAUA,EAAO,WACnC,OAAO,eAAwD,KAAM,SAAS,EAAE,YAAY,UAChG,CACF,CACA,OAAO,KAAK,WACd,CAEA,aAAc,CACZ,MAAK,EAEL,KAAK,UAEL,KAAK,YAEL,KAAK,SAEL,KAAK,WAEL,KAAK,KAEL,KAAK,CACP,CAcA,uBAAwB,CACtB,KAAK,YAAY,SAAQ,EAGzB,KAAK,YAAY,kBAA8C,KAAM,SAAS,EAC9E,MAAM,sBAAqB,EAE3B,KAAK,SAAWxB,GAChB,KAAK,WAAa,KAAK,YAAY,WAEnC,IAAImD,EAAK0P,EAAiB,KAAK,WAAW,EAC1C,GAAK1P,EAGL,QAAS3L,KAAK2L,EAAI,CAChB,IAAIa,EAAOb,EAAG3L,CAAC,EACf,GAAI,KAAK,yBAAyBA,CAAC,EAAG,CACpC,IAAIjR,EAAQ,OAAOyd,EAAK,OAAS,WAC/BA,EAAK,MAAM,KAAK,IAAI,EACpBA,EAAK,MAGH,KAAK,aAAaxM,CAAC,EACrB,KAAK,oBAAoBA,EAAGjR,EAAO,EAAI,EAEvC,KAAKiR,CAAC,EAAIjR,CAEd,CACF,CACF,CAUA,yBAAyBif,EAAU,CACjC,MAAO,CAAC,KAAK,eAAeA,CAAQ,CACtC,CAWA,OAAO,kBAAkB/F,EAASF,EAAS,CACzC,OAAOC,GAAWC,EAASF,CAAO,CACpC,CAYA,OAAO,kBAAkB4H,EAAI,CAE3B,MAAM1K,EAAW,KAAK,UAAU,UAChC,GAAIA,GAAY,CAACA,EAAS,mBAAoB,CAC5CA,EAAS,mBAAqB,GAC9B,MAAMqX,EAAa,KAAK,WAClBvU,EAAUuU,EAAaxU,GAAWwU,CAAU,EAAI,GAEtDb,EAAqB,KAAMxW,EAAU0K,EAAI5H,CAAO,EAChD,KAAK,UAAU,cAAc9C,CAAQ,CACvC,CACF,CAeA,mBAAoB,CACd,OAAO,UAAY,KAAK,WAC1B,OAAO,SAAS,aAAyC,IAAI,EAE/D,MAAM,kBAAiB,CACzB,CAQA,OAAQ,CACF,KAAK,YACP,KAAK,KAAO,KAAK,eAAe,KAAK,SAAS,EAC9C,KAAK,EAAI,KAAK,KAAK,GAErB,MAAM,MAAK,CACb,CAYA,eAAgB,CACV,KAAK,YACP,KAAK,KAAO,KAAK,WAA0C,KAAK,IAAI,GAMtE,MAAM,cAAa,CACrB,CAeA,WAAW4L,EAAK,CACd,MAAMlR,EAAIkM,EAAK,IAAI,EACnB,GAAIlM,EAAE,aACJ,OAAIkR,GACGlR,EAAE,aACLA,EAAE,aAAa,CAAC,KAAM,OAAQ,qBAAsBkR,CAAG,CAAC,EACxDlR,EAAE,WAAW,YAAYkR,CAAG,EAGxB,KAAK,YAAY,cACnBlR,EAAE,WAAW,mBAAqB,CAAC,KAAK,YAAY,WAAW,IAG/DmJ,IAAqB,OAAO,UAC9B,OAAO,SAAS,aAAanJ,EAAE,UAAU,EAEpCA,EAAE,YAEJ,KAEP,MAAM,IAAI,MAAM,2IAG6C,CAEjE,CAwBA,aAAasb,EAAY,CACnB,OAAO,UACT,OAAO,SAAS,aAAyC,KAAOA,CAAU,CAE9E,CAkBA,WAAW9iB,EAAKC,EAAM,CACpB,MAAI,CAACA,GAAQ,KAAK,aAChBA,EAAO0P,GAAW,KAAK,UAAU,GAE5BA,GAAW3P,EAAKC,CAAI,CAC7B,CAeA,OAAO,sBAAsB6M,EAAUsL,EAAcV,EAAU,CAC7D,OAAAU,EAAa,WAAaA,EAAa,YAAc,KAAK,YAGnD6K,EAAmB,sBAAsB,KAC9C,KAAMnW,EAAUsL,EAAcV,CAAQ,CAC1C,CAcA,OAAO,2BAA2BU,EAAcha,EAAM8hB,EAAQ,CAS5D,OAAIxP,IAAkB,EAAEtS,KAAQ,KAAK,cAGjC,EAAE8hB,EAAO,KAAK,KAAK,WAAaA,EAAO,KAAK,KAAK,UAAU,SAK3D,CAACA,EAAO,KAAK,KAAK,UAAY,CAAC9H,EAAa,gBAC9C,QAAQ,KAAK,aAAaha,CAAI,sFACK,EAI9B6kB,EAAmB,2BAA2B,KACnD,KAAM7K,EAAcha,EAAM8hB,CAAM,CACpC,CAEJ,CAEE,OAAO6D,CACT,CAAC,EC52BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBA,MAAMK,GAAS,OAAO,cAClB,aAAa,aAAa,uBAAwB,CAAC,WAAa3rB,GAAMA,CAAC,CAAC,EAO5E,MAAM4rB,EAAc,CAKlB,YAAYC,EAASrD,EAAQ,CAC3BsD,GAAoCD,EAASrD,CAAM,EACnD,MAAMuD,EAASvD,EAAO,OAClB,CAACwD,EAAKtc,EAAGqN,IAAQiP,EAAMC,GAAavc,CAAC,EAAImc,EAAQ9O,EAAM,CAAC,EAAG8O,EAAQ,CAAC,CAAC,EAEzE,KAAK,MAAQE,EAAO,SAAQ,CAC9B,CAKA,UAAW,CACT,OAAO,KAAK,KACd,CACF,CAMA,SAASE,GAAa9tB,EAAO,CAC3B,GAAIA,aAAiBytB,GACnB,OAAqCztB,EAAO,MAE5C,MAAM,IAAI,MACN,+DAA+DA,CAAK,EAC5E,CAEA,CAMA,SAAS+tB,GAAU/tB,EAAO,CACxB,GAAIA,aAAiB,oBAOnB,OAA4CA,EAAO,UAC9C,GAAIA,aAAiBytB,GAC1B,OAAOK,GAAa9tB,CAAK,EAEzB,MAAM,IAAI,MACN,yDAAyDA,CAAK,EAAE,CAExE,CAoCO,MAAMiT,GAAO,SAAcya,KAAYrD,EAAQ,CACpDsD,GAAoCD,EAASrD,CAAM,EACnD,MAAMnU,EACmC,SAAS,cAAc,UAAU,EAC1E,IAAIlW,EAAQqqB,EAAO,OACf,CAACwD,EAAKtc,EAAGqN,IAAQiP,EAAME,GAAUxc,CAAC,EAAImc,EAAQ9O,EAAM,CAAC,EAAG8O,EAAQ,CAAC,CAAC,EACtE,OAAIF,KACFxtB,EAAQwtB,GAAO,WAAWxtB,CAAK,GAEjCkW,EAAS,UAAYlW,EACdkW,CACT,EAMMyX,GAAsC,CAACD,EAASrD,IAAW,CAI/D,GAAI,CAAC,MAAM,QAAQqD,CAAO,GAAK,CAAC,MAAM,QAAQA,EAAQ,GAAG,GACpDrD,EAAO,SAAWqD,EAAQ,OAAS,EAItC,MAAM,IAAI,UAAU,uCAAuC,CAE/D,ECnJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8BO,MAAMP,GAAiBf,GAAa,WAAW,EC9BhD4B,GAAqB,IAAI,QAQ/B,SAASC,GAA0B1T,EAAOvF,EAAY,CACpD,IAAI2X,EAAQ3X,EACZ,KAAO2X,GAAO,CACZ,GAAIqB,GAAmB,IAAIrB,CAAK,IAAMpS,EACpC,MAAO,GAEToS,EAAQ,OAAO,eAAeA,CAAK,CACrC,CACA,MAAO,EACT,CAOO,SAASuB,GAAY3T,EAAO,CACjC,OAAOvF,GAAc,CACnB,GAAIiZ,GAA0B1T,EAAOvF,CAAU,EAC7C,OAAOA,EAET,MAAMmZ,EAAa5T,EAAMvF,CAAU,EACnC,OAAAgZ,GAAmB,IAAIG,EAAY5T,CAAK,EACjC4T,CACT,CACF,CCjCA;AAAA;AAAA;AAAA;AAAA,GAiBO,MAAMC,GAAkBF,GAAalZ,GAGtC,OAAOA,EAAW,UAAU,eAAkB,WACzCA,EAGF,cAAmCA,CAAW,CACnD,aAAc,CACZ,MAAK,EAKL,KAAK,cAAgB,IAAI,GAC3B,CAGA,mBAAoB,CAClB,MAAM,kBAAiB,EAEvB,KAAK,cAAc,QAASlE,GAAM,CAC5BA,EAAE,eACJA,EAAE,cAAa,CAEnB,CAAC,CACH,CAGA,sBAAuB,CACrB,MAAM,qBAAoB,EAE1B,KAAK,cAAc,QAASA,GAAM,CAC5BA,EAAE,kBACJA,EAAE,iBAAgB,CAEtB,CAAC,CACH,CAQA,cAAcud,EAAY,CACxB,KAAK,cAAc,IAAIA,CAAU,EAE7B,KAAK,IAAM,QAAa,KAAK,aAAeA,EAAW,eACzDA,EAAW,cAAa,CAE5B,CAQA,iBAAiBA,EAAY,CAC3B,KAAK,cAAc,OAAOA,CAAU,CACtC,CACJ,CACC,EChFKze,GACJ,0EAEIC,GAAc,OAAO,QAAU,OAAO,OAAO,MAAQ,OAAO,OAAO,KAAK,QAE9E,SAASC,IAAa,CACpB,SAASC,GAAO,CAId,MAAO,EACT,CACA,OAAOC,GAAgBD,CAAI,CAC7B,CAEA,SAASE,IAAoB,CAC3B,GAAI,CACF,OAAIC,GAAuB,EAClB,GAGJC,GAAW,EAIZN,GACK,CAACO,GAAoB,EAGvB,CAACN,GAAU,EAPT,EAQX,MAAY,CAEV,MAAO,EACT,CACF,CAEA,SAASI,IAA0B,CACjC,OAAO,aAAa,QAAQ,8BAA8B,CAC5D,CAEA,SAASC,IAAc,CACrB,MAAQ,CAAC,YAAY,WAAW,EAAE,QAAQ,OAAO,SAAS,QAAQ,GAAK,CACzE,CAEA,SAASC,IAAuB,CAC9B,MAAI,GAAAP,IACyB,OAAO,KAAKA,EAAW,EAC/C,IAAI/O,GAAO+O,GAAY/O,CAAG,CAAC,EAC3B,OAAOuP,GAAUA,EAAO,cAAc,EAClB,OAAS,EAKpC,CAEA,SAASL,GAAgB7D,EAAUC,EAAM,CACvC,GAAI,OAAOD,GAAa,WACtB,OAGF,MAAMxE,EAAQiI,GAAqB,KAAKzD,EAAS,SAAQ,CAAE,EAC3D,GAAIxE,EACF,GAAI,CAEFwE,EAAW,IAAI,SAASxE,EAAM,CAAC,CAAC,CAClC,OAASrG,EAAG,CAEV,QAAQ,IAAI,6DAA8DA,CAAC,CAC7E,CAGF,OAAO6K,EAASC,CAAI,CACtB,CAIA,OAAO,OAAY,OAAO,QAAa,GAchC,MAAMkE,GAAuB,SAASnE,EAAUC,EAAM,CAC3D,GAAI,OAAO,OAAO,gBAChB,OAAO4D,GAAgB7D,EAAUC,CAAI,CAEzC,EAEI,OAAO,OAAO,kBAAoB,SACpC,OAAO,OAAO,gBAAkB6D,GAAiB,GCjFnD,SAASM,IAA0B,CACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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","names":["toArray","objectOrArray","log","msg","logValue","value","stringType","MODULE","NOMODULE","bundleKeys","ensureBundle","src","ensureRoute","route","isString","bundle","stringKeys","isFunction","isObject","key","overriddenProp","ensureRoutes","routes","loadScript","script","resolve","reject","e","loadBundle","fireRouterEvent","type","detail","o","f","s","getNotFoundError","context","error","notFoundResult","getAnchorOrigin","anchor","port","protocol","host","vaadinRouterGlobalClickHandler","event","path","i","target","pathname","search","hash","CLICK","isIE","inType","params","vaadinRouterGlobalPopstateHandler","POPSTATE","pathToRegexp_1","pathToRegexp$1","parse_1","parse","compile_1","compile","tokensToFunction_1","tokensToFunction","tokensToRegExp_1","tokensToRegExp","DEFAULT_DELIMITER","DEFAULT_DELIMITERS","PATH_REGEXP","str","options","tokens","index","defaultDelimiter","delimiters","pathEscaped","res","m","escaped","offset","prev","next","name","capture","group","modifier","k","partial","repeat","optional","delimiter","pattern","escapeGroup","escapeString","matches","data","encode","token","segment","j","flags","regexpToRegexp","keys","groups","arrayToRegexp","parts","stringToRegexp","strict","start","end","endsWith","isEndDelimited","hasOwnProperty","cache$1","decodeParam","val","matchPath","routepath","exact","parentKeys","parentParams","cacheKey","regexp","prop","matchRoute","ignoreLeadingSlash","match","childMatches","childIndex","routeToSkip","children","childRoute","matchedLength","childMatch","resolveRoute","isChildRoute","parentRoute","generateErrorMessage","currentContext","errorMessage","routePath","updateChainForRoute","item","Resolver","newRoutes","pathnameOrContext","nextMatches","resume","parent","prevResult","resolution","url","base","normalizedUrl","pathToRegexp","cache","cacheRoutes","routesByName","getRouteByName","routeName","getRoutePath","generateUrls","router","fullPath","rt","toPath","queryParams","query","triggers","setNavigationTriggers","newTriggers","trigger","willAnimate","elem","waitForAnimation","cb","listener","animate","className","rect","size","MAX_REDIRECT_COUNT","isResultNotEmpty","result","copyContextWithoutNext","copy","createLocation","chain","redirectFrom","resolver","userParams","getPathnameForRouter","Router","getMatchedPath","createRedirect","renderElement","element","runCallbackIfPossible","callback","args","thisArg","amend","amendmentFunction","amendmentResult","processNewChildren","newChildren","childRoutes","removeDomNodes","nodes","a","b","outlet","baseElement","baseHref","callbacks","commands","component","skipRender","shouldUpdateHistory","renderId","previousContext","animationDone","topOfTheChainContextBeforeRedirects","contextBeforeRedirects","contextAfterRedirects","topOfTheChainContextAfterRedirects","isFound","findNextContextIfAny","nextContext","contextWithFullChain","amendedContext","newContext","previousChain","newChain","prevent","redirect","chainElement","location","otherElement","redirectData","counter","replace","changeState","deepestCommonParent","unchangedElement","parentElement","elementToAdd","targetContext","currentComponent","from","to","promises","config","leave","enter","DEV_MODE_CODE_REGEXP","FlowClients","isMinified","test","uncommentAndRun","isDevelopmentMode","isForcedDevelopmentMode","isLocalhost","isFlowProductionMode","client","runIfDevelopmentMode","maybeGatherAndSendStats","usageStatistics","t","n$3","r","n","S","c","h","l","p","d","u","_a","_b","y","v","_","g","$","x","T","E","A","C","P","V","N","H","I","L","M","R","z","B","LoginView","LitElement","__publicField","apiService","__vitePreload","api","err","html","css","__decorateClass","state","customElement","API_BASE_URL","ApiService","endpoint","response","id","user","backendUser","RegisterView","dashToCamelCase","dash","experimentalMap","defineCustomElement","CustomElement","version","featureFlagKey","elementClass","defined","definedVersion","Lumo","getEffectiveStyles","componentClass","styleSheet","applyInstanceStyles","style","adoptStyles","ThemePropertyMixin","superClass","oldValue","newValue","themeRegistry","themableInstances","themableTagNames","classHasThemes","hasThemes","tagName","flattenStyles","styles","CSSResult","matchesThemeFor","themeFor","themeForToken","getCssText","STYLE_ID","addStylesToTemplate","template","styleEl","updateInstanceStyles","instance","updateInstanceStylesOfType","ref","updateComponentStyles","inheritingTagName","inheritingClass","hasMatchingStyle","themes","theme","themeStyle","registerStyles","getAllThemes","getIncludePriority","moduleName","includePriority","getIncludedStyles","includedStyles","includeModuleId","includedTheme","getThemes","defaultModuleName","themeA","themeB","ThemableMixin","superClassThemes","inheritedThemes","themeStyles","addGlobalThemeStyles","styleTag","addLumoGlobalStyles","colorBase","color","sizing","spacing","font","typography","button","obj","CSS_URL_RX","ABS_URL","workingURL","resolveDoc","resolveUrl","baseURI","resolveCss","cssText","pre","post","pathFromUrl","useShadow","supportsAdoptingStyleSheets","sheet","rootPath","sanitizeDOMValue","strictTemplatePolicy","allowTemplateFromDomModule","legacyOptimizations","legacyWarnings","syncInitialRender","legacyUndefined","orderedComputed","removeNestedTemplates","fastDomIf","useAdoptedStyleSheetsWithBuiltCSS","dedupeId","dedupingMixin","mixin","mixinApplications","mixinDedupeId","baseSet","map","extended","mixinSet","modules","lcModules","setModule","module","findModule","styleOutsideTemplateCheck","inst","DomModule","selector","old","namespace","owner","MODULE_STYLE_LINK_SELECTOR","INCLUDE_ATTR","SHADY_UNSCOPED_ATTR","importModule","moduleId","styleForImport","importDoc","container","importCss","stylesFromModules","moduleIds","stylesFromModule","_stylesFromModuleImports","stylesFromTemplate","e$","include","self","stylesFromModuleImports","p$","unscoped","wrap","isPath","root","dotIndex","isAncestor","isDescendant","translate","newBase","normalize","split","get","info","part","set","last","caseMap","DASH_TO_CAMEL","CAMEL_TO_DASH","camelToDashCase","camel","microtaskCurrHandle","microtaskLastHandle","microtaskCallbacks","microtaskNodeContent","microtaskScheduled","microtaskNode","microtaskFlush","len","microTask","handle","idx","microtask","PropertiesChanged","props","proto","property","readOnly","attr","ext","changed","changedProps","currentProps","oldProps","attribute","node","nativeProperties","isTrustedType","saveAccessorValue","model","PropertyAccessors","a$","el","outValue","templateExtensions","placeholderBugDetect","placeholderBug","hasPlaceholderBug","fixPlaceholder","copyAttributeWithTemplateEventPolicy","polymerTemplateEventAttributePolicy","dest","wrapTemplateExtension","is","findTemplateNode","nodeInfo","applyIdToMap","applyEventListener","applyTemplateInfo","parentTemplateInfo","createNodeEventHandler","eventName","methodName","TemplateStamp","outerTemplateInfo","templateInfo","noted","parentIndex","childInfo","attrs","content","dom","handler","NOOP","TYPES","COMPUTE_INFO","capitalAttributeRegex","ensureOwnEffectMap","cloneArrays","effects","protoFx","instFx","runEffects","hasPaths","extraArgs","ran","rootProperty","fxs","fx","pathMatchesTrigger","runEffectsForProperty","triggerPath","runObserverEffect","fn","changedProp","runNotifyEffects","notifyProps","notified","notifyPath","dispatchNotifyEvent","runNotifyEffect","handleNotification","fromProp","negate","fromPath","runReflectEffect","runComputedEffects","computeEffects","order","getComputedOrder","queue","enqueueEffectsFor","runComputedEffect","inputProps","insertEffect","mid","cmp","ordered","counts","ready","total","dependencyCounts","curr","computedByCurr","computedProp","infoForComputed","computedDeps","runMethodEffect","computeLinkedPaths","links","link","addBinding","constructor","kind","literal","binding","shouldAddListener","addEffectForBindingPart","dependencies","parseArg","runBindingEffect","nodeList","applyBindingValue","computeBindingValue","storage","setupBindings","nodeInfoList","bindings","setupCompoundStorage","addNotifyListener","literals","createMethodEffect","sig","effectFn","methodInfo","dynamicFn","arg","emptyArray","IDENT","NUMBER","SQUOTE_STRING","DQUOTE_STRING","STRING","ARGUMENT","ARGUMENTS","ARGUMENT_LIST","BINDING","OPEN_BRACKET","CLOSE_BRACKET","NEGATE","EXPRESSION","bindingRegex","literalFromParts","parseMethod","expression","parseArgs","argList","rawArg","fc","getArgValue","notifySplices","array","splices","splicesData","notifySplice","addedCount","removed","upper","PropertyEffects","propertyEffectsBase","hostStack","effect","shouldNotify","isPathNotification","propIsPath","prevProps","clients","setReadOnly","baseRunEffects","items","ret","hadLength","deleteCount","propPath","protectedSetter","method","values","structured","wildcard","pathValue","instanceBinding","wasPreBound","previous","hostProps","previousSibling","nextSibling","origName","nestedTemplateInfo","isDomIf","isDomRepeat","mode","source","text","lastIndex","customEvent","notifyEvent","colon","signature","dynamicFns","normalizeProperties","output","PropertiesMixin","superPropertiesClass","superCtor","ownProperties","properties","builtCSS","ElementMixin","polymerElementBase","propertyDefaults","ownObservers","createPropertyFromConfig","allProps","processElementStyles","klass","templateStyles","stylesWithImports","linkedStyles","firstTemplateChild","templateStyleIndex","templateStyle","getTemplateFromDomModule","PolymerElement","observers","protoTemplate","meta","importPath","policy","LiteralString","strings","assertValidTemplateStringParameters","string","acc","literalValue","htmlValue","appliedClassMixins","wasMixinPreviouslyApplied","dedupeMixin","mixedClass","ControllerMixin","controller","idlePeriod","debouncerQueue","Debouncer","debouncer","asyncModule","enqueueDebouncer","directionSubscribers","alignDirs","documentDir","elementDir","getDocumentDir","directionUpdater","directionObserver","DirMixin","newValueEqlDocDir","newValueEmptied","statsJob","registered","isEmptyTextNode","SlotObserver","slot","currentNodes","addedNodes","removedNodes","movedNodes","uniqueId","generateUniqueId","SlotController","prefix","slotName","initializer","multiple","observe","useUniqueId","uniqueIdPrefix","defaultNode","slotInitializer","_node","current","newNodes","TooltipController","tooltipNode","ariaTarget","manual","opened","position","shouldShow","buttonStyles","HAS_NATIVE_TA","GESTURE_KEY","HANDLED_OBJ","TOUCH_ACTION","TAP_DISTANCE","TRACK_DISTANCE","TRACK_LENGTH","MOUSE_EVENTS","MOUSE_WHICH_TO_BUTTONS","MOUSE_HAS_BUTTONS","isMouseEvent","supportsPassive","opts","PASSIVE_TOUCH","IS_TOUCH_ONLY","canBeDisabled","hasLeftMouseButton","ev","buttons","isSyntheticClick","_findOriginalTarget","bcr","POINTERSTATE","firstTouchAction","ta","getComposedPath","trackDocument","stateObj","movefn","upfn","untrackDocument","gestures","recognizers","deepTargetFind","oldNext","_handleNative","gobj","gs","_handleTouchAction","handled","shouldPrevent","dx","dy","addListener","evType","_add","recognizer","deps","dep","gd","setTouchAction","register","recog","emit","_findRecognizerByEvent","evName","_fire","preventer","downupFire","move","trackHasMovedEnough","trackFire","ct","touch","secondlast","lastmove","ddx","ddy","trackForward","DisabledMixin","superclass","disabled","KeyboardMixin","_event","ActiveMixin","active","keyboardActive","isKeyboardActive","FocusMixin","focused","TabindexMixin","oldDisabled","tabindex","INTERACTION_EVENTS","ButtonMixin","eventType","Button","LandingView","vaadinRouter","initializeApp","landingView","loginView","registerView","isLoggedIn","currentPath","loading","errorDiv","app"],"ignoreList":[0,1,2,3,4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],"sources":["../../node_modules/@vaadin/router/dist/vaadin-router.js","../../node_modules/@lit/reactive-element/css-tag.js","../../node_modules/@lit/reactive-element/reactive-element.js","../../node_modules/lit-html/lit-html.js","../../node_modules/lit-element/lit-element.js","../../node_modules/@lit/reactive-element/decorators/custom-element.js","../../node_modules/@lit/reactive-element/decorators/property.js","../../node_modules/@lit/reactive-element/decorators/state.js","../../src/views/login-view.ts","../../src/services/api.js","../../src/views/register-view.ts","../../node_modules/@vaadin/component-base/src/define.js","../../node_modules/@vaadin/vaadin-lumo-styles/version.js","../../node_modules/@vaadin/vaadin-themable-mixin/src/css-utils.js","../../node_modules/@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js","../../node_modules/@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js","../../node_modules/@vaadin/vaadin-themable-mixin/register-styles.js","../../node_modules/@vaadin/vaadin-lumo-styles/global.js","../../node_modules/@vaadin/vaadin-lumo-styles/color.js","../../node_modules/@vaadin/vaadin-lumo-styles/sizing.js","../../node_modules/@vaadin/vaadin-lumo-styles/spacing.js","../../node_modules/@vaadin/vaadin-lumo-styles/style.js","../../node_modules/@vaadin/vaadin-lumo-styles/typography.js","../../node_modules/@vaadin/button/theme/lumo/vaadin-button-styles.js","../../node_modules/@polymer/polymer/lib/utils/boot.js","../../node_modules/@polymer/polymer/lib/utils/resolve-url.js","../../node_modules/@polymer/polymer/lib/utils/settings.js","../../node_modules/@polymer/polymer/lib/utils/mixin.js","../../node_modules/@polymer/polymer/lib/elements/dom-module.js","../../node_modules/@polymer/polymer/lib/utils/style-gather.js","../../node_modules/@polymer/polymer/lib/utils/wrap.js","../../node_modules/@polymer/polymer/lib/utils/path.js","../../node_modules/@polymer/polymer/lib/utils/case-map.js","../../node_modules/@polymer/polymer/lib/utils/async.js","../../node_modules/@polymer/polymer/lib/mixins/properties-changed.js","../../node_modules/@polymer/polymer/lib/mixins/property-accessors.js","../../node_modules/@polymer/polymer/lib/mixins/template-stamp.js","../../node_modules/@polymer/polymer/lib/mixins/property-effects.js","../../node_modules/@polymer/polymer/lib/utils/telemetry.js","../../node_modules/@polymer/polymer/lib/mixins/properties-mixin.js","../../node_modules/@polymer/polymer/lib/mixins/element-mixin.js","../../node_modules/@polymer/polymer/lib/utils/html-tag.js","../../node_modules/@polymer/polymer/polymer-element.js","../../node_modules/@open-wc/dedupe-mixin/src/dedupeMixin.js","../../node_modules/@vaadin/component-base/src/controller-mixin.js","../../node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","../../node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics-collect.js","../../node_modules/@vaadin/component-base/src/async.js","../../node_modules/@vaadin/component-base/src/debounce.js","../../node_modules/@vaadin/component-base/src/dir-mixin.js","../../node_modules/@vaadin/component-base/src/element-mixin.js","../../node_modules/@vaadin/component-base/src/dom-utils.js","../../node_modules/@vaadin/component-base/src/slot-observer.js","../../node_modules/@vaadin/component-base/src/unique-id-utils.js","../../node_modules/@vaadin/component-base/src/slot-controller.js","../../node_modules/@vaadin/component-base/src/tooltip-controller.js","../../node_modules/@vaadin/button/src/vaadin-button-core-styles.js","../../node_modules/@vaadin/component-base/src/gestures.js","../../node_modules/@vaadin/a11y-base/src/disabled-mixin.js","../../node_modules/@vaadin/a11y-base/src/keyboard-mixin.js","../../node_modules/@vaadin/a11y-base/src/active-mixin.js","../../node_modules/@vaadin/a11y-base/src/focus-utils.js","../../node_modules/@vaadin/a11y-base/src/focus-mixin.js","../../node_modules/@vaadin/a11y-base/src/tabindex-mixin.js","../../node_modules/@vaadin/button/src/vaadin-button-mixin.js","../../node_modules/@vaadin/button/src/vaadin-button.js","../../src/views/landing-view.ts","../../src/main.ts"],"sourcesContent":["function toArray(objectOrArray) {\n  objectOrArray = objectOrArray || [];\n  return Array.isArray(objectOrArray) ? objectOrArray : [objectOrArray];\n}\n\nfunction log(msg) {\n  return `[Vaadin.Router] ${msg}`;\n}\n\nfunction logValue(value) {\n  if (typeof value !== 'object') {\n    return String(value);\n  }\n\n  const stringType = Object.prototype.toString.call(value).match(/ (.*)\\]$/)[1];\n  if (stringType === 'Object' || stringType === 'Array') {\n    return `${stringType} ${JSON.stringify(value)}`;\n  } else {\n    return stringType;\n  }\n}\n\nconst MODULE = 'module';\nconst NOMODULE = 'nomodule';\nconst bundleKeys = [MODULE, NOMODULE];\n\nfunction ensureBundle(src) {\n  if (!src.match(/.+\\.[m]?js$/)) {\n    throw new Error(\n      log(`Unsupported type for bundle \"${src}\": .js or .mjs expected.`)\n    );\n  }\n}\n\nfunction ensureRoute(route) {\n  if (!route || !isString(route.path)) {\n    throw new Error(\n      log(`Expected route config to be an object with a \"path\" string property, or an array of such objects`)\n    );\n  }\n\n  const bundle = route.bundle;\n\n  const stringKeys = ['component', 'redirect', 'bundle'];\n  if (\n    !isFunction(route.action) &&\n    !Array.isArray(route.children) &&\n    !isFunction(route.children) &&\n    !isObject(bundle) &&\n    !stringKeys.some(key => isString(route[key]))\n  ) {\n    throw new Error(\n      log(\n        `Expected route config \"${route.path}\" to include either \"${stringKeys.join('\", \"')}\" ` +\n        `or \"action\" function but none found.`\n      )\n    );\n  }\n\n  if (bundle) {\n    if (isString(bundle)) {\n      ensureBundle(bundle);\n    } else if (!bundleKeys.some(key => key in bundle)) {\n      throw new Error(\n        log('Expected route bundle to include either \"' + NOMODULE + '\" or \"' + MODULE + '\" keys, or both')\n      );\n    } else {\n      bundleKeys.forEach(key => key in bundle && ensureBundle(bundle[key]));\n    }\n  }\n\n  if (route.redirect) {\n    ['bundle', 'component'].forEach(overriddenProp => {\n      if (overriddenProp in route) {\n        console.warn(\n          log(\n            `Route config \"${route.path}\" has both \"redirect\" and \"${overriddenProp}\" properties, ` +\n            `and \"redirect\" will always override the latter. Did you mean to only use \"${overriddenProp}\"?`\n          )\n        );\n      }\n    });\n  }\n}\n\nfunction ensureRoutes(routes) {\n  toArray(routes).forEach(route => ensureRoute(route));\n}\n\nfunction loadScript(src, key) {\n  let script = document.head.querySelector('script[src=\"' + src + '\"][async]');\n  if (!script) {\n    script = document.createElement('script');\n    script.setAttribute('src', src);\n    if (key === MODULE) {\n      script.setAttribute('type', MODULE);\n    } else if (key === NOMODULE) {\n      script.setAttribute(NOMODULE, '');\n    }\n    script.async = true;\n  }\n  return new Promise((resolve, reject) => {\n    script.onreadystatechange = script.onload = e => {\n      script.__dynamicImportLoaded = true;\n      resolve(e);\n    };\n    script.onerror = e => {\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n      reject(e);\n    };\n    if (script.parentNode === null) {\n      document.head.appendChild(script);\n    } else if (script.__dynamicImportLoaded) {\n      resolve();\n    }\n  });\n}\n\nfunction loadBundle(bundle) {\n  if (isString(bundle)) {\n    return loadScript(bundle);\n  } else {\n    return Promise.race(\n      bundleKeys\n        .filter(key => key in bundle)\n        .map(key => loadScript(bundle[key], key))\n    );\n  }\n}\n\nfunction fireRouterEvent(type, detail) {\n  return !window.dispatchEvent(new CustomEvent(\n    `vaadin-router-${type}`,\n    {cancelable: type === 'go', detail}\n  ));\n}\n\nfunction isObject(o) {\n  // guard against null passing the typeof check\n  return typeof o === 'object' && !!o;\n}\n\nfunction isFunction(f) {\n  return typeof f === 'function';\n}\n\nfunction isString(s) {\n  return typeof s === 'string';\n}\n\nfunction getNotFoundError(context) {\n  const error = new Error(log(`Page not found (${context.pathname})`));\n  error.context = context;\n  error.code = 404;\n  return error;\n}\n\nconst notFoundResult = new (class NotFoundResult {})();\n\n/* istanbul ignore next: coverage is calculated in Chrome, this code is for IE */\nfunction getAnchorOrigin(anchor) {\n  // IE11: on HTTP and HTTPS the default port is not included into\n  // window.location.origin, so won't include it here either.\n  const port = anchor.port;\n  const protocol = anchor.protocol;\n  const defaultHttp = protocol === 'http:' && port === '80';\n  const defaultHttps = protocol === 'https:' && port === '443';\n  const host = (defaultHttp || defaultHttps)\n    ? anchor.hostname // does not include the port number (e.g. www.example.org)\n    : anchor.host; // does include the port number (e.g. www.example.org:80)\n  return `${protocol}//${host}`;\n}\n\n// The list of checks is not complete:\n//  - SVG support is missing\n//  - the 'rel' attribute is not considered\nfunction vaadinRouterGlobalClickHandler(event) {\n  // ignore the click if the default action is prevented\n  if (event.defaultPrevented) {\n    return;\n  }\n\n  // ignore the click if not with the primary mouse button\n  if (event.button !== 0) {\n    return;\n  }\n\n  // ignore the click if a modifier key is pressed\n  if (event.shiftKey || event.ctrlKey || event.altKey || event.metaKey) {\n    return;\n  }\n\n  // find the <a> element that the click is at (or within)\n  let anchor = event.target;\n  const path = event.composedPath\n    ? event.composedPath()\n    : (event.path || []);\n\n  // FIXME(web-padawan): `Symbol.iterator` used by webcomponentsjs is broken for arrays\n  // example to check: `for...of` loop here throws the \"Not yet implemented\" error\n  for (let i = 0; i < path.length; i++) {\n    const target = path[i];\n    if (target.nodeName && target.nodeName.toLowerCase() === 'a') {\n      anchor = target;\n      break;\n    }\n  }\n\n  while (anchor && anchor.nodeName.toLowerCase() !== 'a') {\n    anchor = anchor.parentNode;\n  }\n\n  // ignore the click if not at an <a> element\n  if (!anchor || anchor.nodeName.toLowerCase() !== 'a') {\n    return;\n  }\n\n  // ignore the click if the <a> element has a non-default target\n  if (anchor.target && anchor.target.toLowerCase() !== '_self') {\n    return;\n  }\n\n  // ignore the click if the <a> element has the 'download' attribute\n  if (anchor.hasAttribute('download')) {\n    return;\n  }\n\n  // ignore the click if the <a> element has the 'router-ignore' attribute\n  if (anchor.hasAttribute('router-ignore')) {\n    return;\n  }\n\n  // ignore the click if the target URL is a fragment on the current page\n  if (anchor.pathname === window.location.pathname && anchor.hash !== '') {\n    return;\n  }\n\n  // ignore the click if the target is external to the app\n  // In IE11 HTMLAnchorElement does not have the `origin` property\n  const origin = anchor.origin || getAnchorOrigin(anchor);\n  if (origin !== window.location.origin) {\n    return;\n  }\n\n  // if none of the above, convert the click into a navigation event\n  const {pathname, search, hash} = anchor;\n  if (fireRouterEvent('go', {pathname, search, hash})) {\n    event.preventDefault();\n    // for a click event, the scroll is reset to the top position.\n    if (event && event.type === 'click') {\n      window.scrollTo(0, 0);\n    }\n  }\n}\n\n/**\n * A navigation trigger for Vaadin Router that translated clicks on `<a>` links\n * into Vaadin Router navigation events.\n *\n * Only regular clicks on in-app links are translated (primary mouse button, no\n * modifier keys, the target href is within the app's URL space).\n *\n * @memberOf Router.NavigationTrigger\n * @type {NavigationTrigger}\n */\nconst CLICK = {\n  activate() {\n    window.document.addEventListener('click', vaadinRouterGlobalClickHandler);\n  },\n\n  inactivate() {\n    window.document.removeEventListener('click', vaadinRouterGlobalClickHandler);\n  }\n};\n\n// PopStateEvent constructor shim\nconst isIE = /Trident/.test(navigator.userAgent);\n\n/* istanbul ignore next: coverage is calculated in Chrome, this code is for IE */\nif (isIE && !isFunction(window.PopStateEvent)) {\n  window.PopStateEvent = function(inType, params) {\n    params = params || {};\n    var e = document.createEvent('Event');\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n    e.state = params.state || null;\n    return e;\n  };\n  window.PopStateEvent.prototype = window.Event.prototype;\n}\n\nfunction vaadinRouterGlobalPopstateHandler(event) {\n  if (event.state === 'vaadin-router-ignore') {\n    return;\n  }\n  const {pathname, search, hash} = window.location;\n  fireRouterEvent('go', {pathname, search, hash});\n}\n\n/**\n * A navigation trigger for Vaadin Router that translates popstate events into\n * Vaadin Router navigation events.\n *\n * @memberOf Router.NavigationTrigger\n * @type {NavigationTrigger}\n */\nconst POPSTATE = {\n  activate() {\n    window.addEventListener('popstate', vaadinRouterGlobalPopstateHandler);\n  },\n\n  inactivate() {\n    window.removeEventListener('popstate', vaadinRouterGlobalPopstateHandler);\n  }\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp$1;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * Default configs.\n */\nvar DEFAULT_DELIMITER = '/';\nvar DEFAULT_DELIMITERS = './';\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \":test(\\\\d+)?\" => [\"test\", \"\\d+\", undefined, \"?\"]\n  // \"(\\\\d+)\"  => [undefined, undefined, \"\\d+\", undefined]\n  '(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {string}  str\n * @param  {Object=} options\n * @return {!Array}\n */\nfunction parse (str, options) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var defaultDelimiter = (options && options.delimiter) || DEFAULT_DELIMITER;\n  var delimiters = (options && options.delimiters) || DEFAULT_DELIMITERS;\n  var pathEscaped = false;\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) !== null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      pathEscaped = true;\n      continue\n    }\n\n    var prev = '';\n    var next = str[index];\n    var name = res[2];\n    var capture = res[3];\n    var group = res[4];\n    var modifier = res[5];\n\n    if (!pathEscaped && path.length) {\n      var k = path.length - 1;\n\n      if (delimiters.indexOf(path[k]) > -1) {\n        prev = path[k];\n        path = path.slice(0, k);\n      }\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n      pathEscaped = false;\n    }\n\n    var partial = prev !== '' && next !== undefined && next !== prev;\n    var repeat = modifier === '+' || modifier === '*';\n    var optional = modifier === '?' || modifier === '*';\n    var delimiter = prev || defaultDelimiter;\n    var pattern = capture || group;\n\n    tokens.push({\n      name: name || key++,\n      prefix: prev,\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      pattern: pattern ? escapeGroup(pattern) : '[^' + escapeString(delimiter) + ']+?'\n    });\n  }\n\n  // Push any remaining characters.\n  if (path || index < str.length) {\n    tokens.push(path + str.substr(index));\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {string}             str\n * @param  {Object=}            options\n * @return {!function(Object=, Object=)}\n */\nfunction compile (str, options) {\n  return tokensToFunction(parse(str, options))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$');\n    }\n  }\n\n  return function (data, options) {\n    var path = '';\n    var encode = (options && options.encode) || encodeURIComponent;\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n        continue\n      }\n\n      var value = data ? data[token.name] : undefined;\n      var segment;\n\n      if (Array.isArray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but got array')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) continue\n\n          throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j], token);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n        segment = encode(String(value), token);\n\n        if (!matches[i].test(segment)) {\n          throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but got \"' + segment + '\"')\n        }\n\n        path += token.prefix + segment;\n        continue\n      }\n\n      if (token.optional) {\n        // Prepend partial segment prefixes.\n        if (token.partial) path += token.prefix;\n\n        continue\n      }\n\n      throw new TypeError('Expected \"' + token.name + '\" to be ' + (token.repeat ? 'an array' : 'a string'))\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {string} str\n * @return {string}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {string} group\n * @return {string}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$/()])/g, '\\\\$1')\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {string}\n */\nfunction flags (options) {\n  return options && options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {!RegExp} path\n * @param  {Array=}  keys\n * @return {!RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  if (!keys) return path\n\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        pattern: null\n      });\n    }\n  }\n\n  return path\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {!Array}  path\n * @param  {Array=}  keys\n * @param  {Object=} options\n * @return {!RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp$1(path[i], keys, options).source);\n  }\n\n  return new RegExp('(?:' + parts.join('|') + ')', flags(options))\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {string}  path\n * @param  {Array=}  keys\n * @param  {Object=} options\n * @return {!RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {!Array}  tokens\n * @param  {Array=}  keys\n * @param  {Object=} options\n * @return {!RegExp}\n */\nfunction tokensToRegExp (tokens, keys, options) {\n  options = options || {};\n\n  var strict = options.strict;\n  var start = options.start !== false;\n  var end = options.end !== false;\n  var delimiter = escapeString(options.delimiter || DEFAULT_DELIMITER);\n  var delimiters = options.delimiters || DEFAULT_DELIMITERS;\n  var endsWith = [].concat(options.endsWith || []).map(escapeString).concat('$').join('|');\n  var route = start ? '^' : '';\n  var isEndDelimited = tokens.length === 0;\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n      isEndDelimited = i === tokens.length - 1 && delimiters.indexOf(token[token.length - 1]) > -1;\n    } else {\n      var capture = token.repeat\n        ? '(?:' + token.pattern + ')(?:' + escapeString(token.delimiter) + '(?:' + token.pattern + '))*'\n        : token.pattern;\n\n      if (keys) keys.push(token);\n\n      if (token.optional) {\n        if (token.partial) {\n          route += escapeString(token.prefix) + '(' + capture + ')?';\n        } else {\n          route += '(?:' + escapeString(token.prefix) + '(' + capture + '))?';\n        }\n      } else {\n        route += escapeString(token.prefix) + '(' + capture + ')';\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += '(?:' + delimiter + ')?';\n\n    route += endsWith === '$' ? '$' : '(?=' + endsWith + ')';\n  } else {\n    if (!strict) route += '(?:' + delimiter + '(?=' + endsWith + '))?';\n    if (!isEndDelimited) route += '(?=' + delimiter + '|' + endsWith + ')';\n  }\n\n  return new RegExp(route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(string|RegExp|Array)} path\n * @param  {Array=}                keys\n * @param  {Object=}               options\n * @return {!RegExp}\n */\nfunction pathToRegexp$1 (path, keys, options) {\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys)\n  }\n\n  if (Array.isArray(path)) {\n    return arrayToRegexp(/** @type {!Array} */ (path), keys, options)\n  }\n\n  return stringToRegexp(/** @type {string} */ (path), keys, options)\n}\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/**\n * Universal Router (https://www.kriasoft.com/universal-router/)\n *\n * Copyright (c) 2015-present Kriasoft.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nconst {hasOwnProperty} = Object.prototype;\nconst cache$1 = new Map();\n// see https://github.com/pillarjs/path-to-regexp/issues/148\ncache$1.set('|false', {\n  keys: [],\n  pattern: /(?:)/\n});\n\nfunction decodeParam(val) {\n  try {\n    return decodeURIComponent(val);\n  } catch (err) {\n    return val;\n  }\n}\n\nfunction matchPath(routepath, path, exact, parentKeys, parentParams) {\n  exact = !!exact;\n  const cacheKey = `${routepath}|${exact}`;\n  let regexp = cache$1.get(cacheKey);\n\n  if (!regexp) {\n    const keys = [];\n    regexp = {\n      keys,\n      pattern: pathToRegexp_1(routepath, keys, {\n        end: exact,\n        strict: routepath === ''\n      }),\n    };\n    cache$1.set(cacheKey, regexp);\n  }\n\n  const m = regexp.pattern.exec(path);\n  if (!m) {\n    return null;\n  }\n\n  const params = Object.assign({}, parentParams);\n\n  for (let i = 1; i < m.length; i++) {\n    const key = regexp.keys[i - 1];\n    const prop = key.name;\n    const value = m[i];\n    if (value !== undefined || !hasOwnProperty.call(params, prop)) {\n      if (key.repeat) {\n        params[prop] = value ? value.split(key.delimiter).map(decodeParam) : [];\n      } else {\n        params[prop] = value ? decodeParam(value) : value;\n      }\n    }\n  }\n\n  return {\n    path: m[0],\n    keys: (parentKeys || []).concat(regexp.keys),\n    params,\n  };\n}\n\n/**\n * Universal Router (https://www.kriasoft.com/universal-router/)\n *\n * Copyright (c) 2015-present Kriasoft.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/**\n * Traverses the routes tree and matches its nodes to the given pathname from\n * the root down to the leaves. Each match consumes a part of the pathname and\n * the matching process continues for as long as there is a matching child\n * route for the remaining part of the pathname.\n *\n * The returned value is a lazily evaluated iterator.\n *\n * The leading \"/\" in a route path matters only for the root of the routes\n * tree (or if all parent routes are \"\"). In all other cases a leading \"/\" in\n * a child route path has no significance.\n *\n * The trailing \"/\" in a _route path_ matters only for the leaves of the\n * routes tree. A leaf route with a trailing \"/\" matches only a pathname that\n * also has a trailing \"/\".\n *\n * The trailing \"/\" in a route path does not affect matching of child routes\n * in any way.\n *\n * The trailing \"/\" in a _pathname_ generally does not matter (except for\n * the case of leaf nodes described above).\n *\n * The \"\" and \"/\" routes have special treatment:\n *  1. as a single route\n *     the \"\" and \"/\" routes match only the \"\" and \"/\" pathnames respectively\n *  2. as a parent in the routes tree\n *     the \"\" route matches any pathname without consuming any part of it\n *     the \"/\" route matches any absolute pathname consuming its leading \"/\"\n *  3. as a leaf in the routes tree\n *     the \"\" and \"/\" routes match only if the entire pathname is consumed by\n *         the parent routes chain. In this case \"\" and \"/\" are equivalent.\n *  4. several directly nested \"\" or \"/\" routes\n *     - directly nested \"\" or \"/\" routes are 'squashed' (i.e. nesting two\n *       \"/\" routes does not require a double \"/\" in the pathname to match)\n *     - if there are only \"\" in the parent routes chain, no part of the\n *       pathname is consumed, and the leading \"/\" in the child routes' paths\n *       remains significant\n *\n * Side effect:\n *   - the routes tree { path: '' } matches only the '' pathname\n *   - the routes tree { path: '', children: [ { path: '' } ] } matches any\n *     pathname (for the tree root)\n *\n * Prefix matching can be enabled also by `children: true`.\n */\nfunction matchRoute(route, pathname, ignoreLeadingSlash, parentKeys, parentParams) {\n  let match;\n  let childMatches;\n  let childIndex = 0;\n  let routepath = route.path || '';\n  if (routepath.charAt(0) === '/') {\n    if (ignoreLeadingSlash) {\n      routepath = routepath.substr(1);\n    }\n    ignoreLeadingSlash = true;\n  }\n\n  return {\n    next(routeToSkip) {\n      if (route === routeToSkip) {\n        return {done: true};\n      }\n\n      const children = route.__children = route.__children || route.children;\n\n      if (!match) {\n        match = matchPath(routepath, pathname, !children, parentKeys, parentParams);\n\n        if (match) {\n          return {\n            done: false,\n            value: {\n              route,\n              keys: match.keys,\n              params: match.params,\n              path: match.path\n            },\n          };\n        }\n      }\n\n      if (match && children) {\n        while (childIndex < children.length) {\n          if (!childMatches) {\n            const childRoute = children[childIndex];\n            childRoute.parent = route;\n\n            let matchedLength = match.path.length;\n            if (matchedLength > 0 && pathname.charAt(matchedLength) === '/') {\n              matchedLength += 1;\n            }\n\n            childMatches = matchRoute(\n              childRoute,\n              pathname.substr(matchedLength),\n              ignoreLeadingSlash,\n              match.keys,\n              match.params\n            );\n          }\n\n          const childMatch = childMatches.next(routeToSkip);\n          if (!childMatch.done) {\n            return {\n              done: false,\n              value: childMatch.value,\n            };\n          }\n\n          childMatches = null;\n          childIndex++;\n        }\n      }\n\n      return {done: true};\n    },\n  };\n}\n\n/**\n * Universal Router (https://www.kriasoft.com/universal-router/)\n *\n * Copyright (c) 2015-present Kriasoft.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nfunction resolveRoute(context) {\n  if (isFunction(context.route.action)) {\n    return context.route.action(context);\n  }\n  return undefined;\n}\n\n/**\n * Universal Router (https://www.kriasoft.com/universal-router/)\n *\n * Copyright (c) 2015-present Kriasoft.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nfunction isChildRoute(parentRoute, childRoute) {\n  let route = childRoute;\n  while (route) {\n    route = route.parent;\n    if (route === parentRoute) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction generateErrorMessage(currentContext) {\n  let errorMessage = `Path '${currentContext.pathname}' is not properly resolved due to an error.`;\n  const routePath = (currentContext.route || {}).path;\n  if (routePath) {\n    errorMessage += ` Resolution had failed on route: '${routePath}'`;\n  }\n  return errorMessage;\n}\n\nfunction updateChainForRoute(context, match) {\n  const {route, path} = match;\n\n  if (route && !route.__synthetic) {\n    const item = {path, route};\n    if (!context.chain) {\n      context.chain = [];\n    } else {\n      // Discard old items\n      if (route.parent) {\n        let i = context.chain.length;\n        while (i-- && context.chain[i].route && context.chain[i].route !== route.parent) {\n          context.chain.pop();\n        }\n      }\n    }\n    context.chain.push(item);\n  }\n}\n\n/**\n */\nclass Resolver {\n  constructor(routes, options = {}) {\n    if (Object(routes) !== routes) {\n      throw new TypeError('Invalid routes');\n    }\n\n    this.baseUrl = options.baseUrl || '';\n    this.errorHandler = options.errorHandler;\n    this.resolveRoute = options.resolveRoute || resolveRoute;\n    this.context = Object.assign({resolver: this}, options.context);\n    this.root = Array.isArray(routes) ? {path: '', __children: routes, parent: null, __synthetic: true} : routes;\n    this.root.parent = null;\n  }\n\n  /**\n   * Returns the current list of routes (as a shallow copy). Adding / removing\n   * routes to / from the returned array does not affect the routing config,\n   * but modifying the route objects does.\n   *\n   * @return {!Array<!Router.Route>}\n   */\n  getRoutes() {\n    return [...this.root.__children];\n  }\n\n  /**\n   * Sets the routing config (replacing the existing one).\n   *\n   * @param {!Array<!Router.Route>|!Router.Route} routes a single route or an array of those\n   *    (the array is shallow copied)\n   */\n  setRoutes(routes) {\n    ensureRoutes(routes);\n    const newRoutes = [...toArray(routes)];\n    this.root.__children = newRoutes;\n  }\n\n  /**\n   * Appends one or several routes to the routing config and returns the\n   * effective routing config after the operation.\n   *\n   * @param {!Array<!Router.Route>|!Router.Route} routes a single route or an array of those\n   *    (the array is shallow copied)\n   * @return {!Array<!Router.Route>}\n   * @protected\n   */\n  addRoutes(routes) {\n    ensureRoutes(routes);\n    this.root.__children.push(...toArray(routes));\n    return this.getRoutes();\n  }\n\n  /**\n   * Removes all existing routes from the routing config.\n   */\n  removeRoutes() {\n    this.setRoutes([]);\n  }\n\n  /**\n   * Asynchronously resolves the given pathname, i.e. finds all routes matching\n   * the pathname and tries resolving them one after another in the order they\n   * are listed in the routes config until the first non-null result.\n   *\n   * Returns a promise that is fulfilled with the return value of an object that consists of the first\n   * route handler result that returns something other than `null` or `undefined` and context used to get this result.\n   *\n   * If no route handlers return a non-null result, or if no route matches the\n   * given pathname the returned promise is rejected with a 'page not found'\n   * `Error`.\n   *\n   * @param {!string|!{pathname: !string}} pathnameOrContext the pathname to\n   *    resolve or a context object with a `pathname` property and other\n   *    properties to pass to the route resolver functions.\n   * @return {!Promise<any>}\n   */\n  resolve(pathnameOrContext) {\n    const context = Object.assign(\n      {},\n      this.context,\n      isString(pathnameOrContext) ? {pathname: pathnameOrContext} : pathnameOrContext\n    );\n    const match = matchRoute(\n      this.root,\n      this.__normalizePathname(context.pathname),\n      this.baseUrl\n    );\n    const resolve = this.resolveRoute;\n    let matches = null;\n    let nextMatches = null;\n    let currentContext = context;\n\n    function next(resume, parent = matches.value.route, prevResult) {\n      const routeToSkip = prevResult === null && matches.value.route;\n      matches = nextMatches || match.next(routeToSkip);\n      nextMatches = null;\n\n      if (!resume) {\n        if (matches.done || !isChildRoute(parent, matches.value.route)) {\n          nextMatches = matches;\n          return Promise.resolve(notFoundResult);\n        }\n      }\n\n      if (matches.done) {\n        return Promise.reject(getNotFoundError(context));\n      }\n\n      currentContext = Object.assign(\n        currentContext\n          ? {chain: (currentContext.chain ? currentContext.chain.slice(0) : [])}\n          : {},\n        context,\n        matches.value\n      );\n      updateChainForRoute(currentContext, matches.value);\n\n      return Promise.resolve(resolve(currentContext)).then(resolution => {\n        if (resolution !== null && resolution !== undefined && resolution !== notFoundResult) {\n          currentContext.result = resolution.result || resolution;\n          return currentContext;\n        }\n        return next(resume, parent, resolution);\n      });\n    }\n\n    context.next = next;\n\n    return Promise.resolve()\n      .then(() => next(true, this.root))\n      .catch((error) => {\n        const errorMessage = generateErrorMessage(currentContext);\n        if (!error) {\n          error = new Error(errorMessage);\n        } else {\n          console.warn(errorMessage);\n        }\n        error.context = error.context || currentContext;\n        // DOMException has its own code which is read-only\n        if (!(error instanceof DOMException)) {\n          error.code = error.code || 500;\n        }\n        if (this.errorHandler) {\n          currentContext.result = this.errorHandler(error);\n          return currentContext;\n        }\n        throw error;\n      });\n  }\n\n  /**\n   * URL constructor polyfill hook. Creates and returns an URL instance.\n   */\n  static __createUrl(url, base) {\n    return new URL(url, base);\n  }\n\n  /**\n   * If the baseUrl property is set, transforms the baseUrl and returns the full\n   * actual `base` string for using in the `new URL(path, base);` and for\n   * prepernding the paths with. The returned base ends with a trailing slash.\n   *\n   * Otherwise, returns empty string.\n   */\n  get __effectiveBaseUrl() {\n    return this.baseUrl\n      ? this.constructor.__createUrl(\n        this.baseUrl,\n        document.baseURI || document.URL\n      ).href.replace(/[^\\/]*$/, '')\n      : '';\n  }\n\n  /**\n   * If the baseUrl is set, matches the pathname with the routers baseUrl,\n   * and returns the local pathname with the baseUrl stripped out.\n   *\n   * If the pathname does not match the baseUrl, returns undefined.\n   *\n   * If the `baseUrl` is not set, returns the unmodified pathname argument.\n   */\n  __normalizePathname(pathname) {\n    if (!this.baseUrl) {\n      // No base URL, no need to transform the pathname.\n      return pathname;\n    }\n\n    const base = this.__effectiveBaseUrl;\n    const normalizedUrl = this.constructor.__createUrl(pathname, base).href;\n    if (normalizedUrl.slice(0, base.length) === base) {\n      return normalizedUrl.slice(base.length);\n    }\n  }\n}\n\nResolver.pathToRegexp = pathToRegexp_1;\n\n/**\n * Universal Router (https://www.kriasoft.com/universal-router/)\n *\n * Copyright (c) 2015-present Kriasoft.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nconst {pathToRegexp} = Resolver;\nconst cache = new Map();\n\nfunction cacheRoutes(routesByName, route, routes) {\n  const name = route.name || route.component;\n  if (name) {\n    if (routesByName.has(name)) {\n      routesByName.get(name).push(route);\n    } else {\n      routesByName.set(name, [route]);\n    }\n  }\n\n  if (Array.isArray(routes)) {\n    for (let i = 0; i < routes.length; i++) {\n      const childRoute = routes[i];\n      childRoute.parent = route;\n      cacheRoutes(routesByName, childRoute, childRoute.__children || childRoute.children);\n    }\n  }\n}\n\nfunction getRouteByName(routesByName, routeName) {\n  const routes = routesByName.get(routeName);\n  if (routes && routes.length > 1) {\n    throw new Error(\n      `Duplicate route with name \"${routeName}\".`\n      + ` Try seting unique 'name' route properties.`\n    );\n  }\n  return routes && routes[0];\n}\n\nfunction getRoutePath(route) {\n  let path = route.path;\n  path = Array.isArray(path) ? path[0] : path;\n  return path !== undefined ? path : '';\n}\n\nfunction generateUrls(router, options = {}) {\n  if (!(router instanceof Resolver)) {\n    throw new TypeError('An instance of Resolver is expected');\n  }\n\n  const routesByName = new Map();\n\n  return (routeName, params) => {\n    let route = getRouteByName(routesByName, routeName);\n    if (!route) {\n      routesByName.clear(); // clear cache\n      cacheRoutes(routesByName, router.root, router.root.__children);\n\n      route = getRouteByName(routesByName, routeName);\n      if (!route) {\n        throw new Error(`Route \"${routeName}\" not found`);\n      }\n    }\n\n    let regexp = cache.get(route.fullPath);\n    if (!regexp) {\n      let fullPath = getRoutePath(route);\n      let rt = route.parent;\n      while (rt) {\n        const path = getRoutePath(rt);\n        if (path) {\n          fullPath = path.replace(/\\/$/, '') + '/' + fullPath.replace(/^\\//, '');\n        }\n        rt = rt.parent;\n      }\n      const tokens = pathToRegexp.parse(fullPath);\n      const toPath = pathToRegexp.tokensToFunction(tokens);\n      const keys = Object.create(null);\n      for (let i = 0; i < tokens.length; i++) {\n        if (!isString(tokens[i])) {\n          keys[tokens[i].name] = true;\n        }\n      }\n      regexp = {toPath, keys};\n      cache.set(fullPath, regexp);\n      route.fullPath = fullPath;\n    }\n\n    let url = regexp.toPath(params, options) || '/';\n\n    if (options.stringifyQueryParams && params) {\n      const queryParams = {};\n      const keys = Object.keys(params);\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (!regexp.keys[key]) {\n          queryParams[key] = params[key];\n        }\n      }\n      const query = options.stringifyQueryParams(queryParams);\n      if (query) {\n        url += query.charAt(0) === '?' ? query : `?${query}`;\n      }\n    }\n\n    return url;\n  };\n}\n\n/**\n * @typedef NavigationTrigger\n * @type {object}\n * @property {function()} activate\n * @property {function()} inactivate\n */\n\n/** @type {Array<NavigationTrigger>} */\nlet triggers = [];\n\nfunction setNavigationTriggers(newTriggers) {\n  triggers.forEach(trigger => trigger.inactivate());\n\n  newTriggers.forEach(trigger => trigger.activate());\n\n  triggers = newTriggers;\n}\n\nconst willAnimate = elem => {\n  const name = getComputedStyle(elem).getPropertyValue('animation-name');\n  return name && name !== 'none';\n};\n\nconst waitForAnimation = (elem, cb) => {\n  const listener = () => {\n    elem.removeEventListener('animationend', listener);\n    cb();\n  };\n  elem.addEventListener('animationend', listener);\n};\n\nfunction animate(elem, className) {\n  elem.classList.add(className);\n\n  return new Promise(resolve => {\n    if (willAnimate(elem)) {\n      const rect = elem.getBoundingClientRect();\n      const size = `height: ${rect.bottom - rect.top}px; width: ${rect.right - rect.left}px`;\n      elem.setAttribute('style', `position: absolute; ${size}`);\n      waitForAnimation(elem, () => {\n        elem.classList.remove(className);\n        elem.removeAttribute('style');\n        resolve();\n      });\n    } else {\n      elem.classList.remove(className);\n      resolve();\n    }\n  });\n}\n\nconst MAX_REDIRECT_COUNT = 256;\n\nfunction isResultNotEmpty(result) {\n  return result !== null && result !== undefined;\n}\n\nfunction copyContextWithoutNext(context) {\n  const copy = Object.assign({}, context);\n  delete copy.next;\n  return copy;\n}\n\nfunction createLocation({pathname = '', search = '', hash = '', chain = [], params = {}, redirectFrom, resolver}, route) {\n  const routes = chain.map(item => item.route);\n  return {\n    baseUrl: resolver && resolver.baseUrl || '',\n    pathname,\n    search,\n    hash,\n    routes,\n    route: route || routes.length && routes[routes.length - 1] || null,\n    params,\n    redirectFrom,\n    getUrl: (userParams = {}) => getPathnameForRouter(\n      Router.pathToRegexp.compile(\n        getMatchedPath(routes)\n      )(Object.assign({}, params, userParams)),\n      resolver\n    )\n  };\n}\n\nfunction createRedirect(context, pathname) {\n  const params = Object.assign({}, context.params);\n  return {\n    redirect: {\n      pathname,\n      from: context.pathname,\n      params\n    }\n  };\n}\n\nfunction renderElement(context, element) {\n  element.location = createLocation(context);\n  const index = context.chain.map(item => item.route).indexOf(context.route);\n  context.chain[index].element = element;\n  return element;\n}\n\nfunction runCallbackIfPossible(callback, args, thisArg) {\n  if (isFunction(callback)) {\n    return callback.apply(thisArg, args);\n  }\n}\n\nfunction amend(amendmentFunction, args, element) {\n  return amendmentResult => {\n    if (amendmentResult && (amendmentResult.cancel || amendmentResult.redirect)) {\n      return amendmentResult;\n    }\n\n    if (element) {\n      return runCallbackIfPossible(element[amendmentFunction], args, element);\n    }\n  };\n}\n\nfunction processNewChildren(newChildren, route) {\n  if (!Array.isArray(newChildren) && !isObject(newChildren)) {\n    throw new Error(\n      log(\n        `Incorrect \"children\" value for the route ${route.path}: expected array or object, but got ${newChildren}`\n      )\n    );\n  }\n\n  route.__children = [];\n  const childRoutes = toArray(newChildren);\n  for (let i = 0; i < childRoutes.length; i++) {\n    ensureRoute(childRoutes[i]);\n    route.__children.push(childRoutes[i]);\n  }\n}\n\nfunction removeDomNodes(nodes) {\n  if (nodes && nodes.length) {\n    const parent = nodes[0].parentNode;\n    for (let i = 0; i < nodes.length; i++) {\n      parent.removeChild(nodes[i]);\n    }\n  }\n}\n\nfunction getPathnameForRouter(pathname, router) {\n  const base = router.__effectiveBaseUrl;\n  return base\n    ? router.constructor.__createUrl(pathname.replace(/^\\//, ''), base).pathname\n    : pathname;\n}\n\nfunction getMatchedPath(chain) {\n  return chain.map(item => item.path).reduce((a, b) => {\n    if (b.length) {\n      return a.replace(/\\/$/, '') + '/' + b.replace(/^\\//, '');\n    }\n    return a;\n  }, '');\n}\n\n/**\n * A simple client-side router for single-page applications. It uses\n * express-style middleware and has a first-class support for Web Components and\n * lazy-loading. Works great in Polymer and non-Polymer apps.\n *\n * Use `new Router(outlet, options)` to create a new Router instance.\n *\n * * The `outlet` parameter is a reference to the DOM node to render\n *   the content into.\n *\n * * The `options` parameter is an optional object with options. The following\n *   keys are supported:\n *   * `baseUrl`  the initial value for [\n *     the `baseUrl` property\n *   ](#/classes/Router#property-baseUrl)\n *\n * The Router instance is automatically subscribed to navigation events\n * on `window`.\n *\n * See [Live Examples](#/classes/Router/demos/demo/index.html) for the detailed usage demo and code snippets.\n *\n * See also detailed API docs for the following methods, for the advanced usage:\n *\n * * [setOutlet](#/classes/Router#method-setOutlet)  should be used to configure the outlet.\n * * [setTriggers](#/classes/Router#method-setTriggers)  should be used to configure the navigation events.\n * * [setRoutes](#/classes/Router#method-setRoutes)  should be used to configure the routes.\n *\n * Only `setRoutes` has to be called manually, others are automatically invoked when creating a new instance.\n *\n * @extends Resolver\n * @demo demo/index.html\n * @summary JavaScript class that renders different DOM content depending on\n *    a given path. It can re-render when triggered or automatically on\n *    'popstate' and / or 'click' events.\n */\nclass Router extends Resolver {\n\n  /**\n   * Creates a new Router instance with a given outlet, and\n   * automatically subscribes it to navigation events on the `window`.\n   * Using a constructor argument or a setter for outlet is equivalent:\n   *\n   * ```\n   * const router = new Router();\n   * router.setOutlet(outlet);\n   * ```\n   * @param {?Node=} outlet\n   * @param {?RouterOptions=} options\n   */\n  constructor(outlet, options) {\n    const baseElement = document.head.querySelector('base');\n    const baseHref = baseElement && baseElement.getAttribute('href');\n    super([], Object.assign({\n      // Default options\n      baseUrl: baseHref && Resolver.__createUrl(baseHref, document.URL).pathname.replace(/[^\\/]*$/, '')\n    }, options));\n\n    this.resolveRoute = context => this.__resolveRoute(context);\n\n    const triggers = Router.NavigationTrigger;\n    Router.setTriggers.apply(Router, Object.keys(triggers).map(key => triggers[key]));\n\n    /**\n     * The base URL for all routes in the router instance. By default,\n     * if the base element exists in the `<head>`, vaadin-router\n     * takes the `<base href>` attribute value, resolves against current `document.URL`\n     * and gets the `pathname` from the result.\n     *\n     * @public\n     * @type {string}\n     */\n    this.baseUrl;\n\n    /**\n     * A promise that is settled after the current render cycle completes. If\n     * there is no render cycle in progress the promise is immediately settled\n     * with the last render cycle result.\n     *\n     * @public\n     * @type {!Promise<!RouterLocation>}\n     */\n    this.ready;\n    this.ready = Promise.resolve(outlet);\n\n    /**\n     * Contains read-only information about the current router location:\n     * pathname, active routes, parameters. See the\n     * [Location type declaration](#/classes/RouterLocation)\n     * for more details.\n     *\n     * @public\n     * @type {!RouterLocation}\n     */\n    this.location;\n    this.location = createLocation({resolver: this});\n\n    this.__lastStartedRenderId = 0;\n    this.__navigationEventHandler = this.__onNavigationEvent.bind(this);\n    this.setOutlet(outlet);\n    this.subscribe();\n    // Using WeakMap instead of WeakSet because WeakSet is not supported by IE11\n    this.__createdByRouter = new WeakMap();\n    this.__addedByRouter = new WeakMap();\n  }\n\n  __resolveRoute(context) {\n    const route = context.route;\n\n    let callbacks = Promise.resolve();\n\n    if (isFunction(route.children)) {\n      callbacks = callbacks\n        .then(() => route.children(copyContextWithoutNext(context)))\n        .then(children => {\n          // The route.children() callback might have re-written the\n          // route.children property instead of returning a value\n          if (!isResultNotEmpty(children) && !isFunction(route.children)) {\n            children = route.children;\n          }\n          processNewChildren(children, route);\n        });\n    }\n\n    const commands = {\n      redirect: path => createRedirect(context, path),\n      component: (component) => {\n        const element = document.createElement(component);\n        this.__createdByRouter.set(element, true);\n        return element;\n      }\n    };\n\n    return callbacks\n      .then(() => {\n        if (this.__isLatestRender(context)) {\n          return runCallbackIfPossible(route.action, [context, commands], route);\n        }\n      })\n      .then(result => {\n        if (isResultNotEmpty(result)) {\n          // Actions like `() => import('my-view.js')` are not expected to\n          // end the resolution, despite the result is not empty. Checking\n          // the result with a whitelist of values that end the resolution.\n          if (result instanceof HTMLElement ||\n              result.redirect ||\n              result === notFoundResult) {\n            return result;\n          }\n        }\n\n        if (isString(route.redirect)) {\n          return commands.redirect(route.redirect);\n        }\n\n        if (route.bundle) {\n          return loadBundle(route.bundle)\n            .then(() => {}, () => {\n              throw new Error(log(`Bundle not found: ${route.bundle}. Check if the file name is correct`));\n            });\n        }\n      })\n      .then(result => {\n        if (isResultNotEmpty(result)) {\n          return result;\n        }\n        if (isString(route.component)) {\n          return commands.component(route.component);\n        }\n      });\n  }\n\n  /**\n   * Sets the router outlet (the DOM node where the content for the current\n   * route is inserted). Any content pre-existing in the router outlet is\n   * removed at the end of each render pass.\n   *\n   * NOTE: this method is automatically invoked first time when creating a new Router instance.\n   *\n   * @param {?Node} outlet the DOM node where the content for the current route\n   *     is inserted.\n   */\n  setOutlet(outlet) {\n    if (outlet) {\n      this.__ensureOutlet(outlet);\n    }\n    this.__outlet = outlet;\n  }\n\n  /**\n   * Returns the current router outlet. The initial value is `undefined`.\n   *\n   * @return {?Node} the current router outlet (or `undefined`)\n   */\n  getOutlet() {\n    return this.__outlet;\n  }\n\n  /**\n   * Sets the routing config (replacing the existing one) and triggers a\n   * navigation event so that the router outlet is refreshed according to the\n   * current `window.location` and the new routing config.\n   *\n   * Each route object may have the following properties, listed here in the processing order:\n   * * `path`  the route path (relative to the parent route if any) in the\n   * [express.js syntax](https://expressjs.com/en/guide/routing.html#route-paths\").\n   *\n   * * `children`  an array of nested routes or a function that provides this\n   * array at the render time. The function can be synchronous or asynchronous:\n   * in the latter case the render is delayed until the returned promise is\n   * resolved. The `children` function is executed every time when this route is\n   * being rendered. This allows for dynamic route structures (e.g. backend-defined),\n   * but it might have a performance impact as well. In order to avoid calling\n   * the function on subsequent renders, you can override the `children` property\n   * of the route object and save the calculated array there\n   * (via `context.route.children = [ route1, route2, ...];`).\n   * Parent routes are fully resolved before resolving the children. Children\n   * 'path' values are relative to the parent ones.\n   *\n   * * `action`  the action that is executed before the route is resolved.\n   * The value for this property should be a function, accepting `context`\n   * and `commands` parameters described below. If present, this function is\n   * always invoked first, disregarding of the other properties' presence.\n   * The action can return a result directly or within a `Promise`, which\n   * resolves to the result. If the action result is an `HTMLElement` instance,\n   * a `commands.component(name)` result, a `commands.redirect(path)` result,\n   * or a `context.next()` result, the current route resolution is finished,\n   * and other route config properties are ignored.\n   * See also **Route Actions** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * * `redirect`  other route's path to redirect to. Passes all route parameters to the redirect target.\n   * The target route should also be defined.\n   * See also **Redirects** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * * `bundle`  string containing the path to `.js` or `.mjs` bundle to load before resolving the route,\n   * or the object with \"module\" and \"nomodule\" keys referring to different bundles.\n   * Each bundle is only loaded once. If \"module\" and \"nomodule\" are set, only one bundle is loaded,\n   * depending on whether the browser supports ES modules or not.\n   * The property is ignored when either an `action` returns the result or `redirect` property is present.\n   * Any error, e.g. 404 while loading bundle will cause route resolution to throw.\n   * See also **Code Splitting** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * * `component`  the tag name of the Web Component to resolve the route to.\n   * The property is ignored when either an `action` returns the result or `redirect` property is present.\n   * If route contains the `component` property (or an action that return a component)\n   * and its child route also contains the `component` property, child route's component\n   * will be rendered as a light dom child of a parent component.\n   *\n   * * `name`  the string name of the route to use in the\n   * [`router.urlForName(name, params)`](#/classes/Router#method-urlForName)\n   * navigation helper method.\n   *\n   * For any route function (`action`, `children`) defined, the corresponding `route` object is available inside the callback\n   * through the `this` reference. If you need to access it, make sure you define the callback as a non-arrow function\n   * because arrow functions do not have their own `this` reference.\n   *\n   * `context` object that is passed to `action` function holds the following properties:\n   * * `context.pathname`  string with the pathname being resolved\n   *\n   * * `context.search`  search query string\n   *\n   * * `context.hash`  hash string\n   *\n   * * `context.params`  object with route parameters\n   *\n   * * `context.route`  object that holds the route that is currently being rendered.\n   *\n   * * `context.next()`  function for asynchronously getting the next route\n   * contents from the resolution chain (if any)\n   *\n   * `commands` object that is passed to `action` function has\n   * the following methods:\n   *\n   * * `commands.redirect(path)`  function that creates a redirect data\n   * for the path specified.\n   *\n   * * `commands.component(component)`  function that creates a new HTMLElement\n   * with current context. Note: the component created by this function is reused if visiting the same path twice in row.\n   *\n   *\n   * @param {!Array<!Route>|!Route} routes a single route or an array of those\n   * @param {?boolean} skipRender configure the router but skip rendering the\n   *     route corresponding to the current `window.location` values\n   *\n   * @return {!Promise<!Node>}\n   */\n  setRoutes(routes, skipRender = false) {\n    this.__previousContext = undefined;\n    this.__urlForName = undefined;\n    super.setRoutes(routes);\n    if (!skipRender) {\n      this.__onNavigationEvent();\n    }\n    return this.ready;\n  }\n\n  /**\n   * Asynchronously resolves the given pathname and renders the resolved route\n   * component into the router outlet. If no router outlet is set at the time of\n   * calling this method, or at the time when the route resolution is completed,\n   * a `TypeError` is thrown.\n   *\n   * Returns a promise that is fulfilled with the router outlet DOM Node after\n   * the route component is created and inserted into the router outlet, or\n   * rejected if no route matches the given path.\n   *\n   * If another render pass is started before the previous one is completed, the\n   * result of the previous render pass is ignored.\n   *\n   * @param {!string|!{pathname: !string, search: ?string, hash: ?string}} pathnameOrContext\n   *    the pathname to render or a context object with a `pathname` property,\n   *    optional `search` and `hash` properties, and other properties\n   *    to pass to the resolver.\n   * @param {boolean=} shouldUpdateHistory\n   *    update browser history with the rendered location\n   * @return {!Promise<!Node>}\n   */\n  render(pathnameOrContext, shouldUpdateHistory) {\n    const renderId = ++this.__lastStartedRenderId;\n    const context = Object.assign(\n      {\n        search: '',\n        hash: ''\n      },\n      isString(pathnameOrContext)\n        ? {pathname: pathnameOrContext}\n        : pathnameOrContext,\n      {\n        __renderId: renderId\n      }\n    );\n\n    // Find the first route that resolves to a non-empty result\n    this.ready = this.resolve(context)\n\n      // Process the result of this.resolve() and handle all special commands:\n      // (redirect / prevent / component). If the result is a 'component',\n      // then go deeper and build the entire chain of nested components matching\n      // the pathname. Also call all 'on before' callbacks along the way.\n      .then(context => this.__fullyResolveChain(context))\n\n      .then(context => {\n        if (this.__isLatestRender(context)) {\n          const previousContext = this.__previousContext;\n\n          // Check if the render was prevented and make an early return in that case\n          if (context === previousContext) {\n            // Replace the history with the previous context\n            // to make sure the URL stays the same.\n            this.__updateBrowserHistory(previousContext, true);\n            return this.location;\n          }\n\n          this.location = createLocation(context);\n\n          if (shouldUpdateHistory) {\n            // Replace only if first render redirects, so that we dont leave\n            // the redirecting record in the history\n            this.__updateBrowserHistory(context, renderId === 1);\n          }\n\n          fireRouterEvent('location-changed', {router: this, location: this.location});\n\n          // Skip detaching/re-attaching there are no render changes\n          if (context.__skipAttach) {\n            this.__copyUnchangedElements(context, previousContext);\n            this.__previousContext = context;\n            return this.location;\n          }\n\n          this.__addAppearingContent(context, previousContext);\n          const animationDone = this.__animateIfNeeded(context);\n\n          this.__runOnAfterEnterCallbacks(context);\n          this.__runOnAfterLeaveCallbacks(context, previousContext);\n\n          return animationDone.then(() => {\n            if (this.__isLatestRender(context)) {\n              // If there is another render pass started after this one,\n              // the 'disappearing content' would be removed when the other\n              // render pass calls `this.__addAppearingContent()`\n              this.__removeDisappearingContent();\n\n              this.__previousContext = context;\n              return this.location;\n            }\n          });\n        }\n      })\n      .catch(error => {\n        if (renderId === this.__lastStartedRenderId) {\n          if (shouldUpdateHistory) {\n            this.__updateBrowserHistory(context);\n          }\n          removeDomNodes(this.__outlet && this.__outlet.children);\n          this.location = createLocation(Object.assign(context, {resolver: this}));\n          fireRouterEvent('error', Object.assign({router: this, error}, context));\n          throw error;\n        }\n      });\n    return this.ready;\n  }\n\n  // `topOfTheChainContextBeforeRedirects` is a context coming from Resolver.resolve().\n  // It would contain a 'redirect' route or the first 'component' route that\n  // matched the pathname. There might be more child 'component' routes to be\n  // resolved and added into the chain. This method would find and add them.\n  // `contextBeforeRedirects` is the context containing such a child component\n  // route. It's only necessary when this method is called recursively (otherwise\n  // it's the same as the 'top of the chain' context).\n  //\n  // Apart from building the chain of child components, this method would also\n  // handle 'redirect' routes, call 'onBefore' callbacks and handle 'prevent'\n  // and 'redirect' callback results.\n  __fullyResolveChain(topOfTheChainContextBeforeRedirects,\n    contextBeforeRedirects = topOfTheChainContextBeforeRedirects) {\n    return this.__findComponentContextAfterAllRedirects(contextBeforeRedirects)\n      // `contextAfterRedirects` is always a context with an `HTMLElement` result\n      // In other cases the promise gets rejected and .then() is not called\n      .then(contextAfterRedirects => {\n        const redirectsHappened = contextAfterRedirects !== contextBeforeRedirects;\n        const topOfTheChainContextAfterRedirects =\n          redirectsHappened ? contextAfterRedirects : topOfTheChainContextBeforeRedirects;\n\n        const matchedPath = getPathnameForRouter(\n          getMatchedPath(contextAfterRedirects.chain),\n          contextAfterRedirects.resolver\n        );\n        const isFound = (matchedPath === contextAfterRedirects.pathname);\n\n        // Recursive method to try matching more child and sibling routes\n        const findNextContextIfAny = (context, parent = context.route, prevResult) => {\n          return context.next(undefined, parent, prevResult).then(nextContext => {\n            if (nextContext === null || nextContext === notFoundResult) {\n              // Next context is not found in children, ...\n              if (isFound) {\n                // ...but original context is already fully matching - use it\n                return context;\n              } else if (parent.parent !== null) {\n                // ...and there is no full match yet - step up to check siblings\n                return findNextContextIfAny(context, parent.parent, nextContext);\n              } else {\n                return nextContext;\n              }\n            }\n\n            return nextContext;\n          });\n        };\n\n        return findNextContextIfAny(contextAfterRedirects).then(nextContext => {\n          if (nextContext === null || nextContext === notFoundResult) {\n            throw getNotFoundError(topOfTheChainContextAfterRedirects);\n          }\n\n          return nextContext\n          && nextContext !== notFoundResult\n          && nextContext !== contextAfterRedirects\n            ? this.__fullyResolveChain(topOfTheChainContextAfterRedirects, nextContext)\n            : this.__amendWithOnBeforeCallbacks(contextAfterRedirects);\n        });\n      });\n  }\n\n  __findComponentContextAfterAllRedirects(context) {\n    const result = context.result;\n    if (result instanceof HTMLElement) {\n      renderElement(context, result);\n      return Promise.resolve(context);\n    } else if (result.redirect) {\n      return this.__redirect(result.redirect, context.__redirectCount, context.__renderId)\n        .then(context => this.__findComponentContextAfterAllRedirects(context));\n    } else if (result instanceof Error) {\n      return Promise.reject(result);\n    } else {\n      return Promise.reject(\n        new Error(\n          log(\n            `Invalid route resolution result for path \"${context.pathname}\". ` +\n            `Expected redirect object or HTML element, but got: \"${logValue(result)}\". ` +\n            `Double check the action return value for the route.`\n          )\n        ));\n    }\n  }\n\n  __amendWithOnBeforeCallbacks(contextWithFullChain) {\n    return this.__runOnBeforeCallbacks(contextWithFullChain).then(amendedContext => {\n      if (amendedContext === this.__previousContext || amendedContext === contextWithFullChain) {\n        return amendedContext;\n      }\n      return this.__fullyResolveChain(amendedContext);\n    });\n  }\n\n  __runOnBeforeCallbacks(newContext) {\n    const previousContext = this.__previousContext || {};\n    const previousChain = previousContext.chain || [];\n    const newChain = newContext.chain;\n\n    let callbacks = Promise.resolve();\n    const prevent = () => ({cancel: true});\n    const redirect = (pathname) => createRedirect(newContext, pathname);\n\n    newContext.__divergedChainIndex = 0;\n    newContext.__skipAttach = false;\n    if (previousChain.length) {\n      for (let i = 0; i < Math.min(previousChain.length, newChain.length); i = ++newContext.__divergedChainIndex) {\n        if (previousChain[i].route !== newChain[i].route\n          || previousChain[i].path !== newChain[i].path && previousChain[i].element !== newChain[i].element\n          || !this.__isReusableElement(previousChain[i].element, newChain[i].element)) {\n          break;\n        }\n      }\n\n      // Skip re-attaching and notifications if element and chain do not change\n      newContext.__skipAttach =\n        // Same route chain\n        newChain.length === previousChain.length && newContext.__divergedChainIndex == newChain.length &&\n        // Same element\n        this.__isReusableElement(newContext.result, previousContext.result);\n\n      if (newContext.__skipAttach) {\n        // execute onBeforeLeave for changed segment element when skipping attach\n        for (let i = newChain.length - 1; i >= 0; i--) {\n          callbacks = this.__runOnBeforeLeaveCallbacks(callbacks, newContext, {prevent}, previousChain[i]);\n        }\n        // execute onBeforeEnter for changed segment element when skipping attach\n        for (let i = 0; i < newChain.length; i++) {\n          callbacks = this.__runOnBeforeEnterCallbacks(callbacks, newContext, {prevent, redirect}, newChain[i]);\n          previousChain[i].element.location = createLocation(newContext, previousChain[i].route);\n        }\n\n      } else {\n        // execute onBeforeLeave when NOT skipping attach\n        for (let i = previousChain.length - 1; i >= newContext.__divergedChainIndex; i--) {\n          callbacks = this.__runOnBeforeLeaveCallbacks(callbacks, newContext, {prevent}, previousChain[i]);\n        }\n      }\n    }\n    // execute onBeforeEnter when NOT skipping attach\n    if (!newContext.__skipAttach) {\n      for (let i = 0; i < newChain.length; i++) {\n        if (i < newContext.__divergedChainIndex) {\n          if (i < previousChain.length && previousChain[i].element) {\n            previousChain[i].element.location = createLocation(newContext, previousChain[i].route);\n          }\n        } else {\n          callbacks = this.__runOnBeforeEnterCallbacks(callbacks, newContext, {prevent, redirect}, newChain[i]);\n          if (newChain[i].element) {\n            newChain[i].element.location = createLocation(newContext, newChain[i].route);\n          }\n        }\n      }\n    }\n    return callbacks.then(amendmentResult => {\n      if (amendmentResult) {\n        if (amendmentResult.cancel) {\n          this.__previousContext.__renderId = newContext.__renderId;\n          return this.__previousContext;\n        }\n        if (amendmentResult.redirect) {\n          return this.__redirect(amendmentResult.redirect, newContext.__redirectCount, newContext.__renderId);\n        }\n      }\n      return newContext;\n    });\n  }\n\n  __runOnBeforeLeaveCallbacks(callbacks, newContext, commands, chainElement) {\n    const location = createLocation(newContext);\n    return callbacks.then(result => {\n      if (this.__isLatestRender(newContext)) {\n        const afterLeaveFunction = amend('onBeforeLeave', [location, commands, this], chainElement.element);\n        return afterLeaveFunction(result);\n      }\n    }).then(result => {\n      if (!(result || {}).redirect) {\n        return result;\n      }\n    });\n  }\n\n  __runOnBeforeEnterCallbacks(callbacks, newContext, commands, chainElement) {\n    const location = createLocation(newContext, chainElement.route);\n    return callbacks.then(result => {\n      if (this.__isLatestRender(newContext)) {\n        const beforeEnterFunction = amend('onBeforeEnter', [location, commands, this], chainElement.element);\n        return beforeEnterFunction(result);\n      }\n    });\n  }\n\n  __isReusableElement(element, otherElement) {\n    if (element && otherElement) {\n      return this.__createdByRouter.get(element) && this.__createdByRouter.get(otherElement)\n        ? element.localName === otherElement.localName\n        : element === otherElement;\n    }\n    return false;\n  }\n\n  __isLatestRender(context) {\n    return context.__renderId === this.__lastStartedRenderId;\n  }\n\n  __redirect(redirectData, counter, renderId) {\n    if (counter > MAX_REDIRECT_COUNT) {\n      throw new Error(log(`Too many redirects when rendering ${redirectData.from}`));\n    }\n\n    return this.resolve({\n      pathname: this.urlForPath(\n        redirectData.pathname,\n        redirectData.params\n      ),\n      redirectFrom: redirectData.from,\n      __redirectCount: (counter || 0) + 1,\n      __renderId: renderId\n    });\n  }\n\n  __ensureOutlet(outlet = this.__outlet) {\n    if (!(outlet instanceof Node)) {\n      throw new TypeError(log(`Expected router outlet to be a valid DOM Node (but got ${outlet})`));\n    }\n  }\n\n  __updateBrowserHistory({pathname, search = '', hash = ''}, replace) {\n    if (window.location.pathname !== pathname\n        || window.location.search !== search\n        || window.location.hash !== hash\n    ) {\n      const changeState = replace ? 'replaceState' : 'pushState';\n      window.history[changeState](null, document.title, pathname + search + hash);\n      window.dispatchEvent(new PopStateEvent('popstate', {state: 'vaadin-router-ignore'}));\n    }\n  }\n\n  __copyUnchangedElements(context, previousContext) {\n    // Find the deepest common parent between the last and the new component\n    // chains. Update references for the unchanged elements in the new chain\n    let deepestCommonParent = this.__outlet;\n    for (let i = 0; i < context.__divergedChainIndex; i++) {\n      const unchangedElement = previousContext && previousContext.chain[i].element;\n      if (unchangedElement) {\n        if (unchangedElement.parentNode === deepestCommonParent) {\n          context.chain[i].element = unchangedElement;\n          deepestCommonParent = unchangedElement;\n        } else {\n          break;\n        }\n      }\n    }\n    return deepestCommonParent;\n  }\n\n  __addAppearingContent(context, previousContext) {\n    this.__ensureOutlet();\n\n    // If the previous 'entering' animation has not completed yet,\n    // stop it and remove that content from the DOM before adding new one.\n    this.__removeAppearingContent();\n\n    // Copy reusable elements from the previousContext to current\n    const deepestCommonParent = this.__copyUnchangedElements(context, previousContext);\n\n    // Keep two lists of DOM elements:\n    //  - those that should be removed once the transition animation is over\n    //  - and those that should remain\n    this.__appearingContent = [];\n    this.__disappearingContent = Array\n      .from(deepestCommonParent.children)\n      .filter(\n        // Only remove layout content that was added by router\n        e => this.__addedByRouter.get(e) &&\n        // Do not remove the result element to avoid flickering\n        e !== context.result);\n\n    // Add new elements (starting after the deepest common parent) to the DOM.\n    // That way only the components that are actually different between the two\n    // locations are added to the DOM (and those that are common remain in the\n    // DOM without first removing and then adding them again).\n    let parentElement = deepestCommonParent;\n    for (let i = context.__divergedChainIndex; i < context.chain.length; i++) {\n      const elementToAdd = context.chain[i].element;\n      if (elementToAdd) {\n        parentElement.appendChild(elementToAdd);\n        this.__addedByRouter.set(elementToAdd, true);\n        if (parentElement === deepestCommonParent) {\n          this.__appearingContent.push(elementToAdd);\n        }\n        parentElement = elementToAdd;\n      }\n    }\n  }\n\n  __removeDisappearingContent() {\n    if (this.__disappearingContent) {\n      removeDomNodes(this.__disappearingContent);\n    }\n    this.__disappearingContent = null;\n    this.__appearingContent = null;\n  }\n\n  __removeAppearingContent() {\n    if (this.__disappearingContent && this.__appearingContent) {\n      removeDomNodes(this.__appearingContent);\n      this.__disappearingContent = null;\n      this.__appearingContent = null;\n    }\n  }\n\n  __runOnAfterLeaveCallbacks(currentContext, targetContext) {\n    if (!targetContext) {\n      return;\n    }\n\n    // REVERSE iteration: from Z to A\n    for (let i = targetContext.chain.length - 1; i >= currentContext.__divergedChainIndex; i--) {\n      if (!this.__isLatestRender(currentContext)) {\n        break;\n      }\n      const currentComponent = targetContext.chain[i].element;\n      if (!currentComponent) {\n        continue;\n      }\n      try {\n        const location = createLocation(currentContext);\n        runCallbackIfPossible(\n          currentComponent.onAfterLeave,\n          [location, {}, targetContext.resolver],\n          currentComponent);\n      } finally {\n        if (this.__disappearingContent.indexOf(currentComponent) > -1) {\n          removeDomNodes(currentComponent.children);\n        }\n      }\n    }\n  }\n\n  __runOnAfterEnterCallbacks(currentContext) {\n    // forward iteration: from A to Z\n    for (let i = currentContext.__divergedChainIndex; i < currentContext.chain.length; i++) {\n      if (!this.__isLatestRender(currentContext)) {\n        break;\n      }\n      const currentComponent = currentContext.chain[i].element || {};\n      const location = createLocation(currentContext, currentContext.chain[i].route);\n      runCallbackIfPossible(\n        currentComponent.onAfterEnter,\n        [location, {}, currentContext.resolver],\n        currentComponent);\n    }\n  }\n\n  __animateIfNeeded(context) {\n    const from = (this.__disappearingContent || [])[0];\n    const to = (this.__appearingContent || [])[0];\n    const promises = [];\n\n    const chain = context.chain;\n    let config;\n    for (let i = chain.length; i > 0; i--) {\n      if (chain[i - 1].route.animate) {\n        config = chain[i - 1].route.animate;\n        break;\n      }\n    }\n\n    if (from && to && config) {\n      const leave = isObject(config) && config.leave || 'leaving';\n      const enter = isObject(config) && config.enter || 'entering';\n      promises.push(animate(from, leave));\n      promises.push(animate(to, enter));\n    }\n\n    return Promise.all(promises).then(() => context);\n  }\n\n  /**\n   * Subscribes this instance to navigation events on the `window`.\n   *\n   * NOTE: beware of resource leaks. For as long as a router instance is\n   * subscribed to navigation events, it won't be garbage collected.\n   */\n  subscribe() {\n    window.addEventListener('vaadin-router-go', this.__navigationEventHandler);\n  }\n\n  /**\n   * Removes the subscription to navigation events created in the `subscribe()`\n   * method.\n   */\n  unsubscribe() {\n    window.removeEventListener('vaadin-router-go', this.__navigationEventHandler);\n  }\n\n  __onNavigationEvent(event) {\n    const {pathname, search, hash} = event ? event.detail : window.location;\n    if (isString(this.__normalizePathname(pathname))) {\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n      this.render({pathname, search, hash}, true);\n    }\n  }\n\n  /**\n   * Configures what triggers Router navigation events:\n   *  - `POPSTATE`: popstate events on the current `window`\n   *  - `CLICK`: click events on `<a>` links leading to the current page\n   *\n   * This method is invoked with the pre-configured values when creating a new Router instance.\n   * By default, both `POPSTATE` and `CLICK` are enabled. This setup is expected to cover most of the use cases.\n   *\n   * See the `router-config.js` for the default navigation triggers config. Based on it, you can\n   * create the own one and only import the triggers you need, instead of pulling in all the code,\n   * e.g. if you want to handle `click` differently.\n   *\n   * See also **Navigation Triggers** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * @param {...NavigationTrigger} triggers\n   */\n  static setTriggers(...triggers) {\n    setNavigationTriggers(triggers);\n  }\n\n  /**\n   * Generates a URL for the route with the given name, optionally performing\n   * substitution of parameters.\n   *\n   * The route is searched in all the Router instances subscribed to\n   * navigation events.\n   *\n   * **Note:** For child route names, only array children are considered.\n   * It is not possible to generate URLs using a name for routes set with\n   * a children function.\n   *\n   * @function urlForName\n   * @param {!string} name the route name or the routes `component` name.\n   * @param {Params=} params Optional object with route path parameters.\n   * Named parameters are passed by name (`params[name] = value`), unnamed\n   * parameters are passed by index (`params[index] = value`).\n   *\n   * @return {string}\n   */\n  urlForName(name, params) {\n    if (!this.__urlForName) {\n      this.__urlForName = generateUrls(this);\n    }\n    return getPathnameForRouter(\n      this.__urlForName(name, params),\n      this\n    );\n  }\n\n  /**\n   * Generates a URL for the given route path, optionally performing\n   * substitution of parameters.\n   *\n   * @param {!string} path string route path declared in [express.js syntax](https://expressjs.com/en/guide/routing.html#route-paths\").\n   * @param {Params=} params Optional object with route path parameters.\n   * Named parameters are passed by name (`params[name] = value`), unnamed\n   * parameters are passed by index (`params[index] = value`).\n   *\n   * @return {string}\n   */\n  urlForPath(path, params) {\n    return getPathnameForRouter(\n      Router.pathToRegexp.compile(path)(params),\n      this\n    );\n  }\n\n  /**\n   * Triggers navigation to a new path. Returns a boolean without waiting until\n   * the navigation is complete. Returns `true` if at least one `Router`\n   * has handled the navigation (was subscribed and had `baseUrl` matching\n   * the `path` argument), otherwise returns `false`.\n   *\n   * @param {!string|!{pathname: !string, search: (string|undefined), hash: (string|undefined)}} path\n   *   a new in-app path string, or an URL-like object with `pathname`\n   *   string property, and optional `search` and `hash` string properties.\n   * @return {boolean}\n   */\n  static go(path) {\n    const {pathname, search, hash} = isString(path)\n      ? this.__createUrl(path, 'http://a') // some base to omit origin\n      : path;\n    return fireRouterEvent('go', {pathname, search, hash});\n  }\n}\n\nconst DEV_MODE_CODE_REGEXP =\n  /\\/\\*[\\*!]\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e);\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nconst runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n\n/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.2';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nconst usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n\nwindow.Vaadin = window.Vaadin || {};\nwindow.Vaadin.registrations = window.Vaadin.registrations || [];\n\nwindow.Vaadin.registrations.push({\n  is: '@vaadin/router',\n  version: '1.7.4',\n});\n\nusageStatistics();\n\nRouter.NavigationTrigger = {POPSTATE, CLICK};\n\nexport { Resolver, Router };\n//# sourceMappingURL=vaadin-router.js.map\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){const e=this.constructor,h=this[t];if(i??=e.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(e._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.1\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.3.1\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.1\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{defaultConverter as t,notEqual as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:t,reflect:!1,hasChanged:e},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),\"setter\"===n&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","import { LitElement, html, css } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\n\n@customElement('login-view')\nexport class LoginView extends LitElement {\n  @state() private username!: string;\n  @state() private password!: string;\n  @state() private error!: string | null;\n\n  constructor() {\n    super();\n    this.username = '';\n    this.password = '';\n    this.error = null;\n  }\n\n  static styles = css`\n    .container {\n      min-height: 100vh;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0b3b9e 100%);\n      padding: 2rem;\n    }\n    .card {\n      background: rgba(255, 255, 255, 0.07);\n      backdrop-filter: blur(14px);\n      -webkit-backdrop-filter: blur(14px);\n      width: 100%;\n      max-width: 440px;\n      border-radius: 16px;\n      box-shadow: 0 20px 40px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.08);\n      padding: 1.5rem 1.5rem 1.25rem;\n      border: 1px solid rgba(255,255,255,0.12);\n    }\n    h1 {\n      margin: 0 0 1.25rem 0;\n      text-align: center;\n      color: #ffffff;\n      font-size: 1.75rem;\n      letter-spacing: 0.3px;\n    }\n    .subtle { color: rgba(255,255,255,0.75); text-align: center; margin-bottom: 1.25rem; }\n    .form-group { margin-bottom: 0.75rem; }\n    label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: rgba(255,255,255,0.9); }\n    input {\n      width: 100%;\n      max-width: 400px; /* Match the full width like the buttons */\n      margin: 0;       /* Align with button edges inside the card */\n      display: block;\n      padding: 0.5rem 0.7rem;\n      border: 1px solid rgba(255,255,255,0.25);\n      border-radius: 8px;\n      font-size: 0.9rem;\n      background: rgba(255,255,255,0.12);\n      color: #fff;\n      outline: none;\n    }\n    input::placeholder { color: rgba(255,255,255,0.65); }\n    input:focus {\n      border-color: #60a5fa;\n      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.25);\n      background: rgba(255,255,255,0.16);\n    }\n    .actions { margin-top: 0.75rem; display: grid; gap: 0.6rem; }\n    .btn-primary {\n      width: 100%;\n      padding: 0.7rem 0.9rem;\n      background: linear-gradient(135deg, #2563eb, #1d4ed8);\n      color: #fff;\n      border: 0;\n      border-radius: 10px;\n      font-weight: 700;\n      cursor: pointer;\n      letter-spacing: 0.3px;\n      box-shadow: 0 10px 20px rgba(37,99,235,0.35);\n      transition: transform .05s ease, box-shadow .2s ease, filter .2s ease;\n    }\n    .btn-primary:hover { filter: brightness(1.05); box-shadow: 0 14px 28px rgba(37,99,235,0.45); }\n    .btn-primary:active { transform: translateY(1px); }\n    .btn-ghost {\n      width: 100%;\n      padding: 0.65rem 0.9rem;\n      background: transparent;\n      color: #e5e7eb;\n      border: 1px solid rgba(255,255,255,0.25);\n      border-radius: 10px;\n      font-weight: 600;\n      cursor: pointer;\n      transition: background .2s ease, border-color .2s ease;\n    }\n    .btn-ghost:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.35); }\n    .error {\n      background: rgba(220, 38, 38, 0.15);\n      color: #fecaca;\n      padding: 0.6rem 0.8rem;\n      border-radius: 10px;\n      margin-bottom: 0.9rem;\n      font-size: 0.95rem;\n      border: 1px solid rgba(220, 38, 38, 0.35);\n    }\n  `;\n\n  private onInput(e: Event) {\n    const t = e.target as HTMLInputElement;\n    (this as any)[t.name] = t.value;\n  }\n  private async onSubmit(e: Event) {\n    e.preventDefault();\n    this.error = null;\n\n    if (!this.username.trim() || !this.password.trim()) {\n      this.error = 'Username and password are required';\n      return;\n    }\n\n    try {\n      // Use Basic Auth verification via API service\n      const { apiService } = await import('../services/api');\n      await apiService.login({ username: this.username, password: this.password });\n      // On success, go to users page\n      import('@vaadin/router').then(({ Router }) => Router.go('/users'));\n    } catch (err) {\n      this.error = 'Invalid username or password';\n      console.error('Login error:', err);\n    }\n  }\n\n  render() {\n    return html`\n      <div class=\"container\">\n        <div class=\"card\">\n          <h1>Log in</h1>\n          <div class=\"subtle\">Welcome back. Please enter your credentials to continue.</div>\n          ${this.error ? html`<div class=\"error\">${this.error}</div>` : ''}\n          <form @submit=${this.onSubmit}>\n            <div class=\"form-group\">\n              <label for=\"username\">Username</label>\n              <input id=\"username\" name=\"username\" type=\"text\" .value=${this.username} @input=${this.onInput} />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"password\">Password</label>\n              <input id=\"password\" name=\"password\" type=\"password\" .value=${this.password} @input=${this.onInput} />\n            </div>\n            <div class=\"actions\">\n              <button class=\"btn-primary\" type=\"submit\">Log in</button>\n              <button class=\"btn-ghost\" type=\"button\" @click=${() => { /* Navigate to register using Vaadin Router */ import('@vaadin/router').then(({ Router }) => Router.go('/register')); }}>\n                Create an account\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'login-view': LoginView;\n  }\n}\n","const API_BASE_URL = '/api';\nclass ApiService {\n    async request(endpoint, options = {}) {\n        const url = `${API_BASE_URL}${endpoint}`;\n        const response = await fetch(url, {\n            headers: {\n                'Content-Type': 'application/json',\n                ...options.headers,\n            },\n            ...options,\n        });\n        if (!response.ok) {\n            throw new Error(`API request failed: ${response.status} ${response.statusText}`);\n        }\n        return response.json();\n    }\n    // User API methods\n    async getAllUsers() {\n        return this.request('/users');\n    }\n    async getUserById(id) {\n        return this.request(`/users/${id}`);\n    }\n    async createUser(user) {\n        // Transform frontend user object to match backend UserDto structure\n        const backendUser = {\n            firstName: user.name.split(' ')[0] || '',\n            lastName: user.name.split(' ').slice(1).join(' ') || '',\n            email: user.email,\n            password: user.password || 'defaultPassword123', // Add default password if not provided\n            phone: user.phone\n        };\n        return this.request('/users/register', {\n            method: 'POST',\n            body: JSON.stringify(backendUser),\n        });\n    }\n    async updateUser(id, user) {\n        // Transform frontend user object to match backend UserDto structure\n        const backendUser = {\n            firstName: user.name.split(' ')[0] || '',\n            lastName: user.name.split(' ').slice(1).join(' ') || '',\n            email: user.email,\n            phone: user.phone\n        };\n        return this.request(`/users/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(backendUser),\n        });\n    }\n    async deleteUser(id) {\n        await this.request(`/users/${id}`, {\n            method: 'DELETE',\n        });\n    }\n}\nexport const apiService = new ApiService();\n","import { LitElement, html, css } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\nimport { apiService } from '../services/api';\n\ndeclare module 'lit' {\n  interface HTMLElementTagNameMap {\n    'register-view': RegisterView;\n  }\n}\n\n@customElement('register-view')\nexport class RegisterView extends LitElement {\n  // Declare reactive state properties without initializers to avoid shadowing the accessors.\n  @state() private name!: string;\n  @state() private email!: string;\n  @state() private password!: string;\n  @state() private phone!: string;\n  @state() private error!: string | null;\n  @state() private success!: string | null;\n\n  constructor() {\n    super();\n    // Initialize values in the constructor so they don't overwrite decorators' accessors.\n    this.name = '';\n    this.email = '';\n    this.password = '';\n    this.phone = '';\n    this.error = null;\n    this.success = null;\n  }\n\n  static styles = css`\n    .container {\n      min-height: 100vh;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0b3b9e 100%);\n      padding: 2rem;\n    }\n    .card {\n      background: rgba(255, 255, 255, 0.07);\n      backdrop-filter: blur(14px);\n      -webkit-backdrop-filter: blur(14px);\n      width: 100%;\n      max-width: 500px;\n      border-radius: 16px;\n      box-shadow: 0 20px 40px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.08);\n      padding: 1.5rem 1.5rem 1.25rem;\n      border: 1px solid rgba(255,255,255,0.12);\n    }\n    h1 {\n      margin: 0 0 0.5rem 0;\n      text-align: center;\n      color: #ffffff;\n      font-size: 1.75rem;\n      letter-spacing: 0.3px;\n    }\n    .subtle { color: rgba(255,255,255,0.75); text-align: center; margin-bottom: 1.25rem; }\n    .form-grid { display: grid; gap: 0.85rem; }\n    label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: rgba(255,255,255,0.9); }\n    input {\n      width: 100%;\n      max-width: 400px; /* Match the full width like the buttons */\n      margin: 0;       /* Align with button edges inside the card */\n      display: block;\n      padding: 0.5rem 0.7rem;\n      border: 1px solid rgba(255,255,255,0.25);\n      border-radius: 8px;\n      font-size: 0.9rem;\n      background: rgba(255,255,255,0.12);\n      color: #fff;\n      outline: none;\n    }\n    input::placeholder { color: rgba(255,255,255,0.65); }\n    input:focus {\n      border-color: #60a5fa;\n      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.25);\n      background: rgba(255,255,255,0.16);\n    }\n    .actions { margin-top: 0.75rem; display: grid; gap: 0.6rem; }\n    .btn-primary {\n      width: 100%;\n      padding: 0.7rem 0.9rem;\n      background: linear-gradient(135deg, #2563eb, #1d4ed8);\n      color: #fff;\n      border: 0;\n      border-radius: 10px;\n      font-weight: 700;\n      cursor: pointer;\n      letter-spacing: 0.3px;\n      box-shadow: 0 10px 20px rgba(37,99,235,0.35);\n      transition: transform .05s ease, box-shadow .2s ease, filter .2s ease;\n    }\n    .btn-primary:hover { filter: brightness(1.05); box-shadow: 0 14px 28px rgba(37,99,235,0.45); }\n    .btn-primary:active { transform: translateY(1px); }\n    .btn-ghost {\n      width: 100%;\n      padding: 0.65rem 0.9rem;\n      background: transparent;\n      color: #e5e7eb;\n      border: 1px solid rgba(255,255,255,0.25);\n      border-radius: 10px;\n      font-weight: 600;\n      cursor: pointer;\n      transition: background .2s ease, border-color .2s ease;\n    }\n    .btn-ghost:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.35); }\n    .error {\n      background: rgba(220, 38, 38, 0.15);\n      color: #fecaca;\n      padding: 0.6rem 0.8rem;\n      border-radius: 10px;\n      margin-bottom: 0.9rem;\n      font-size: 0.95rem;\n      border: 1px solid rgba(220, 38, 38, 0.35);\n    }\n    .success {\n      background: rgba(16, 185, 129, 0.15);\n      color: #bbf7d0;\n      padding: 0.6rem 0.8rem;\n      border-radius: 10px;\n      margin-bottom: 0.9rem;\n      font-size: 0.95rem;\n      border: 1px solid rgba(16, 185, 129, 0.35);\n    }\n  `;\n\n  private onInput(e: Event) {\n    const t = e.target as HTMLInputElement;\n    (this as any)[t.name] = t.value;\n  }\n\n  private async onSubmit(e: Event) {\n    e.preventDefault();\n    this.error = null;\n    this.success = null;\n\n    if (!this.name.trim() || !this.email.trim() || !this.password.trim()) {\n      this.error = 'Name, username and password are required';\n      return;\n    }\n\n    try {\n      await apiService.createUser({ name: this.name, email: this.email, password: this.password, phone: this.phone });\n      this.success = 'Account created successfully. Redirecting to log in...';\n      // Redirect after a tiny delay so the user can see success\n      setTimeout(() => {\n        import('@vaadin/router').then(({ Router }) => Router.go('/login'));\n      }, 700);\n    } catch (err) {\n      this.error = err instanceof Error ? err.message : 'Failed to register';\n      console.error(err);\n    }\n  }\n\n  render() {\n    return html`\n      <div class=\"container\">\n        <div class=\"card\">\n          <h1>Create your account</h1>\n          <div class=\"subtle\">Join our CRM platform and manage your customers with confidence.</div>\n          ${this.error ? html`<div class=\"error\">${this.error}</div>` : ''}\n          ${this.success ? html`<div class=\"success\">${this.success}</div>` : ''}\n          <form @submit=${this.onSubmit} class=\"form-grid\">\n            <div>\n              <label for=\"name\">Full name</label>\n              <input id=\"name\" name=\"name\" type=\"text\" placeholder=\"e.g. Alex Johnson\" .value=${this.name} @input=${this.onInput} />\n            </div>\n            <div>\n              <label for=\"email\">Username (used for login)</label>\n              <input id=\"email\" name=\"email\" type=\"text\" placeholder=\"e.g. test1\" .value=${this.email} @input=${this.onInput} />\n            </div>\n            <div>\n              <label for=\"password\">Password</label>\n              <input id=\"password\" name=\"password\" type=\"password\" placeholder=\"\" .value=${this.password} @input=${this.onInput} />\n            </div>\n            <div>\n              <label for=\"phone\">Phone (optional)</label>\n              <input id=\"phone\" name=\"phone\" type=\"tel\" placeholder=\"e.g. +1 (555) 123-4567\" .value=${this.phone} @input=${this.onInput} />\n            </div>\n            <div class=\"actions\">\n              <button class=\"btn-primary\" type=\"submit\">Create account</button>\n              <button class=\"btn-ghost\" type=\"button\" @click=${() => { import('@vaadin/router').then(({ Router }) => Router.go('/login')); }}>\n                Back to log in\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    `;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\nwindow.Vaadin ||= {};\nwindow.Vaadin.featureFlags ||= {};\n\nfunction dashToCamelCase(dash) {\n  return dash.replace(/-[a-z]/gu, (m) => m[1].toUpperCase());\n}\n\nconst experimentalMap = {};\n\nexport function defineCustomElement(CustomElement, version = '24.9.6') {\n  Object.defineProperty(CustomElement, 'version', {\n    get() {\n      return version;\n    },\n  });\n\n  if (CustomElement.experimental) {\n    const featureFlagKey =\n      typeof CustomElement.experimental === 'string'\n        ? CustomElement.experimental\n        : `${dashToCamelCase(CustomElement.is.split('-').slice(1).join('-'))}Component`;\n\n    if (!window.Vaadin.featureFlags[featureFlagKey] && !experimentalMap[featureFlagKey]) {\n      // Add setter to define experimental component when it's set to true\n      experimentalMap[featureFlagKey] = new Set();\n      experimentalMap[featureFlagKey].add(CustomElement);\n\n      Object.defineProperty(window.Vaadin.featureFlags, featureFlagKey, {\n        get() {\n          return experimentalMap[featureFlagKey].size === 0;\n        },\n        set(value) {\n          if (!!value && experimentalMap[featureFlagKey].size > 0) {\n            experimentalMap[featureFlagKey].forEach((elementClass) => {\n              customElements.define(elementClass.is, elementClass);\n            });\n            experimentalMap[featureFlagKey].clear();\n          }\n        },\n      });\n\n      return;\n    } else if (experimentalMap[featureFlagKey]) {\n      // Allow to register multiple components with single flag\n      experimentalMap[featureFlagKey].add(CustomElement);\n      return;\n    }\n  }\n\n  const defined = customElements.get(CustomElement.is);\n  if (!defined) {\n    customElements.define(CustomElement.is, CustomElement);\n  } else {\n    const definedVersion = defined.version;\n    if (definedVersion && CustomElement.version && definedVersion === CustomElement.version) {\n      // Just loading the same thing again\n      console.warn(`The component ${CustomElement.is} has been loaded twice`);\n    } else {\n      console.error(\n        `Tried to define ${CustomElement.is} version ${CustomElement.version} when version ${defined.version} is already in use. Something will probably break.`,\n      );\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { defineCustomElement } from '@vaadin/component-base/src/define.js';\n\n/**\n * Dummy custom element used for collecting\n * development time usage statistics.\n *\n * @private\n */\nclass Lumo extends HTMLElement {\n  static get is() {\n    return 'vaadin-lumo-styles';\n  }\n}\n\ndefineCustomElement(Lumo);\n\nexport { Lumo };\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { adoptStyles } from 'lit';\n\n/**\n * Returns the effective styles that should apply to the component\n * in the correct order, to place injected stylesheet after styles\n * defined with `static styles` and before any custom theme styles\n * that the user provided using `registerStyles()` function.\n *\n * @param {HTMLElement} component\n * @return {CSSStyleSheet[]}\n */\nfunction getEffectiveStyles(component) {\n  const componentClass = component.constructor;\n\n  const styleSheet = component.__cssInjectorStyleSheet;\n  if (styleSheet) {\n    return [...componentClass.baseStyles, styleSheet, ...componentClass.themeStyles];\n  }\n\n  return componentClass.elementStyles;\n}\n\n/**\n * Apply styles on the instance of the component in the correct order.\n *\n * @param {HTMLElement} component\n */\nexport function applyInstanceStyles(component) {\n  // The adoptStyles function may fall back to appending style elements to shadow root.\n  // Remove them first to avoid duplicates.\n  [...component.shadowRoot.querySelectorAll('style')].forEach((style) => style.remove());\n\n  adoptStyles(component.shadowRoot, getEffectiveStyles(component));\n}\n\n/**\n * Injects the given stylesheet into the shadow root of the component\n * through the adoptedStyleSheets API. This will override any styles\n * that were injected previously since we only expect one stylesheet\n * to be injected into each component.\n *\n * @param {HTMLElement} component\n * @param {CSSStyleSheet} styleSheet\n */\nexport function injectStyleSheet(component, styleSheet) {\n  // Store the new stylesheet so that it can be removed later.\n  component.__cssInjectorStyleSheet = styleSheet;\n  applyInstanceStyles(component);\n}\n\n/**\n * Removes the stylesheet from the component's shadow root that was added\n * by the `injectStyleSheet` function.\n *\n * @param {HTMLElement} component\n */\nexport function cleanupStyleSheet(component) {\n  const adoptedStyleSheets = component.shadowRoot.adoptedStyleSheets.filter(\n    (s) => s !== component.__cssInjectorStyleSheet,\n  );\n\n  component.shadowRoot.adoptedStyleSheets = adoptedStyleSheets;\n  component.__cssInjectorStyleSheet = undefined;\n}\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n/**\n * @polymerMixin\n */\nexport const ThemePropertyMixin = (superClass) =>\n  class VaadinThemePropertyMixin extends superClass {\n    static get properties() {\n      return {\n        /**\n         * Helper property with theme attribute value facilitating propagation\n         * in shadow DOM.\n         *\n         * Enables the component implementation to propagate the `theme`\n         * attribute value to the sub-components in Shadow DOM by binding\n         * the sub-component's \"theme\" attribute to the `theme` property of\n         * the host.\n         *\n         * **NOTE:** Extending the mixin only provides the property for binding,\n         * and does not make the propagation alone.\n         *\n         * See [Styling Components: Sub-components](https://vaadin.com/docs/latest/styling/styling-components/#sub-components).\n         * page for more information.\n         *\n         * @protected\n         */\n        _theme: {\n          type: String,\n          readOnly: true,\n        },\n      };\n    }\n\n    static get observedAttributes() {\n      return [...super.observedAttributes, 'theme'];\n    }\n\n    /** @protected */\n    attributeChangedCallback(name, oldValue, newValue) {\n      super.attributeChangedCallback(name, oldValue, newValue);\n\n      if (name === 'theme') {\n        this._set_theme(newValue);\n      }\n    }\n  };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { css, CSSResult, LitElement, unsafeCSS } from 'lit';\nimport { applyInstanceStyles } from './src/css-utils.js';\nimport { ThemePropertyMixin } from './vaadin-theme-property-mixin.js';\n\nexport { css, unsafeCSS };\n\n/**\n * @typedef {Object} Theme\n * @property {string} themeFor\n * @property {CSSResult[]} styles\n * @property {string | string[]} [include]\n * @property {string} [moduleId]\n *\n * @typedef {CSSResult[] | CSSResult} CSSResultGroup\n */\n\n/**\n * @type {Theme[]}\n */\nconst themeRegistry = [];\n\n/**\n * @type {WeakRef<HTMLElement>[]}\n */\nconst themableInstances = new Set();\n\n/**\n * @type {string[]}\n */\nconst themableTagNames = new Set();\n\n/**\n * Check if the custom element type has themes applied.\n * @param {Function} elementClass\n * @returns {boolean}\n */\nfunction classHasThemes(elementClass) {\n  return elementClass && Object.prototype.hasOwnProperty.call(elementClass, '__themes');\n}\n\n/**\n * Check if the custom element type has themes applied.\n * @param {string} tagName\n * @returns {boolean}\n */\nfunction hasThemes(tagName) {\n  return classHasThemes(customElements.get(tagName));\n}\n\n/**\n * Flattens the styles into a single array of styles.\n * @param {CSSResultGroup} styles\n * @param {CSSResult[]} result\n * @returns {CSSResult[]}\n */\nfunction flattenStyles(styles = []) {\n  return [styles].flat(Infinity).filter((style) => {\n    if (style instanceof CSSResult) {\n      return true;\n    }\n    console.warn('An item in styles is not of type CSSResult. Use `unsafeCSS` or `css`.');\n    return false;\n  });\n}\n\n/**\n * Returns true if the themeFor string matches the tag name\n * @param {string} themeFor\n * @param {string} tagName\n * @returns {boolean}\n */\nfunction matchesThemeFor(themeFor, tagName) {\n  return (themeFor || '').split(' ').some((themeForToken) => {\n    return new RegExp(`^${themeForToken.split('*').join('.*')}$`, 'u').test(tagName);\n  });\n}\n\n/**\n * Returns the CSS text content from an array of CSSResults\n * @param {CSSResult[]} styles\n * @returns {string}\n */\nfunction getCssText(styles) {\n  return styles.map((style) => style.cssText).join('\\n');\n}\n\nconst STYLE_ID = 'vaadin-themable-mixin-style';\n\n/**\n * Includes the styles to the template.\n * @param {CSSResult[]} styles\n * @param {HTMLTemplateElement} template\n */\nfunction addStylesToTemplate(styles, template) {\n  const styleEl = document.createElement('style');\n  styleEl.id = STYLE_ID;\n  styleEl.textContent = getCssText(styles);\n  template.content.appendChild(styleEl);\n}\n\n/**\n * Dynamically updates the styles of the given component instance.\n * @param {HTMLElement} instance\n */\nfunction updateInstanceStyles(instance) {\n  if (!instance.shadowRoot) {\n    return;\n  }\n\n  const componentClass = instance.constructor;\n\n  if (instance instanceof LitElement) {\n    // LitElement\n    applyInstanceStyles(instance);\n  } else {\n    // PolymerElement\n\n    // Update style element content in the shadow root\n    const style = instance.shadowRoot.getElementById(STYLE_ID);\n    const template = componentClass.prototype._template;\n    style.textContent = template.content.getElementById(STYLE_ID).textContent;\n  }\n}\n\n/**\n * Dynamically updates the styles of the instances matching the given component type.\n * @param {Function} componentClass\n */\nfunction updateInstanceStylesOfType(componentClass) {\n  // Iterate over component instances and update their styles if needed\n  themableInstances.forEach((ref) => {\n    const instance = ref.deref();\n    if (instance instanceof componentClass) {\n      updateInstanceStyles(instance);\n    } else if (!instance) {\n      // Clean up the weak reference to a GC'd instance\n      themableInstances.delete(ref);\n    }\n  });\n}\n\n/**\n * Dynamically updates the styles of the given component type.\n * @param {Function} componentClass\n */\nfunction updateComponentStyles(componentClass) {\n  if (componentClass.prototype instanceof LitElement) {\n    // Update LitElement-based component's elementStyles\n    componentClass.elementStyles = componentClass.finalizeStyles(componentClass.styles);\n  } else {\n    // Update Polymer-based component's template\n    const template = componentClass.prototype._template;\n    template.content.getElementById(STYLE_ID).textContent = getCssText(componentClass.getStylesForThis());\n  }\n\n  // Update the styles of inheriting types\n  themableTagNames.forEach((inheritingTagName) => {\n    const inheritingClass = customElements.get(inheritingTagName);\n    if (inheritingClass !== componentClass && inheritingClass.prototype instanceof componentClass) {\n      updateComponentStyles(inheritingClass);\n    }\n  });\n}\n\n/**\n * Check if the component type already has a style matching the given styles.\n *\n * @param {Function} componentClass\n * @param {CSSResultGroup} styles\n * @returns {boolean}\n */\nfunction hasMatchingStyle(componentClass, styles) {\n  const themes = componentClass.__themes;\n  if (!themes || !styles) {\n    return false;\n  }\n\n  return themes.some((theme) =>\n    theme.styles.some((themeStyle) => styles.some((style) => style.cssText === themeStyle.cssText)),\n  );\n}\n\n/**\n * Registers CSS styles for a component type. Make sure to register the styles before\n * the first instance of a component of the type is attached to DOM.\n *\n * @param {string} themeFor The local/tag name of the component type to register the styles for\n * @param {CSSResultGroup} styles The CSS style rules to be registered for the component type\n * matching themeFor and included in the local scope of each component instance\n * @param {{moduleId?: string, include?: string | string[]}} options Additional options\n * @return {void}\n */\nexport function registerStyles(themeFor, styles, options = {}) {\n  styles = flattenStyles(styles);\n\n  if (window.Vaadin && window.Vaadin.styleModules) {\n    window.Vaadin.styleModules.registerStyles(themeFor, styles, options);\n  } else {\n    themeRegistry.push({\n      themeFor,\n      styles,\n      include: options.include,\n      moduleId: options.moduleId,\n    });\n  }\n\n  if (themeFor) {\n    // Update styles of the component types that match themeFor and have already been finalized\n    themableTagNames.forEach((tagName) => {\n      if (matchesThemeFor(themeFor, tagName) && hasThemes(tagName)) {\n        const componentClass = customElements.get(tagName);\n\n        if (hasMatchingStyle(componentClass, styles)) {\n          // Show a warning if the component type already has some of the given styles\n          console.warn(`Registering styles that already exist for ${tagName}`);\n        } else if (!window.Vaadin || !window.Vaadin.suppressPostFinalizeStylesWarning) {\n          // Show a warning if the component type has already been finalized\n          console.warn(\n            `The custom element definition for \"${tagName}\" ` +\n              `was finalized before a style module was registered. ` +\n              `Ideally, import component specific style modules before ` +\n              `importing the corresponding custom element. ` +\n              `This warning can be suppressed by setting \"window.Vaadin.suppressPostFinalizeStylesWarning = true\".`,\n          );\n        }\n\n        // Update the styles of the component type\n        updateComponentStyles(componentClass);\n        // Update the styles of the component instances matching the component type\n        updateInstanceStylesOfType(componentClass);\n      }\n    });\n  }\n}\n\n/**\n * Returns all registered themes. By default the themeRegistry is returned as is.\n * In case the style-modules adapter is imported, the themes are obtained from there instead\n * @returns {Theme[]}\n */\nfunction getAllThemes() {\n  if (window.Vaadin && window.Vaadin.styleModules) {\n    return window.Vaadin.styleModules.getAllThemes();\n  }\n  return themeRegistry;\n}\n\n/**\n * Maps the moduleName to an include priority number which is used for\n * determining the order in which styles are applied.\n * @param {string} moduleName\n * @returns {number}\n */\nfunction getIncludePriority(moduleName = '') {\n  let includePriority = 0;\n  if (moduleName.startsWith('lumo-') || moduleName.startsWith('material-')) {\n    includePriority = 1;\n  } else if (moduleName.startsWith('vaadin-')) {\n    includePriority = 2;\n  }\n  return includePriority;\n}\n\n/**\n * Gets an array of CSSResults matching the include property of the theme.\n * @param {Theme} theme\n * @returns {CSSResult[]}\n */\nfunction getIncludedStyles(theme) {\n  const includedStyles = [];\n  if (theme.include) {\n    [].concat(theme.include).forEach((includeModuleId) => {\n      const includedTheme = getAllThemes().find((s) => s.moduleId === includeModuleId);\n      if (includedTheme) {\n        includedStyles.push(...getIncludedStyles(includedTheme), ...includedTheme.styles);\n      } else {\n        console.warn(`Included moduleId ${includeModuleId} not found in style registry`);\n      }\n    }, theme.styles);\n  }\n  return includedStyles;\n}\n\n/**\n * Returns an array of themes that should be used for styling a component matching\n * the tag name. The array is sorted by the include order.\n * @param {string} tagName\n * @returns {Theme[]}\n */\nfunction getThemes(tagName) {\n  const defaultModuleName = `${tagName}-default-theme`;\n\n  const themes = getAllThemes()\n    // Filter by matching themeFor properties\n    .filter((theme) => theme.moduleId !== defaultModuleName && matchesThemeFor(theme.themeFor, tagName))\n    .map((theme) => ({\n      ...theme,\n      // Prepend styles from included themes\n      styles: [...getIncludedStyles(theme), ...theme.styles],\n      // Map moduleId to includePriority\n      includePriority: getIncludePriority(theme.moduleId),\n    }))\n    // Sort by includePriority\n    .sort((themeA, themeB) => themeB.includePriority - themeA.includePriority);\n\n  if (themes.length > 0) {\n    return themes;\n  }\n  // No theme modules found, return the default module if it exists\n  return getAllThemes().filter((theme) => theme.moduleId === defaultModuleName);\n}\n\n/**\n * @polymerMixin\n * @mixes ThemePropertyMixin\n */\nexport const ThemableMixin = (superClass) =>\n  class VaadinThemableMixin extends ThemePropertyMixin(superClass) {\n    constructor() {\n      super();\n      // Store a weak reference to the instance\n      themableInstances.add(new WeakRef(this));\n    }\n\n    /**\n     * Covers PolymerElement based component styling\n     * @protected\n     */\n    static finalize() {\n      super.finalize();\n\n      if (this.is) {\n        themableTagNames.add(this.is);\n      }\n\n      // Make sure not to run the logic intended for PolymerElement when LitElement is used.\n      if (this.elementStyles) {\n        return;\n      }\n\n      const template = this.prototype._template;\n      if (!template || classHasThemes(this)) {\n        return;\n      }\n\n      addStylesToTemplate(this.getStylesForThis(), template);\n    }\n\n    /**\n     * Covers LitElement based component styling\n     *\n     * @protected\n     */\n    static finalizeStyles(styles) {\n      // Preserve the styles the user supplied via the `static get styles()` getter\n      // so that they will always be injected before styles added by `CSSInjector`.\n      this.baseStyles = styles ? [styles].flat(Infinity) : [];\n\n      // Preserve the theme styles the user supplied via the `registerStyles()` API\n      // so that they will always be injected after styles added by `CSSInjector`.\n      this.themeStyles = this.getStylesForThis();\n\n      // Merged styles are stored in `elementStyles` and passed to `adoptStyles()`.\n      return [...this.baseStyles, ...this.themeStyles];\n    }\n\n    /**\n     * Get styles for the component type\n     *\n     * @private\n     */\n    static getStylesForThis() {\n      const superClassThemes = superClass.__themes || [];\n      const parent = Object.getPrototypeOf(this.prototype);\n      const inheritedThemes = (parent ? parent.constructor.__themes : []) || [];\n      this.__themes = [...superClassThemes, ...inheritedThemes, ...getThemes(this.is)];\n      const themeStyles = this.__themes.flatMap((theme) => theme.styles);\n      // Remove duplicates\n      return themeStyles.filter((style, index) => index === themeStyles.lastIndexOf(style));\n    }\n  };\n\nexport { themeRegistry as __themeRegistry };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nexport { registerStyles, css, unsafeCSS } from './vaadin-themable-mixin.js';\n\n/**\n * This is for use internally by Lumo and Material styles.\n *\n * @param {string} id the id to set on the created element, only for informational purposes\n * @param  {CSSResultGroup[]} styles the styles to add\n */\nexport const addGlobalThemeStyles = (id, ...styles) => {\n  const styleTag = document.createElement('style');\n  styleTag.id = id;\n  styleTag.textContent = styles\n    .map((style) => style.toString())\n    .join('\\n')\n    .replace(':host', 'html');\n\n  document.head.insertAdjacentElement('afterbegin', styleTag);\n};\n","import { addGlobalThemeStyles } from '@vaadin/vaadin-themable-mixin/register-styles.js';\n\nexport const addLumoGlobalStyles = (id, ...styles) => {\n  addGlobalThemeStyles(`lumo-${id}`, styles);\n};\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport './version.js';\nimport { css, registerStyles } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { addLumoGlobalStyles } from './global.js';\n\nconst colorBase = css`\n  :host {\n    /* Base (background) */\n    --lumo-base-color: #fff;\n\n    /* Tint */\n    --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n    --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n    --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n    --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n    --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n    --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n    --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n    --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n    --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n    --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n    --lumo-tint: #fff;\n\n    /* Shade */\n    --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n    --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n    --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n    --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n    --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n    --lumo-shade-50pct: hsla(214, 45%, 20%, 0.52);\n    --lumo-shade-60pct: hsla(214, 43%, 19%, 0.6);\n    --lumo-shade-70pct: hsla(214, 42%, 18%, 0.69);\n    --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n    --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n    --lumo-shade: hsl(214, 35%, 15%);\n\n    /* Contrast */\n    --lumo-contrast-5pct: var(--lumo-shade-5pct);\n    --lumo-contrast-10pct: var(--lumo-shade-10pct);\n    --lumo-contrast-20pct: var(--lumo-shade-20pct);\n    --lumo-contrast-30pct: var(--lumo-shade-30pct);\n    --lumo-contrast-40pct: var(--lumo-shade-40pct);\n    --lumo-contrast-50pct: var(--lumo-shade-50pct);\n    --lumo-contrast-60pct: var(--lumo-shade-60pct);\n    --lumo-contrast-70pct: var(--lumo-shade-70pct);\n    --lumo-contrast-80pct: var(--lumo-shade-80pct);\n    --lumo-contrast-90pct: var(--lumo-shade-90pct);\n    --lumo-contrast: var(--lumo-shade);\n\n    /* Text */\n    --lumo-header-text-color: var(--lumo-contrast);\n    --lumo-body-text-color: var(--lumo-contrast-90pct);\n    --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n    --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n    --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n    /* Primary */\n    --lumo-primary-color: hsl(214, 100%, 48%);\n    --lumo-primary-color-50pct: hsla(214, 100%, 49%, 0.76);\n    --lumo-primary-color-10pct: hsla(214, 100%, 60%, 0.13);\n    --lumo-primary-text-color: hsl(214, 100%, 43%);\n    --lumo-primary-contrast-color: #fff;\n\n    /* Error */\n    --lumo-error-color: hsl(3, 85%, 48%);\n    --lumo-error-color-50pct: hsla(3, 85%, 49%, 0.5);\n    --lumo-error-color-10pct: hsla(3, 85%, 49%, 0.1);\n    --lumo-error-text-color: hsl(3, 89%, 42%);\n    --lumo-error-contrast-color: #fff;\n\n    /* Success */\n    --lumo-success-color: hsl(145, 72%, 30%);\n    --lumo-success-color-50pct: hsla(145, 72%, 31%, 0.5);\n    --lumo-success-color-10pct: hsla(145, 72%, 31%, 0.1);\n    --lumo-success-text-color: hsl(145, 85%, 25%);\n    --lumo-success-contrast-color: #fff;\n\n    /* Warning */\n    --lumo-warning-color: hsl(48, 100%, 50%);\n    --lumo-warning-color-10pct: hsla(48, 100%, 50%, 0.25);\n    --lumo-warning-text-color: hsl(32, 100%, 30%);\n    --lumo-warning-contrast-color: var(--lumo-shade-90pct);\n  }\n\n  /* forced-colors mode adjustments */\n  @media (forced-colors: active) {\n    html {\n      --lumo-disabled-text-color: GrayText;\n    }\n  }\n`;\n\naddLumoGlobalStyles('color-props', colorBase);\n\nconst color = css`\n  [theme~='dark'] {\n    /* Base (background) */\n    --lumo-base-color: hsl(214, 35%, 21%);\n\n    /* Tint */\n    --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n    --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n    --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n    --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n    --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n    --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n    --lumo-tint-60pct: hsla(214, 82%, 90%, 0.58);\n    --lumo-tint-70pct: hsla(214, 87%, 92%, 0.69);\n    --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n    --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n    --lumo-tint: hsl(214, 100%, 98%);\n\n    /* Shade */\n    --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n    --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n    --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n    --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n    --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n    --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n    --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n    --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n    --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n    --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n    --lumo-shade: hsl(214, 33%, 13%);\n\n    /* Contrast */\n    --lumo-contrast-5pct: var(--lumo-tint-5pct);\n    --lumo-contrast-10pct: var(--lumo-tint-10pct);\n    --lumo-contrast-20pct: var(--lumo-tint-20pct);\n    --lumo-contrast-30pct: var(--lumo-tint-30pct);\n    --lumo-contrast-40pct: var(--lumo-tint-40pct);\n    --lumo-contrast-50pct: var(--lumo-tint-50pct);\n    --lumo-contrast-60pct: var(--lumo-tint-60pct);\n    --lumo-contrast-70pct: var(--lumo-tint-70pct);\n    --lumo-contrast-80pct: var(--lumo-tint-80pct);\n    --lumo-contrast-90pct: var(--lumo-tint-90pct);\n    --lumo-contrast: var(--lumo-tint);\n\n    /* Text */\n    --lumo-header-text-color: var(--lumo-contrast);\n    --lumo-body-text-color: var(--lumo-contrast-90pct);\n    --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n    --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n    --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n    /* Primary */\n    --lumo-primary-color: hsl(214, 90%, 48%);\n    --lumo-primary-color-50pct: hsla(214, 90%, 70%, 0.69);\n    --lumo-primary-color-10pct: hsla(214, 90%, 55%, 0.13);\n    --lumo-primary-text-color: hsl(214, 90%, 77%);\n    --lumo-primary-contrast-color: #fff;\n\n    /* Error */\n    --lumo-error-color: hsl(3, 79%, 49%);\n    --lumo-error-color-50pct: hsla(3, 75%, 62%, 0.5);\n    --lumo-error-color-10pct: hsla(3, 75%, 62%, 0.14);\n    --lumo-error-text-color: hsl(3, 100%, 80%);\n\n    /* Success */\n    --lumo-success-color: hsl(145, 72%, 30%);\n    --lumo-success-color-50pct: hsla(145, 92%, 51%, 0.5);\n    --lumo-success-color-10pct: hsla(145, 92%, 51%, 0.1);\n    --lumo-success-text-color: hsl(145, 85%, 46%);\n\n    /* Warning */\n    --lumo-warning-color: hsl(43, 100%, 48%);\n    --lumo-warning-color-10pct: hsla(40, 100%, 50%, 0.2);\n    --lumo-warning-text-color: hsl(45, 100%, 60%);\n    --lumo-warning-contrast-color: var(--lumo-shade-90pct);\n  }\n\n  html {\n    color: var(--lumo-body-text-color);\n    background-color: var(--lumo-base-color);\n    color-scheme: light;\n  }\n\n  [theme~='dark'] {\n    color: var(--lumo-body-text-color);\n    background-color: var(--lumo-base-color);\n    color-scheme: dark;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    color: var(--lumo-header-text-color);\n  }\n\n  a:where(:any-link) {\n    color: var(--lumo-primary-text-color);\n  }\n\n  a:not(:any-link) {\n    color: var(--lumo-disabled-text-color);\n  }\n\n  blockquote {\n    color: var(--lumo-secondary-text-color);\n  }\n\n  code,\n  pre {\n    background-color: var(--lumo-contrast-10pct);\n    border-radius: var(--lumo-border-radius-m);\n  }\n  pre code {\n    background: transparent;\n  }\n`;\n\nregisterStyles('', color, { moduleId: 'lumo-color' });\n\nexport { colorBase, color };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport './version.js';\nimport { css } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { addLumoGlobalStyles } from './global.js';\n\nconst sizing = css`\n  :host {\n    --lumo-size-xs: 1.625rem;\n    --lumo-size-s: 1.875rem;\n    --lumo-size-m: 2.25rem;\n    --lumo-size-l: 2.75rem;\n    --lumo-size-xl: 3.5rem;\n\n    /* Icons */\n    --lumo-icon-size-s: 1.25em;\n    --lumo-icon-size-m: 1.5em;\n    --lumo-icon-size-l: 2.25em;\n    /* For backwards compatibility */\n    --lumo-icon-size: var(--lumo-icon-size-m);\n  }\n`;\n\naddLumoGlobalStyles('sizing-props', sizing);\n\nexport { sizing };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport './version.js';\nimport { css } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { addLumoGlobalStyles } from './global.js';\n\nconst spacing = css`\n  :host {\n    /* Square */\n    --lumo-space-xs: 0.25rem;\n    --lumo-space-s: 0.5rem;\n    --lumo-space-m: 1rem;\n    --lumo-space-l: 1.5rem;\n    --lumo-space-xl: 2.5rem;\n\n    /* Wide */\n    --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n    --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n    --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n    --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n    --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n    /* Tall */\n    --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n    --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n    --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n    --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n    --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n  }\n`;\n\naddLumoGlobalStyles('spacing-props', spacing);\n\nexport { spacing };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport './version.js';\nimport { css } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { addLumoGlobalStyles } from './global.js';\n\nconst style = css`\n  :host {\n    /* Border radius */\n    --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n    --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n    --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n\n    /* Shadow */\n    --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n    --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n    --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n    --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n    --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n    /* Clickable element cursor */\n    --lumo-clickable-cursor: default;\n  }\n`;\n\n/**\n * Default values for component-specific custom properties.\n */\nconst globals = css`\n  html {\n    /* Button */\n    --vaadin-button-background: var(--lumo-contrast-5pct);\n    --vaadin-button-border: none;\n    --vaadin-button-border-radius: var(--lumo-border-radius-m);\n    --vaadin-button-font-size: var(--lumo-font-size-m);\n    --vaadin-button-font-weight: 500;\n    --vaadin-button-height: var(--lumo-size-m);\n    --vaadin-button-margin: var(--lumo-space-xs) 0;\n    --vaadin-button-min-width: calc(var(--vaadin-button-height) * 2);\n    --vaadin-button-padding: 0 calc(var(--vaadin-button-height) / 3 + var(--lumo-border-radius-m) / 2);\n    --vaadin-button-text-color: var(--lumo-primary-text-color);\n    --vaadin-button-primary-background: var(--lumo-primary-color);\n    --vaadin-button-primary-border: none;\n    --vaadin-button-primary-font-weight: 600;\n    --vaadin-button-primary-text-color: var(--lumo-primary-contrast-color);\n    --vaadin-button-tertiary-background: transparent !important;\n    --vaadin-button-tertiary-text-color: var(--lumo-primary-text-color);\n    --vaadin-button-tertiary-font-weight: 500;\n    --vaadin-button-tertiary-padding: 0 calc(var(--vaadin-button-height) / 6);\n    /* Checkbox */\n    --vaadin-checkbox-background: var(--lumo-contrast-20pct);\n    --vaadin-checkbox-background-hover: var(--lumo-contrast-30pct);\n    --vaadin-checkbox-border-radius: var(--lumo-border-radius-s);\n    --vaadin-checkbox-checkmark-char: var(--lumo-icons-checkmark);\n    --vaadin-checkbox-checkmark-char-indeterminate: '';\n    --vaadin-checkbox-checkmark-color: var(--lumo-primary-contrast-color);\n    --vaadin-checkbox-checkmark-size: calc(var(--vaadin-checkbox-size) + 2px);\n    --vaadin-checkbox-label-color: var(--lumo-body-text-color);\n    --vaadin-checkbox-label-font-size: var(--lumo-font-size-m);\n    --vaadin-checkbox-label-padding: var(--lumo-space-xs) var(--lumo-space-s) var(--lumo-space-xs) var(--lumo-space-xs);\n    --vaadin-checkbox-size: calc(var(--lumo-size-m) / 2);\n    --vaadin-checkbox-disabled-checkmark-color: var(--lumo-contrast-30pct);\n    --vaadin-checkbox-disabled-background: var(--lumo-contrast-10pct);\n    /* Radio button */\n    --vaadin-radio-button-background: var(--lumo-contrast-20pct);\n    --vaadin-radio-button-background-hover: var(--lumo-contrast-30pct);\n    --vaadin-radio-button-dot-color: var(--lumo-primary-contrast-color);\n    --vaadin-radio-button-dot-size: 3px;\n    --vaadin-radio-button-label-color: var(--lumo-body-text-color);\n    --vaadin-radio-button-label-font-size: var(--lumo-font-size-m);\n    --vaadin-radio-button-label-padding: var(--lumo-space-xs) var(--lumo-space-s) var(--lumo-space-xs)\n      var(--lumo-space-xs);\n    --vaadin-radio-button-size: calc(var(--lumo-size-m) / 2);\n    --vaadin-radio-button-disabled-background: var(--lumo-contrast-10pct);\n    --vaadin-radio-button-disabled-dot-color: var(--lumo-contrast-30pct);\n    --vaadin-selection-color: var(--lumo-primary-color);\n    --vaadin-selection-color-text: var(--lumo-primary-text-color);\n    --vaadin-input-field-border-radius: var(--lumo-border-radius-m);\n    --vaadin-focus-ring-color: var(--lumo-primary-color-50pct);\n    --vaadin-focus-ring-width: 2px;\n    /* Label */\n    --vaadin-input-field-label-color: var(--lumo-secondary-text-color);\n    --vaadin-input-field-focused-label-color: var(--lumo-primary-text-color);\n    --vaadin-input-field-hovered-label-color: var(--lumo-body-text-color);\n    --vaadin-input-field-label-font-size: var(--lumo-font-size-s);\n    --vaadin-input-field-label-font-weight: 500;\n    /* Helper */\n    --vaadin-input-field-helper-color: var(--lumo-secondary-text-color);\n    --vaadin-input-field-helper-font-size: var(--lumo-font-size-xs);\n    --vaadin-input-field-helper-font-weight: 400;\n    --vaadin-input-field-helper-spacing: 0.4em;\n    /* Error message */\n    --vaadin-input-field-error-color: var(--lumo-error-text-color);\n    --vaadin-input-field-error-font-size: var(--lumo-font-size-xs);\n    --vaadin-input-field-error-font-weight: 400;\n    /* Input field */\n    --vaadin-input-field-background: var(--lumo-contrast-10pct);\n    --vaadin-input-field-icon-color: var(--lumo-contrast-60pct);\n    --vaadin-input-field-icon-size: var(--lumo-icon-size-m);\n    --vaadin-input-field-invalid-background: var(--lumo-error-color-10pct);\n    --vaadin-input-field-invalid-hover-highlight: var(--lumo-error-color-50pct);\n    --vaadin-input-field-disabled-background: var(--lumo-contrast-5pct);\n    --vaadin-input-field-disabled-value-color: var(--lumo-disabled-text-color);\n    --vaadin-input-field-height: var(--lumo-size-m);\n    --vaadin-input-field-hover-highlight: var(--lumo-contrast-50pct);\n    --vaadin-input-field-placeholder-color: var(--lumo-secondary-text-color);\n    --vaadin-input-field-readonly-border: 1px dashed var(--lumo-contrast-30pct);\n    --vaadin-input-field-value-color: var(--lumo-body-text-color);\n    --vaadin-input-field-value-font-size: var(--lumo-font-size-m);\n    --vaadin-input-field-value-font-weight: 500;\n  }\n`;\n\naddLumoGlobalStyles('style-props', style);\n\nexport { globals, style };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport './version.js';\nimport { css, registerStyles } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { addLumoGlobalStyles } from './global.js';\n\nconst font = css`\n  :host {\n    /* prettier-ignore */\n    --lumo-font-family: -apple-system, BlinkMacSystemFont, 'Roboto', 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n\n    /* Font sizes */\n    --lumo-font-size-xxs: 0.75rem;\n    --lumo-font-size-xs: 0.8125rem;\n    --lumo-font-size-s: 0.875rem;\n    --lumo-font-size-m: 1rem;\n    --lumo-font-size-l: 1.125rem;\n    --lumo-font-size-xl: 1.375rem;\n    --lumo-font-size-xxl: 1.75rem;\n    --lumo-font-size-xxxl: 2.5rem;\n\n    /* Line heights */\n    --lumo-line-height-xs: 1.25;\n    --lumo-line-height-s: 1.375;\n    --lumo-line-height-m: 1.625;\n  }\n`;\n\nconst typography = css`\n  body,\n  :host {\n    font-family: var(--lumo-font-family);\n    font-size: var(--lumo-font-size-m);\n    line-height: var(--lumo-line-height-m);\n    -webkit-text-size-adjust: 100%;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  small,\n  [theme~='font-size-s'] {\n    font-size: var(--lumo-font-size-s);\n    line-height: var(--lumo-line-height-s);\n  }\n\n  [theme~='font-size-xs'] {\n    font-size: var(--lumo-font-size-xs);\n    line-height: var(--lumo-line-height-xs);\n  }\n\n  :where(h1, h2, h3, h4, h5, h6) {\n    font-weight: 600;\n    line-height: var(--lumo-line-height-xs);\n    margin-block: 0;\n  }\n\n  :where(h1) {\n    font-size: var(--lumo-font-size-xxxl);\n  }\n\n  :where(h2) {\n    font-size: var(--lumo-font-size-xxl);\n  }\n\n  :where(h3) {\n    font-size: var(--lumo-font-size-xl);\n  }\n\n  :where(h4) {\n    font-size: var(--lumo-font-size-l);\n  }\n\n  :where(h5) {\n    font-size: var(--lumo-font-size-m);\n  }\n\n  :where(h6) {\n    font-size: var(--lumo-font-size-xs);\n    text-transform: uppercase;\n    letter-spacing: 0.03em;\n  }\n\n  p,\n  blockquote {\n    margin-top: 0.5em;\n    margin-bottom: 0.75em;\n  }\n\n  a {\n    text-decoration: none;\n  }\n\n  a:where(:any-link):hover {\n    text-decoration: underline;\n  }\n\n  hr {\n    display: block;\n    align-self: stretch;\n    height: 1px;\n    border: 0;\n    padding: 0;\n    margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);\n    background-color: var(--lumo-contrast-10pct);\n  }\n\n  blockquote {\n    border-left: 2px solid var(--lumo-contrast-30pct);\n  }\n\n  b,\n  strong {\n    font-weight: 600;\n  }\n\n  /* RTL specific styles */\n  blockquote[dir='rtl'] {\n    border-left: none;\n    border-right: 2px solid var(--lumo-contrast-30pct);\n  }\n`;\n\nregisterStyles('', typography, { moduleId: 'lumo-typography' });\naddLumoGlobalStyles('typography-props', font);\n\nexport { font, typography };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { css, registerStyles } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n\nconst button = css`\n  :host {\n    /* Sizing */\n    --lumo-button-size: var(--lumo-size-m);\n    min-width: var(--vaadin-button-min-width, calc(var(--_button-size) * 2));\n    height: var(--_button-size);\n    padding: var(--vaadin-button-padding, 0 calc(var(--_button-size) / 3 + var(--lumo-border-radius-m) / 2));\n    margin: var(--vaadin-button-margin, var(--lumo-space-xs) 0);\n    box-sizing: border-box;\n    /* Style */\n    font-family: var(--lumo-font-family);\n    font-size: var(--vaadin-button-font-size, var(--lumo-font-size-m));\n    font-weight: var(--vaadin-button-font-weight, 500);\n    color: var(--_lumo-button-text-color);\n    background: var(--_lumo-button-background);\n    border: var(--vaadin-button-border, none);\n    border-radius: var(--vaadin-button-border-radius, var(--lumo-border-radius-m));\n    cursor: var(--lumo-clickable-cursor);\n    -webkit-tap-highlight-color: transparent;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    flex-shrink: 0;\n    --_button-size: var(--vaadin-button-height, var(--lumo-button-size));\n    --_focus-ring-color: var(--vaadin-focus-ring-color, var(--lumo-primary-color-50pct));\n    --_focus-ring-width: var(--vaadin-focus-ring-width, 2px);\n    /* Used by notification */\n    --_lumo-button-background: var(--vaadin-button-background, var(--lumo-contrast-5pct));\n    --_lumo-button-text-color: var(--vaadin-button-text-color, var(--lumo-primary-text-color));\n    --_lumo-button-primary-background: var(--vaadin-button-primary-background, var(--lumo-primary-color));\n    --_lumo-button-primary-text-color: var(--vaadin-button-primary-text-color, var(--lumo-primary-contrast-color));\n  }\n\n  /* Set only for the internal parts so we don't affect the host vertical alignment */\n  [part='label'],\n  [part='prefix'],\n  [part='suffix'] {\n    line-height: var(--lumo-line-height-xs);\n  }\n\n  [part='label'] {\n    padding: calc(var(--lumo-button-size) / 6) 0;\n  }\n\n  :host([theme~='small']) {\n    font-size: var(--lumo-font-size-s);\n    --lumo-button-size: var(--lumo-size-s);\n  }\n\n  :host([theme~='large']) {\n    font-size: var(--lumo-font-size-l);\n    --lumo-button-size: var(--lumo-size-l);\n  }\n\n  /* For interaction states */\n  :host::before,\n  :host::after {\n    content: '';\n    /* We rely on the host always being relative */\n    position: absolute;\n    z-index: 1;\n    inset: 0;\n    background-color: currentColor;\n    border-radius: inherit;\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  /* Hover */\n\n  @media (any-hover: hover) {\n    :host(:not([disabled]):hover)::before {\n      opacity: 0.02;\n    }\n  }\n\n  /* Active */\n\n  :host::after {\n    transition:\n      opacity 1.4s,\n      transform 0.1s;\n    filter: blur(8px);\n  }\n\n  :host([active])::before {\n    opacity: 0.05;\n    transition-duration: 0s;\n  }\n\n  :host([active])::after {\n    opacity: 0.1;\n    transition-duration: 0s, 0s;\n    transform: scale(0);\n  }\n\n  /* Keyboard focus */\n\n  :host([focus-ring]) {\n    box-shadow:\n      0 0 0 calc(1px * var(--_focus-ring-gap-on, 0)) var(--_focus-ring-gap-color, var(--lumo-base-color)),\n      0 0 0 calc(var(--_focus-ring-width) + 1px * var(--_focus-ring-gap-on, 0)) var(--_focus-ring-color);\n  }\n\n  :host([theme~='primary'][focus-ring]) {\n    --_focus-ring-gap-on: 1;\n  }\n\n  /* Types (primary, tertiary, tertiary-inline */\n\n  :host([theme~='tertiary']),\n  :host([theme~='tertiary-inline']) {\n    --_background: transparent !important;\n    background: var(--vaadin-button-tertiary-background, var(--_background));\n    min-width: 0;\n  }\n\n  :host([theme~='tertiary']) {\n    border: var(--vaadin-button-tertiary-border, none);\n    color: var(--vaadin-button-tertiary-text-color, var(--lumo-primary-text-color));\n    font-weight: var(--vaadin-button-tertiary-font-weight, 500);\n    padding: var(--vaadin-button-tertiary-padding, 0 calc(var(--_button-size) / 6));\n  }\n\n  :host([theme~='tertiary-inline'])::before {\n    display: none;\n  }\n\n  :host([theme~='tertiary-inline']) {\n    margin: 0;\n    height: auto;\n    padding: 0;\n    line-height: inherit;\n    font-size: inherit;\n  }\n\n  :host([theme~='tertiary-inline']) [part='label'] {\n    padding: 0;\n    overflow: visible;\n    line-height: inherit;\n  }\n\n  :host([theme~='primary']) {\n    background: var(--_lumo-button-primary-background);\n    border: var(--vaadin-button-primary-border, none);\n    color: var(--_lumo-button-primary-text-color);\n    font-weight: var(--vaadin-button-primary-font-weight, 600);\n    min-width: calc(var(--lumo-button-size) * 2.5);\n  }\n\n  :host([theme~='primary'])::before {\n    background-color: black;\n  }\n\n  @media (any-hover: hover) {\n    :host([theme~='primary']:not([disabled]):hover)::before {\n      opacity: 0.05;\n    }\n  }\n\n  :host([theme~='primary'][active])::before {\n    opacity: 0.1;\n  }\n\n  :host([theme~='primary'][active])::after {\n    opacity: 0.2;\n  }\n\n  /* Colors (success, warning, error, contrast) */\n\n  :host([theme~='success']) {\n    color: var(--lumo-success-text-color);\n  }\n\n  :host([theme~='success'][theme~='primary']) {\n    background-color: var(--lumo-success-color);\n    color: var(--lumo-success-contrast-color);\n  }\n\n  :host([theme~='warning']) {\n    color: var(--lumo-warning-text-color);\n  }\n\n  :host([theme~='warning'][theme~='primary']) {\n    background-color: var(--lumo-warning-color);\n    color: var(--lumo-warning-contrast-color);\n  }\n\n  :host([theme~='error']) {\n    color: var(--lumo-error-text-color);\n  }\n\n  :host([theme~='error'][theme~='primary']) {\n    background-color: var(--lumo-error-color);\n    color: var(--lumo-error-contrast-color);\n  }\n\n  :host([theme~='contrast']) {\n    color: var(--lumo-contrast);\n  }\n\n  :host([theme~='contrast'][theme~='primary']) {\n    background-color: var(--lumo-contrast);\n    color: var(--lumo-base-color);\n  }\n\n  /* Disabled state. Keep selectors after other color variants. */\n\n  :host([disabled]) {\n    color: var(--lumo-disabled-text-color);\n  }\n\n  :host([theme~='primary'][disabled]) {\n    background-color: var(--lumo-contrast-30pct);\n    color: var(--lumo-base-color);\n  }\n\n  :host([theme~='primary'][disabled]) [part] {\n    opacity: 0.7;\n  }\n\n  /* Icons */\n\n  [part] ::slotted(vaadin-icon) {\n    display: inline-block;\n    width: var(--lumo-icon-size-m);\n    height: var(--lumo-icon-size-m);\n  }\n\n  /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n  [part] ::slotted(vaadin-icon[icon^='vaadin:']) {\n    padding: 0.25em;\n    box-sizing: border-box !important;\n  }\n\n  [part='prefix'] {\n    margin-left: -0.25em;\n    margin-right: 0.25em;\n  }\n\n  [part='suffix'] {\n    margin-left: 0.25em;\n    margin-right: -0.25em;\n  }\n\n  /* Icon-only */\n\n  :host([theme~='icon']:not([theme~='tertiary-inline'])) {\n    min-width: var(--lumo-button-size);\n    padding-left: calc(var(--lumo-button-size) / 4);\n    padding-right: calc(var(--lumo-button-size) / 4);\n  }\n\n  :host([theme~='icon']) [part='prefix'],\n  :host([theme~='icon']) [part='suffix'] {\n    margin-left: 0;\n    margin-right: 0;\n  }\n\n  /* RTL specific styles */\n\n  :host([dir='rtl']) [part='prefix'] {\n    margin-left: 0.25em;\n    margin-right: -0.25em;\n  }\n\n  :host([dir='rtl']) [part='suffix'] {\n    margin-left: -0.25em;\n    margin-right: 0.25em;\n  }\n\n  :host([dir='rtl'][theme~='icon']) [part='prefix'],\n  :host([dir='rtl'][theme~='icon']) [part='suffix'] {\n    margin-left: 0;\n    margin-right: 0;\n  }\n`;\n\nregisterStyles('vaadin-button', button, { moduleId: 'lumo-button' });\n\nexport { button };\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/* eslint-disable no-unused-vars */\n/**\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is replaced by the munged name for object[property]\n * We cannot alias this function, so we have to use a small shim that has the same behavior when not compiling.\n *\n * @param {?} prop Property name\n * @param {*} obj Reference object\n * @return {string} Potentially renamed property name\n */\nwindow.JSCompiler_renameProperty = function(prop, obj) {\n  return prop;\n};\n/* eslint-enable */\n\nexport {};\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport './boot.js';\n\nlet CSS_URL_RX = /(url\\()([^)]*)(\\))/g;\nlet ABS_URL = /(^\\/[^\\/])|(^#)|(^[\\w-\\d]*:)/;\nlet workingURL;\nlet resolveDoc;\n/**\n * Resolves the given URL against the provided `baseUri'.\n *\n * Note that this function performs no resolution for URLs that start\n * with `/` (absolute URLs) or `#` (hash identifiers).  For general purpose\n * URL resolution, use `window.URL`.\n *\n * @param {string} url Input URL to resolve\n * @param {?string=} baseURI Base URI to resolve the URL against\n * @return {string} resolved URL\n */\nexport function resolveUrl(url, baseURI) {\n  if (url && ABS_URL.test(url)) {\n    return url;\n  }\n  if (url === '//') {\n    return url;\n  }\n  // Lazy feature detection.\n  if (workingURL === undefined) {\n    workingURL = false;\n    try {\n      const u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      workingURL = (u.href === 'http://a/c%20d');\n    } catch (e) {\n      // silently fail\n    }\n  }\n  if (!baseURI) {\n    baseURI = document.baseURI || window.location.href;\n  }\n  if (workingURL) {\n    try {\n      return (new URL(url, baseURI)).href;\n    } catch (e) {\n      // Bad url or baseURI structure. Do not attempt to resolve.\n      return url;\n    }\n  }\n  // Fallback to creating an anchor into a disconnected document.\n  if (!resolveDoc) {\n    resolveDoc = document.implementation.createHTMLDocument('temp');\n    resolveDoc.base = resolveDoc.createElement('base');\n    resolveDoc.head.appendChild(resolveDoc.base);\n    resolveDoc.anchor = resolveDoc.createElement('a');\n    resolveDoc.body.appendChild(resolveDoc.anchor);\n  }\n  resolveDoc.base.href = baseURI;\n  resolveDoc.anchor.href = url;\n  return resolveDoc.anchor.href || url;\n\n}\n\n/**\n * Resolves any relative URL's in the given CSS text against the provided\n * `ownerDocument`'s `baseURI`.\n *\n * @param {string} cssText CSS text to process\n * @param {string} baseURI Base URI to resolve the URL against\n * @return {string} Processed CSS text with resolved URL's\n */\nexport function resolveCss(cssText, baseURI) {\n  return cssText.replace(CSS_URL_RX, function(m, pre, url, post) {\n    return pre + '\\'' +\n      resolveUrl(url.replace(/[\"']/g, ''), baseURI) +\n      '\\'' + post;\n  });\n}\n\n/**\n * Returns a path from a given `url`. The path includes the trailing\n * `/` from the url.\n *\n * @param {string} url Input URL to transform\n * @return {string} resolved path\n */\nexport function pathFromUrl(url) {\n  return url.substring(0, url.lastIndexOf('/') + 1);\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport './boot.js';\nimport { pathFromUrl } from './resolve-url.js';\nexport const useShadow = !(window.ShadyDOM) || !(window.ShadyDOM.inUse);\nexport const useNativeCSSProperties = Boolean(!window.ShadyCSS || window.ShadyCSS.nativeCss);\nexport const useNativeCustomElements = !(window.customElements.polyfillWrapFlushCallback);\nexport const supportsAdoptingStyleSheets = useShadow &&\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replaceSync' in CSSStyleSheet.prototype) &&\n    // Since spec may change, feature detect exact API we need\n    (() => {\n      try {\n        const sheet = new CSSStyleSheet();\n        sheet.replaceSync('');\n        const host = document.createElement('div');\n        host.attachShadow({mode: 'open'});\n        host.shadowRoot.adoptedStyleSheets = [sheet];\n        return (host.shadowRoot.adoptedStyleSheets[0] === sheet);\n      } catch(e) {\n        return false;\n      }\n    })();\n\n/**\n * Globally settable property that is automatically assigned to\n * `ElementMixin` instances, useful for binding in templates to\n * make URL's relative to an application's root.  Defaults to the main\n * document URL, but can be overridden by users.  It may be useful to set\n * `rootPath` to provide a stable application mount path when\n * using client side routing.\n */\nexport let rootPath = window.Polymer && window.Polymer.rootPath ||\n  pathFromUrl(document.baseURI || window.location.href);\n\n/**\n * Sets the global rootPath property used by `ElementMixin` and\n * available via `rootPath`.\n *\n * @param {string} path The new root path\n * @return {void}\n */\nexport const setRootPath = function(path) {\n  rootPath = path;\n};\n\n/**\n * A global callback used to sanitize any value before inserting it into the DOM.\n * The callback signature is:\n *\n *  function sanitizeDOMValue(value, name, type, node) { ... }\n *\n * Where:\n *\n * `value` is the value to sanitize.\n * `name` is the name of an attribute or property (for example, href).\n * `type` indicates where the value is being inserted: one of property, attribute, or text.\n * `node` is the node where the value is being inserted.\n *\n * @type {(function(*,string,string,?Node):*)|undefined}\n */\nexport let sanitizeDOMValue =\n  window.Polymer && window.Polymer.sanitizeDOMValue || undefined;\n\n/**\n * Sets the global sanitizeDOMValue available via this module's exported\n * `sanitizeDOMValue` variable.\n *\n * @param {(function(*,string,string,?Node):*)|undefined} newSanitizeDOMValue the global sanitizeDOMValue callback\n * @return {void}\n */\nexport const setSanitizeDOMValue = function(newSanitizeDOMValue) {\n  sanitizeDOMValue = newSanitizeDOMValue;\n};\n\n/**\n * Gets sanitizeDOMValue, for environments that don't well support `export let`.\n *\n * @return {(function(*,string,string,?Node):*)|undefined} sanitizeDOMValue\n */\nexport const getSanitizeDOMValue = function() {\n  return sanitizeDOMValue;\n};\n\n/**\n * Globally settable property to make Polymer Gestures use passive TouchEvent listeners when recognizing gestures.\n * When set to `true`, gestures made from touch will not be able to prevent scrolling, allowing for smoother\n * scrolling performance.\n * Defaults to `false` for backwards compatibility.\n */\nexport let passiveTouchGestures =\n  window.Polymer && window.Polymer.setPassiveTouchGestures || false;\n\n/**\n * Sets `passiveTouchGestures` globally for all elements using Polymer Gestures.\n *\n * @param {boolean} usePassive enable or disable passive touch gestures globally\n * @return {void}\n */\nexport const setPassiveTouchGestures = function(usePassive) {\n  passiveTouchGestures = usePassive;\n};\n\n/**\n * Setting to ensure Polymer template evaluation only occurs based on tempates\n * defined in trusted script.  When true, `<dom-module>` re-registration is\n * disallowed, `<dom-bind>` is disabled, and `<dom-if>`/`<dom-repeat>`\n * templates will only evaluate in the context of a trusted element template.\n */\nexport let strictTemplatePolicy =\n  window.Polymer && window.Polymer.strictTemplatePolicy || false;\n\n/**\n * Sets `strictTemplatePolicy` globally for all elements\n *\n * @param {boolean} useStrictPolicy enable or disable strict template policy\n *   globally\n * @return {void}\n */\nexport const setStrictTemplatePolicy = function(useStrictPolicy) {\n  strictTemplatePolicy = useStrictPolicy;\n};\n\n/**\n * Setting to enable dom-module lookup from Polymer.Element.  By default,\n * templates must be defined in script using the `static get template()`\n * getter and the `html` tag function.  To enable legacy loading of templates\n * via dom-module, set this flag to true.\n */\nexport let allowTemplateFromDomModule =\n  window.Polymer && window.Polymer.allowTemplateFromDomModule || false;\n\n/**\n * Sets `lookupTemplateFromDomModule` globally for all elements\n *\n * @param {boolean} allowDomModule enable or disable template lookup\n *   globally\n * @return {void}\n */\nexport const setAllowTemplateFromDomModule = function(allowDomModule) {\n  allowTemplateFromDomModule = allowDomModule;\n};\n\n/**\n * Setting to skip processing style includes and re-writing urls in css styles.\n * Normally \"included\" styles are pulled into the element and all urls in styles\n * are re-written to be relative to the containing script url.\n * If no includes or relative urls are used in styles, these steps can be\n * skipped as an optimization.\n */\nexport let legacyOptimizations =\n  window.Polymer && window.Polymer.legacyOptimizations || false;\n\n/**\n * Sets `legacyOptimizations` globally for all elements to enable optimizations\n * when only legacy based elements are used.\n *\n * @param {boolean} useLegacyOptimizations enable or disable legacy optimizations\n * includes and url rewriting\n * @return {void}\n */\nexport const setLegacyOptimizations = function(useLegacyOptimizations) {\n  legacyOptimizations = useLegacyOptimizations;\n};\n\n/**\n * Setting to add warnings useful when migrating from Polymer 1.x to 2.x.\n */\nexport let legacyWarnings =\n  window.Polymer && window.Polymer.legacyWarnings || false;\n\n/**\n * Sets `legacyWarnings` globally for all elements to migration warnings.\n *\n * @param {boolean} useLegacyWarnings enable or disable warnings\n * @return {void}\n */\nexport const setLegacyWarnings = function(useLegacyWarnings) {\n  legacyWarnings = useLegacyWarnings;\n};\n\n/**\n * Setting to perform initial rendering synchronously when running under ShadyDOM.\n * This matches the behavior of Polymer 1.\n */\nexport let syncInitialRender =\n  window.Polymer && window.Polymer.syncInitialRender || false;\n\n/**\n * Sets `syncInitialRender` globally for all elements to enable synchronous\n * initial rendering.\n *\n * @param {boolean} useSyncInitialRender enable or disable synchronous initial\n * rendering globally.\n * @return {void}\n */\nexport const setSyncInitialRender = function(useSyncInitialRender) {\n  syncInitialRender = useSyncInitialRender;\n};\n\n/**\n * Setting to retain the legacy Polymer 1 behavior for multi-property\n * observers around undefined values. Observers and computed property methods\n * are not called until no argument is undefined.\n */\nexport let legacyUndefined =\n  window.Polymer && window.Polymer.legacyUndefined || false;\n\n/**\n * Sets `legacyUndefined` globally for all elements to enable legacy\n * multi-property behavior for undefined values.\n *\n * @param {boolean} useLegacyUndefined enable or disable legacy\n * multi-property behavior for undefined.\n * @return {void}\n */\nexport const setLegacyUndefined = function(useLegacyUndefined) {\n  legacyUndefined = useLegacyUndefined;\n};\n\n/**\n * Setting to ensure computed properties are computed in order to ensure\n * re-computation never occurs in a given turn.\n */\nexport let orderedComputed =\n  window.Polymer && window.Polymer.orderedComputed || false;\n\n/**\n * Sets `orderedComputed` globally for all elements to enable ordered computed\n * property computation.\n *\n * @param {boolean} useOrderedComputed enable or disable ordered computed effects\n * @return {void}\n */\nexport const setOrderedComputed = function(useOrderedComputed) {\n  orderedComputed = useOrderedComputed;\n};\n\n/**\n * Setting to cancel synthetic click events fired by older mobile browsers. Modern browsers\n * no longer fire synthetic click events, and the cancellation behavior can interfere\n * when programmatically clicking on elements.\n */\nexport let cancelSyntheticClickEvents = true;\n\n/**\n * Sets `setCancelSyntheticEvents` globally for all elements to cancel synthetic click events.\n *\n * @param {boolean} useCancelSyntheticClickEvents enable or disable cancelling synthetic\n * events\n * @return {void}\n */\nexport const setCancelSyntheticClickEvents = function(useCancelSyntheticClickEvents) {\n  cancelSyntheticClickEvents = useCancelSyntheticClickEvents;\n};\n\n/**\n * Setting to remove nested templates inside `dom-if` and `dom-repeat` as\n * part of element template parsing.  This is a performance optimization that\n * eliminates most of the tax of needing two elements due to the loss of\n * type-extended templates as a result of the V1 specification changes.\n */\nexport let removeNestedTemplates =\n  window.Polymer && window.Polymer.removeNestedTemplates || false;\n\n/**\n * Sets `removeNestedTemplates` globally, to eliminate nested templates\n * inside `dom-if` and `dom-repeat` as part of template parsing.\n *\n * @param {boolean} useRemoveNestedTemplates enable or disable removing nested\n *   templates during parsing\n * @return {void}\n */\nexport const setRemoveNestedTemplates = function(useRemoveNestedTemplates) {\n  removeNestedTemplates = useRemoveNestedTemplates;\n};\n\n/**\n * Setting to place `dom-if` elements in a performance-optimized mode that takes\n * advantage of lighter-weight host runtime template stamping to eliminate the\n * need for an intermediate Templatizer `TemplateInstance` to mange the nodes\n * stamped by `dom-if`.  Under this setting, any Templatizer-provided API's\n * such as `modelForElement` will not be available for nodes stamped by\n * `dom-if`.\n */\nexport let fastDomIf = window.Polymer && window.Polymer.fastDomIf || false;\n\n/**\n * Sets `fastDomIf` globally, to put `dom-if` in a performance-optimized mode.\n *\n * @param {boolean} useFastDomIf enable or disable `dom-if` fast-mode\n * @return {void}\n */\nexport const setFastDomIf = function(useFastDomIf) {\n  fastDomIf = useFastDomIf;\n};\n\n/**\n * Setting to disable `dom-change` and `rendered-item-count` events from\n * `dom-if` and `dom-repeat`. Users can opt back into `dom-change` events by\n * setting the `notify-dom-change` attribute (`notifyDomChange: true` property)\n * to `dom-if`/`don-repeat` instances.\n */\nexport let suppressTemplateNotifications =\n  window.Polymer && window.Polymer.suppressTemplateNotifications || false;\n\n/**\n * Sets `suppressTemplateNotifications` globally, to disable `dom-change` and\n * `rendered-item-count` events from `dom-if` and `dom-repeat`.\n *\n * @param {boolean} suppress enable or disable `suppressTemplateNotifications`\n * @return {void}\n */\nexport const setSuppressTemplateNotifications = function(suppress) {\n  suppressTemplateNotifications = suppress;\n};\n\n/**\n * Setting to disable use of dynamic attributes. This is an optimization\n * to avoid setting `observedAttributes`. Instead attributes are read\n * once at create time and set/removeAttribute are patched.\n */\nexport let legacyNoObservedAttributes =\n  window.Polymer && window.Polymer.legacyNoObservedAttributes || false;\n\n/**\n * Sets `legacyNoObservedAttributes` globally, to disable `observedAttributes`.\n *\n * @param {boolean} noObservedAttributes enable or disable `legacyNoObservedAttributes`\n * @return {void}\n */\nexport const setLegacyNoObservedAttributes = function(noObservedAttributes) {\n  legacyNoObservedAttributes = noObservedAttributes;\n};\n\n/**\n * Setting to enable use of `adoptedStyleSheets` for sharing style sheets\n * between component instances' shadow roots, if the app uses built Shady CSS\n * styles.\n */\nexport let useAdoptedStyleSheetsWithBuiltCSS =\n  window.Polymer && window.Polymer.useAdoptedStyleSheetsWithBuiltCSS || false;\n\n/**\n * Sets `useAdoptedStyleSheetsWithBuiltCSS` globally.\n *\n * @param {boolean} value enable or disable `useAdoptedStyleSheetsWithBuiltCSS`\n * @return {void}\n */\nexport const setUseAdoptedStyleSheetsWithBuiltCSS = function(value) {\n  useAdoptedStyleSheetsWithBuiltCSS = value;\n};\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport './boot.js';\n\n// unique global id for deduping mixins.\nlet dedupeId = 0;\n\n/**\n * @constructor\n * @extends {Function}\n * @private\n */\nfunction MixinFunction(){}\n/** @type {(WeakMap | undefined)} */\nMixinFunction.prototype.__mixinApplications;\n/** @type {(Object | undefined)} */\nMixinFunction.prototype.__mixinSet;\n\n/* eslint-disable valid-jsdoc */\n/**\n * Wraps an ES6 class expression mixin such that the mixin is only applied\n * if it has not already been applied its base argument. Also memoizes mixin\n * applications.\n *\n * @template T\n * @param {T} mixin ES6 class expression mixin to wrap\n * @return {T}\n * @suppress {invalidCasts}\n */\nexport const dedupingMixin = function(mixin) {\n  let mixinApplications = /** @type {!MixinFunction} */(mixin).__mixinApplications;\n  if (!mixinApplications) {\n    mixinApplications = new WeakMap();\n    /** @type {!MixinFunction} */(mixin).__mixinApplications = mixinApplications;\n  }\n  // maintain a unique id for each mixin\n  let mixinDedupeId = dedupeId++;\n  function dedupingMixin(base) {\n    let baseSet = /** @type {!MixinFunction} */(base).__mixinSet;\n    if (baseSet && baseSet[mixinDedupeId]) {\n      return base;\n    }\n    let map = mixinApplications;\n    let extended = map.get(base);\n    if (!extended) {\n      extended = /** @type {!Function} */(mixin)(base);\n      map.set(base, extended);\n      // copy inherited mixin set from the extended class, or the base class\n      // NOTE: we avoid use of Set here because some browser (IE11)\n      // cannot extend a base Set via the constructor.\n      let mixinSet = Object.create(/** @type {!MixinFunction} */(extended).__mixinSet || baseSet || null);\n      mixinSet[mixinDedupeId] = true;\n      /** @type {!MixinFunction} */(extended).__mixinSet = mixinSet;\n    }\n    return extended;\n  }\n\n  return dedupingMixin;\n};\n/* eslint-enable valid-jsdoc */\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '../utils/boot.js';\n\nimport { resolveUrl, pathFromUrl } from '../utils/resolve-url.js';\nimport { strictTemplatePolicy } from '../utils/settings.js';\n\nlet modules = {};\nlet lcModules = {};\n/**\n * Sets a dom-module into the global registry by id.\n *\n * @param {string} id dom-module id\n * @param {DomModule} module dom-module instance\n * @return {void}\n */\nfunction setModule(id, module) {\n  // store id separate from lowercased id so that\n  // in all cases mixedCase id will stored distinctly\n  // and lowercase version is a fallback\n  modules[id] = lcModules[id.toLowerCase()] = module;\n}\n/**\n * Retrieves a dom-module from the global registry by id.\n *\n * @param {string} id dom-module id\n * @return {DomModule!} dom-module instance\n */\nfunction findModule(id) {\n  return modules[id] || lcModules[id.toLowerCase()];\n}\n\nfunction styleOutsideTemplateCheck(inst) {\n  if (inst.querySelector('style')) {\n    console.warn('dom-module %s has style outside template', inst.id);\n  }\n}\n\n/**\n * The `dom-module` element registers the dom it contains to the name given\n * by the module's id attribute. It provides a unified database of dom\n * accessible via its static `import` API.\n *\n * A key use case of `dom-module` is for providing custom element `<template>`s\n * via HTML imports that are parsed by the native HTML parser, that can be\n * relocated during a bundling pass and still looked up by `id`.\n *\n * Example:\n *\n *     <dom-module id=\"foo\">\n *       <img src=\"stuff.png\">\n *     </dom-module>\n *\n * Then in code in some other location that cannot access the dom-module above\n *\n *     let img = customElements.get('dom-module').import('foo', 'img');\n *\n * @customElement\n * @extends HTMLElement\n * @summary Custom element that provides a registry of relocatable DOM content\n *   by `id` that is agnostic to bundling.\n * @unrestricted\n */\nexport class DomModule extends HTMLElement {\n\n  /** @override */\n  static get observedAttributes() { return ['id']; }\n\n  /**\n   * Retrieves the element specified by the css `selector` in the module\n   * registered by `id`. For example, this.import('foo', 'img');\n   * @param {string} id The id of the dom-module in which to search.\n   * @param {string=} selector The css selector by which to find the element.\n   * @return {Element} Returns the element which matches `selector` in the\n   * module registered at the specified `id`.\n   *\n   * @export\n   * @nocollapse Referred to indirectly in style-gather.js\n   */\n  static import(id, selector) {\n    if (id) {\n      let m = findModule(id);\n      if (m && selector) {\n        return m.querySelector(selector);\n      }\n      return m;\n    }\n    return null;\n  }\n\n  /* eslint-disable no-unused-vars */\n  /**\n   * @param {string} name Name of attribute.\n   * @param {?string} old Old value of attribute.\n   * @param {?string} value Current value of attribute.\n   * @param {?string} namespace Attribute namespace.\n   * @return {void}\n   * @override\n   */\n  attributeChangedCallback(name, old, value, namespace) {\n    if (old !== value) {\n      this.register();\n    }\n  }\n  /* eslint-enable no-unused-args */\n\n  /**\n   * The absolute URL of the original location of this `dom-module`.\n   *\n   * This value will differ from this element's `ownerDocument` in the\n   * following ways:\n   * - Takes into account any `assetpath` attribute added during bundling\n   *   to indicate the original location relative to the bundled location\n   * - Uses the HTMLImports polyfill's `importForElement` API to ensure\n   *   the path is relative to the import document's location since\n   *   `ownerDocument` is not currently polyfilled\n   */\n  get assetpath() {\n    // Don't override existing assetpath.\n    if (!this.__assetpath) {\n      // note: assetpath set via an attribute must be relative to this\n      // element's location; accommodate polyfilled HTMLImports\n      const owner = window.HTMLImports && HTMLImports.importForElement ?\n        HTMLImports.importForElement(this) || document : this.ownerDocument;\n      const url = resolveUrl(\n        this.getAttribute('assetpath') || '', owner.baseURI);\n      this.__assetpath = pathFromUrl(url);\n    }\n    return this.__assetpath;\n  }\n\n  /**\n   * Registers the dom-module at a given id. This method should only be called\n   * when a dom-module is imperatively created. For\n   * example, `document.createElement('dom-module').register('foo')`.\n   * @param {string=} id The id at which to register the dom-module.\n   * @return {void}\n   */\n  register(id) {\n    id = id || this.id;\n    if (id) {\n      // Under strictTemplatePolicy, reject and null out any re-registered\n      // dom-module since it is ambiguous whether first-in or last-in is trusted\n      if (strictTemplatePolicy && findModule(id) !== undefined) {\n        setModule(id, null);\n        throw new Error(`strictTemplatePolicy: dom-module ${id} re-registered`);\n      }\n      this.id = id;\n      setModule(id, this);\n      styleOutsideTemplateCheck(this);\n    }\n  }\n}\n\nDomModule.prototype['modules'] = modules;\n\ncustomElements.define('dom-module', DomModule);\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Module with utilities for collection CSS text from `<templates>`, external\n * stylesheets, and `dom-module`s.\n *\n * @summary Module with utilities for collection CSS text from various sources.\n */\n\nimport { DomModule } from '../elements/dom-module.js';\nimport { resolveCss } from './resolve-url.js';\n\nconst MODULE_STYLE_LINK_SELECTOR = 'link[rel=import][type~=css]';\nconst INCLUDE_ATTR = 'include';\nconst SHADY_UNSCOPED_ATTR = 'shady-unscoped';\n\n/**\n * @param {string} moduleId .\n * @return {?DomModule} .\n */\nfunction importModule(moduleId) {\n  return /** @type {?DomModule} */(DomModule.import(moduleId));\n}\n\nfunction styleForImport(importDoc) {\n  // NOTE: polyfill affordance.\n  // under the HTMLImports polyfill, there will be no 'body',\n  // but the import pseudo-doc can be used directly.\n  let container = importDoc.body ? importDoc.body : importDoc;\n  const importCss = resolveCss(container.textContent,\n    importDoc.baseURI);\n  const style = document.createElement('style');\n  style.textContent = importCss;\n  return style;\n}\n\n/** @typedef {{assetpath: string}} */\nlet templateWithAssetPath; // eslint-disable-line no-unused-vars\n\n\n/**\n * Returns a list of <style> elements in a space-separated list of `dom-module`s.\n *\n * @function\n * @param {string} moduleIds List of dom-module id's within which to\n * search for css.\n * @return {!Array<!HTMLStyleElement>} Array of contained <style> elements\n */\nexport function stylesFromModules(moduleIds) {\n const modules = moduleIds.trim().split(/\\s+/);\n const styles = [];\n for (let i=0; i < modules.length; i++) {\n   styles.push(...stylesFromModule(modules[i]));\n }\n return styles;\n}\n\n/**\n * Returns a list of <style> elements in a given `dom-module`.\n * Styles in a `dom-module` can come either from `<style>`s within the\n * first `<template>`, or else from one or more\n * `<link rel=\"import\" type=\"css\">` links outside the template.\n *\n * @param {string} moduleId dom-module id to gather styles from\n * @return {!Array<!HTMLStyleElement>} Array of contained styles.\n */\nexport function stylesFromModule(moduleId) {\n  const m = importModule(moduleId);\n\n  if (!m) {\n    console.warn('Could not find style data in module named', moduleId);\n    return [];\n  }\n\n  if (m._styles === undefined) {\n    const styles = [];\n    // module imports: <link rel=\"import\" type=\"css\">\n    styles.push(..._stylesFromModuleImports(m));\n    // include css from the first template in the module\n    const template = /** @type {?HTMLTemplateElement} */(\n        m.querySelector('template'));\n    if (template) {\n      styles.push(...stylesFromTemplate(template,\n        /** @type {templateWithAssetPath} */(m).assetpath));\n    }\n\n    m._styles = styles;\n  }\n\n  return m._styles;\n}\n\n/**\n * Returns the `<style>` elements within a given template.\n *\n * @param {!HTMLTemplateElement} template Template to gather styles from\n * @param {string=} baseURI baseURI for style content\n * @return {!Array<!HTMLStyleElement>} Array of styles\n */\nexport function stylesFromTemplate(template, baseURI) {\n  if (!template._styles) {\n    const styles = [];\n    // if element is a template, get content from its .content\n    const e$ = template.content.querySelectorAll('style');\n    for (let i=0; i < e$.length; i++) {\n      let e = e$[i];\n      // support style sharing by allowing styles to \"include\"\n      // other dom-modules that contain styling\n      let include = e.getAttribute(INCLUDE_ATTR);\n      if (include) {\n        styles.push(...stylesFromModules(include).filter(function(item, index, self) {\n          return self.indexOf(item) === index;\n        }));\n      }\n      if (baseURI) {\n        e.textContent =\n            resolveCss(e.textContent, /** @type {string} */ (baseURI));\n      }\n      styles.push(e);\n    }\n    template._styles = styles;\n  }\n  return template._styles;\n}\n\n/**\n * Returns a list of <style> elements  from stylesheets loaded via `<link rel=\"import\" type=\"css\">` links within the specified `dom-module`.\n *\n * @param {string} moduleId Id of `dom-module` to gather CSS from\n * @return {!Array<!HTMLStyleElement>} Array of contained styles.\n */\nexport function stylesFromModuleImports(moduleId) {\n let m = importModule(moduleId);\n return m ? _stylesFromModuleImports(m) : [];\n}\n\n/**\n * @param {!HTMLElement} module dom-module element that could contain `<link rel=\"import\" type=\"css\">` styles\n * @return {!Array<!HTMLStyleElement>} Array of contained styles\n */\nfunction _stylesFromModuleImports(module) {\n  const styles = [];\n  const p$ = module.querySelectorAll(MODULE_STYLE_LINK_SELECTOR);\n  for (let i=0; i < p$.length; i++) {\n    let p = p$[i];\n    if (p.import) {\n      const importDoc = p.import;\n      const unscoped = p.hasAttribute(SHADY_UNSCOPED_ATTR);\n      if (unscoped && !importDoc._unscopedStyle) {\n        const style = styleForImport(importDoc);\n        style.setAttribute(SHADY_UNSCOPED_ATTR, '');\n        importDoc._unscopedStyle = style;\n      } else if (!importDoc._style) {\n        importDoc._style = styleForImport(importDoc);\n      }\n      styles.push(unscoped ? importDoc._unscopedStyle : importDoc._style);\n    }\n  }\n  return styles;\n}\n\n/**\n *\n * Returns CSS text of styles in a space-separated list of `dom-module`s.\n * Note: This method is deprecated, use `stylesFromModules` instead.\n *\n * @deprecated\n * @param {string} moduleIds List of dom-module id's within which to\n * search for css.\n * @return {string} Concatenated CSS content from specified `dom-module`s\n */\nexport function cssFromModules(moduleIds) {\n let modules = moduleIds.trim().split(/\\s+/);\n let cssText = '';\n for (let i=0; i < modules.length; i++) {\n   cssText += cssFromModule(modules[i]);\n }\n return cssText;\n}\n\n/**\n * Returns CSS text of styles in a given `dom-module`.  CSS in a `dom-module`\n * can come either from `<style>`s within the first `<template>`, or else\n * from one or more `<link rel=\"import\" type=\"css\">` links outside the\n * template.\n *\n * Any `<styles>` processed are removed from their original location.\n * Note: This method is deprecated, use `styleFromModule` instead.\n *\n * @deprecated\n * @param {string} moduleId dom-module id to gather styles from\n * @return {string} Concatenated CSS content from specified `dom-module`\n */\nexport function cssFromModule(moduleId) {\n  let m = importModule(moduleId);\n  if (m && m._cssText === undefined) {\n    // module imports: <link rel=\"import\" type=\"css\">\n    let cssText = _cssFromModuleImports(m);\n    // include css from the first template in the module\n    let t = /** @type {?HTMLTemplateElement} */(m.querySelector('template'));\n    if (t) {\n      cssText += cssFromTemplate(t,\n        /** @type {templateWithAssetPath} */(m).assetpath);\n    }\n    m._cssText = cssText || null;\n  }\n  if (!m) {\n    console.warn('Could not find style data in module named', moduleId);\n  }\n  return m && m._cssText || '';\n}\n\n/**\n * Returns CSS text of `<styles>` within a given template.\n *\n * Any `<styles>` processed are removed from their original location.\n * Note: This method is deprecated, use `styleFromTemplate` instead.\n *\n * @deprecated\n * @param {!HTMLTemplateElement} template Template to gather styles from\n * @param {string} baseURI Base URI to resolve the URL against\n * @return {string} Concatenated CSS content from specified template\n */\nexport function cssFromTemplate(template, baseURI) {\n  let cssText = '';\n  const e$ = stylesFromTemplate(template, baseURI);\n  // if element is a template, get content from its .content\n  for (let i=0; i < e$.length; i++) {\n    let e = e$[i];\n    if (e.parentNode) {\n      e.parentNode.removeChild(e);\n    }\n    cssText += e.textContent;\n  }\n  return cssText;\n}\n\n/**\n * Returns CSS text from stylesheets loaded via `<link rel=\"import\" type=\"css\">`\n * links within the specified `dom-module`.\n *\n * Note: This method is deprecated, use `stylesFromModuleImports` instead.\n *\n * @deprecated\n *\n * @param {string} moduleId Id of `dom-module` to gather CSS from\n * @return {string} Concatenated CSS content from links in specified `dom-module`\n */\nexport function cssFromModuleImports(moduleId) {\n  let m = importModule(moduleId);\n  return m ? _cssFromModuleImports(m) : '';\n}\n\n/**\n * @deprecated\n * @param {!HTMLElement} module dom-module element that could contain `<link rel=\"import\" type=\"css\">` styles\n * @return {string} Concatenated CSS content from links in the dom-module\n */\nfunction _cssFromModuleImports(module) {\n  let cssText = '';\n  let styles = _stylesFromModuleImports(module);\n  for (let i=0; i < styles.length; i++) {\n    cssText += styles[i].textContent;\n  }\n  return cssText;\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/* eslint-disable valid-jsdoc */\n/**\n * Node wrapper to ensure ShadowDOM safe operation regardless of polyfill\n * presence or mode. Note that with the introduction of `ShadyDOM.noPatch`,\n * a node wrapper must be used to access ShadowDOM API.\n * This is similar to using `Polymer.dom` but relies exclusively\n * on the presence of the ShadyDOM polyfill rather than requiring the loading\n * of legacy (Polymer.dom) API.\n * @type {function(Node):Node}\n */\nexport const wrap = (window['ShadyDOM'] && window['ShadyDOM']['noPatch'] && window['ShadyDOM']['wrap']) ?\n  window['ShadyDOM']['wrap'] :\n  (window['ShadyDOM'] ? (n) => ShadyDOM['patch'](n) : (n) => n);\n\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport './boot.js';\n\n/**\n * Module with utilities for manipulating structured data path strings.\n *\n * @summary Module with utilities for manipulating structured data path strings.\n */\n\n/**\n * Returns true if the given string is a structured data path (has dots).\n *\n * Example:\n *\n * ```\n * isPath('foo.bar.baz') // true\n * isPath('foo')         // false\n * ```\n *\n * @param {string} path Path string\n * @return {boolean} True if the string contained one or more dots\n */\nexport function isPath(path) {\n  return path.indexOf('.') >= 0;\n}\n\n/**\n * Returns the root property name for the given path.\n *\n * Example:\n *\n * ```\n * root('foo.bar.baz') // 'foo'\n * root('foo')         // 'foo'\n * ```\n *\n * @param {string} path Path string\n * @return {string} Root property name\n */\nexport function root(path) {\n  let dotIndex = path.indexOf('.');\n  if (dotIndex === -1) {\n    return path;\n  }\n  return path.slice(0, dotIndex);\n}\n\n/**\n * Given `base` is `foo.bar`, `foo` is an ancestor, `foo.bar` is not\n * Returns true if the given path is an ancestor of the base path.\n *\n * Example:\n *\n * ```\n * isAncestor('foo.bar', 'foo')         // true\n * isAncestor('foo.bar', 'foo.bar')     // false\n * isAncestor('foo.bar', 'foo.bar.baz') // false\n * ```\n *\n * @param {string} base Path string to test against.\n * @param {string} path Path string to test.\n * @return {boolean} True if `path` is an ancestor of `base`.\n */\nexport function isAncestor(base, path) {\n  //     base.startsWith(path + '.');\n  return base.indexOf(path + '.') === 0;\n}\n\n/**\n * Given `base` is `foo.bar`, `foo.bar.baz` is an descendant\n *\n * Example:\n *\n * ```\n * isDescendant('foo.bar', 'foo.bar.baz') // true\n * isDescendant('foo.bar', 'foo.bar')     // false\n * isDescendant('foo.bar', 'foo')         // false\n * ```\n *\n * @param {string} base Path string to test against.\n * @param {string} path Path string to test.\n * @return {boolean} True if `path` is a descendant of `base`.\n */\nexport function isDescendant(base, path) {\n  //     path.startsWith(base + '.');\n  return path.indexOf(base + '.') === 0;\n}\n\n/**\n * Replaces a previous base path with a new base path, preserving the\n * remainder of the path.\n *\n * User must ensure `path` has a prefix of `base`.\n *\n * Example:\n *\n * ```\n * translate('foo.bar', 'zot', 'foo.bar.baz') // 'zot.baz'\n * ```\n *\n * @param {string} base Current base string to remove\n * @param {string} newBase New base string to replace with\n * @param {string} path Path to translate\n * @return {string} Translated string\n */\nexport function translate(base, newBase, path) {\n  return newBase + path.slice(base.length);\n}\n\n/**\n * @param {string} base Path string to test against\n * @param {string} path Path string to test\n * @return {boolean} True if `path` is equal to `base`\n */\nexport function matches(base, path) {\n  return (base === path) ||\n         isAncestor(base, path) ||\n         isDescendant(base, path);\n}\n\n/**\n * Converts array-based paths to flattened path.  String-based paths\n * are returned as-is.\n *\n * Example:\n *\n * ```\n * normalize(['foo.bar', 0, 'baz'])  // 'foo.bar.0.baz'\n * normalize('foo.bar.0.baz')        // 'foo.bar.0.baz'\n * ```\n *\n * @param {string | !Array<string|number>} path Input path\n * @return {string} Flattened path\n */\nexport function normalize(path) {\n  if (Array.isArray(path)) {\n    let parts = [];\n    for (let i=0; i<path.length; i++) {\n      let args = path[i].toString().split('.');\n      for (let j=0; j<args.length; j++) {\n        parts.push(args[j]);\n      }\n    }\n    return parts.join('.');\n  } else {\n    return path;\n  }\n}\n\n/**\n * Splits a path into an array of property names. Accepts either arrays\n * of path parts or strings.\n *\n * Example:\n *\n * ```\n * split(['foo.bar', 0, 'baz'])  // ['foo', 'bar', '0', 'baz']\n * split('foo.bar.0.baz')        // ['foo', 'bar', '0', 'baz']\n * ```\n *\n * @param {string | !Array<string|number>} path Input path\n * @return {!Array<string>} Array of path parts\n * @suppress {checkTypes}\n */\nexport function split(path) {\n  if (Array.isArray(path)) {\n    return normalize(path).split('.');\n  }\n  return path.toString().split('.');\n}\n\n/**\n * Reads a value from a path.  If any sub-property in the path is `undefined`,\n * this method returns `undefined` (will never throw.\n *\n * @param {Object} root Object from which to dereference path from\n * @param {string | !Array<string|number>} path Path to read\n * @param {Object=} info If an object is provided to `info`, the normalized\n *  (flattened) path will be set to `info.path`.\n * @return {*} Value at path, or `undefined` if the path could not be\n *  fully dereferenced.\n */\nexport function get(root, path, info) {\n  let prop = root;\n  let parts = split(path);\n  // Loop over path parts[0..n-1] and dereference\n  for (let i=0; i<parts.length; i++) {\n    if (!prop) {\n      return;\n    }\n    let part = parts[i];\n    prop = prop[part];\n  }\n  if (info) {\n    info.path = parts.join('.');\n  }\n  return prop;\n}\n\n/**\n * Sets a value to a path.  If any sub-property in the path is `undefined`,\n * this method will no-op.\n *\n * @param {Object} root Object from which to dereference path from\n * @param {string | !Array<string|number>} path Path to set\n * @param {*} value Value to set to path\n * @return {string | undefined} The normalized version of the input path\n */\nexport function set(root, path, value) {\n  let prop = root;\n  let parts = split(path);\n  let last = parts[parts.length-1];\n  if (parts.length > 1) {\n    // Loop over path parts[0..n-2] and dereference\n    for (let i=0; i<parts.length-1; i++) {\n      let part = parts[i];\n      prop = prop[part];\n      if (!prop) {\n        return;\n      }\n    }\n    // Set value to object at end of path\n    prop[last] = value;\n  } else {\n    // Simple property set\n    prop[path] = value;\n  }\n  return parts.join('.');\n}\n\n/**\n * Returns true if the given string is a structured data path (has dots).\n *\n * This function is deprecated.  Use `isPath` instead.\n *\n * Example:\n *\n * ```\n * isDeep('foo.bar.baz') // true\n * isDeep('foo')         // false\n * ```\n *\n * @deprecated\n * @param {string} path Path string\n * @return {boolean} True if the string contained one or more dots\n */\nexport const isDeep = isPath;\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport './boot.js';\n\nconst caseMap = {};\nconst DASH_TO_CAMEL = /-[a-z]/g;\nconst CAMEL_TO_DASH = /([A-Z])/g;\n\n/**\n * @fileoverview Module with utilities for converting between \"dash-case\" and\n * \"camelCase\" identifiers.\n */\n\n/**\n * Converts \"dash-case\" identifier (e.g. `foo-bar-baz`) to \"camelCase\"\n * (e.g. `fooBarBaz`).\n *\n * @param {string} dash Dash-case identifier\n * @return {string} Camel-case representation of the identifier\n */\nexport function dashToCamelCase(dash) {\n  return caseMap[dash] || (\n    caseMap[dash] = dash.indexOf('-') < 0 ? dash : dash.replace(DASH_TO_CAMEL,\n      (m) => m[1].toUpperCase()\n    )\n  );\n}\n\n/**\n * Converts \"camelCase\" identifier (e.g. `fooBarBaz`) to \"dash-case\"\n * (e.g. `foo-bar-baz`).\n *\n * @param {string} camel Camel-case identifier\n * @return {string} Dash-case representation of the identifier\n */\nexport function camelToDashCase(camel) {\n  return caseMap[camel] || (\n    caseMap[camel] = camel.replace(CAMEL_TO_DASH, '-$1').toLowerCase()\n  );\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * @fileoverview\n *\n * This module provides a number of strategies for enqueuing asynchronous\n * tasks. Each sub-module provides a standard `run(fn)` interface that returns a\n * handle, and a `cancel(handle)` interface for canceling async tasks before\n * they run.\n *\n * @summary Module that provides a number of strategies for enqueuing\n * asynchronous tasks.\n */\n\nimport './boot.js';\n\n// Microtask implemented using Mutation Observer\nlet microtaskCurrHandle = 0;\nlet microtaskLastHandle = 0;\nlet microtaskCallbacks = [];\nlet microtaskNodeContent = 0;\nlet microtaskScheduled = false;\nlet microtaskNode = document.createTextNode('');\nnew window.MutationObserver(microtaskFlush).observe(microtaskNode, {characterData: true});\n\nfunction microtaskFlush() {\n  microtaskScheduled = false;\n  const len = microtaskCallbacks.length;\n  for (let i = 0; i < len; i++) {\n    let cb = microtaskCallbacks[i];\n    if (cb) {\n      try {\n        cb();\n      } catch (e) {\n        setTimeout(() => { throw e; });\n      }\n    }\n  }\n  microtaskCallbacks.splice(0, len);\n  microtaskLastHandle += len;\n}\n\n/**\n * Async interface wrapper around `setTimeout`.\n *\n * @namespace\n * @summary Async interface wrapper around `setTimeout`.\n */\nconst timeOut = {\n  /**\n   * Returns a sub-module with the async interface providing the provided\n   * delay.\n   *\n   * @memberof timeOut\n   * @param {number=} delay Time to wait before calling callbacks in ms\n   * @return {!AsyncInterface} An async timeout interface\n   */\n  after(delay) {\n    return {\n      run(fn) { return window.setTimeout(fn, delay); },\n      cancel(handle) {\n        window.clearTimeout(handle);\n      }\n    };\n  },\n  /**\n   * Enqueues a function called in the next task.\n   *\n   * @memberof timeOut\n   * @param {!Function} fn Callback to run\n   * @param {number=} delay Delay in milliseconds\n   * @return {number} Handle used for canceling task\n   */\n  run(fn, delay) {\n    return window.setTimeout(fn, delay);\n  },\n  /**\n   * Cancels a previously enqueued `timeOut` callback.\n   *\n   * @memberof timeOut\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    window.clearTimeout(handle);\n  }\n};\nexport {timeOut};\n\n/**\n * Async interface wrapper around `requestAnimationFrame`.\n *\n * @namespace\n * @summary Async interface wrapper around `requestAnimationFrame`.\n */\nconst animationFrame = {\n  /**\n   * Enqueues a function called at `requestAnimationFrame` timing.\n   *\n   * @memberof animationFrame\n   * @param {function(number):void} fn Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(fn) {\n    return window.requestAnimationFrame(fn);\n  },\n  /**\n   * Cancels a previously enqueued `animationFrame` callback.\n   *\n   * @memberof animationFrame\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    window.cancelAnimationFrame(handle);\n  }\n};\nexport {animationFrame};\n\n/**\n * Async interface wrapper around `requestIdleCallback`.  Falls back to\n * `setTimeout` on browsers that do not support `requestIdleCallback`.\n *\n * @namespace\n * @summary Async interface wrapper around `requestIdleCallback`.\n */\nconst idlePeriod = {\n  /**\n   * Enqueues a function called at `requestIdleCallback` timing.\n   *\n   * @memberof idlePeriod\n   * @param {function(!IdleDeadline):void} fn Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(fn) {\n    return window.requestIdleCallback ?\n      window.requestIdleCallback(fn) :\n      window.setTimeout(fn, 16);\n  },\n  /**\n   * Cancels a previously enqueued `idlePeriod` callback.\n   *\n   * @memberof idlePeriod\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    window.cancelIdleCallback ?\n      window.cancelIdleCallback(handle) :\n      window.clearTimeout(handle);\n  }\n};\nexport {idlePeriod};\n\n/**\n * Async interface for enqueuing callbacks that run at microtask timing.\n *\n * Note that microtask timing is achieved via a single `MutationObserver`,\n * and thus callbacks enqueued with this API will all run in a single\n * batch, and not interleaved with other microtasks such as promises.\n * Promises are avoided as an implementation choice for the time being\n * due to Safari bugs that cause Promises to lack microtask guarantees.\n *\n * @namespace\n * @summary Async interface for enqueuing callbacks that run at microtask\n *   timing.\n */\nconst microTask = {\n\n  /**\n   * Enqueues a function called at microtask timing.\n   *\n   * @memberof microTask\n   * @param {!Function=} callback Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(callback) {\n    if (!microtaskScheduled) {\n      microtaskScheduled = true;\n      microtaskNode.textContent = microtaskNodeContent++;\n    }\n    microtaskCallbacks.push(callback);\n    return microtaskCurrHandle++;\n  },\n\n  /**\n   * Cancels a previously enqueued `microTask` callback.\n   *\n   * @memberof microTask\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    const idx = handle - microtaskLastHandle;\n    if (idx >= 0) {\n      if (!microtaskCallbacks[idx]) {\n        throw new Error('invalid async handle: ' + handle);\n      }\n      microtaskCallbacks[idx] = null;\n    }\n  }\n\n};\nexport {microTask};\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '../utils/boot.js';\n\nimport { dedupingMixin } from '../utils/mixin.js';\nimport { microTask } from '../utils/async.js';\nimport { wrap } from '../utils/wrap.js';\n\n/** @const {!AsyncInterface} */\nconst microtask = microTask;\n\n/**\n * Element class mixin that provides basic meta-programming for creating one\n * or more property accessors (getter/setter pair) that enqueue an async\n * (batched) `_propertiesChanged` callback.\n *\n * For basic usage of this mixin, call `MyClass.createProperties(props)`\n * once at class definition time to create property accessors for properties\n * named in props, implement `_propertiesChanged` to react as desired to\n * property changes, and implement `static get observedAttributes()` and\n * include lowercase versions of any property names that should be set from\n * attributes. Last, call `this._enableProperties()` in the element's\n * `connectedCallback` to enable the accessors.\n *\n * @mixinFunction\n * @polymer\n * @summary Element class mixin for reacting to property changes from\n *   generated property accessors.\n * @template T\n * @param {function(new:T)} superClass Class to apply mixin to.\n * @return {function(new:T)} superClass with mixin applied.\n */\nexport const PropertiesChanged = dedupingMixin(\n    /**\n     * @template T\n     * @param {function(new:T)} superClass Class to apply mixin to.\n     * @return {function(new:T)} superClass with mixin applied.\n     */\n    (superClass) => {\n\n  /**\n   * @polymer\n   * @mixinClass\n   * @implements {Polymer_PropertiesChanged}\n   * @unrestricted\n   */\n  class PropertiesChanged extends superClass {\n\n    /**\n     * Creates property accessors for the given property names.\n     * @param {!Object} props Object whose keys are names of accessors.\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createProperties(props) {\n      const proto = this.prototype;\n      for (let prop in props) {\n        // don't stomp an existing accessor\n        if (!(prop in proto)) {\n          proto._createPropertyAccessor(prop);\n        }\n      }\n    }\n\n    /**\n     * Returns an attribute name that corresponds to the given property.\n     * The attribute name is the lowercased property name. Override to\n     * customize this mapping.\n     * @param {string} property Property to convert\n     * @return {string} Attribute name corresponding to the given property.\n     *\n     * @protected\n     * @nocollapse\n     */\n    static attributeNameForProperty(property) {\n      return property.toLowerCase();\n    }\n\n    /**\n     * Override point to provide a type to which to deserialize a value to\n     * a given property.\n     * @param {string} name Name of property\n     *\n     * @protected\n     * @nocollapse\n     */\n    static typeForProperty(name) { } //eslint-disable-line no-unused-vars\n\n    /**\n     * Creates a setter/getter pair for the named property with its own\n     * local storage.  The getter returns the value in the local storage,\n     * and the setter calls `_setProperty`, which updates the local storage\n     * for the property and enqueues a `_propertiesChanged` callback.\n     *\n     * This method may be called on a prototype or an instance.  Calling\n     * this method may overwrite a property value that already exists on\n     * the prototype/instance by creating the accessor.\n     *\n     * @param {string} property Name of the property\n     * @param {boolean=} readOnly When true, no setter is created; the\n     *   protected `_setProperty` function must be used to set the property\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _createPropertyAccessor(property, readOnly) {\n      this._addPropertyToAttributeMap(property);\n      if (!this.hasOwnProperty(JSCompiler_renameProperty('__dataHasAccessor', this))) {\n        this.__dataHasAccessor = Object.assign({}, this.__dataHasAccessor);\n      }\n      if (!this.__dataHasAccessor[property]) {\n        this.__dataHasAccessor[property] = true;\n        this._definePropertyAccessor(property, readOnly);\n      }\n    }\n\n    /**\n     * Adds the given `property` to a map matching attribute names\n     * to property names, using `attributeNameForProperty`. This map is\n     * used when deserializing attribute values to properties.\n     *\n     * @param {string} property Name of the property\n     * @override\n     */\n    _addPropertyToAttributeMap(property) {\n      if (!this.hasOwnProperty(JSCompiler_renameProperty('__dataAttributes', this))) {\n        this.__dataAttributes = Object.assign({}, this.__dataAttributes);\n      }\n      // This check is technically not correct; it's an optimization that\n      // assumes that if a _property_ name is already in the map (note this is\n      // an attr->property map), the property mapped directly to the attribute\n      // and it has already been mapped.  This would fail if\n      // `attributeNameForProperty` were overridden such that this was not the\n      // case.\n      let attr = this.__dataAttributes[property];\n      if (!attr) {\n        attr = this.constructor.attributeNameForProperty(property);\n        this.__dataAttributes[attr] = property;\n      }\n      return attr;\n    }\n\n    /**\n     * Defines a property accessor for the given property.\n     * @param {string} property Name of the property\n     * @param {boolean=} readOnly When true, no setter is created\n     * @return {void}\n     * @override\n     */\n     _definePropertyAccessor(property, readOnly) {\n      Object.defineProperty(this, property, {\n        /* eslint-disable valid-jsdoc */\n        /** @this {PropertiesChanged} */\n        get() {\n          // Inline for perf instead of using `_getProperty`\n          return this.__data[property];\n        },\n        /** @this {PropertiesChanged} */\n        set: readOnly ? function () {} : function (value) {\n          // Inline for perf instead of using `_setProperty`\n          if (this._setPendingProperty(property, value, true)) {\n            this._invalidateProperties();\n          }\n        }\n        /* eslint-enable */\n      });\n    }\n\n    constructor() {\n      super();\n      /** @type {boolean} */\n      this.__dataEnabled = false;\n      this.__dataReady = false;\n      this.__dataInvalid = false;\n      this.__data = {};\n      this.__dataPending = null;\n      this.__dataOld = null;\n      this.__dataInstanceProps = null;\n      /** @type {number} */\n      // NOTE: used to track re-entrant calls to `_flushProperties`\n      this.__dataCounter = 0;\n      this.__serializing = false;\n      this._initializeProperties();\n    }\n\n    /**\n     * Lifecycle callback called when properties are enabled via\n     * `_enableProperties`.\n     *\n     * Users may override this function to implement behavior that is\n     * dependent on the element having its property data initialized, e.g.\n     * from defaults (initialized from `constructor`, `_initializeProperties`),\n     * `attributeChangedCallback`, or values propagated from host e.g. via\n     * bindings.  `super.ready()` must be called to ensure the data system\n     * becomes enabled.\n     *\n     * @return {void}\n     * @public\n     * @override\n     */\n    ready() {\n      this.__dataReady = true;\n      this._flushProperties();\n    }\n\n    /**\n     * Initializes the local storage for property accessors.\n     *\n     * Provided as an override point for performing any setup work prior\n     * to initializing the property accessor system.\n     *\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _initializeProperties() {\n      // Capture instance properties; these will be set into accessors\n      // during first flush. Don't set them here, since we want\n      // these to overwrite defaults/constructor assignments\n      for (let p in this.__dataHasAccessor) {\n        if (this.hasOwnProperty(p)) {\n          this.__dataInstanceProps = this.__dataInstanceProps || {};\n          this.__dataInstanceProps[p] = this[p];\n          delete this[p];\n        }\n      }\n    }\n\n    /**\n     * Called at ready time with bag of instance properties that overwrote\n     * accessors when the element upgraded.\n     *\n     * The default implementation sets these properties back into the\n     * setter at ready time.  This method is provided as an override\n     * point for customizing or providing more efficient initialization.\n     *\n     * @param {Object} props Bag of property values that were overwritten\n     *   when creating property accessors.\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _initializeInstanceProperties(props) {\n      Object.assign(this, props);\n    }\n\n    /**\n     * Updates the local storage for a property (via `_setPendingProperty`)\n     * and enqueues a `_proeprtiesChanged` callback.\n     *\n     * @param {string} property Name of the property\n     * @param {*} value Value to set\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _setProperty(property, value) {\n      if (this._setPendingProperty(property, value)) {\n        this._invalidateProperties();\n      }\n    }\n\n    /**\n     * Returns the value for the given property.\n     * @param {string} property Name of property\n     * @return {*} Value for the given property\n     * @protected\n     * @override\n     */\n    _getProperty(property) {\n      return this.__data[property];\n    }\n\n    /* eslint-disable no-unused-vars */\n    /**\n     * Updates the local storage for a property, records the previous value,\n     * and adds it to the set of \"pending changes\" that will be passed to the\n     * `_propertiesChanged` callback.  This method does not enqueue the\n     * `_propertiesChanged` callback.\n     *\n     * @param {string} property Name of the property\n     * @param {*} value Value to set\n     * @param {boolean=} ext Not used here; affordance for closure\n     * @return {boolean} Returns true if the property changed\n     * @protected\n     * @override\n     */\n    _setPendingProperty(property, value, ext) {\n      let old = this.__data[property];\n      let changed = this._shouldPropertyChange(property, value, old);\n      if (changed) {\n        if (!this.__dataPending) {\n          this.__dataPending = {};\n          this.__dataOld = {};\n        }\n        // Ensure old is captured from the last turn\n        if (this.__dataOld && !(property in this.__dataOld)) {\n          this.__dataOld[property] = old;\n        }\n        this.__data[property] = value;\n        this.__dataPending[property] = value;\n      }\n      return changed;\n    }\n    /* eslint-enable */\n\n    /**\n     * @param {string} property Name of the property\n     * @return {boolean} Returns true if the property is pending.\n     */\n    _isPropertyPending(property) {\n      return !!(this.__dataPending && this.__dataPending.hasOwnProperty(property));\n    }\n\n    /**\n     * Marks the properties as invalid, and enqueues an async\n     * `_propertiesChanged` callback.\n     *\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _invalidateProperties() {\n      if (!this.__dataInvalid && this.__dataReady) {\n        this.__dataInvalid = true;\n        microtask.run(() => {\n          if (this.__dataInvalid) {\n            this.__dataInvalid = false;\n            this._flushProperties();\n          }\n        });\n      }\n    }\n\n    /**\n     * Call to enable property accessor processing. Before this method is\n     * called accessor values will be set but side effects are\n     * queued. When called, any pending side effects occur immediately.\n     * For elements, generally `connectedCallback` is a normal spot to do so.\n     * It is safe to call this method multiple times as it only turns on\n     * property accessors once.\n     *\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _enableProperties() {\n      if (!this.__dataEnabled) {\n        this.__dataEnabled = true;\n        if (this.__dataInstanceProps) {\n          this._initializeInstanceProperties(this.__dataInstanceProps);\n          this.__dataInstanceProps = null;\n        }\n        this.ready();\n      }\n    }\n\n    /**\n     * Calls the `_propertiesChanged` callback with the current set of\n     * pending changes (and old values recorded when pending changes were\n     * set), and resets the pending set of changes. Generally, this method\n     * should not be called in user code.\n     *\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _flushProperties() {\n      this.__dataCounter++;\n      const props = this.__data;\n      const changedProps = this.__dataPending;\n      const old = this.__dataOld;\n      if (this._shouldPropertiesChange(props, changedProps, old)) {\n        this.__dataPending = null;\n        this.__dataOld = null;\n        this._propertiesChanged(props, changedProps, old);\n      }\n      this.__dataCounter--;\n    }\n\n    /**\n     * Called in `_flushProperties` to determine if `_propertiesChanged`\n     * should be called. The default implementation returns true if\n     * properties are pending. Override to customize when\n     * `_propertiesChanged` is called.\n     * @param {!Object} currentProps Bag of all current accessor values\n     * @param {?Object} changedProps Bag of properties changed since the last\n     *   call to `_propertiesChanged`\n     * @param {?Object} oldProps Bag of previous values for each property\n     *   in `changedProps`\n     * @return {boolean} true if changedProps is truthy\n     * @override\n     */\n    _shouldPropertiesChange(currentProps, changedProps, oldProps) { // eslint-disable-line no-unused-vars\n      return Boolean(changedProps);\n    }\n\n    /**\n     * Callback called when any properties with accessors created via\n     * `_createPropertyAccessor` have been set.\n     *\n     * @param {!Object} currentProps Bag of all current accessor values\n     * @param {?Object} changedProps Bag of properties changed since the last\n     *   call to `_propertiesChanged`\n     * @param {?Object} oldProps Bag of previous values for each property\n     *   in `changedProps`\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _propertiesChanged(currentProps, changedProps, oldProps) { // eslint-disable-line no-unused-vars\n    }\n\n    /**\n     * Method called to determine whether a property value should be\n     * considered as a change and cause the `_propertiesChanged` callback\n     * to be enqueued.\n     *\n     * The default implementation returns `true` if a strict equality\n     * check fails. The method always returns false for `NaN`.\n     *\n     * Override this method to e.g. provide stricter checking for\n     * Objects/Arrays when using immutable patterns.\n     *\n     * @param {string} property Property name\n     * @param {*} value New property value\n     * @param {*} old Previous property value\n     * @return {boolean} Whether the property should be considered a change\n     *   and enqueue a `_proeprtiesChanged` callback\n     * @protected\n     * @override\n     */\n    _shouldPropertyChange(property, value, old) {\n      return (\n        // Strict equality check\n        (old !== value &&\n          // This ensures (old==NaN, value==NaN) always returns false\n          (old === old || value === value))\n      );\n    }\n\n    /**\n     * Implements native Custom Elements `attributeChangedCallback` to\n     * set an attribute value to a property via `_attributeToProperty`.\n     *\n     * @param {string} name Name of attribute that changed\n     * @param {?string} old Old attribute value\n     * @param {?string} value New attribute value\n     * @param {?string} namespace Attribute namespace.\n     * @return {void}\n     * @suppress {missingProperties} Super may or may not implement the callback\n     * @override\n     */\n    attributeChangedCallback(name, old, value, namespace) {\n      if (old !== value) {\n        this._attributeToProperty(name, value);\n      }\n      if (super.attributeChangedCallback) {\n        super.attributeChangedCallback(name, old, value, namespace);\n      }\n    }\n\n    /**\n     * Deserializes an attribute to its associated property.\n     *\n     * This method calls the `_deserializeValue` method to convert the string to\n     * a typed value.\n     *\n     * @param {string} attribute Name of attribute to deserialize.\n     * @param {?string} value of the attribute.\n     * @param {*=} type type to deserialize to, defaults to the value\n     * returned from `typeForProperty`\n     * @return {void}\n     * @override\n     */\n    _attributeToProperty(attribute, value, type) {\n      if (!this.__serializing) {\n        const map = this.__dataAttributes;\n        const property = map && map[attribute] || attribute;\n        this[property] = this._deserializeValue(value, type ||\n          this.constructor.typeForProperty(property));\n      }\n    }\n\n    /**\n     * Serializes a property to its associated attribute.\n     *\n     * @suppress {invalidCasts} Closure can't figure out `this` is an element.\n     *\n     * @param {string} property Property name to reflect.\n     * @param {string=} attribute Attribute name to reflect to.\n     * @param {*=} value Property value to refect.\n     * @return {void}\n     * @override\n     */\n    _propertyToAttribute(property, attribute, value) {\n      this.__serializing = true;\n      value = (arguments.length < 3) ? this[property] : value;\n      this._valueToNodeAttribute(/** @type {!HTMLElement} */(this), value,\n        attribute || this.constructor.attributeNameForProperty(property));\n      this.__serializing = false;\n    }\n\n    /**\n     * Sets a typed value to an HTML attribute on a node.\n     *\n     * This method calls the `_serializeValue` method to convert the typed\n     * value to a string.  If the `_serializeValue` method returns `undefined`,\n     * the attribute will be removed (this is the default for boolean\n     * type `false`).\n     *\n     * @param {Element} node Element to set attribute to.\n     * @param {*} value Value to serialize.\n     * @param {string} attribute Attribute name to serialize to.\n     * @return {void}\n     * @override\n     */\n    _valueToNodeAttribute(node, value, attribute) {\n      const str = this._serializeValue(value);\n      if (attribute === 'class' || attribute === 'name' || attribute === 'slot') {\n        node = /** @type {?Element} */(wrap(node));\n      }\n      if (str === undefined) {\n        node.removeAttribute(attribute);\n      } else {\n        node.setAttribute(\n            attribute,\n            // Closure's type for `setAttribute`'s second parameter incorrectly\n            // excludes `TrustedScript`.\n            (str === '' && window.trustedTypes) ?\n                /** @type {?} */ (window.trustedTypes.emptyScript) :\n                str);\n      }\n    }\n\n    /**\n     * Converts a typed JavaScript value to a string.\n     *\n     * This method is called when setting JS property values to\n     * HTML attributes.  Users may override this method to provide\n     * serialization for custom types.\n     *\n     * @param {*} value Property value to serialize.\n     * @return {string | undefined} String serialized from the provided\n     * property  value.\n     * @override\n     */\n    _serializeValue(value) {\n      switch (typeof value) {\n        case 'boolean':\n          return value ? '' : undefined;\n        default:\n          return value != null ? value.toString() : undefined;\n      }\n    }\n\n    /**\n     * Converts a string to a typed JavaScript value.\n     *\n     * This method is called when reading HTML attribute values to\n     * JS properties.  Users may override this method to provide\n     * deserialization for custom `type`s. Types for `Boolean`, `String`,\n     * and `Number` convert attributes to the expected types.\n     *\n     * @param {?string} value Value to deserialize.\n     * @param {*=} type Type to deserialize the string to.\n     * @return {*} Typed value deserialized from the provided string.\n     * @override\n     */\n    _deserializeValue(value, type) {\n      switch (type) {\n        case Boolean:\n          return (value !== null);\n        case Number:\n          return Number(value);\n        default:\n          return value;\n      }\n    }\n\n  }\n\n  return PropertiesChanged;\n});\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '../utils/boot.js';\n\nimport { dedupingMixin } from '../utils/mixin.js';\nimport { camelToDashCase, dashToCamelCase } from '../utils/case-map.js';\nimport { PropertiesChanged } from './properties-changed.js';\n\n// Save map of native properties; this forms a blacklist or properties\n// that won't have their values \"saved\" by `saveAccessorValue`, since\n// reading from an HTMLElement accessor from the context of a prototype throws\nconst nativeProperties = {};\nlet proto = HTMLElement.prototype;\nwhile (proto) {\n  let props = Object.getOwnPropertyNames(proto);\n  for (let i=0; i<props.length; i++) {\n    nativeProperties[props[i]] = true;\n  }\n  proto = Object.getPrototypeOf(proto);\n}\n\nconst isTrustedType = (() => {\n  if (!window.trustedTypes) {\n    return () => false;\n  }\n  return (val) => trustedTypes.isHTML(val) ||\n        trustedTypes.isScript(val) || trustedTypes.isScriptURL(val);\n})();\n\n/**\n * Used to save the value of a property that will be overridden with\n * an accessor. If the `model` is a prototype, the values will be saved\n * in `__dataProto`, and it's up to the user (or downstream mixin) to\n * decide how/when to set these values back into the accessors.\n * If `model` is already an instance (it has a `__data` property), then\n * the value will be set as a pending property, meaning the user should\n * call `_invalidateProperties` or `_flushProperties` to take effect\n *\n * @param {Object} model Prototype or instance\n * @param {string} property Name of property\n * @return {void}\n * @private\n */\nfunction saveAccessorValue(model, property) {\n  // Don't read/store value for any native properties since they could throw\n  if (!nativeProperties[property]) {\n    let value = model[property];\n    if (value !== undefined) {\n      if (model.__data) {\n        // Adding accessor to instance; update the property\n        // It is the user's responsibility to call _flushProperties\n        model._setPendingProperty(property, value);\n      } else {\n        // Adding accessor to proto; save proto's value for instance-time use\n        if (!model.__dataProto) {\n          model.__dataProto = {};\n        } else if (!model.hasOwnProperty(JSCompiler_renameProperty('__dataProto', model))) {\n          model.__dataProto = Object.create(model.__dataProto);\n        }\n        model.__dataProto[property] = value;\n      }\n    }\n  }\n}\n\n/**\n * Element class mixin that provides basic meta-programming for creating one\n * or more property accessors (getter/setter pair) that enqueue an async\n * (batched) `_propertiesChanged` callback.\n *\n * For basic usage of this mixin:\n *\n * -   Declare attributes to observe via the standard `static get\n *     observedAttributes()`. Use `dash-case` attribute names to represent\n *     `camelCase` property names.\n * -   Implement the `_propertiesChanged` callback on the class.\n * -   Call `MyClass.createPropertiesForAttributes()` **once** on the class to\n *     generate property accessors for each observed attribute. This must be\n *     called before the first instance is created, for example, by calling it\n *     before calling `customElements.define`. It can also be called lazily from\n *     the element's `constructor`, as long as it's guarded so that the call is\n *     only made once, when the first instance is created.\n * -   Call `this._enableProperties()` in the element's `connectedCallback` to\n *     enable the accessors.\n *\n * Any `observedAttributes` will automatically be\n * deserialized via `attributeChangedCallback` and set to the associated\n * property using `dash-case`-to-`camelCase` convention.\n *\n * @mixinFunction\n * @polymer\n * @appliesMixin PropertiesChanged\n * @summary Element class mixin for reacting to property changes from\n *   generated property accessors.\n * @template T\n * @param {function(new:T)} superClass Class to apply mixin to.\n * @return {function(new:T)} superClass with mixin applied.\n */\nexport const PropertyAccessors = dedupingMixin(superClass => {\n\n  /**\n   * @constructor\n   * @implements {Polymer_PropertiesChanged}\n   * @unrestricted\n   * @private\n   */\n   const base = PropertiesChanged(superClass);\n\n  /**\n   * @polymer\n   * @mixinClass\n   * @implements {Polymer_PropertyAccessors}\n   * @extends {base}\n   * @unrestricted\n   */\n  class PropertyAccessors extends base {\n\n    /**\n     * Generates property accessors for all attributes in the standard\n     * static `observedAttributes` array.\n     *\n     * Attribute names are mapped to property names using the `dash-case` to\n     * `camelCase` convention\n     *\n     * @return {void}\n     * @nocollapse\n     */\n    static createPropertiesForAttributes() {\n      let a$ =  /** @type {?} */ (this).observedAttributes;\n      for (let i=0; i < a$.length; i++) {\n        this.prototype._createPropertyAccessor(dashToCamelCase(a$[i]));\n      }\n    }\n\n    /**\n     * Returns an attribute name that corresponds to the given property.\n     * By default, converts camel to dash case, e.g. `fooBar` to `foo-bar`.\n     * @param {string} property Property to convert\n     * @return {string} Attribute name corresponding to the given property.\n     *\n     * @protected\n     * @nocollapse\n     */\n    static attributeNameForProperty(property) {\n      return camelToDashCase(property);\n    }\n\n    /**\n     * Overrides PropertiesChanged implementation to initialize values for\n     * accessors created for values that already existed on the element\n     * prototype.\n     *\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _initializeProperties() {\n      if (this.__dataProto) {\n        this._initializeProtoProperties(this.__dataProto);\n        this.__dataProto = null;\n      }\n      super._initializeProperties();\n    }\n\n    /**\n     * Called at instance time with bag of properties that were overwritten\n     * by accessors on the prototype when accessors were created.\n     *\n     * The default implementation sets these properties back into the\n     * setter at instance time.  This method is provided as an override\n     * point for customizing or providing more efficient initialization.\n     *\n     * @param {Object} props Bag of property values that were overwritten\n     *   when creating property accessors.\n     * @return {void}\n     * @protected\n     * @override\n     */\n    _initializeProtoProperties(props) {\n      for (let p in props) {\n        this._setProperty(p, props[p]);\n      }\n    }\n\n    /**\n     * Ensures the element has the given attribute. If it does not,\n     * assigns the given value to the attribute.\n     *\n     * @suppress {invalidCasts} Closure can't figure out `this` is infact an\n     *     element\n     *\n     * @param {string} attribute Name of attribute to ensure is set.\n     * @param {string} value of the attribute.\n     * @return {void}\n     * @override\n     */\n    _ensureAttribute(attribute, value) {\n      const el = /** @type {!HTMLElement} */(this);\n      if (!el.hasAttribute(attribute)) {\n        this._valueToNodeAttribute(el, value, attribute);\n      }\n    }\n\n    /**\n     * Overrides PropertiesChanged implemention to serialize objects as JSON.\n     *\n     * @param {*} value Property value to serialize.\n     * @return {string | undefined} String serialized from the provided property\n     *     value.\n     * @override\n     */\n    _serializeValue(value) {\n      /* eslint-disable no-fallthrough */\n      switch (typeof value) {\n        case 'object':\n          if (value instanceof Date) {\n            return value.toString();\n          } else if (value) {\n            if (isTrustedType(value)) {\n              /**\n               * Here `value` isn't actually a string, but it should be\n               * passed into APIs that normally expect a string, like\n               * elem.setAttribute.\n               */\n              return /** @type {?} */ (value);\n            }\n            try {\n              return JSON.stringify(value);\n            } catch(x) {\n              return '';\n            }\n          }\n\n        default:\n          return super._serializeValue(value);\n      }\n    }\n\n    /**\n     * Converts a string to a typed JavaScript value.\n     *\n     * This method is called by Polymer when reading HTML attribute values to\n     * JS properties.  Users may override this method on Polymer element\n     * prototypes to provide deserialization for custom `type`s.  Note,\n     * the `type` argument is the value of the `type` field provided in the\n     * `properties` configuration object for a given property, and is\n     * by convention the constructor for the type to deserialize.\n     *\n     *\n     * @param {?string} value Attribute value to deserialize.\n     * @param {*=} type Type to deserialize the string to.\n     * @return {*} Typed value deserialized from the provided string.\n     * @override\n     */\n    _deserializeValue(value, type) {\n      /**\n       * @type {*}\n       */\n      let outValue;\n      switch (type) {\n        case Object:\n          try {\n            outValue = JSON.parse(/** @type {string} */(value));\n          } catch(x) {\n            // allow non-JSON literals like Strings and Numbers\n            outValue = value;\n          }\n          break;\n        case Array:\n          try {\n            outValue = JSON.parse(/** @type {string} */(value));\n          } catch(x) {\n            outValue = null;\n            console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${value}`);\n          }\n          break;\n        case Date:\n          outValue = isNaN(value) ? String(value) : Number(value);\n          outValue = new Date(outValue);\n          break;\n        default:\n          outValue = super._deserializeValue(value, type);\n          break;\n      }\n      return outValue;\n    }\n    /* eslint-enable no-fallthrough */\n\n    /**\n     * Overrides PropertiesChanged implementation to save existing prototype\n     * property value so that it can be reset.\n     * @param {string} property Name of the property\n     * @param {boolean=} readOnly When true, no setter is created\n     *\n     * When calling on a prototype, any overwritten values are saved in\n     * `__dataProto`, and it is up to the subclasser to decide how/when\n     * to set those properties back into the accessor.  When calling on an\n     * instance, the overwritten value is set via `_setPendingProperty`,\n     * and the user should call `_invalidateProperties` or `_flushProperties`\n     * for the values to take effect.\n     * @protected\n     * @return {void}\n     * @override\n     */\n    _definePropertyAccessor(property, readOnly) {\n      saveAccessorValue(this, property);\n      super._definePropertyAccessor(property, readOnly);\n    }\n\n    /**\n     * Returns true if this library created an accessor for the given property.\n     *\n     * @param {string} property Property name\n     * @return {boolean} True if an accessor was created\n     * @override\n     */\n    _hasAccessor(property) {\n      return this.__dataHasAccessor && this.__dataHasAccessor[property];\n    }\n\n    /**\n     * Returns true if the specified property has a pending change.\n     *\n     * @param {string} prop Property name\n     * @return {boolean} True if property has a pending change\n     * @protected\n     * @override\n     */\n    _isPropertyPending(prop) {\n      return Boolean(this.__dataPending && (prop in this.__dataPending));\n    }\n\n  }\n\n  return PropertyAccessors;\n\n});\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '../utils/boot.js';\n\nimport { dedupingMixin } from '../utils/mixin.js';\n\n// 1.x backwards-compatible auto-wrapper for template type extensions\n// This is a clear layering violation and gives favored-nation status to\n// dom-if and dom-repeat templates.  This is a conceit we're choosing to keep\n// a.) to ease 1.x backwards-compatibility due to loss of `is`, and\n// b.) to maintain if/repeat capability in parser-constrained elements\n//     (e.g. table, select) in lieu of native CE type extensions without\n//     massive new invention in this space (e.g. directive system)\nconst templateExtensions = {\n  'dom-if': true,\n  'dom-repeat': true\n};\n\nlet placeholderBugDetect = false;\nlet placeholderBug = false;\n\nfunction hasPlaceholderBug() {\n  if (!placeholderBugDetect) {\n    placeholderBugDetect = true;\n    const t = document.createElement('textarea');\n    t.placeholder = 'a';\n    placeholderBug = t.placeholder === t.textContent;\n  }\n  return placeholderBug;\n}\n\n/**\n * Some browsers have a bug with textarea, where placeholder text is copied as\n * a textnode child of the textarea.\n *\n * If the placeholder is a binding, this can break template stamping in two\n * ways.\n *\n * One issue is that when the `placeholder` attribute is removed when the\n * binding is processed, the textnode child of the textarea is deleted, and the\n * template info tries to bind into that node.\n *\n * With `legacyOptimizations` in use, when the template is stamped and the\n * `textarea.textContent` binding is processed, no corresponding node is found\n * because it was removed during parsing. An exception is generated when this\n * binding is updated.\n *\n * With `legacyOptimizations` not in use, the template is cloned before\n * processing and this changes the above behavior. The cloned template also has\n * a value property set to the placeholder and textContent. This prevents the\n * removal of the textContent when the placeholder attribute is removed.\n * Therefore the exception does not occur. However, there is an extra\n * unnecessary binding.\n *\n * @param {!Node} node Check node for placeholder bug\n * @return {void}\n */\nfunction fixPlaceholder(node) {\n  if (hasPlaceholderBug() && node.localName === 'textarea' && node.placeholder\n        && node.placeholder === node.textContent) {\n    node.textContent = null;\n  }\n}\n\n/**\n * Copies an attribute from one element to another, converting the value to a\n * `TrustedScript` if it is named like a Polymer template event listener.\n *\n * @param {!Element} dest The element to set the attribute on\n * @param {!Element} src The element to read the attribute from\n * @param {string} name The name of the attribute\n */\nconst copyAttributeWithTemplateEventPolicy = (() => {\n  /**\n   * This `TrustedTypePolicy` is used to work around a Chrome bug in the Trusted\n   * Types API where any attribute that starts with `on` may only be set to a\n   * `TrustedScript` value, even if that attribute would not cause an event\n   * listener to be created. (See https://crbug.com/993268 for details.)\n   *\n   * Polymer's template system allows `<dom-if>` and `<dom-repeat>` to be\n   * written using the `<template is=\"...\">` syntax, even if there is no UA\n   * support for custom element extensions of built-in elements. In doing so, it\n   * copies attributes from the original `<template>` to a newly created\n   * `<dom-if>` or `<dom-repeat>`, which can trigger the bug mentioned above if\n   * any of those attributes uses Polymer's `on-` syntax for event listeners.\n   * (Note, the value of these `on-` listeners is not evaluated as script: it is\n   * the name of a member function of a component that will be used as the event\n   * listener.)\n   *\n   * @type {!TrustedTypePolicy|undefined}\n   */\n  const polymerTemplateEventAttributePolicy = window.trustedTypes &&\n      window.trustedTypes.createPolicy(\n          'polymer-template-event-attribute-policy', {\n            createScript: x => x,\n          });\n\n  return (dest, src, name) => {\n    const value = src.getAttribute(name);\n\n    if (polymerTemplateEventAttributePolicy && name.startsWith('on-')) {\n      dest.setAttribute(\n          name, polymerTemplateEventAttributePolicy.createScript(value, name));\n      return;\n    }\n\n    dest.setAttribute(name, value);\n  };\n})();\n\nfunction wrapTemplateExtension(node) {\n  let is = node.getAttribute('is');\n  if (is && templateExtensions[is]) {\n    let t = node;\n    t.removeAttribute('is');\n    node = t.ownerDocument.createElement(is);\n    t.parentNode.replaceChild(node, t);\n    node.appendChild(t);\n    while(t.attributes.length) {\n      const {name} = t.attributes[0];\n      copyAttributeWithTemplateEventPolicy(node, t, name);\n      t.removeAttribute(name);\n    }\n  }\n  return node;\n}\n\nfunction findTemplateNode(root, nodeInfo) {\n  // recursively ascend tree until we hit root\n  let parent = nodeInfo.parentInfo && findTemplateNode(root, nodeInfo.parentInfo);\n  // unwind the stack, returning the indexed node at each level\n  if (parent) {\n    // note: marginally faster than indexing via childNodes\n    // (http://jsperf.com/childnodes-lookup)\n    for (let n=parent.firstChild, i=0; n; n=n.nextSibling) {\n      if (nodeInfo.parentIndex === i++) {\n        return n;\n      }\n    }\n  } else {\n    return root;\n  }\n}\n\n// construct `$` map (from id annotations)\nfunction applyIdToMap(inst, map, node, nodeInfo) {\n  if (nodeInfo.id) {\n    map[nodeInfo.id] = node;\n  }\n}\n\n// install event listeners (from event annotations)\nfunction applyEventListener(inst, node, nodeInfo) {\n  if (nodeInfo.events && nodeInfo.events.length) {\n    for (let j=0, e$=nodeInfo.events, e; (j<e$.length) && (e=e$[j]); j++) {\n      inst._addMethodEventListenerToNode(node, e.name, e.value, inst);\n    }\n  }\n}\n\n// push configuration references at configure time\nfunction applyTemplateInfo(inst, node, nodeInfo, parentTemplateInfo) {\n  if (nodeInfo.templateInfo) {\n    // Give the node an instance of this templateInfo and set its parent\n    node._templateInfo = nodeInfo.templateInfo;\n    node._parentTemplateInfo = parentTemplateInfo;\n  }\n}\n\nfunction createNodeEventHandler(context, eventName, methodName) {\n  // Instances can optionally have a _methodHost which allows redirecting where\n  // to find methods. Currently used by `templatize`.\n  context = context._methodHost || context;\n  let handler = function(e) {\n    if (context[methodName]) {\n      context[methodName](e, e.detail);\n    } else {\n      console.warn('listener method `' + methodName + '` not defined');\n    }\n  };\n  return handler;\n}\n\n/**\n * Element mixin that provides basic template parsing and stamping, including\n * the following template-related features for stamped templates:\n *\n * - Declarative event listeners (`on-eventname=\"listener\"`)\n * - Map of node id's to stamped node instances (`this.$.id`)\n * - Nested template content caching/removal and re-installation (performance\n *   optimization)\n *\n * @mixinFunction\n * @polymer\n * @summary Element class mixin that provides basic template parsing and stamping\n */\nexport const TemplateStamp = dedupingMixin(\n    /**\n     * @template T\n     * @param {function(new:T)} superClass Class to apply mixin to.\n     * @return {function(new:T)} superClass with mixin applied.\n     */\n    (superClass) => {\n\n  /**\n   * @polymer\n   * @mixinClass\n   * @implements {Polymer_TemplateStamp}\n   */\n  class TemplateStamp extends superClass {\n\n    /**\n     * Scans a template to produce template metadata.\n     *\n     * Template-specific metadata are stored in the object returned, and node-\n     * specific metadata are stored in objects in its flattened `nodeInfoList`\n     * array.  Only nodes in the template that were parsed as nodes of\n     * interest contain an object in `nodeInfoList`.  Each `nodeInfo` object\n     * contains an `index` (`childNodes` index in parent) and optionally\n     * `parent`, which points to node info of its parent (including its index).\n     *\n     * The template metadata object returned from this method has the following\n     * structure (many fields optional):\n     *\n     * ```js\n     *   {\n     *     // Flattened list of node metadata (for nodes that generated metadata)\n     *     nodeInfoList: [\n     *       {\n     *         // `id` attribute for any nodes with id's for generating `$` map\n     *         id: {string},\n     *         // `on-event=\"handler\"` metadata\n     *         events: [\n     *           {\n     *             name: {string},   // event name\n     *             value: {string},  // handler method name\n     *           }, ...\n     *         ],\n     *         // Notes when the template contained a `<slot>` for shady DOM\n     *         // optimization purposes\n     *         hasInsertionPoint: {boolean},\n     *         // For nested `<template>`` nodes, nested template metadata\n     *         templateInfo: {object}, // nested template metadata\n     *         // Metadata to allow efficient retrieval of instanced node\n     *         // corresponding to this metadata\n     *         parentInfo: {number},   // reference to parent nodeInfo>\n     *         parentIndex: {number},  // index in parent's `childNodes` collection\n     *         infoIndex: {number},    // index of this `nodeInfo` in `templateInfo.nodeInfoList`\n     *       },\n     *       ...\n     *     ],\n     *     // When true, the template had the `strip-whitespace` attribute\n     *     // or was nested in a template with that setting\n     *     stripWhitespace: {boolean},\n     *     // For nested templates, nested template content is moved into\n     *     // a document fragment stored here; this is an optimization to\n     *     // avoid the cost of nested template cloning\n     *     content: {DocumentFragment}\n     *   }\n     * ```\n     *\n     * This method kicks off a recursive treewalk as follows:\n     *\n     * ```\n     *    _parseTemplate <---------------------+\n     *      _parseTemplateContent              |\n     *        _parseTemplateNode  <------------|--+\n     *          _parseTemplateNestedTemplate --+  |\n     *          _parseTemplateChildNodes ---------+\n     *          _parseTemplateNodeAttributes\n     *            _parseTemplateNodeAttribute\n     *\n     * ```\n     *\n     * These methods may be overridden to add custom metadata about templates\n     * to either `templateInfo` or `nodeInfo`.\n     *\n     * Note that this method may be destructive to the template, in that\n     * e.g. event annotations may be removed after being noted in the\n     * template metadata.\n     *\n     * @param {!HTMLTemplateElement} template Template to parse\n     * @param {TemplateInfo=} outerTemplateInfo Template metadata from the outer\n     *   template, for parsing nested templates\n     * @return {!TemplateInfo} Parsed template metadata\n     * @nocollapse\n     */\n    static _parseTemplate(template, outerTemplateInfo) {\n      // since a template may be re-used, memo-ize metadata\n      if (!template._templateInfo) {\n        // TODO(rictic): fix typing\n        let /** ? */ templateInfo = template._templateInfo = {};\n        templateInfo.nodeInfoList = [];\n        templateInfo.nestedTemplate = Boolean(outerTemplateInfo);\n        templateInfo.stripWhiteSpace =\n          (outerTemplateInfo && outerTemplateInfo.stripWhiteSpace) ||\n          (template.hasAttribute && template.hasAttribute('strip-whitespace'));\n         // TODO(rictic): fix typing\n         this._parseTemplateContent(\n             template, templateInfo, /** @type {?} */ ({parent: null}));\n      }\n      return template._templateInfo;\n    }\n\n    /**\n     * See docs for _parseTemplateNode.\n     *\n     * @param {!HTMLTemplateElement} template .\n     * @param {!TemplateInfo} templateInfo .\n     * @param {!NodeInfo} nodeInfo .\n     * @return {boolean} .\n     * @nocollapse\n     */\n    static _parseTemplateContent(template, templateInfo, nodeInfo) {\n      return this._parseTemplateNode(template.content, templateInfo, nodeInfo);\n    }\n\n    /**\n     * Parses template node and adds template and node metadata based on\n     * the current node, and its `childNodes` and `attributes`.\n     *\n     * This method may be overridden to add custom node or template specific\n     * metadata based on this node.\n     *\n     * @param {Node} node Node to parse\n     * @param {!TemplateInfo} templateInfo Template metadata for current template\n     * @param {!NodeInfo} nodeInfo Node metadata for current template.\n     * @return {boolean} `true` if the visited node added node-specific\n     *   metadata to `nodeInfo`\n     * @nocollapse\n     */\n    static _parseTemplateNode(node, templateInfo, nodeInfo) {\n      let noted = false;\n      let element = /** @type {!HTMLTemplateElement} */ (node);\n      if (element.localName == 'template' && !element.hasAttribute('preserve-content')) {\n        noted = this._parseTemplateNestedTemplate(element, templateInfo, nodeInfo) || noted;\n      } else if (element.localName === 'slot') {\n        // For ShadyDom optimization, indicating there is an insertion point\n        templateInfo.hasInsertionPoint = true;\n      }\n      fixPlaceholder(element);\n      if (element.firstChild) {\n        this._parseTemplateChildNodes(element, templateInfo, nodeInfo);\n      }\n      if (element.hasAttributes && element.hasAttributes()) {\n        noted = this._parseTemplateNodeAttributes(element, templateInfo, nodeInfo) || noted;\n      }\n      // Checking `nodeInfo.noted` allows a child node of this node (who gets\n      // access to `parentInfo`) to cause the parent to be noted, which\n      // otherwise has no return path via `_parseTemplateChildNodes` (used by\n      // some optimizations)\n      return noted || nodeInfo.noted;\n    }\n\n    /**\n     * Parses template child nodes for the given root node.\n     *\n     * This method also wraps whitelisted legacy template extensions\n     * (`is=\"dom-if\"` and `is=\"dom-repeat\"`) with their equivalent element\n     * wrappers, collapses text nodes, and strips whitespace from the template\n     * if the `templateInfo.stripWhitespace` setting was provided.\n     *\n     * @param {Node} root Root node whose `childNodes` will be parsed\n     * @param {!TemplateInfo} templateInfo Template metadata for current template\n     * @param {!NodeInfo} nodeInfo Node metadata for current template.\n     * @return {void}\n     */\n    static _parseTemplateChildNodes(root, templateInfo, nodeInfo) {\n      if (root.localName === 'script' || root.localName === 'style') {\n        return;\n      }\n      for (let node=root.firstChild, parentIndex=0, next; node; node=next) {\n        // Wrap templates\n        if (node.localName == 'template') {\n          node = wrapTemplateExtension(node);\n        }\n        // collapse adjacent textNodes: fixes an IE issue that can cause\n        // text nodes to be inexplicably split =(\n        // note that root.normalize() should work but does not so we do this\n        // manually.\n        next = node.nextSibling;\n        if (node.nodeType === Node.TEXT_NODE) {\n          let /** Node */ n = next;\n          while (n && (n.nodeType === Node.TEXT_NODE)) {\n            node.textContent += n.textContent;\n            next = n.nextSibling;\n            root.removeChild(n);\n            n = next;\n          }\n          // optionally strip whitespace\n          if (templateInfo.stripWhiteSpace && !node.textContent.trim()) {\n            root.removeChild(node);\n            continue;\n          }\n        }\n        let childInfo =\n            /** @type {!NodeInfo} */ ({parentIndex, parentInfo: nodeInfo});\n        if (this._parseTemplateNode(node, templateInfo, childInfo)) {\n          childInfo.infoIndex = templateInfo.nodeInfoList.push(childInfo) - 1;\n        }\n        // Increment if not removed\n        if (node.parentNode) {\n          parentIndex++;\n        }\n      }\n    }\n\n    /**\n     * Parses template content for the given nested `<template>`.\n     *\n     * Nested template info is stored as `templateInfo` in the current node's\n     * `nodeInfo`. `template.content` is removed and stored in `templateInfo`.\n     * It will then be the responsibility of the host to set it back to the\n     * template and for users stamping nested templates to use the\n     * `_contentForTemplate` method to retrieve the content for this template\n     * (an optimization to avoid the cost of cloning nested template content).\n     *\n     * @param {HTMLTemplateElement} node Node to parse (a <template>)\n     * @param {TemplateInfo} outerTemplateInfo Template metadata for current template\n     *   that includes the template `node`\n     * @param {!NodeInfo} nodeInfo Node metadata for current template.\n     * @return {boolean} `true` if the visited node added node-specific\n     *   metadata to `nodeInfo`\n     * @nocollapse\n     */\n    static _parseTemplateNestedTemplate(node, outerTemplateInfo, nodeInfo) {\n      // TODO(rictic): the type of node should be non-null\n      let element = /** @type {!HTMLTemplateElement} */ (node);\n      let templateInfo = this._parseTemplate(element, outerTemplateInfo);\n      let content = templateInfo.content =\n          element.content.ownerDocument.createDocumentFragment();\n      content.appendChild(element.content);\n      nodeInfo.templateInfo = templateInfo;\n      return true;\n    }\n\n    /**\n     * Parses template node attributes and adds node metadata to `nodeInfo`\n     * for nodes of interest.\n     *\n     * @param {Element} node Node to parse\n     * @param {!TemplateInfo} templateInfo Template metadata for current\n     *     template\n     * @param {!NodeInfo} nodeInfo Node metadata for current template.\n     * @return {boolean} `true` if the visited node added node-specific\n     *   metadata to `nodeInfo`\n     * @nocollapse\n     */\n    static _parseTemplateNodeAttributes(node, templateInfo, nodeInfo) {\n      // Make copy of original attribute list, since the order may change\n      // as attributes are added and removed\n      let noted = false;\n      let attrs = Array.from(node.attributes);\n      for (let i=attrs.length-1, a; (a=attrs[i]); i--) {\n        noted = this._parseTemplateNodeAttribute(node, templateInfo, nodeInfo, a.name, a.value) || noted;\n      }\n      return noted;\n    }\n\n    /**\n     * Parses a single template node attribute and adds node metadata to\n     * `nodeInfo` for attributes of interest.\n     *\n     * This implementation adds metadata for `on-event=\"handler\"` attributes\n     * and `id` attributes.\n     *\n     * @param {Element} node Node to parse\n     * @param {!TemplateInfo} templateInfo Template metadata for current template\n     * @param {!NodeInfo} nodeInfo Node metadata for current template.\n     * @param {string} name Attribute name\n     * @param {string} value Attribute value\n     * @return {boolean} `true` if the visited node added node-specific\n     *   metadata to `nodeInfo`\n     * @nocollapse\n     */\n    static _parseTemplateNodeAttribute(node, templateInfo, nodeInfo, name, value) {\n      // events (on-*)\n      if (name.slice(0, 3) === 'on-') {\n        node.removeAttribute(name);\n        nodeInfo.events = nodeInfo.events || [];\n        nodeInfo.events.push({\n          name: name.slice(3),\n          value\n        });\n        return true;\n      }\n      // static id\n      else if (name === 'id') {\n        nodeInfo.id = value;\n        return true;\n      }\n      return false;\n    }\n\n    /**\n     * Returns the `content` document fragment for a given template.\n     *\n     * For nested templates, Polymer performs an optimization to cache nested\n     * template content to avoid the cost of cloning deeply nested templates.\n     * This method retrieves the cached content for a given template.\n     *\n     * @param {HTMLTemplateElement} template Template to retrieve `content` for\n     * @return {DocumentFragment} Content fragment\n     * @nocollapse\n     */\n    static _contentForTemplate(template) {\n      let templateInfo = /** @type {HTMLTemplateElementWithInfo} */ (template)._templateInfo;\n      return (templateInfo && templateInfo.content) || template.content;\n    }\n\n    /**\n     * Clones the provided template content and returns a document fragment\n     * containing the cloned dom.\n     *\n     * The template is parsed (once and memoized) using this library's\n     * template parsing features, and provides the following value-added\n     * features:\n     * * Adds declarative event listeners for `on-event=\"handler\"` attributes\n     * * Generates an \"id map\" for all nodes with id's under `$` on returned\n     *   document fragment\n     * * Passes template info including `content` back to templates as\n     *   `_templateInfo` (a performance optimization to avoid deep template\n     *   cloning)\n     *\n     * Note that the memoized template parsing process is destructive to the\n     * template: attributes for bindings and declarative event listeners are\n     * removed after being noted in notes, and any nested `<template>.content`\n     * is removed and stored in notes as well.\n     *\n     * @param {!HTMLTemplateElement} template Template to stamp\n     * @param {TemplateInfo=} templateInfo Optional template info associated\n     *   with the template to be stamped; if omitted the template will be\n     *   automatically parsed.\n     * @return {!StampedTemplate} Cloned template content\n     * @override\n     */\n    _stampTemplate(template, templateInfo) {\n      // Polyfill support: bootstrap the template if it has not already been\n      if (template && !template.content &&\n          window.HTMLTemplateElement && HTMLTemplateElement.decorate) {\n        HTMLTemplateElement.decorate(template);\n      }\n      // Accepting the `templateInfo` via an argument allows for creating\n      // instances of the `templateInfo` by the caller, useful for adding\n      // instance-time information to the prototypical data\n      templateInfo = templateInfo || this.constructor._parseTemplate(template);\n      let nodeInfo = templateInfo.nodeInfoList;\n      let content = templateInfo.content || template.content;\n      let dom = /** @type {DocumentFragment} */ (document.importNode(content, true));\n      // NOTE: ShadyDom optimization indicating there is an insertion point\n      dom.__noInsertionPoint = !templateInfo.hasInsertionPoint;\n      let nodes = dom.nodeList = new Array(nodeInfo.length);\n      dom.$ = {};\n      for (let i=0, l=nodeInfo.length, info; (i<l) && (info=nodeInfo[i]); i++) {\n        let node = nodes[i] = findTemplateNode(dom, info);\n        applyIdToMap(this, dom.$, node, info);\n        applyTemplateInfo(this, node, info, templateInfo);\n        applyEventListener(this, node, info);\n      }\n      dom = /** @type {!StampedTemplate} */(dom); // eslint-disable-line no-self-assign\n      return dom;\n    }\n\n    /**\n     * Adds an event listener by method name for the event provided.\n     *\n     * This method generates a handler function that looks up the method\n     * name at handling time.\n     *\n     * @param {!EventTarget} node Node to add listener on\n     * @param {string} eventName Name of event\n     * @param {string} methodName Name of method\n     * @param {*=} context Context the method will be called on (defaults\n     *   to `node`)\n     * @return {Function} Generated handler function\n     * @override\n     */\n    _addMethodEventListenerToNode(node, eventName, methodName, context) {\n      context = context || node;\n      let handler = createNodeEventHandler(context, eventName, methodName);\n      this._addEventListenerToNode(node, eventName, handler);\n      return handler;\n    }\n\n    /**\n     * Override point for adding custom or simulated event handling.\n     *\n     * @param {!EventTarget} node Node to add event listener to\n     * @param {string} eventName Name of event\n     * @param {function(!Event):void} handler Listener function to add\n     * @return {void}\n     * @override\n     */\n    _addEventListenerToNode(node, eventName, handler) {\n      node.addEventListener(eventName, handler);\n    }\n\n    /**\n     * Override point for adding custom or simulated event handling.\n     *\n     * @param {!EventTarget} node Node to remove event listener from\n     * @param {string} eventName Name of event\n     * @param {function(!Event):void} handler Listener function to remove\n     * @return {void}\n     * @override\n     */\n    _removeEventListenerFromNode(node, eventName, handler) {\n      node.removeEventListener(eventName, handler);\n    }\n\n  }\n\n  return TemplateStamp;\n\n});\n","/**\n * @fileoverview\n * @suppress {checkPrototypalTypes}\n * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport '../utils/boot.js';\nimport { wrap } from '../utils/wrap.js';\nimport { dedupingMixin } from '../utils/mixin.js';\nimport { root, isAncestor, isDescendant, get, translate, isPath, set, normalize } from '../utils/path.js';\n/* for notify, reflect */\nimport { camelToDashCase, dashToCamelCase } from '../utils/case-map.js';\nimport { PropertyAccessors } from './property-accessors.js';\n/* for annotated effects */\nimport { TemplateStamp } from './template-stamp.js';\nimport { sanitizeDOMValue, legacyUndefined, orderedComputed, removeNestedTemplates, fastDomIf } from '../utils/settings.js';\n\n// Monotonically increasing unique ID used for de-duping effects triggered\n// from multiple properties in the same turn\nlet dedupeId = 0;\n\nconst NOOP = [];\n\n/**\n * Property effect types; effects are stored on the prototype using these keys\n * @enum {string}\n */\nconst TYPES = {\n  COMPUTE: '__computeEffects',\n  REFLECT: '__reflectEffects',\n  NOTIFY: '__notifyEffects',\n  PROPAGATE: '__propagateEffects',\n  OBSERVE: '__observeEffects',\n  READ_ONLY: '__readOnly'\n};\n\nconst COMPUTE_INFO = '__computeInfo';\n\n/** @const {!RegExp} */\nconst capitalAttributeRegex = /[A-Z]/;\n\n/**\n * @typedef {{\n * name: (string | undefined),\n * structured: (boolean | undefined),\n * wildcard: (boolean | undefined)\n * }}\n */\nlet DataTrigger; //eslint-disable-line no-unused-vars\n\n/**\n * @typedef {{\n * info: ?,\n * trigger: (!DataTrigger | undefined),\n * fn: (!Function | undefined)\n * }}\n */\nlet DataEffect; //eslint-disable-line no-unused-vars\n\n/**\n * Ensures that the model has an own-property map of effects for the given type.\n * The model may be a prototype or an instance.\n *\n * Property effects are stored as arrays of effects by property in a map,\n * by named type on the model. e.g.\n *\n *   __computeEffects: {\n *     foo: [ ... ],\n *     bar: [ ... ]\n *   }\n *\n * If the model does not yet have an effect map for the type, one is created\n * and returned.  If it does, but it is not an own property (i.e. the\n * prototype had effects), the the map is deeply cloned and the copy is\n * set on the model and returned, ready for new effects to be added.\n *\n * @param {Object} model Prototype or instance\n * @param {string} type Property effect type\n * @param {boolean=} cloneArrays Clone any arrays assigned to the map when\n *   extending a superclass map onto this subclass\n * @return {Object} The own-property map of effects for the given type\n * @private\n */\nfunction ensureOwnEffectMap(model, type, cloneArrays) {\n  let effects = model[type];\n  if (!effects) {\n    effects = model[type] = {};\n  } else if (!model.hasOwnProperty(type)) {\n    effects = model[type] = Object.create(model[type]);\n    if (cloneArrays) {\n      for (let p in effects) {\n        let protoFx = effects[p];\n        // Perf optimization over Array.slice\n        let instFx = effects[p] = Array(protoFx.length);\n        for (let i=0; i<protoFx.length; i++) {\n          instFx[i] = protoFx[i];\n        }\n      }\n    }\n  }\n  return effects;\n}\n\n// -- effects ----------------------------------------------\n\n/**\n * Runs all effects of a given type for the given set of property changes\n * on an instance.\n *\n * @param {!Polymer_PropertyEffects} inst The instance with effects to run\n * @param {?Object} effects Object map of property-to-Array of effects\n * @param {?Object} props Bag of current property changes\n * @param {?Object=} oldProps Bag of previous values for changed properties\n * @param {boolean=} hasPaths True with `props` contains one or more paths\n * @param {*=} extraArgs Additional metadata to pass to effect function\n * @return {boolean} True if an effect ran for this property\n * @private\n */\nfunction runEffects(inst, effects, props, oldProps, hasPaths, extraArgs) {\n  if (effects) {\n    let ran = false;\n    const id = dedupeId++;\n    for (let prop in props) {\n      // Inline `runEffectsForProperty` for perf.\n      let rootProperty = hasPaths ? root(prop) : prop;\n      let fxs = effects[rootProperty];\n      if (fxs) {\n        for (let i=0, l=fxs.length, fx; (i<l) && (fx=fxs[i]); i++) {\n          if ((!fx.info || fx.info.lastRun !== id) &&\n              (!hasPaths || pathMatchesTrigger(prop, fx.trigger))) {\n            if (fx.info) {\n              fx.info.lastRun = id;\n            }\n            fx.fn(inst, prop, props, oldProps, fx.info, hasPaths, extraArgs);\n            ran = true;\n          }\n        }\n      }\n    }\n    return ran;\n  }\n  return false;\n}\n\n/**\n * Runs a list of effects for a given property.\n *\n * @param {!Polymer_PropertyEffects} inst The instance with effects to run\n * @param {!Object} effects Object map of property-to-Array of effects\n * @param {number} dedupeId Counter used for de-duping effects\n * @param {string} prop Name of changed property\n * @param {*} props Changed properties\n * @param {*} oldProps Old properties\n * @param {boolean=} hasPaths True with `props` contains one or more paths\n * @param {*=} extraArgs Additional metadata to pass to effect function\n * @return {boolean} True if an effect ran for this property\n * @private\n */\nfunction runEffectsForProperty(inst, effects, dedupeId, prop, props, oldProps, hasPaths, extraArgs) {\n  let ran = false;\n  let rootProperty = hasPaths ? root(prop) : prop;\n  let fxs = effects[rootProperty];\n  if (fxs) {\n    for (let i=0, l=fxs.length, fx; (i<l) && (fx=fxs[i]); i++) {\n      if ((!fx.info || fx.info.lastRun !== dedupeId) &&\n          (!hasPaths || pathMatchesTrigger(prop, fx.trigger))) {\n        if (fx.info) {\n          fx.info.lastRun = dedupeId;\n        }\n        fx.fn(inst, prop, props, oldProps, fx.info, hasPaths, extraArgs);\n        ran = true;\n      }\n    }\n  }\n  return ran;\n}\n\n/**\n * Determines whether a property/path that has changed matches the trigger\n * criteria for an effect.  A trigger is a descriptor with the following\n * structure, which matches the descriptors returned from `parseArg`.\n * e.g. for `foo.bar.*`:\n * ```\n * trigger: {\n *   name: 'a.b',\n *   structured: true,\n *   wildcard: true\n * }\n * ```\n * If no trigger is given, the path is deemed to match.\n *\n * @param {string} path Path or property that changed\n * @param {?DataTrigger} trigger Descriptor\n * @return {boolean} Whether the path matched the trigger\n */\nfunction pathMatchesTrigger(path, trigger) {\n  if (trigger) {\n    let triggerPath = /** @type {string} */ (trigger.name);\n    return (triggerPath == path) ||\n        !!(trigger.structured && isAncestor(triggerPath, path)) ||\n        !!(trigger.wildcard && isDescendant(triggerPath, path));\n  } else {\n    return true;\n  }\n}\n\n/**\n * Implements the \"observer\" effect.\n *\n * Calls the method with `info.methodName` on the instance, passing the\n * new and old values.\n *\n * @param {!Polymer_PropertyEffects} inst The instance the effect will be run on\n * @param {string} property Name of property\n * @param {Object} props Bag of current property changes\n * @param {Object} oldProps Bag of previous values for changed properties\n * @param {?} info Effect metadata\n * @return {void}\n * @private\n */\nfunction runObserverEffect(inst, property, props, oldProps, info) {\n  let fn = typeof info.method === \"string\" ? inst[info.method] : info.method;\n  let changedProp = info.property;\n  if (fn) {\n    fn.call(inst, inst.__data[changedProp], oldProps[changedProp]);\n  } else if (!info.dynamicFn) {\n    console.warn('observer method `' + info.method + '` not defined');\n  }\n}\n\n/**\n * Runs \"notify\" effects for a set of changed properties.\n *\n * This method differs from the generic `runEffects` method in that it\n * will dispatch path notification events in the case that the property\n * changed was a path and the root property for that path didn't have a\n * \"notify\" effect.  This is to maintain 1.0 behavior that did not require\n * `notify: true` to ensure object sub-property notifications were\n * sent.\n *\n * @param {!Polymer_PropertyEffects} inst The instance with effects to run\n * @param {Object} notifyProps Bag of properties to notify\n * @param {Object} props Bag of current property changes\n * @param {Object} oldProps Bag of previous values for changed properties\n * @param {boolean} hasPaths True with `props` contains one or more paths\n * @return {void}\n * @private\n */\nfunction runNotifyEffects(inst, notifyProps, props, oldProps, hasPaths) {\n  // Notify\n  let fxs = inst[TYPES.NOTIFY];\n  let notified;\n  let id = dedupeId++;\n  // Try normal notify effects; if none, fall back to try path notification\n  for (let prop in notifyProps) {\n    if (notifyProps[prop]) {\n      if (fxs && runEffectsForProperty(inst, fxs, id, prop, props, oldProps, hasPaths)) {\n        notified = true;\n      } else if (hasPaths && notifyPath(inst, prop, props)) {\n        notified = true;\n      }\n    }\n  }\n  // Flush host if we actually notified and host was batching\n  // And the host has already initialized clients; this prevents\n  // an issue with a host observing data changes before clients are ready.\n  let host;\n  if (notified && (host = inst.__dataHost) && host._invalidateProperties) {\n    host._invalidateProperties();\n  }\n}\n\n/**\n * Dispatches {property}-changed events with path information in the detail\n * object to indicate a sub-path of the property was changed.\n *\n * @param {!Polymer_PropertyEffects} inst The element from which to fire the\n *     event\n * @param {string} path The path that was changed\n * @param {Object} props Bag of current property changes\n * @return {boolean} Returns true if the path was notified\n * @private\n */\nfunction notifyPath(inst, path, props) {\n  let rootProperty = root(path);\n  if (rootProperty !== path) {\n    let eventName = camelToDashCase(rootProperty) + '-changed';\n    dispatchNotifyEvent(inst, eventName, props[path], path);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Dispatches {property}-changed events to indicate a property (or path)\n * changed.\n *\n * @param {!Polymer_PropertyEffects} inst The element from which to fire the\n *     event\n * @param {string} eventName The name of the event to send\n *     ('{property}-changed')\n * @param {*} value The value of the changed property\n * @param {string | null | undefined} path If a sub-path of this property\n *     changed, the path that changed (optional).\n * @return {void}\n * @private\n * @suppress {invalidCasts}\n */\nfunction dispatchNotifyEvent(inst, eventName, value, path) {\n  let detail = {\n    value: value,\n    queueProperty: true\n  };\n  if (path) {\n    detail.path = path;\n  }\n  // As a performance optimization, we could elide the wrap here since notifying\n  // events are non-bubbling and shouldn't need retargeting. However, a very\n  // small number of internal tests failed in obscure ways, which may indicate\n  // user code relied on timing differences resulting from ShadyDOM flushing\n  // as a result of the wrapped `dispatchEvent`.\n  wrap(/** @type {!HTMLElement} */(inst)).dispatchEvent(new CustomEvent(eventName, { detail }));\n}\n\n/**\n * Implements the \"notify\" effect.\n *\n * Dispatches a non-bubbling event named `info.eventName` on the instance\n * with a detail object containing the new `value`.\n *\n * @param {!Polymer_PropertyEffects} inst The instance the effect will be run on\n * @param {string} property Name of property\n * @param {Object} props Bag of current property changes\n * @param {Object} oldProps Bag of previous values for changed properties\n * @param {?} info Effect metadata\n * @param {boolean} hasPaths True with `props` contains one or more paths\n * @return {void}\n * @private\n */\nfunction runNotifyEffect(inst, property, props, oldProps, info, hasPaths) {\n  let rootProperty = hasPaths ? root(property) : property;\n  let path = rootProperty != property ? property : null;\n  let value = path ? get(inst, path) : inst.__data[property];\n  if (path && value === undefined) {\n    value = props[property];  // specifically for .splices\n  }\n  dispatchNotifyEvent(inst, info.eventName, value, path);\n}\n\n/**\n * Handler function for 2-way notification events. Receives context\n * information captured in the `addNotifyListener` closure from the\n * `__notifyListeners` metadata.\n *\n * Sets the value of the notified property to the host property or path.  If\n * the event contained path information, translate that path to the host\n * scope's name for that path first.\n *\n * @param {CustomEvent} event Notification event (e.g. '<property>-changed')\n * @param {!Polymer_PropertyEffects} inst Host element instance handling the\n *     notification event\n * @param {string} fromProp Child element property that was bound\n * @param {string} toPath Host property/path that was bound\n * @param {boolean} negate Whether the binding was negated\n * @return {void}\n * @private\n */\nfunction handleNotification(event, inst, fromProp, toPath, negate) {\n  let value;\n  let detail = /** @type {Object} */(event.detail);\n  let fromPath = detail && detail.path;\n  if (fromPath) {\n    toPath = translate(fromProp, toPath, fromPath);\n    value = detail && detail.value;\n  } else {\n    value = event.currentTarget[fromProp];\n  }\n  value = negate ? !value : value;\n  if (!inst[TYPES.READ_ONLY] || !inst[TYPES.READ_ONLY][toPath]) {\n    if (inst._setPendingPropertyOrPath(toPath, value, true, Boolean(fromPath))\n      && (!detail || !detail.queueProperty)) {\n      inst._invalidateProperties();\n    }\n  }\n}\n\n/**\n * Implements the \"reflect\" effect.\n *\n * Sets the attribute named `info.attrName` to the given property value.\n *\n * @param {!Polymer_PropertyEffects} inst The instance the effect will be run on\n * @param {string} property Name of property\n * @param {Object} props Bag of current property changes\n * @param {Object} oldProps Bag of previous values for changed properties\n * @param {?} info Effect metadata\n * @return {void}\n * @private\n */\nfunction runReflectEffect(inst, property, props, oldProps, info) {\n  let value = inst.__data[property];\n  if (sanitizeDOMValue) {\n    value = sanitizeDOMValue(value, info.attrName, 'attribute', /** @type {Node} */(inst));\n  }\n  inst._propertyToAttribute(property, info.attrName, value);\n}\n\n/**\n * Runs \"computed\" effects for a set of changed properties.\n *\n * This method differs from the generic `runEffects` method in that it\n * continues to run computed effects based on the output of each pass until\n * there are no more newly computed properties.  This ensures that all\n * properties that will be computed by the initial set of changes are\n * computed before other effects (binding propagation, observers, and notify)\n * run.\n *\n * @param {!Polymer_PropertyEffects} inst The instance the effect will be run on\n * @param {?Object} changedProps Bag of changed properties\n * @param {?Object} oldProps Bag of previous values for changed properties\n * @param {boolean} hasPaths True with `props` contains one or more paths\n * @return {void}\n * @private\n */\nfunction runComputedEffects(inst, changedProps, oldProps, hasPaths) {\n  let computeEffects = inst[TYPES.COMPUTE];\n  if (computeEffects) {\n    if (orderedComputed) {\n      // Runs computed effects in efficient order by keeping a topologically-\n      // sorted queue of compute effects to run, and inserting subsequently\n      // invalidated effects as they are run\n      dedupeId++;\n      const order = getComputedOrder(inst);\n      const queue = [];\n      for (let p in changedProps) {\n        enqueueEffectsFor(p, computeEffects, queue, order, hasPaths);\n      }\n      let info;\n      while ((info = queue.shift())) {\n        if (runComputedEffect(inst, '', changedProps, oldProps, info)) {\n          enqueueEffectsFor(info.methodInfo, computeEffects, queue, order, hasPaths);\n        }\n      }\n      Object.assign(/** @type {!Object} */ (oldProps), inst.__dataOld);\n      Object.assign(/** @type {!Object} */ (changedProps), inst.__dataPending);\n      inst.__dataPending = null;\n    } else {\n      // Original Polymer 2.x computed effects order, which continues running\n      // effects until no further computed properties have been invalidated\n      let inputProps = changedProps;\n      while (runEffects(inst, computeEffects, inputProps, oldProps, hasPaths)) {\n        Object.assign(/** @type {!Object} */ (oldProps), inst.__dataOld);\n        Object.assign(/** @type {!Object} */ (changedProps), inst.__dataPending);\n        inputProps = inst.__dataPending;\n        inst.__dataPending = null;\n      }\n    }\n  }\n}\n\n/**\n * Inserts a computed effect into a queue, given the specified order. Performs\n * the insert using a binary search.\n *\n * Used by `orderedComputed: true` computed property algorithm.\n *\n * @param {Object} info Property effects metadata\n * @param {Array<Object>} queue Ordered queue of effects\n * @param {Map<string,number>} order Map of computed property name->topological\n *   sort order\n */\nconst insertEffect = (info, queue, order) => {\n  let start = 0;\n  let end = queue.length - 1;\n  let idx = -1;\n  while (start <= end) {\n    const mid = (start + end) >> 1;\n    // Note `methodInfo` is where the computed property name is stored in\n    // the effect metadata\n    const cmp = order.get(queue[mid].methodInfo) - order.get(info.methodInfo);\n    if (cmp < 0) {\n      start = mid + 1;\n    } else if (cmp > 0) {\n      end = mid - 1;\n    } else {\n      idx = mid;\n      break;\n    }\n  }\n  if (idx < 0) {\n    idx = end + 1;\n  }\n  queue.splice(idx, 0, info);\n};\n\n/**\n * Inserts all downstream computed effects invalidated by the specified property\n * into the topologically-sorted queue of effects to be run.\n *\n * Used by `orderedComputed: true` computed property algorithm.\n *\n * @param {string} prop Property name\n * @param {Object} computeEffects Computed effects for this element\n * @param {Array<Object>} queue Topologically-sorted queue of computed effects\n *   to be run\n * @param {Map<string,number>} order Map of computed property name->topological\n *   sort order\n * @param {boolean} hasPaths True with `changedProps` contains one or more paths\n */\nconst enqueueEffectsFor = (prop, computeEffects, queue, order, hasPaths) => {\n  const rootProperty = hasPaths ? root(prop) : prop;\n  const fxs = computeEffects[rootProperty];\n  if (fxs) {\n    for (let i=0; i<fxs.length; i++) {\n      const fx = fxs[i];\n      if ((fx.info.lastRun !== dedupeId) &&\n          (!hasPaths || pathMatchesTrigger(prop, fx.trigger))) {\n        fx.info.lastRun = dedupeId;\n        insertEffect(fx.info, queue, order);\n      }\n    }\n  }\n};\n\n/**\n * Generates and retrieves a memoized map of computed property name to its\n * topologically-sorted order.\n *\n * The map is generated by first assigning a \"dependency count\" to each property\n * (defined as number properties it depends on, including its method for\n * \"dynamic functions\"). Any properties that have no dependencies are added to\n * the `ready` queue, which are properties whose order can be added to the final\n * order map. Properties are popped off the `ready` queue one by one and a.) added as\n * the next property in the order map, and b.) each property that it is a\n * dependency for has its dep count decremented (and if that property's dep\n * count goes to zero, it is added to the `ready` queue), until all properties\n * have been visited and ordered.\n *\n * Used by `orderedComputed: true` computed property algorithm.\n *\n * @param {!Polymer_PropertyEffects} inst The instance to retrieve the computed\n *   effect order for.\n * @return {Map<string,number>} Map of computed property name->topological sort\n *   order\n */\nfunction getComputedOrder(inst) {\n  let ordered = inst.constructor.__orderedComputedDeps;\n  if (!ordered) {\n    ordered = new Map();\n    const effects = inst[TYPES.COMPUTE];\n    let {counts, ready, total} = dependencyCounts(inst);\n    let curr;\n    while ((curr = ready.shift())) {\n      ordered.set(curr, ordered.size);\n      const computedByCurr = effects[curr];\n      if (computedByCurr) {\n        computedByCurr.forEach(fx => {\n          // Note `methodInfo` is where the computed property name is stored\n          const computedProp = fx.info.methodInfo;\n          --total;\n          if (--counts[computedProp] === 0) {\n            ready.push(computedProp);\n          }\n        });\n      }\n    }\n    if (total !== 0) {\n      const el = /** @type {HTMLElement} */ (inst);\n      console.warn(`Computed graph for ${el.localName} incomplete; circular?`);\n    }\n    inst.constructor.__orderedComputedDeps = ordered;\n  }\n  return ordered;\n}\n\n/**\n * Generates a map of property-to-dependency count (`counts`, where \"dependency\n * count\" is the number of dependencies a given property has assuming it is a\n * computed property, otherwise 0).  It also returns a pre-populated list of\n * `ready` properties that have no dependencies and a `total` count, which is\n * used for error-checking the graph.\n *\n * Used by `orderedComputed: true` computed property algorithm.\n *\n * @param {!Polymer_PropertyEffects} inst The instance to generate dependency\n *   counts for.\n * @return {!Object} Object containing `counts` map (property-to-dependency\n *   count) and pre-populated `ready` array of properties that had zero\n *   dependencies.\n */\nfunction dependencyCounts(inst) {\n  const infoForComputed = inst[COMPUTE_INFO];\n  const counts = {};\n  const computedDeps = inst[TYPES.COMPUTE];\n  const ready = [];\n  let total = 0;\n  // Count dependencies for each computed property\n  for (let p in infoForComputed) {\n    const info = infoForComputed[p];\n    // Be sure to add the method name itself in case of \"dynamic functions\"\n    total += counts[p] =\n      info.args.filter(a => !a.literal).length + (info.dynamicFn ? 1 : 0);\n  }\n  // Build list of ready properties (that aren't themselves computed)\n  for (let p in computedDeps) {\n    if (!infoForComputed[p]) {\n      ready.push(p);\n    }\n  }\n  return {counts, ready, total};\n}\n\n/**\n * Implements the \"computed property\" effect by running the method with the\n * values of the arguments specified in the `info` object and setting the\n * return value to the computed property specified.\n *\n * @param {!Polymer_PropertyEffects} inst The instance the effect will be run on\n * @param {string} property Name of property\n * @param {?Object} changedProps Bag of current property changes\n * @param {?Object} oldProps Bag of previous values for changed properties\n * @param {?} info Effect metadata\n * @return {boolean} True when the property being computed changed\n * @private\n */\nfunction runComputedEffect(inst, property, changedProps, oldProps, info) {\n  // Dirty check dependencies and run if any invalid\n  let result = runMethodEffect(inst, property, changedProps, oldProps, info);\n  // Abort if method returns a no-op result\n  if (result === NOOP) {\n    return false;\n  }\n  let computedProp = info.methodInfo;\n  if (inst.__dataHasAccessor && inst.__dataHasAccessor[computedProp]) {\n    return inst._setPendingProperty(computedProp, result, true);\n  } else {\n    inst[computedProp] = result;\n    return false;\n  }\n}\n\n/**\n * Computes path changes based on path links set up using the `linkPaths`\n * API.\n *\n * @param {!Polymer_PropertyEffects} inst The instance whose props are changing\n * @param {string} path Path that has changed\n * @param {*} value Value of changed path\n * @return {void}\n * @private\n */\nfunction computeLinkedPaths(inst, path, value) {\n  let links = inst.__dataLinkedPaths;\n  if (links) {\n    let link;\n    for (let a in links) {\n      let b = links[a];\n      if (isDescendant(a, path)) {\n        link = translate(a, b, path);\n        inst._setPendingPropertyOrPath(link, value, true, true);\n      } else if (isDescendant(b, path)) {\n        link = translate(b, a, path);\n        inst._setPendingPropertyOrPath(link, value, true, true);\n      }\n    }\n  }\n}\n\n// -- bindings ----------------------------------------------\n\n/**\n * Adds binding metadata to the current `nodeInfo`, and binding effects\n * for all part dependencies to `templateInfo`.\n *\n * @param {Function} constructor Class that `_parseTemplate` is currently\n *   running on\n * @param {TemplateInfo} templateInfo Template metadata for current template\n * @param {NodeInfo} nodeInfo Node metadata for current template node\n * @param {string} kind Binding kind, either 'property', 'attribute', or 'text'\n * @param {string} target Target property name\n * @param {!Array<!BindingPart>} parts Array of binding part metadata\n * @param {string=} literal Literal text surrounding binding parts (specified\n *   only for 'property' bindings, since these must be initialized as part\n *   of boot-up)\n * @return {void}\n * @private\n */\nfunction addBinding(constructor, templateInfo, nodeInfo, kind, target, parts, literal) {\n  // Create binding metadata and add to nodeInfo\n  nodeInfo.bindings = nodeInfo.bindings || [];\n  let /** Binding */ binding = { kind, target, parts, literal, isCompound: (parts.length !== 1) };\n  nodeInfo.bindings.push(binding);\n  // Add listener info to binding metadata\n  if (shouldAddListener(binding)) {\n    let {event, negate} = binding.parts[0];\n    binding.listenerEvent = event || (camelToDashCase(target) + '-changed');\n    binding.listenerNegate = negate;\n  }\n  // Add \"propagate\" property effects to templateInfo\n  let index = templateInfo.nodeInfoList.length;\n  for (let i=0; i<binding.parts.length; i++) {\n    let part = binding.parts[i];\n    part.compoundIndex = i;\n    addEffectForBindingPart(constructor, templateInfo, binding, part, index);\n  }\n}\n\n/**\n * Adds property effects to the given `templateInfo` for the given binding\n * part.\n *\n * @param {Function} constructor Class that `_parseTemplate` is currently\n *   running on\n * @param {TemplateInfo} templateInfo Template metadata for current template\n * @param {!Binding} binding Binding metadata\n * @param {!BindingPart} part Binding part metadata\n * @param {number} index Index into `nodeInfoList` for this node\n * @return {void}\n */\nfunction addEffectForBindingPart(constructor, templateInfo, binding, part, index) {\n  if (!part.literal) {\n    if (binding.kind === 'attribute' && binding.target[0] === '-') {\n      console.warn('Cannot set attribute ' + binding.target +\n        ' because \"-\" is not a valid attribute starting character');\n    } else {\n      let dependencies = part.dependencies;\n      let info = { index, binding, part, evaluator: constructor };\n      for (let j=0; j<dependencies.length; j++) {\n        let trigger = dependencies[j];\n        if (typeof trigger == 'string') {\n          trigger = parseArg(trigger);\n          trigger.wildcard = true;\n        }\n        constructor._addTemplatePropertyEffect(templateInfo, trigger.rootProperty, {\n          fn: runBindingEffect,\n          info, trigger\n        });\n      }\n    }\n  }\n}\n\n/**\n * Implements the \"binding\" (property/path binding) effect.\n *\n * Note that binding syntax is overridable via `_parseBindings` and\n * `_evaluateBinding`.  This method will call `_evaluateBinding` for any\n * non-literal parts returned from `_parseBindings`.  However,\n * there is no support for _path_ bindings via custom binding parts,\n * as this is specific to Polymer's path binding syntax.\n *\n * @param {!Polymer_PropertyEffects} inst The instance the effect will be run on\n * @param {string} path Name of property\n * @param {Object} props Bag of current property changes\n * @param {Object} oldProps Bag of previous values for changed properties\n * @param {?} info Effect metadata\n * @param {boolean} hasPaths True with `props` contains one or more paths\n * @param {Array} nodeList List of nodes associated with `nodeInfoList` template\n *   metadata\n * @return {void}\n * @private\n */\nfunction runBindingEffect(inst, path, props, oldProps, info, hasPaths, nodeList) {\n  let node = nodeList[info.index];\n  let binding = info.binding;\n  let part = info.part;\n  // Subpath notification: transform path and set to client\n  // e.g.: foo=\"{{obj.sub}}\", path: 'obj.sub.prop', set 'foo.prop'=obj.sub.prop\n  if (hasPaths && part.source && (path.length > part.source.length) &&\n      (binding.kind == 'property') && !binding.isCompound &&\n      node.__isPropertyEffectsClient &&\n      node.__dataHasAccessor && node.__dataHasAccessor[binding.target]) {\n    let value = props[path];\n    path = translate(part.source, binding.target, path);\n    if (node._setPendingPropertyOrPath(path, value, false, true)) {\n      inst._enqueueClient(node);\n    }\n  } else {\n    let value = info.evaluator._evaluateBinding(inst, part, path, props, oldProps, hasPaths);\n    // Propagate value to child\n    // Abort if value is a no-op result\n    if (value !== NOOP) {\n      applyBindingValue(inst, node, binding, part, value);\n    }\n  }\n}\n\n/**\n * Sets the value for an \"binding\" (binding) effect to a node,\n * either as a property or attribute.\n *\n * @param {!Polymer_PropertyEffects} inst The instance owning the binding effect\n * @param {Node} node Target node for binding\n * @param {!Binding} binding Binding metadata\n * @param {!BindingPart} part Binding part metadata\n * @param {*} value Value to set\n * @return {void}\n * @private\n */\nfunction applyBindingValue(inst, node, binding, part, value) {\n  value = computeBindingValue(node, value, binding, part);\n  if (sanitizeDOMValue) {\n    value = sanitizeDOMValue(value, binding.target, binding.kind, node);\n  }\n  if (binding.kind == 'attribute') {\n    // Attribute binding\n    inst._valueToNodeAttribute(/** @type {Element} */(node), value, binding.target);\n  } else {\n    // Property binding\n    let prop = binding.target;\n    if (node.__isPropertyEffectsClient &&\n        node.__dataHasAccessor && node.__dataHasAccessor[prop]) {\n      if (!node[TYPES.READ_ONLY] || !node[TYPES.READ_ONLY][prop]) {\n        if (node._setPendingProperty(prop, value)) {\n          inst._enqueueClient(node);\n        }\n      }\n    } else {\n      // In legacy no-batching mode, bindings applied before dataReady are\n      // equivalent to the \"apply config\" phase, which only set managed props\n      inst._setUnmanagedPropertyToNode(node, prop, value);\n    }\n  }\n}\n\n/**\n * Transforms an \"binding\" effect value based on compound & negation\n * effect metadata, as well as handling for special-case properties\n *\n * @param {Node} node Node the value will be set to\n * @param {*} value Value to set\n * @param {!Binding} binding Binding metadata\n * @param {!BindingPart} part Binding part metadata\n * @return {*} Transformed value to set\n * @private\n */\nfunction computeBindingValue(node, value, binding, part) {\n  if (binding.isCompound) {\n    let storage = node.__dataCompoundStorage[binding.target];\n    storage[part.compoundIndex] = value;\n    value = storage.join('');\n  }\n  if (binding.kind !== 'attribute') {\n    // Some browsers serialize `undefined` to `\"undefined\"`\n    if (binding.target === 'textContent' ||\n        (binding.target === 'value' &&\n          (node.localName === 'input' || node.localName === 'textarea'))) {\n      value = value == undefined ? '' : value;\n    }\n  }\n  return value;\n}\n\n/**\n * Returns true if a binding's metadata meets all the requirements to allow\n * 2-way binding, and therefore a `<property>-changed` event listener should be\n * added:\n * - used curly braces\n * - is a property (not attribute) binding\n * - is not a textContent binding\n * - is not compound\n *\n * @param {!Binding} binding Binding metadata\n * @return {boolean} True if 2-way listener should be added\n * @private\n */\nfunction shouldAddListener(binding) {\n  return Boolean(binding.target) &&\n         binding.kind != 'attribute' &&\n         binding.kind != 'text' &&\n         !binding.isCompound &&\n         binding.parts[0].mode === '{';\n}\n\n/**\n * Setup compound binding storage structures, notify listeners, and dataHost\n * references onto the bound nodeList.\n *\n * @param {!Polymer_PropertyEffects} inst Instance that bas been previously\n *     bound\n * @param {TemplateInfo} templateInfo Template metadata\n * @return {void}\n * @private\n */\nfunction setupBindings(inst, templateInfo) {\n  // Setup compound storage, dataHost, and notify listeners\n  let {nodeList, nodeInfoList} = templateInfo;\n  if (nodeInfoList.length) {\n    for (let i=0; i < nodeInfoList.length; i++) {\n      let info = nodeInfoList[i];\n      let node = nodeList[i];\n      let bindings = info.bindings;\n      if (bindings) {\n        for (let i=0; i<bindings.length; i++) {\n          let binding = bindings[i];\n          setupCompoundStorage(node, binding);\n          addNotifyListener(node, inst, binding);\n        }\n      }\n      // This ensures all bound elements have a host set, regardless\n      // of whether they upgrade synchronous to creation\n      node.__dataHost = inst;\n    }\n  }\n}\n\n/**\n * Initializes `__dataCompoundStorage` local storage on a bound node with\n * initial literal data for compound bindings, and sets the joined\n * literal parts to the bound property.\n *\n * When changes to compound parts occur, they are first set into the compound\n * storage array for that property, and then the array is joined to result in\n * the final value set to the property/attribute.\n *\n * @param {Node} node Bound node to initialize\n * @param {Binding} binding Binding metadata\n * @return {void}\n * @private\n */\nfunction setupCompoundStorage(node, binding) {\n  if (binding.isCompound) {\n    // Create compound storage map\n    let storage = node.__dataCompoundStorage ||\n      (node.__dataCompoundStorage = {});\n    let parts = binding.parts;\n    // Copy literals from parts into storage for this binding\n    let literals = new Array(parts.length);\n    for (let j=0; j<parts.length; j++) {\n      literals[j] = parts[j].literal;\n    }\n    let target = binding.target;\n    storage[target] = literals;\n    // Configure properties with their literal parts\n    if (binding.literal && binding.kind == 'property') {\n      // Note, className needs style scoping so this needs wrapping.\n      // We may also want to consider doing this for `textContent` and\n      // `innerHTML`.\n      if (target === 'className') {\n        node = wrap(node);\n      }\n      node[target] = binding.literal;\n    }\n  }\n}\n\n/**\n * Adds a 2-way binding notification event listener to the node specified\n *\n * @param {Object} node Child element to add listener to\n * @param {!Polymer_PropertyEffects} inst Host element instance to handle\n *     notification event\n * @param {Binding} binding Binding metadata\n * @return {void}\n * @private\n */\nfunction addNotifyListener(node, inst, binding) {\n  if (binding.listenerEvent) {\n    let part = binding.parts[0];\n    node.addEventListener(binding.listenerEvent, function(e) {\n      handleNotification(e, inst, binding.target, part.source, part.negate);\n    });\n  }\n}\n\n// -- for method-based effects (complexObserver & computed) --------------\n\n/**\n * Adds property effects for each argument in the method signature (and\n * optionally, for the method name if `dynamic` is true) that calls the\n * provided effect function.\n *\n * @param {Element | Object} model Prototype or instance\n * @param {!MethodSignature} sig Method signature metadata\n * @param {string} type Type of property effect to add\n * @param {Function} effectFn Function to run when arguments change\n * @param {*=} methodInfo Effect-specific information to be included in\n *   method effect metadata\n * @param {boolean|Object=} dynamicFn Boolean or object map indicating whether\n *   method names should be included as a dependency to the effect. Note,\n *   defaults to true if the signature is static (sig.static is true).\n * @return {!Object} Effect metadata for this method effect\n * @private\n */\nfunction createMethodEffect(model, sig, type, effectFn, methodInfo, dynamicFn) {\n  dynamicFn = sig.static || (dynamicFn &&\n    (typeof dynamicFn !== 'object' || dynamicFn[sig.methodName]));\n  let info = {\n    methodName: sig.methodName,\n    args: sig.args,\n    methodInfo,\n    dynamicFn\n  };\n  for (let i=0, arg; (i<sig.args.length) && (arg=sig.args[i]); i++) {\n    if (!arg.literal) {\n      model._addPropertyEffect(arg.rootProperty, type, {\n        fn: effectFn, info: info, trigger: arg\n      });\n    }\n  }\n  if (dynamicFn) {\n    model._addPropertyEffect(sig.methodName, type, {\n      fn: effectFn, info: info\n    });\n  }\n  return info;\n}\n\n/**\n * Calls a method with arguments marshaled from properties on the instance\n * based on the method signature contained in the effect metadata.\n *\n * Multi-property observers, computed properties, and inline computing\n * functions call this function to invoke the method, then use the return\n * value accordingly.\n *\n * @param {!Polymer_PropertyEffects} inst The instance the effect will be run on\n * @param {string} property Name of property\n * @param {Object} props Bag of current property changes\n * @param {Object} oldProps Bag of previous values for changed properties\n * @param {?} info Effect metadata\n * @return {*} Returns the return value from the method invocation\n * @private\n */\nfunction runMethodEffect(inst, property, props, oldProps, info) {\n  // Instances can optionally have a _methodHost which allows redirecting where\n  // to find methods. Currently used by `templatize`.\n  let context = inst._methodHost || inst;\n  let fn = context[info.methodName];\n  if (fn) {\n    let args = inst._marshalArgs(info.args, property, props);\n    return args === NOOP ? NOOP : fn.apply(context, args);\n  } else if (!info.dynamicFn) {\n    console.warn('method `' + info.methodName + '` not defined');\n  }\n}\n\nconst emptyArray = [];\n\n// Regular expressions used for binding\nconst IDENT  = '(?:' + '[a-zA-Z_$][\\\\w.:$\\\\-*]*' + ')';\nconst NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\nconst SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\nconst DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\nconst STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\nconst ARGUMENT = '(?:(' + IDENT + '|' + NUMBER + '|' +  STRING + ')\\\\s*' + ')';\nconst ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\nconst ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                              '(?:' + ARGUMENTS + '?' + ')' +\n                            '\\\\)\\\\s*' + ')';\nconst BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\nconst OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\nconst CLOSE_BRACKET = '(?:]]|}})';\nconst NEGATE = '(?:(!)\\\\s*)?'; // Group 2\nconst EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\nconst bindingRegex = new RegExp(EXPRESSION, \"g\");\n\n/**\n * Create a string from binding parts of all the literal parts\n *\n * @param {!Array<BindingPart>} parts All parts to stringify\n * @return {string} String made from the literal parts\n */\nfunction literalFromParts(parts) {\n  let s = '';\n  for (let i=0; i<parts.length; i++) {\n    let literal = parts[i].literal;\n    s += literal || '';\n  }\n  return s;\n}\n\n/**\n * Parses an expression string for a method signature, and returns a metadata\n * describing the method in terms of `methodName`, `static` (whether all the\n * arguments are literals), and an array of `args`\n *\n * @param {string} expression The expression to parse\n * @return {?MethodSignature} The method metadata object if a method expression was\n *   found, otherwise `undefined`\n * @private\n */\nfunction parseMethod(expression) {\n  // tries to match valid javascript property names\n  let m = expression.match(/([^\\s]+?)\\(([\\s\\S]*)\\)/);\n  if (m) {\n    let methodName = m[1];\n    let sig = { methodName, static: true, args: emptyArray };\n    if (m[2].trim()) {\n      // replace escaped commas with comma entity, split on un-escaped commas\n      let args = m[2].replace(/\\\\,/g, '&comma;').split(',');\n      return parseArgs(args, sig);\n    } else {\n      return sig;\n    }\n  }\n  return null;\n}\n\n/**\n * Parses an array of arguments and sets the `args` property of the supplied\n * signature metadata object. Sets the `static` property to false if any\n * argument is a non-literal.\n *\n * @param {!Array<string>} argList Array of argument names\n * @param {!MethodSignature} sig Method signature metadata object\n * @return {!MethodSignature} The updated signature metadata object\n * @private\n */\nfunction parseArgs(argList, sig) {\n  sig.args = argList.map(function(rawArg) {\n    let arg = parseArg(rawArg);\n    if (!arg.literal) {\n      sig.static = false;\n    }\n    return arg;\n  }, this);\n  return sig;\n}\n\n/**\n * Parses an individual argument, and returns an argument metadata object\n * with the following fields:\n *\n *   {\n *     value: 'prop',        // property/path or literal value\n *     literal: false,       // whether argument is a literal\n *     structured: false,    // whether the property is a path\n *     rootProperty: 'prop', // the root property of the path\n *     wildcard: false       // whether the argument was a wildcard '.*' path\n *   }\n *\n * @param {string} rawArg The string value of the argument\n * @return {!MethodArg} Argument metadata object\n * @private\n */\nfunction parseArg(rawArg) {\n  // clean up whitespace\n  let arg = rawArg.trim()\n    // replace comma entity with comma\n    .replace(/&comma;/g, ',')\n    // repair extra escape sequences; note only commas strictly need\n    // escaping, but we allow any other char to be escaped since its\n    // likely users will do this\n    .replace(/\\\\(.)/g, '$1')\n    ;\n  // basic argument descriptor\n  let a = {\n    name: arg,\n    value: '',\n    literal: false\n  };\n  // detect literal value (must be String or Number)\n  let fc = arg[0];\n  if (fc === '-') {\n    fc = arg[1];\n  }\n  if (fc >= '0' && fc <= '9') {\n    fc = '#';\n  }\n  switch(fc) {\n    case \"'\":\n    case '\"':\n      a.value = arg.slice(1, -1);\n      a.literal = true;\n      break;\n    case '#':\n      a.value = Number(arg);\n      a.literal = true;\n      break;\n  }\n  // if not literal, look for structured path\n  if (!a.literal) {\n    a.rootProperty = root(arg);\n    // detect structured path (has dots)\n    a.structured = isPath(arg);\n    if (a.structured) {\n      a.wildcard = (arg.slice(-2) == '.*');\n      if (a.wildcard) {\n        a.name = arg.slice(0, -2);\n      }\n    }\n  }\n  return a;\n}\n\nfunction getArgValue(data, props, path) {\n  let value = get(data, path);\n  // when data is not stored e.g. `splices`, get the value from changedProps\n  // TODO(kschaaf): Note, this can cause a rare issue where the wildcard\n  // info.value could pull a stale value out of changedProps during a reentrant\n  // change that sets the value back to undefined.\n  // https://github.com/Polymer/polymer/issues/5479\n  if (value === undefined) {\n    value = props[path];\n  }\n  return value;\n}\n\n// data api\n\n/**\n * Sends array splice notifications (`.splices` and `.length`)\n *\n * Note: this implementation only accepts normalized paths\n *\n * @param {!Polymer_PropertyEffects} inst Instance to send notifications to\n * @param {Array} array The array the mutations occurred on\n * @param {string} path The path to the array that was mutated\n * @param {Array} splices Array of splice records\n * @return {void}\n * @private\n */\nfunction notifySplices(inst, array, path, splices) {\n  const splicesData = { indexSplices: splices };\n  // Legacy behavior stored splices in `__data__` so it was *not* ephemeral.\n  // To match this behavior, we store splices directly on the array.\n  if (legacyUndefined && !inst._overrideLegacyUndefined) {\n    array.splices = splicesData;\n  }\n  inst.notifyPath(path + '.splices', splicesData);\n  inst.notifyPath(path + '.length', array.length);\n  // Clear splice data only when it's stored on the array.\n  if (legacyUndefined && !inst._overrideLegacyUndefined) {\n    splicesData.indexSplices = [];\n  }\n}\n\n/**\n * Creates a splice record and sends an array splice notification for\n * the described mutation\n *\n * Note: this implementation only accepts normalized paths\n *\n * @param {!Polymer_PropertyEffects} inst Instance to send notifications to\n * @param {Array} array The array the mutations occurred on\n * @param {string} path The path to the array that was mutated\n * @param {number} index Index at which the array mutation occurred\n * @param {number} addedCount Number of added items\n * @param {Array} removed Array of removed items\n * @return {void}\n * @private\n */\nfunction notifySplice(inst, array, path, index, addedCount, removed) {\n  notifySplices(inst, array, path, [{\n    index: index,\n    addedCount: addedCount,\n    removed: removed,\n    object: array,\n    type: 'splice'\n  }]);\n}\n\n/**\n * Returns an upper-cased version of the string.\n *\n * @param {string} name String to uppercase\n * @return {string} Uppercased string\n * @private\n */\nfunction upper(name) {\n  return name[0].toUpperCase() + name.substring(1);\n}\n\n/**\n * Element class mixin that provides meta-programming for Polymer's template\n * binding and data observation (collectively, \"property effects\") system.\n *\n * This mixin uses provides the following key static methods for adding\n * property effects to an element class:\n * - `addPropertyEffect`\n * - `createPropertyObserver`\n * - `createMethodObserver`\n * - `createNotifyingProperty`\n * - `createReadOnlyProperty`\n * - `createReflectedProperty`\n * - `createComputedProperty`\n * - `bindTemplate`\n *\n * Each method creates one or more property accessors, along with metadata\n * used by this mixin's implementation of `_propertiesChanged` to perform\n * the property effects.\n *\n * Underscored versions of the above methods also exist on the element\n * prototype for adding property effects on instances at runtime.\n *\n * Note that this mixin overrides several `PropertyAccessors` methods, in\n * many cases to maintain guarantees provided by the Polymer 1.x features;\n * notably it changes property accessors to be synchronous by default\n * whereas the default when using `PropertyAccessors` standalone is to be\n * async by default.\n *\n * @mixinFunction\n * @polymer\n * @appliesMixin TemplateStamp\n * @appliesMixin PropertyAccessors\n * @summary Element class mixin that provides meta-programming for Polymer's\n * template binding and data observation system.\n */\nexport const PropertyEffects = dedupingMixin(superClass => {\n\n  /**\n   * @constructor\n   * @implements {Polymer_PropertyAccessors}\n   * @implements {Polymer_TemplateStamp}\n   * @unrestricted\n   * @private\n   */\n  const propertyEffectsBase = TemplateStamp(PropertyAccessors(superClass));\n\n  /**\n   * @polymer\n   * @mixinClass\n   * @implements {Polymer_PropertyEffects}\n   * @extends {propertyEffectsBase}\n   * @unrestricted\n   */\n  class PropertyEffects extends propertyEffectsBase {\n\n    constructor() {\n      super();\n      /** @type {boolean} */\n      // Used to identify users of this mixin, ala instanceof\n      this.__isPropertyEffectsClient = true;\n      /** @type {boolean} */\n      this.__dataClientsReady;\n      /** @type {Array} */\n      this.__dataPendingClients;\n      /** @type {Object} */\n      this.__dataToNotify;\n      /** @type {Object} */\n      this.__dataLinkedPaths;\n      /** @type {boolean} */\n      this.__dataHasPaths;\n      /** @type {Object} */\n      this.__dataCompoundStorage;\n      /** @type {Polymer_PropertyEffects} */\n      this.__dataHost;\n      /** @type {!Object} */\n      this.__dataTemp;\n      /** @type {boolean} */\n      this.__dataClientsInitialized;\n      /** @type {!Object} */\n      this.__data;\n      /** @type {!Object|null} */\n      this.__dataPending;\n      /** @type {!Object} */\n      this.__dataOld;\n      /** @type {Object} */\n      this.__computeEffects;\n      /** @type {Object} */\n      this.__computeInfo;\n      /** @type {Object} */\n      this.__reflectEffects;\n      /** @type {Object} */\n      this.__notifyEffects;\n      /** @type {Object} */\n      this.__propagateEffects;\n      /** @type {Object} */\n      this.__observeEffects;\n      /** @type {Object} */\n      this.__readOnly;\n      /** @type {!TemplateInfo} */\n      this.__templateInfo;\n      /** @type {boolean} */\n      this._overrideLegacyUndefined;\n    }\n\n    get PROPERTY_EFFECT_TYPES() {\n      return TYPES;\n    }\n\n    /**\n     * @override\n     * @return {void}\n     */\n    _initializeProperties() {\n      super._initializeProperties();\n      this._registerHost();\n      this.__dataClientsReady = false;\n      this.__dataPendingClients = null;\n      this.__dataToNotify = null;\n      this.__dataLinkedPaths = null;\n      this.__dataHasPaths = false;\n      // May be set on instance prior to upgrade\n      this.__dataCompoundStorage = this.__dataCompoundStorage || null;\n      this.__dataHost = this.__dataHost || null;\n      this.__dataTemp = {};\n      this.__dataClientsInitialized = false;\n    }\n\n    _registerHost() {\n      if (hostStack.length) {\n        let host = hostStack[hostStack.length-1];\n        host._enqueueClient(this);\n        // This ensures even non-bound elements have a host set, as\n        // long as they upgrade synchronously\n        this.__dataHost = host;\n      }\n    }\n\n    /**\n     * Overrides `PropertyAccessors` implementation to provide a\n     * more efficient implementation of initializing properties from\n     * the prototype on the instance.\n     *\n     * @override\n     * @param {Object} props Properties to initialize on the prototype\n     * @return {void}\n     */\n    _initializeProtoProperties(props) {\n      this.__data = Object.create(props);\n      this.__dataPending = Object.create(props);\n      this.__dataOld = {};\n    }\n\n    /**\n     * Overrides `PropertyAccessors` implementation to avoid setting\n     * `_setProperty`'s `shouldNotify: true`.\n     *\n     * @override\n     * @param {Object} props Properties to initialize on the instance\n     * @return {void}\n     */\n    _initializeInstanceProperties(props) {\n      let readOnly = this[TYPES.READ_ONLY];\n      for (let prop in props) {\n        if (!readOnly || !readOnly[prop]) {\n          this.__dataPending = this.__dataPending || {};\n          this.__dataOld = this.__dataOld || {};\n          this.__data[prop] = this.__dataPending[prop] = props[prop];\n        }\n      }\n    }\n\n    // Prototype setup ----------------------------------------\n\n    /**\n     * Equivalent to static `addPropertyEffect` API but can be called on\n     * an instance to add effects at runtime.  See that method for\n     * full API docs.\n     *\n     * @override\n     * @param {string} property Property that should trigger the effect\n     * @param {string} type Effect type, from this.PROPERTY_EFFECT_TYPES\n     * @param {Object=} effect Effect metadata object\n     * @return {void}\n     * @protected\n     */\n    _addPropertyEffect(property, type, effect) {\n      this._createPropertyAccessor(property, type == TYPES.READ_ONLY);\n      // effects are accumulated into arrays per property based on type\n      let effects = ensureOwnEffectMap(this, type, true)[property];\n      if (!effects) {\n        effects = this[type][property] = [];\n      }\n      effects.push(effect);\n    }\n\n    /**\n     * Removes the given property effect.\n     *\n     * @override\n     * @param {string} property Property the effect was associated with\n     * @param {string} type Effect type, from this.PROPERTY_EFFECT_TYPES\n     * @param {Object=} effect Effect metadata object to remove\n     * @return {void}\n     */\n    _removePropertyEffect(property, type, effect) {\n      let effects = ensureOwnEffectMap(this, type, true)[property];\n      let idx = effects.indexOf(effect);\n      if (idx >= 0) {\n        effects.splice(idx, 1);\n      }\n    }\n\n    /**\n     * Returns whether the current prototype/instance has a property effect\n     * of a certain type.\n     *\n     * @override\n     * @param {string} property Property name\n     * @param {string=} type Effect type, from this.PROPERTY_EFFECT_TYPES\n     * @return {boolean} True if the prototype/instance has an effect of this\n     *     type\n     * @protected\n     */\n    _hasPropertyEffect(property, type) {\n      let effects = this[type];\n      return Boolean(effects && effects[property]);\n    }\n\n    /**\n     * Returns whether the current prototype/instance has a \"read only\"\n     * accessor for the given property.\n     *\n     * @override\n     * @param {string} property Property name\n     * @return {boolean} True if the prototype/instance has an effect of this\n     *     type\n     * @protected\n     */\n    _hasReadOnlyEffect(property) {\n      return this._hasPropertyEffect(property, TYPES.READ_ONLY);\n    }\n\n    /**\n     * Returns whether the current prototype/instance has a \"notify\"\n     * property effect for the given property.\n     *\n     * @override\n     * @param {string} property Property name\n     * @return {boolean} True if the prototype/instance has an effect of this\n     *     type\n     * @protected\n     */\n    _hasNotifyEffect(property) {\n      return this._hasPropertyEffect(property, TYPES.NOTIFY);\n    }\n\n    /**\n     * Returns whether the current prototype/instance has a \"reflect to\n     * attribute\" property effect for the given property.\n     *\n     * @override\n     * @param {string} property Property name\n     * @return {boolean} True if the prototype/instance has an effect of this\n     *     type\n     * @protected\n     */\n    _hasReflectEffect(property) {\n      return this._hasPropertyEffect(property, TYPES.REFLECT);\n    }\n\n    /**\n     * Returns whether the current prototype/instance has a \"computed\"\n     * property effect for the given property.\n     *\n     * @override\n     * @param {string} property Property name\n     * @return {boolean} True if the prototype/instance has an effect of this\n     *     type\n     * @protected\n     */\n    _hasComputedEffect(property) {\n      return this._hasPropertyEffect(property, TYPES.COMPUTE);\n    }\n\n    // Runtime ----------------------------------------\n\n    /**\n     * Sets a pending property or path.  If the root property of the path in\n     * question had no accessor, the path is set, otherwise it is enqueued\n     * via `_setPendingProperty`.\n     *\n     * This function isolates relatively expensive functionality necessary\n     * for the public API (`set`, `setProperties`, `notifyPath`, and property\n     * change listeners via {{...}} bindings), such that it is only done\n     * when paths enter the system, and not at every propagation step.  It\n     * also sets a `__dataHasPaths` flag on the instance which is used to\n     * fast-path slower path-matching code in the property effects host paths.\n     *\n     * `path` can be a path string or array of path parts as accepted by the\n     * public API.\n     *\n     * @override\n     * @param {string | !Array<number|string>} path Path to set\n     * @param {*} value Value to set\n     * @param {boolean=} shouldNotify Set to true if this change should\n     *  cause a property notification event dispatch\n     * @param {boolean=} isPathNotification If the path being set is a path\n     *   notification of an already changed value, as opposed to a request\n     *   to set and notify the change.  In the latter `false` case, a dirty\n     *   check is performed and then the value is set to the path before\n     *   enqueuing the pending property change.\n     * @return {boolean} Returns true if the property/path was enqueued in\n     *   the pending changes bag.\n     * @protected\n     */\n    _setPendingPropertyOrPath(path, value, shouldNotify, isPathNotification) {\n      if (isPathNotification ||\n          root(Array.isArray(path) ? path[0] : path) !== path) {\n        // Dirty check changes being set to a path against the actual object,\n        // since this is the entry point for paths into the system; from here\n        // the only dirty checks are against the `__dataTemp` cache to prevent\n        // duplicate work in the same turn only. Note, if this was a notification\n        // of a change already set to a path (isPathNotification: true),\n        // we always let the change through and skip the `set` since it was\n        // already dirty checked at the point of entry and the underlying\n        // object has already been updated\n        if (!isPathNotification) {\n          let old = get(this, path);\n          path = /** @type {string} */ (set(this, path, value));\n          // Use property-accessor's simpler dirty check\n          if (!path || !super._shouldPropertyChange(path, value, old)) {\n            return false;\n          }\n        }\n        this.__dataHasPaths = true;\n        if (this._setPendingProperty(/**@type{string}*/(path), value, shouldNotify)) {\n          computeLinkedPaths(this, /**@type{string}*/ (path), value);\n          return true;\n        }\n      } else {\n        if (this.__dataHasAccessor && this.__dataHasAccessor[path]) {\n          return this._setPendingProperty(/**@type{string}*/(path), value, shouldNotify);\n        } else {\n          this[path] = value;\n        }\n      }\n      return false;\n    }\n\n    /**\n     * Applies a value to a non-Polymer element/node's property.\n     *\n     * The implementation makes a best-effort at binding interop:\n     * Some native element properties have side-effects when\n     * re-setting the same value (e.g. setting `<input>.value` resets the\n     * cursor position), so we do a dirty-check before setting the value.\n     * However, for better interop with non-Polymer custom elements that\n     * accept objects, we explicitly re-set object changes coming from the\n     * Polymer world (which may include deep object changes without the\n     * top reference changing), erring on the side of providing more\n     * information.\n     *\n     * Users may override this method to provide alternate approaches.\n     *\n     * @override\n     * @param {!Node} node The node to set a property on\n     * @param {string} prop The property to set\n     * @param {*} value The value to set\n     * @return {void}\n     * @protected\n     */\n    _setUnmanagedPropertyToNode(node, prop, value) {\n      // It is a judgment call that resetting primitives is\n      // \"bad\" and resettings objects is also \"good\"; alternatively we could\n      // implement a whitelist of tag & property values that should never\n      // be reset (e.g. <input>.value && <select>.value)\n      if (value !== node[prop] || typeof value == 'object') {\n        // Note, className needs style scoping so this needs wrapping.\n        if (prop === 'className') {\n          node = /** @type {!Node} */(wrap(node));\n        }\n        node[prop] = value;\n      }\n    }\n\n    /**\n     * Overrides the `PropertiesChanged` implementation to introduce special\n     * dirty check logic depending on the property & value being set:\n     *\n     * 1. Any value set to a path (e.g. 'obj.prop': 42 or 'obj.prop': {...})\n     *    Stored in `__dataTemp`, dirty checked against `__dataTemp`\n     * 2. Object set to simple property (e.g. 'prop': {...})\n     *    Stored in `__dataTemp` and `__data`, dirty checked against\n     *    `__dataTemp` by default implementation of `_shouldPropertyChange`\n     * 3. Primitive value set to simple property (e.g. 'prop': 42)\n     *    Stored in `__data`, dirty checked against `__data`\n     *\n     * The dirty-check is important to prevent cycles due to two-way\n     * notification, but paths and objects are only dirty checked against any\n     * previous value set during this turn via a \"temporary cache\" that is\n     * cleared when the last `_propertiesChanged` exits. This is so:\n     * a. any cached array paths (e.g. 'array.3.prop') may be invalidated\n     *    due to array mutations like shift/unshift/splice; this is fine\n     *    since path changes are dirty-checked at user entry points like `set`\n     * b. dirty-checking for objects only lasts one turn to allow the user\n     *    to mutate the object in-place and re-set it with the same identity\n     *    and have all sub-properties re-propagated in a subsequent turn.\n     *\n     * The temp cache is not necessarily sufficient to prevent invalid array\n     * paths, since a splice can happen during the same turn (with pathological\n     * user code); we could introduce a \"fixup\" for temporarily cached array\n     * paths if needed: https://github.com/Polymer/polymer/issues/4227\n     *\n     * @override\n     * @param {string} property Name of the property\n     * @param {*} value Value to set\n     * @param {boolean=} shouldNotify True if property should fire notification\n     *   event (applies only for `notify: true` properties)\n     * @return {boolean} Returns true if the property changed\n     */\n    _setPendingProperty(property, value, shouldNotify) {\n      let propIsPath = this.__dataHasPaths && isPath(property);\n      let prevProps = propIsPath ? this.__dataTemp : this.__data;\n      if (this._shouldPropertyChange(property, value, prevProps[property])) {\n        if (!this.__dataPending) {\n          this.__dataPending = {};\n          this.__dataOld = {};\n        }\n        // Ensure old is captured from the last turn\n        if (!(property in this.__dataOld)) {\n          this.__dataOld[property] = this.__data[property];\n        }\n        // Paths are stored in temporary cache (cleared at end of turn),\n        // which is used for dirty-checking, all others stored in __data\n        if (propIsPath) {\n          this.__dataTemp[property] = value;\n        } else {\n          this.__data[property] = value;\n        }\n        // All changes go into pending property bag, passed to _propertiesChanged\n        this.__dataPending[property] = value;\n        // Track properties that should notify separately\n        if (propIsPath || (this[TYPES.NOTIFY] && this[TYPES.NOTIFY][property])) {\n          this.__dataToNotify = this.__dataToNotify || {};\n          this.__dataToNotify[property] = shouldNotify;\n        }\n        return true;\n      }\n      return false;\n    }\n\n    /**\n     * Overrides base implementation to ensure all accessors set `shouldNotify`\n     * to true, for per-property notification tracking.\n     *\n     * @override\n     * @param {string} property Name of the property\n     * @param {*} value Value to set\n     * @return {void}\n     */\n    _setProperty(property, value) {\n      if (this._setPendingProperty(property, value, true)) {\n        this._invalidateProperties();\n      }\n    }\n\n    /**\n     * Overrides `PropertyAccessor`'s default async queuing of\n     * `_propertiesChanged`: if `__dataReady` is false (has not yet been\n     * manually flushed), the function no-ops; otherwise flushes\n     * `_propertiesChanged` synchronously.\n     *\n     * @override\n     * @return {void}\n     */\n    _invalidateProperties() {\n      if (this.__dataReady) {\n        this._flushProperties();\n      }\n    }\n\n    /**\n     * Enqueues the given client on a list of pending clients, whose\n     * pending property changes can later be flushed via a call to\n     * `_flushClients`.\n     *\n     * @override\n     * @param {Object} client PropertyEffects client to enqueue\n     * @return {void}\n     * @protected\n     */\n    _enqueueClient(client) {\n      this.__dataPendingClients = this.__dataPendingClients || [];\n      if (client !== this) {\n        this.__dataPendingClients.push(client);\n      }\n    }\n\n    /**\n     * Flushes any clients previously enqueued via `_enqueueClient`, causing\n     * their `_flushProperties` method to run.\n     *\n     * @override\n     * @return {void}\n     * @protected\n     */\n    _flushClients() {\n      if (!this.__dataClientsReady) {\n        this.__dataClientsReady = true;\n        this._readyClients();\n        // Override point where accessors are turned on; importantly,\n        // this is after clients have fully readied, providing a guarantee\n        // that any property effects occur only after all clients are ready.\n        this.__dataReady = true;\n      } else {\n        this.__enableOrFlushClients();\n      }\n    }\n\n    // NOTE: We ensure clients either enable or flush as appropriate. This\n    // handles two corner cases:\n    // (1) clients flush properly when connected/enabled before the host\n    // enables; e.g.\n    //   (a) Templatize stamps with no properties and does not flush and\n    //   (b) the instance is inserted into dom and\n    //   (c) then the instance flushes.\n    // (2) clients enable properly when not connected/enabled when the host\n    // flushes; e.g.\n    //   (a) a template is runtime stamped and not yet connected/enabled\n    //   (b) a host sets a property, causing stamped dom to flush\n    //   (c) the stamped dom enables.\n    __enableOrFlushClients() {\n      let clients = this.__dataPendingClients;\n      if (clients) {\n        this.__dataPendingClients = null;\n        for (let i=0; i < clients.length; i++) {\n          let client = clients[i];\n          if (!client.__dataEnabled) {\n            client._enableProperties();\n          } else if (client.__dataPending) {\n            client._flushProperties();\n          }\n        }\n      }\n    }\n\n    /**\n     * Perform any initial setup on client dom. Called before the first\n     * `_flushProperties` call on client dom and before any element\n     * observers are called.\n     *\n     * @override\n     * @return {void}\n     * @protected\n     */\n    _readyClients() {\n      this.__enableOrFlushClients();\n    }\n\n    /**\n     * Sets a bag of property changes to this instance, and\n     * synchronously processes all effects of the properties as a batch.\n     *\n     * Property names must be simple properties, not paths.  Batched\n     * path propagation is not supported.\n     *\n     * @override\n     * @param {Object} props Bag of one or more key-value pairs whose key is\n     *   a property and value is the new value to set for that property.\n     * @param {boolean=} setReadOnly When true, any private values set in\n     *   `props` will be set. By default, `setProperties` will not set\n     *   `readOnly: true` root properties.\n     * @return {void}\n     * @public\n     */\n    setProperties(props, setReadOnly) {\n      for (let path in props) {\n        if (setReadOnly || !this[TYPES.READ_ONLY] || !this[TYPES.READ_ONLY][path]) {\n          //TODO(kschaaf): explicitly disallow paths in setProperty?\n          // wildcard observers currently only pass the first changed path\n          // in the `info` object, and you could do some odd things batching\n          // paths, e.g. {'foo.bar': {...}, 'foo': null}\n          this._setPendingPropertyOrPath(path, props[path], true);\n        }\n      }\n      this._invalidateProperties();\n    }\n\n    /**\n     * Overrides `PropertyAccessors` so that property accessor\n     * side effects are not enabled until after client dom is fully ready.\n     * Also calls `_flushClients` callback to ensure client dom is enabled\n     * that was not enabled as a result of flushing properties.\n     *\n     * @override\n     * @return {void}\n     */\n    ready() {\n      // It is important that `super.ready()` is not called here as it\n      // immediately turns on accessors. Instead, we wait until `readyClients`\n      // to enable accessors to provide a guarantee that clients are ready\n      // before processing any accessors side effects.\n      this._flushProperties();\n      // If no data was pending, `_flushProperties` will not `flushClients`\n      // so ensure this is done.\n      if (!this.__dataClientsReady) {\n        this._flushClients();\n      }\n      // Before ready, client notifications do not trigger _flushProperties.\n      // Therefore a flush is necessary here if data has been set.\n      if (this.__dataPending) {\n        this._flushProperties();\n      }\n    }\n\n    /**\n     * Implements `PropertyAccessors`'s properties changed callback.\n     *\n     * Runs each class of effects for the batch of changed properties in\n     * a specific order (compute, propagate, reflect, observe, notify).\n     *\n     * @override\n     * @param {!Object} currentProps Bag of all current accessor values\n     * @param {?Object} changedProps Bag of properties changed since the last\n     *   call to `_propertiesChanged`\n     * @param {?Object} oldProps Bag of previous values for each property\n     *   in `changedProps`\n     * @return {void}\n     */\n    _propertiesChanged(currentProps, changedProps, oldProps) {\n      // ----------------------------\n      // let c = Object.getOwnPropertyNames(changedProps || {});\n      // window.debug && console.group(this.localName + '#' + this.id + ': ' + c);\n      // if (window.debug) { debugger; }\n      // ----------------------------\n      let hasPaths = this.__dataHasPaths;\n      this.__dataHasPaths = false;\n      let notifyProps;\n      // Compute properties\n      runComputedEffects(this, changedProps, oldProps, hasPaths);\n      // Clear notify properties prior to possible reentry (propagate, observe),\n      // but after computing effects have a chance to add to them\n      notifyProps = this.__dataToNotify;\n      this.__dataToNotify = null;\n      // Propagate properties to clients\n      this._propagatePropertyChanges(changedProps, oldProps, hasPaths);\n      // Flush clients\n      this._flushClients();\n      // Reflect properties\n      runEffects(this, this[TYPES.REFLECT], changedProps, oldProps, hasPaths);\n      // Observe properties\n      runEffects(this, this[TYPES.OBSERVE], changedProps, oldProps, hasPaths);\n      // Notify properties to host\n      if (notifyProps) {\n        runNotifyEffects(this, notifyProps, changedProps, oldProps, hasPaths);\n      }\n      // Clear temporary cache at end of turn\n      if (this.__dataCounter == 1) {\n        this.__dataTemp = {};\n      }\n      // ----------------------------\n      // window.debug && console.groupEnd(this.localName + '#' + this.id + ': ' + c);\n      // ----------------------------\n    }\n\n    /**\n     * Called to propagate any property changes to stamped template nodes\n     * managed by this element.\n     *\n     * @override\n     * @param {Object} changedProps Bag of changed properties\n     * @param {Object} oldProps Bag of previous values for changed properties\n     * @param {boolean} hasPaths True with `props` contains one or more paths\n     * @return {void}\n     * @protected\n     */\n    _propagatePropertyChanges(changedProps, oldProps, hasPaths) {\n      if (this[TYPES.PROPAGATE]) {\n        runEffects(this, this[TYPES.PROPAGATE], changedProps, oldProps, hasPaths);\n      }\n      if (this.__templateInfo) {\n        this._runEffectsForTemplate(this.__templateInfo, changedProps, oldProps, hasPaths);\n      }\n    }\n\n    _runEffectsForTemplate(templateInfo, changedProps, oldProps, hasPaths) {\n      const baseRunEffects = (changedProps, hasPaths) => {\n        runEffects(this, templateInfo.propertyEffects, changedProps, oldProps,\n          hasPaths, templateInfo.nodeList);\n        for (let info=templateInfo.firstChild; info; info=info.nextSibling) {\n          this._runEffectsForTemplate(info, changedProps, oldProps, hasPaths);\n        }\n      };\n      if (templateInfo.runEffects) {\n        templateInfo.runEffects(baseRunEffects, changedProps, hasPaths);\n      } else {\n        baseRunEffects(changedProps, hasPaths);\n      }\n    }\n\n    /**\n     * Aliases one data path as another, such that path notifications from one\n     * are routed to the other.\n     *\n     * @override\n     * @param {string | !Array<string|number>} to Target path to link.\n     * @param {string | !Array<string|number>} from Source path to link.\n     * @return {void}\n     * @public\n     */\n    linkPaths(to, from) {\n      to = normalize(to);\n      from = normalize(from);\n      this.__dataLinkedPaths = this.__dataLinkedPaths || {};\n      this.__dataLinkedPaths[to] = from;\n    }\n\n    /**\n     * Removes a data path alias previously established with `_linkPaths`.\n     *\n     * Note, the path to unlink should be the target (`to`) used when\n     * linking the paths.\n     *\n     * @override\n     * @param {string | !Array<string|number>} path Target path to unlink.\n     * @return {void}\n     * @public\n     */\n    unlinkPaths(path) {\n      path = normalize(path);\n      if (this.__dataLinkedPaths) {\n        delete this.__dataLinkedPaths[path];\n      }\n    }\n\n    /**\n     * Notify that an array has changed.\n     *\n     * Example:\n     *\n     *     this.items = [ {name: 'Jim'}, {name: 'Todd'}, {name: 'Bill'} ];\n     *     ...\n     *     this.items.splice(1, 1, {name: 'Sam'});\n     *     this.items.push({name: 'Bob'});\n     *     this.notifySplices('items', [\n     *       { index: 1, removed: [{name: 'Todd'}], addedCount: 1,\n     *         object: this.items, type: 'splice' },\n     *       { index: 3, removed: [], addedCount: 1,\n     *         object: this.items, type: 'splice'}\n     *     ]);\n     *\n     * @param {string} path Path that should be notified.\n     * @param {Array} splices Array of splice records indicating ordered\n     *   changes that occurred to the array. Each record should have the\n     *   following fields:\n     *    * index: index at which the change occurred\n     *    * removed: array of items that were removed from this index\n     *    * addedCount: number of new items added at this index\n     *    * object: a reference to the array in question\n     *    * type: the string literal 'splice'\n     *\n     *   Note that splice records _must_ be normalized such that they are\n     *   reported in index order (raw results from `Object.observe` are not\n     *   ordered and must be normalized/merged before notifying).\n     *\n     * @override\n     * @return {void}\n     * @public\n     */\n    notifySplices(path, splices) {\n      let info = {path: ''};\n      let array = /** @type {Array} */(get(this, path, info));\n      notifySplices(this, array, info.path, splices);\n    }\n\n    /**\n     * Convenience method for reading a value from a path.\n     *\n     * Note, if any part in the path is undefined, this method returns\n     * `undefined` (this method does not throw when dereferencing undefined\n     * paths).\n     *\n     * @override\n     * @param {(string|!Array<(string|number)>)} path Path to the value\n     *   to read.  The path may be specified as a string (e.g. `foo.bar.baz`)\n     *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n     *   bracketed expressions are not supported; string-based path parts\n     *   *must* be separated by dots.  Note that when dereferencing array\n     *   indices, the index may be used as a dotted part directly\n     *   (e.g. `users.12.name` or `['users', 12, 'name']`).\n     * @param {Object=} root Root object from which the path is evaluated.\n     * @return {*} Value at the path, or `undefined` if any part of the path\n     *   is undefined.\n     * @public\n     */\n    get(path, root) {\n      return get(root || this, path);\n    }\n\n    /**\n     * Convenience method for setting a value to a path and notifying any\n     * elements bound to the same path.\n     *\n     * Note, if any part in the path except for the last is undefined,\n     * this method does nothing (this method does not throw when\n     * dereferencing undefined paths).\n     *\n     * @override\n     * @param {(string|!Array<(string|number)>)} path Path to the value\n     *   to write.  The path may be specified as a string (e.g. `'foo.bar.baz'`)\n     *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n     *   bracketed expressions are not supported; string-based path parts\n     *   *must* be separated by dots.  Note that when dereferencing array\n     *   indices, the index may be used as a dotted part directly\n     *   (e.g. `'users.12.name'` or `['users', 12, 'name']`).\n     * @param {*} value Value to set at the specified path.\n     * @param {Object=} root Root object from which the path is evaluated.\n     *   When specified, no notification will occur.\n     * @return {void}\n     * @public\n     */\n    set(path, value, root) {\n      if (root) {\n        set(root, path, value);\n      } else {\n        if (!this[TYPES.READ_ONLY] || !this[TYPES.READ_ONLY][/** @type {string} */(path)]) {\n          if (this._setPendingPropertyOrPath(path, value, true)) {\n            this._invalidateProperties();\n          }\n        }\n      }\n    }\n\n    /**\n     * Adds items onto the end of the array at the path specified.\n     *\n     * The arguments after `path` and return value match that of\n     * `Array.prototype.push`.\n     *\n     * This method notifies other paths to the same array that a\n     * splice occurred to the array.\n     *\n     * @override\n     * @param {string | !Array<string|number>} path Path to array.\n     * @param {...*} items Items to push onto array\n     * @return {number} New length of the array.\n     * @public\n     */\n    push(path, ...items) {\n      let info = {path: ''};\n      let array = /** @type {Array}*/(get(this, path, info));\n      let len = array.length;\n      let ret = array.push(...items);\n      if (items.length) {\n        notifySplice(this, array, info.path, len, items.length, []);\n      }\n      return ret;\n    }\n\n    /**\n     * Removes an item from the end of array at the path specified.\n     *\n     * The arguments after `path` and return value match that of\n     * `Array.prototype.pop`.\n     *\n     * This method notifies other paths to the same array that a\n     * splice occurred to the array.\n     *\n     * @override\n     * @param {string | !Array<string|number>} path Path to array.\n     * @return {*} Item that was removed.\n     * @public\n     */\n    pop(path) {\n      let info = {path: ''};\n      let array = /** @type {Array} */(get(this, path, info));\n      let hadLength = Boolean(array.length);\n      let ret = array.pop();\n      if (hadLength) {\n        notifySplice(this, array, info.path, array.length, 0, [ret]);\n      }\n      return ret;\n    }\n\n    /**\n     * Starting from the start index specified, removes 0 or more items\n     * from the array and inserts 0 or more new items in their place.\n     *\n     * The arguments after `path` and return value match that of\n     * `Array.prototype.splice`.\n     *\n     * This method notifies other paths to the same array that a\n     * splice occurred to the array.\n     *\n     * @override\n     * @param {string | !Array<string|number>} path Path to array.\n     * @param {number} start Index from which to start removing/inserting.\n     * @param {number=} deleteCount Number of items to remove.\n     * @param {...*} items Items to insert into array.\n     * @return {!Array} Array of removed items.\n     * @public\n     */\n    splice(path, start, deleteCount, ...items) {\n      let info = {path : ''};\n      let array = /** @type {Array} */(get(this, path, info));\n      // Normalize fancy native splice handling of crazy start values\n      if (start < 0) {\n        start = array.length - Math.floor(-start);\n      } else if (start) {\n        start = Math.floor(start);\n      }\n      // array.splice does different things based on the number of arguments\n      // you pass in. Therefore, array.splice(0) and array.splice(0, undefined)\n      // do different things. In the former, the whole array is cleared. In the\n      // latter, no items are removed.\n      // This means that we need to detect whether 1. one of the arguments\n      // is actually passed in and then 2. determine how many arguments\n      // we should pass on to the native array.splice\n      //\n      let ret;\n      // Omit any additional arguments if they were not passed in\n      if (arguments.length === 2) {\n        ret = array.splice(start);\n      // Either start was undefined and the others were defined, but in this\n      // case we can safely pass on all arguments\n      //\n      // Note: this includes the case where none of the arguments were passed in,\n      // e.g. this.splice('array'). However, if both start and deleteCount\n      // are undefined, array.splice will not modify the array (as expected)\n      } else {\n        ret = array.splice(start, deleteCount, ...items);\n      }\n      // At the end, check whether any items were passed in (e.g. insertions)\n      // or if the return array contains items (e.g. deletions).\n      // Only notify if items were added or deleted.\n      if (items.length || ret.length) {\n        notifySplice(this, array, info.path, start, items.length, ret);\n      }\n      return ret;\n    }\n\n    /**\n     * Removes an item from the beginning of array at the path specified.\n     *\n     * The arguments after `path` and return value match that of\n     * `Array.prototype.pop`.\n     *\n     * This method notifies other paths to the same array that a\n     * splice occurred to the array.\n     *\n     * @override\n     * @param {string | !Array<string|number>} path Path to array.\n     * @return {*} Item that was removed.\n     * @public\n     */\n    shift(path) {\n      let info = {path: ''};\n      let array = /** @type {Array} */(get(this, path, info));\n      let hadLength = Boolean(array.length);\n      let ret = array.shift();\n      if (hadLength) {\n        notifySplice(this, array, info.path, 0, 0, [ret]);\n      }\n      return ret;\n    }\n\n    /**\n     * Adds items onto the beginning of the array at the path specified.\n     *\n     * The arguments after `path` and return value match that of\n     * `Array.prototype.push`.\n     *\n     * This method notifies other paths to the same array that a\n     * splice occurred to the array.\n     *\n     * @override\n     * @param {string | !Array<string|number>} path Path to array.\n     * @param {...*} items Items to insert info array\n     * @return {number} New length of the array.\n     * @public\n     */\n    unshift(path, ...items) {\n      let info = {path: ''};\n      let array = /** @type {Array} */(get(this, path, info));\n      let ret = array.unshift(...items);\n      if (items.length) {\n        notifySplice(this, array, info.path, 0, items.length, []);\n      }\n      return ret;\n    }\n\n    /**\n     * Notify that a path has changed.\n     *\n     * Example:\n     *\n     *     this.item.user.name = 'Bob';\n     *     this.notifyPath('item.user.name');\n     *\n     * @override\n     * @param {string} path Path that should be notified.\n     * @param {*=} value Value at the path (optional).\n     * @return {void}\n     * @public\n     */\n    notifyPath(path, value) {\n      /** @type {string} */\n      let propPath;\n      if (arguments.length == 1) {\n        // Get value if not supplied\n        let info = {path: ''};\n        value = get(this, path, info);\n        propPath = info.path;\n      } else if (Array.isArray(path)) {\n        // Normalize path if needed\n        propPath = normalize(path);\n      } else {\n        propPath = /** @type{string} */(path);\n      }\n      if (this._setPendingPropertyOrPath(propPath, value, true, true)) {\n        this._invalidateProperties();\n      }\n    }\n\n    /**\n     * Equivalent to static `createReadOnlyProperty` API but can be called on\n     * an instance to add effects at runtime.  See that method for\n     * full API docs.\n     *\n     * @override\n     * @param {string} property Property name\n     * @param {boolean=} protectedSetter Creates a custom protected setter\n     *   when `true`.\n     * @return {void}\n     * @protected\n     */\n    _createReadOnlyProperty(property, protectedSetter) {\n      this._addPropertyEffect(property, TYPES.READ_ONLY);\n      if (protectedSetter) {\n        this['_set' + upper(property)] = /** @this {PropertyEffects} */function(value) {\n          this._setProperty(property, value);\n        };\n      }\n    }\n\n    /**\n     * Equivalent to static `createPropertyObserver` API but can be called on\n     * an instance to add effects at runtime.  See that method for\n     * full API docs.\n     *\n     * @override\n     * @param {string} property Property name\n     * @param {string|function(*,*)} method Function or name of observer method\n     *     to call\n     * @param {boolean=} dynamicFn Whether the method name should be included as\n     *   a dependency to the effect.\n     * @return {void}\n     * @protected\n     */\n    _createPropertyObserver(property, method, dynamicFn) {\n      let info = { property, method, dynamicFn: Boolean(dynamicFn) };\n      this._addPropertyEffect(property, TYPES.OBSERVE, {\n        fn: runObserverEffect, info, trigger: {name: property}\n      });\n      if (dynamicFn) {\n        this._addPropertyEffect(/** @type {string} */(method), TYPES.OBSERVE, {\n          fn: runObserverEffect, info, trigger: {name: method}\n        });\n      }\n    }\n\n    /**\n     * Equivalent to static `createMethodObserver` API but can be called on\n     * an instance to add effects at runtime.  See that method for\n     * full API docs.\n     *\n     * @override\n     * @param {string} expression Method expression\n     * @param {boolean|Object=} dynamicFn Boolean or object map indicating\n     *   whether method names should be included as a dependency to the effect.\n     * @return {void}\n     * @protected\n     */\n    _createMethodObserver(expression, dynamicFn) {\n      let sig = parseMethod(expression);\n      if (!sig) {\n        throw new Error(\"Malformed observer expression '\" + expression + \"'\");\n      }\n      createMethodEffect(this, sig, TYPES.OBSERVE, runMethodEffect, null, dynamicFn);\n    }\n\n    /**\n     * Equivalent to static `createNotifyingProperty` API but can be called on\n     * an instance to add effects at runtime.  See that method for\n     * full API docs.\n     *\n     * @override\n     * @param {string} property Property name\n     * @return {void}\n     * @protected\n     */\n    _createNotifyingProperty(property) {\n      this._addPropertyEffect(property, TYPES.NOTIFY, {\n        fn: runNotifyEffect,\n        info: {\n          eventName: camelToDashCase(property) + '-changed',\n          property: property\n        }\n      });\n    }\n\n    /**\n     * Equivalent to static `createReflectedProperty` API but can be called on\n     * an instance to add effects at runtime.  See that method for\n     * full API docs.\n     *\n     * @override\n     * @param {string} property Property name\n     * @return {void}\n     * @protected\n     * @suppress {missingProperties} go/missingfnprops\n     */\n    _createReflectedProperty(property) {\n      let attr = this.constructor.attributeNameForProperty(property);\n      if (attr[0] === '-') {\n        console.warn('Property ' + property + ' cannot be reflected to attribute ' +\n          attr + ' because \"-\" is not a valid starting attribute name. Use a lowercase first letter for the property instead.');\n      } else {\n        this._addPropertyEffect(property, TYPES.REFLECT, {\n          fn: runReflectEffect,\n          info: {\n            attrName: attr\n          }\n        });\n      }\n    }\n\n    /**\n     * Equivalent to static `createComputedProperty` API but can be called on\n     * an instance to add effects at runtime.  See that method for\n     * full API docs.\n     *\n     * @override\n     * @param {string} property Name of computed property to set\n     * @param {string} expression Method expression\n     * @param {boolean|Object=} dynamicFn Boolean or object map indicating\n     *   whether method names should be included as a dependency to the effect.\n     * @return {void}\n     * @protected\n     */\n    _createComputedProperty(property, expression, dynamicFn) {\n      let sig = parseMethod(expression);\n      if (!sig) {\n        throw new Error(\"Malformed computed expression '\" + expression + \"'\");\n      }\n      const info = createMethodEffect(this, sig, TYPES.COMPUTE, runComputedEffect, property, dynamicFn);\n      // Effects are normally stored as map of dependency->effect, but for\n      // ordered computation, we also need tree of computedProp->dependencies\n      ensureOwnEffectMap(this, COMPUTE_INFO)[property] = info;\n    }\n\n    /**\n     * Gather the argument values for a method specified in the provided array\n     * of argument metadata.\n     *\n     * The `path` and `value` arguments are used to fill in wildcard descriptor\n     * when the method is being called as a result of a path notification.\n     *\n     * @param {!Array<!MethodArg>} args Array of argument metadata\n     * @param {string} path Property/path name that triggered the method effect\n     * @param {Object} props Bag of current property changes\n     * @return {!Array<*>} Array of argument values\n     * @private\n     */\n    _marshalArgs(args, path, props) {\n      const data = this.__data;\n      const values = [];\n      for (let i=0, l=args.length; i<l; i++) {\n        let {name, structured, wildcard, value, literal} = args[i];\n        if (!literal) {\n          if (wildcard) {\n            const matches = isDescendant(name, path);\n            const pathValue = getArgValue(data, props, matches ? path : name);\n            value = {\n              path: matches ? path : name,\n              value: pathValue,\n              base: matches ? get(data, name) : pathValue\n            };\n          } else {\n            value = structured ? getArgValue(data, props, name) : data[name];\n          }\n        }\n        // When the `legacyUndefined` flag is enabled, pass a no-op value\n        // so that the observer, computed property, or compound binding is aborted.\n        if (legacyUndefined && !this._overrideLegacyUndefined && value === undefined && args.length > 1) {\n          return NOOP;\n        }\n        values[i] = value;\n      }\n      return values;\n    }\n\n    // -- static class methods ------------\n\n    /**\n     * Ensures an accessor exists for the specified property, and adds\n     * to a list of \"property effects\" that will run when the accessor for\n     * the specified property is set.  Effects are grouped by \"type\", which\n     * roughly corresponds to a phase in effect processing.  The effect\n     * metadata should be in the following form:\n     *\n     *     {\n     *       fn: effectFunction, // Reference to function to call to perform effect\n     *       info: { ... }       // Effect metadata passed to function\n     *       trigger: {          // Optional triggering metadata; if not provided\n     *         name: string      // the property is treated as a wildcard\n     *         structured: boolean\n     *         wildcard: boolean\n     *       }\n     *     }\n     *\n     * Effects are called from `_propertiesChanged` in the following order by\n     * type:\n     *\n     * 1. COMPUTE\n     * 2. PROPAGATE\n     * 3. REFLECT\n     * 4. OBSERVE\n     * 5. NOTIFY\n     *\n     * Effect functions are called with the following signature:\n     *\n     *     effectFunction(inst, path, props, oldProps, info, hasPaths)\n     *\n     * @param {string} property Property that should trigger the effect\n     * @param {string} type Effect type, from this.PROPERTY_EFFECT_TYPES\n     * @param {Object=} effect Effect metadata object\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static addPropertyEffect(property, type, effect) {\n      this.prototype._addPropertyEffect(property, type, effect);\n    }\n\n    /**\n     * Creates a single-property observer for the given property.\n     *\n     * @param {string} property Property name\n     * @param {string|function(*,*)} method Function or name of observer method to call\n     * @param {boolean=} dynamicFn Whether the method name should be included as\n     *   a dependency to the effect.\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createPropertyObserver(property, method, dynamicFn) {\n      this.prototype._createPropertyObserver(property, method, dynamicFn);\n    }\n\n    /**\n     * Creates a multi-property \"method observer\" based on the provided\n     * expression, which should be a string in the form of a normal JavaScript\n     * function signature: `'methodName(arg1, [..., argn])'`.  Each argument\n     * should correspond to a property or path in the context of this\n     * prototype (or instance), or may be a literal string or number.\n     *\n     * @param {string} expression Method expression\n     * @param {boolean|Object=} dynamicFn Boolean or object map indicating\n     * @return {void}\n     *   whether method names should be included as a dependency to the effect.\n     * @protected\n     * @nocollapse\n     */\n    static createMethodObserver(expression, dynamicFn) {\n      this.prototype._createMethodObserver(expression, dynamicFn);\n    }\n\n    /**\n     * Causes the setter for the given property to dispatch `<property>-changed`\n     * events to notify of changes to the property.\n     *\n     * @param {string} property Property name\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createNotifyingProperty(property) {\n      this.prototype._createNotifyingProperty(property);\n    }\n\n    /**\n     * Creates a read-only accessor for the given property.\n     *\n     * To set the property, use the protected `_setProperty` API.\n     * To create a custom protected setter (e.g. `_setMyProp()` for\n     * property `myProp`), pass `true` for `protectedSetter`.\n     *\n     * Note, if the property will have other property effects, this method\n     * should be called first, before adding other effects.\n     *\n     * @param {string} property Property name\n     * @param {boolean=} protectedSetter Creates a custom protected setter\n     *   when `true`.\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createReadOnlyProperty(property, protectedSetter) {\n      this.prototype._createReadOnlyProperty(property, protectedSetter);\n    }\n\n    /**\n     * Causes the setter for the given property to reflect the property value\n     * to a (dash-cased) attribute of the same name.\n     *\n     * @param {string} property Property name\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createReflectedProperty(property) {\n      this.prototype._createReflectedProperty(property);\n    }\n\n    /**\n     * Creates a computed property whose value is set to the result of the\n     * method described by the given `expression` each time one or more\n     * arguments to the method changes.  The expression should be a string\n     * in the form of a normal JavaScript function signature:\n     * `'methodName(arg1, [..., argn])'`\n     *\n     * @param {string} property Name of computed property to set\n     * @param {string} expression Method expression\n     * @param {boolean|Object=} dynamicFn Boolean or object map indicating whether\n     *   method names should be included as a dependency to the effect.\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createComputedProperty(property, expression, dynamicFn) {\n      this.prototype._createComputedProperty(property, expression, dynamicFn);\n    }\n\n    /**\n     * Parses the provided template to ensure binding effects are created\n     * for them, and then ensures property accessors are created for any\n     * dependent properties in the template.  Binding effects for bound\n     * templates are stored in a linked list on the instance so that\n     * templates can be efficiently stamped and unstamped.\n     *\n     * @param {!HTMLTemplateElement} template Template containing binding\n     *   bindings\n     * @return {!TemplateInfo} Template metadata object\n     * @protected\n     * @nocollapse\n     */\n    static bindTemplate(template) {\n      return this.prototype._bindTemplate(template);\n    }\n\n    // -- binding ----------------------------------------------\n\n    /*\n     * Overview of binding flow:\n     *\n     * During finalization (`instanceBinding==false`, `wasPreBound==false`):\n     *  `_bindTemplate(t, false)` called directly during finalization - parses\n     *  the template (for the first time), and then assigns that _prototypical_\n     *  template info to `__preboundTemplateInfo` _on the prototype_; note in\n     *  this case `wasPreBound` is false; this is the first time we're binding\n     *  it, thus we create accessors.\n     *\n     * During first stamping (`instanceBinding==true`, `wasPreBound==true`):\n     *   `_stampTemplate` calls `_bindTemplate(t, true)`: the `templateInfo`\n     *   returned matches the prebound one, and so this is `wasPreBound == true`\n     *   state; thus we _skip_ creating accessors, but _do_ create an instance\n     *   of the template info to serve as the start of our linked list (needs to\n     *   be an instance, not the prototypical one, so that we can add `nodeList`\n     *   to it to contain the `nodeInfo`-ordered list of instance nodes for\n     *   bindings, and so we can chain runtime-stamped template infos off of\n     *   it). At this point, the call to `_stampTemplate` calls\n     *   `applyTemplateInfo` for each nested `<template>` found during parsing\n     *   to hand prototypical `_templateInfo` to them; we also pass the _parent_\n     *   `templateInfo` to the `<template>` so that we have the instance-time\n     *   parent to link the `templateInfo` under in the case it was\n     *   runtime-stamped.\n     *\n     * During subsequent runtime stamping (`instanceBinding==true`,\n     *   `wasPreBound==false`): `_stampTemplate` calls `_bindTemplate(t, true)`\n     *   - here `templateInfo` is guaranteed to _not_ match the prebound one,\n     *   because it was either a different template altogether, or even if it\n     *   was the same template, the step above created a instance of the info;\n     *   in this case `wasPreBound == false`, so we _do_ create accessors, _and_\n     *   link a instance into the linked list.\n     */\n\n    /**\n     * Equivalent to static `bindTemplate` API but can be called on an instance\n     * to add effects at runtime.  See that method for full API docs.\n     *\n     * This method may be called on the prototype (for prototypical template\n     * binding, to avoid creating accessors every instance) once per prototype,\n     * and will be called with `runtimeBinding: true` by `_stampTemplate` to\n     * create and link an instance of the template metadata associated with a\n     * particular stamping.\n     *\n     * @override\n     * @param {!HTMLTemplateElement} template Template containing binding\n     * bindings\n     * @param {boolean=} instanceBinding When false (default), performs\n     * \"prototypical\" binding of the template and overwrites any previously\n     * bound template for the class. When true (as passed from\n     * `_stampTemplate`), the template info is instanced and linked into the\n     * list of bound templates.\n     * @return {!TemplateInfo} Template metadata object; for `runtimeBinding`,\n     * this is an instance of the prototypical template info\n     * @protected\n     * @suppress {missingProperties} go/missingfnprops\n     */\n    _bindTemplate(template, instanceBinding) {\n      let templateInfo = this.constructor._parseTemplate(template);\n      let wasPreBound = this.__preBoundTemplateInfo == templateInfo;\n      // Optimization: since this is called twice for proto-bound templates,\n      // don't attempt to recreate accessors if this template was pre-bound\n      if (!wasPreBound) {\n        for (let prop in templateInfo.propertyEffects) {\n          this._createPropertyAccessor(prop);\n        }\n      }\n      if (instanceBinding) {\n        // For instance-time binding, create instance of template metadata\n        // and link into tree of templates if necessary\n        templateInfo = /** @type {!TemplateInfo} */(Object.create(templateInfo));\n        templateInfo.wasPreBound = wasPreBound;\n        if (!this.__templateInfo) {\n          // Set the info to the root of the tree\n          this.__templateInfo = templateInfo;\n        } else {\n          // Append this template info onto the end of its parent template's\n          // list, which will determine the tree structure via which property\n          // effects are run; if this template was not nested in another\n          // template, use the root template (the first stamped one) as the\n          // parent. Note, `parent` is the `templateInfo` instance for this\n          // template's parent (containing) template, which was set up in\n          // `applyTemplateInfo`.  While a given template's `parent` is set\n          // apriori, it is only added to the parent's child list at the point\n          // that it is being bound, since a template may or may not ever be\n          // stamped, and may be stamped more than once (in which case instances\n          // of the template info will be in the tree under its parent more than\n          // once).\n          const parent = template._parentTemplateInfo || this.__templateInfo;\n          const previous = parent.lastChild;\n          templateInfo.parent = parent;\n          parent.lastChild = templateInfo;\n          templateInfo.previousSibling = previous;\n          if (previous) {\n            previous.nextSibling = templateInfo;\n          } else {\n            parent.firstChild = templateInfo;\n          }\n        }\n      } else {\n        this.__preBoundTemplateInfo = templateInfo;\n      }\n      return templateInfo;\n    }\n\n    /**\n     * Adds a property effect to the given template metadata, which is run\n     * at the \"propagate\" stage of `_propertiesChanged` when the template\n     * has been bound to the element via `_bindTemplate`.\n     *\n     * The `effect` object should match the format in `_addPropertyEffect`.\n     *\n     * @param {Object} templateInfo Template metadata to add effect to\n     * @param {string} prop Property that should trigger the effect\n     * @param {Object=} effect Effect metadata object\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static _addTemplatePropertyEffect(templateInfo, prop, effect) {\n      let hostProps = templateInfo.hostProps = templateInfo.hostProps || {};\n      hostProps[prop] = true;\n      let effects = templateInfo.propertyEffects = templateInfo.propertyEffects || {};\n      let propEffects = effects[prop] = effects[prop] || [];\n      propEffects.push(effect);\n    }\n\n    /**\n     * Stamps the provided template and performs instance-time setup for\n     * Polymer template features, including data bindings, declarative event\n     * listeners, and the `this.$` map of `id`'s to nodes.  A document fragment\n     * is returned containing the stamped DOM, ready for insertion into the\n     * DOM.\n     *\n     * This method may be called more than once; however note that due to\n     * `shadycss` polyfill limitations, only styles from templates prepared\n     * using `ShadyCSS.prepareTemplate` will be correctly polyfilled (scoped\n     * to the shadow root and support CSS custom properties), and note that\n     * `ShadyCSS.prepareTemplate` may only be called once per element. As such,\n     * any styles required by in runtime-stamped templates must be included\n     * in the main element template.\n     *\n     * @param {!HTMLTemplateElement} template Template to stamp\n     * @param {TemplateInfo=} templateInfo Optional bound template info associated\n     *   with the template to be stamped; if omitted the template will be\n     *   automatically bound.\n     * @return {!StampedTemplate} Cloned template content\n     * @override\n     * @protected\n     */\n    _stampTemplate(template, templateInfo) {\n      templateInfo =  templateInfo || /** @type {!TemplateInfo} */(this._bindTemplate(template, true));\n      // Ensures that created dom is `_enqueueClient`'d to this element so\n      // that it can be flushed on next call to `_flushProperties`\n      hostStack.push(this);\n      let dom = super._stampTemplate(template, templateInfo);\n      hostStack.pop();\n      // Add template-instance-specific data to instanced templateInfo\n      templateInfo.nodeList = dom.nodeList;\n      // Capture child nodes to allow unstamping of non-prototypical templates\n      if (!templateInfo.wasPreBound) {\n        let nodes = templateInfo.childNodes = [];\n        for (let n=dom.firstChild; n; n=n.nextSibling) {\n          nodes.push(n);\n        }\n      }\n      dom.templateInfo = templateInfo;\n      // Setup compound storage, 2-way listeners, and dataHost for bindings\n      setupBindings(this, templateInfo);\n      // Flush properties into template nodes; the check on `__dataClientsReady`\n      // ensures we don't needlessly run effects for an element's initial\n      // prototypical template stamping since they will happen as a part of the\n      // first call to `_propertiesChanged`. This flag is set to true\n      // after running the initial propagate effects, and immediately before\n      // flushing clients. Since downstream clients could cause stamping on\n      // this host (e.g. a fastDomIf `dom-if` being forced to render\n      // synchronously), this flag ensures effects for runtime-stamped templates\n      // are run at this point during the initial element boot-up.\n      if (this.__dataClientsReady) {\n        this._runEffectsForTemplate(templateInfo, this.__data, null, false);\n        this._flushClients();\n      }\n      return dom;\n    }\n\n    /**\n     * Removes and unbinds the nodes previously contained in the provided\n     * DocumentFragment returned from `_stampTemplate`.\n     *\n     * @override\n     * @param {!StampedTemplate} dom DocumentFragment previously returned\n     *   from `_stampTemplate` associated with the nodes to be removed\n     * @return {void}\n     * @protected\n     */\n    _removeBoundDom(dom) {\n      // Unlink template info; Note that while the child is unlinked from its\n      // parent list, a template's `parent` reference is never removed, since\n      // this is is determined by the tree structure and applied at\n      // `applyTemplateInfo` time.\n      const templateInfo = dom.templateInfo;\n      const {previousSibling, nextSibling, parent} = templateInfo;\n      if (previousSibling) {\n        previousSibling.nextSibling = nextSibling;\n      } else if (parent) {\n        parent.firstChild = nextSibling;\n      }\n      if (nextSibling) {\n        nextSibling.previousSibling = previousSibling;\n      } else if (parent) {\n        parent.lastChild = previousSibling;\n      }\n      templateInfo.nextSibling = templateInfo.previousSibling = null;\n      // Remove stamped nodes\n      let nodes = templateInfo.childNodes;\n      for (let i=0; i<nodes.length; i++) {\n        let node = nodes[i];\n        wrap(wrap(node).parentNode).removeChild(node);\n      }\n    }\n\n    /**\n     * Overrides default `TemplateStamp` implementation to add support for\n     * parsing bindings from `TextNode`'s' `textContent`.  A `bindings`\n     * array is added to `nodeInfo` and populated with binding metadata\n     * with information capturing the binding target, and a `parts` array\n     * with one or more metadata objects capturing the source(s) of the\n     * binding.\n     *\n     * @param {Node} node Node to parse\n     * @param {TemplateInfo} templateInfo Template metadata for current template\n     * @param {NodeInfo} nodeInfo Node metadata for current template node\n     * @return {boolean} `true` if the visited node added node-specific\n     *   metadata to `nodeInfo`\n     * @protected\n     * @suppress {missingProperties} Interfaces in closure do not inherit statics, but classes do\n     * @nocollapse\n     */\n    static _parseTemplateNode(node, templateInfo, nodeInfo) {\n      // TODO(https://github.com/google/closure-compiler/issues/3240):\n      //     Change back to just super.methodCall()\n      let noted = propertyEffectsBase._parseTemplateNode.call(\n        this, node, templateInfo, nodeInfo);\n      if (node.nodeType === Node.TEXT_NODE) {\n        let parts = this._parseBindings(node.textContent, templateInfo);\n        if (parts) {\n          // Initialize the textContent with any literal parts\n          // NOTE: default to a space here so the textNode remains; some browsers\n          // (IE) omit an empty textNode following cloneNode/importNode.\n          node.textContent = literalFromParts(parts) || ' ';\n          addBinding(this, templateInfo, nodeInfo, 'text', 'textContent', parts);\n          noted = true;\n        }\n      }\n      return noted;\n    }\n\n    /**\n     * Overrides default `TemplateStamp` implementation to add support for\n     * parsing bindings from attributes.  A `bindings`\n     * array is added to `nodeInfo` and populated with binding metadata\n     * with information capturing the binding target, and a `parts` array\n     * with one or more metadata objects capturing the source(s) of the\n     * binding.\n     *\n     * @param {Element} node Node to parse\n     * @param {TemplateInfo} templateInfo Template metadata for current template\n     * @param {NodeInfo} nodeInfo Node metadata for current template node\n     * @param {string} name Attribute name\n     * @param {string} value Attribute value\n     * @return {boolean} `true` if the visited node added node-specific\n     *   metadata to `nodeInfo`\n     * @protected\n     * @suppress {missingProperties} Interfaces in closure do not inherit statics, but classes do\n     * @nocollapse\n     */\n    static _parseTemplateNodeAttribute(node, templateInfo, nodeInfo, name, value) {\n      let parts = this._parseBindings(value, templateInfo);\n      if (parts) {\n        // Attribute or property\n        let origName = name;\n        let kind = 'property';\n        // The only way we see a capital letter here is if the attr has\n        // a capital letter in it per spec. In this case, to make sure\n        // this binding works, we go ahead and make the binding to the attribute.\n        if (capitalAttributeRegex.test(name)) {\n          kind = 'attribute';\n        } else if (name[name.length-1] == '$') {\n          name = name.slice(0, -1);\n          kind = 'attribute';\n        }\n        // Initialize attribute bindings with any literal parts\n        let literal = literalFromParts(parts);\n        if (literal && kind == 'attribute') {\n          // Ensure a ShadyCSS template scoped style is not removed\n          // when a class$ binding's initial literal value is set.\n          if (name == 'class' && node.hasAttribute('class')) {\n            literal += ' ' + node.getAttribute(name);\n          }\n          node.setAttribute(name, literal);\n        }\n        // support disable-upgrade\n        if (kind == 'attribute' && origName == 'disable-upgrade$') {\n          node.setAttribute(name, '');\n        }\n        // Clear attribute before removing, since IE won't allow removing\n        // `value` attribute if it previously had a value (can't\n        // unconditionally set '' before removing since attributes with `$`\n        // can't be set using setAttribute)\n        if (node.localName === 'input' && origName === 'value') {\n          node.setAttribute(origName, '');\n        }\n        // Remove annotation\n        node.removeAttribute(origName);\n        // Case hackery: attributes are lower-case, but bind targets\n        // (properties) are case sensitive. Gambit is to map dash-case to\n        // camel-case: `foo-bar` becomes `fooBar`.\n        // Attribute bindings are excepted.\n        if (kind === 'property') {\n          name = dashToCamelCase(name);\n        }\n        addBinding(this, templateInfo, nodeInfo, kind, name, parts, literal);\n        return true;\n      } else {\n        // TODO(https://github.com/google/closure-compiler/issues/3240):\n        //     Change back to just super.methodCall()\n        return propertyEffectsBase._parseTemplateNodeAttribute.call(\n          this, node, templateInfo, nodeInfo, name, value);\n      }\n    }\n\n    /**\n     * Overrides default `TemplateStamp` implementation to add support for\n     * binding the properties that a nested template depends on to the template\n     * as `_host_<property>`.\n     *\n     * @param {Node} node Node to parse\n     * @param {TemplateInfo} templateInfo Template metadata for current template\n     * @param {NodeInfo} nodeInfo Node metadata for current template node\n     * @return {boolean} `true` if the visited node added node-specific\n     *   metadata to `nodeInfo`\n     * @protected\n     * @suppress {missingProperties} Interfaces in closure do not inherit statics, but classes do\n     * @nocollapse\n     */\n    static _parseTemplateNestedTemplate(node, templateInfo, nodeInfo) {\n      // TODO(https://github.com/google/closure-compiler/issues/3240):\n      //     Change back to just super.methodCall()\n      let noted = propertyEffectsBase._parseTemplateNestedTemplate.call(\n        this, node, templateInfo, nodeInfo);\n      const parent = node.parentNode;\n      const nestedTemplateInfo = nodeInfo.templateInfo;\n      const isDomIf = parent.localName === 'dom-if';\n      const isDomRepeat = parent.localName === 'dom-repeat';\n      // Remove nested template and redirect its host bindings & templateInfo\n      // onto the parent (dom-if/repeat element)'s nodeInfo\n      if (removeNestedTemplates && (isDomIf || isDomRepeat)) {\n        parent.removeChild(node);\n        // Use the parent's nodeInfo (for the dom-if/repeat) to record the\n        // templateInfo, and use that for any host property bindings below\n        nodeInfo = nodeInfo.parentInfo;\n        nodeInfo.templateInfo = nestedTemplateInfo;\n        // Ensure the parent dom-if/repeat is noted since it now may have host\n        // bindings; it may not have been if it did not have its own bindings\n        nodeInfo.noted = true;\n        noted = false;\n      }\n      // Merge host props into outer template and add bindings\n      let hostProps = nestedTemplateInfo.hostProps;\n      if (fastDomIf && isDomIf) {\n        // `fastDomIf` mode uses runtime-template stamping to add accessors/\n        // effects to properties used in its template; as such we don't need to\n        // tax the host element with `_host_` bindings for the `dom-if`.\n        // However, in the event it is nested in a `dom-repeat`, it is still\n        // important that its host properties are added to the\n        // TemplateInstance's `hostProps` so that they are forwarded to the\n        // TemplateInstance.\n        if (hostProps) {\n          templateInfo.hostProps =\n            Object.assign(templateInfo.hostProps || {}, hostProps);\n          // Ensure the dom-if is noted so that it has a __dataHost, since\n          // `fastDomIf` uses the host for runtime template stamping; note this\n          // was already ensured above in the `removeNestedTemplates` case\n          if (!removeNestedTemplates) {\n            nodeInfo.parentInfo.noted = true;\n          }\n        }\n      } else {\n        let mode = '{';\n        for (let source in hostProps) {\n          let parts = [{ mode, source, dependencies: [source], hostProp: true }];\n          addBinding(this, templateInfo, nodeInfo, 'property', '_host_' + source, parts);\n        }\n      }\n      return noted;\n    }\n\n    /**\n     * Called to parse text in a template (either attribute values or\n     * textContent) into binding metadata.\n     *\n     * Any overrides of this method should return an array of binding part\n     * metadata  representing one or more bindings found in the provided text\n     * and any \"literal\" text in between.  Any non-literal parts will be passed\n     * to `_evaluateBinding` when any dependencies change.  The only required\n     * fields of each \"part\" in the returned array are as follows:\n     *\n     * - `dependencies` - Array containing trigger metadata for each property\n     *   that should trigger the binding to update\n     * - `literal` - String containing text if the part represents a literal;\n     *   in this case no `dependencies` are needed\n     *\n     * Additional metadata for use by `_evaluateBinding` may be provided in\n     * each part object as needed.\n     *\n     * The default implementation handles the following types of bindings\n     * (one or more may be intermixed with literal strings):\n     * - Property binding: `[[prop]]`\n     * - Path binding: `[[object.prop]]`\n     * - Negated property or path bindings: `[[!prop]]` or `[[!object.prop]]`\n     * - Two-way property or path bindings (supports negation):\n     *   `{{prop}}`, `{{object.prop}}`, `{{!prop}}` or `{{!object.prop}}`\n     * - Inline computed method (supports negation):\n     *   `[[compute(a, 'literal', b)]]`, `[[!compute(a, 'literal', b)]]`\n     *\n     * The default implementation uses a regular expression for best\n     * performance. However, the regular expression uses a white-list of\n     * allowed characters in a data-binding, which causes problems for\n     * data-bindings that do use characters not in this white-list.\n     *\n     * Instead of updating the white-list with all allowed characters,\n     * there is a StrictBindingParser (see lib/mixins/strict-binding-parser)\n     * that uses a state machine instead. This state machine is able to handle\n     * all characters. However, it is slightly less performant, therefore we\n     * extracted it into a separate optional mixin.\n     *\n     * @param {string} text Text to parse from attribute or textContent\n     * @param {Object} templateInfo Current template metadata\n     * @return {Array<!BindingPart>} Array of binding part metadata\n     * @protected\n     * @nocollapse\n     */\n    static _parseBindings(text, templateInfo) {\n      let parts = [];\n      let lastIndex = 0;\n      let m;\n      // Example: \"literal1{{prop}}literal2[[!compute(foo,bar)]]final\"\n      // Regex matches:\n      //        Iteration 1:  Iteration 2:\n      // m[1]: '{{'          '[['\n      // m[2]: ''            '!'\n      // m[3]: 'prop'        'compute(foo,bar)'\n      while ((m = bindingRegex.exec(text)) !== null) {\n        // Add literal part\n        if (m.index > lastIndex) {\n          parts.push({literal: text.slice(lastIndex, m.index)});\n        }\n        // Add binding part\n        let mode = m[1][0];\n        let negate = Boolean(m[2]);\n        let source = m[3].trim();\n        let customEvent = false, notifyEvent = '', colon = -1;\n        if (mode == '{' && (colon = source.indexOf('::')) > 0) {\n          notifyEvent = source.substring(colon + 2);\n          source = source.substring(0, colon);\n          customEvent = true;\n        }\n        let signature = parseMethod(source);\n        let dependencies = [];\n        if (signature) {\n          // Inline computed function\n          let {args, methodName} = signature;\n          for (let i=0; i<args.length; i++) {\n            let arg = args[i];\n            if (!arg.literal) {\n              dependencies.push(arg);\n            }\n          }\n          let dynamicFns = templateInfo.dynamicFns;\n          if (dynamicFns && dynamicFns[methodName] || signature.static) {\n            dependencies.push(methodName);\n            signature.dynamicFn = true;\n          }\n        } else {\n          // Property or path\n          dependencies.push(source);\n        }\n        parts.push({\n          source, mode, negate, customEvent, signature, dependencies,\n          event: notifyEvent\n        });\n        lastIndex = bindingRegex.lastIndex;\n      }\n      // Add a final literal part\n      if (lastIndex && lastIndex < text.length) {\n        let literal = text.substring(lastIndex);\n        if (literal) {\n          parts.push({\n            literal: literal\n          });\n        }\n      }\n      if (parts.length) {\n        return parts;\n      } else {\n        return null;\n      }\n    }\n\n    /**\n     * Called to evaluate a previously parsed binding part based on a set of\n     * one or more changed dependencies.\n     *\n     * @param {!Polymer_PropertyEffects} inst Element that should be used as\n     *     scope for binding dependencies\n     * @param {BindingPart} part Binding part metadata\n     * @param {string} path Property/path that triggered this effect\n     * @param {Object} props Bag of current property changes\n     * @param {Object} oldProps Bag of previous values for changed properties\n     * @param {boolean} hasPaths True with `props` contains one or more paths\n     * @return {*} Value the binding part evaluated to\n     * @protected\n     * @nocollapse\n     */\n    static _evaluateBinding(inst, part, path, props, oldProps, hasPaths) {\n      let value;\n      if (part.signature) {\n        value = runMethodEffect(inst, path, props, oldProps, part.signature);\n      } else if (path != part.source) {\n        value = get(inst, part.source);\n      } else {\n        if (hasPaths && isPath(path)) {\n          value = get(inst, path);\n        } else {\n          value = inst.__data[path];\n        }\n      }\n      if (part.negate) {\n        value = !value;\n      }\n      return value;\n    }\n\n  }\n\n  return PropertyEffects;\n});\n\n/**\n * Stack for enqueuing client dom created by a host element.\n *\n * By default elements are flushed via `_flushProperties` when\n * `connectedCallback` is called. Elements attach their client dom to\n * themselves at `ready` time which results from this first flush.\n * This provides an ordering guarantee that the client dom an element\n * creates is flushed before the element itself (i.e. client `ready`\n * fires before host `ready`).\n *\n * However, if `_flushProperties` is called *before* an element is connected,\n * as for example `Templatize` does, this ordering guarantee cannot be\n * satisfied because no elements are connected. (Note: Bound elements that\n * receive data do become enqueued clients and are properly ordered but\n * unbound elements are not.)\n *\n * To maintain the desired \"client before host\" ordering guarantee for this\n * case we rely on the \"host stack. Client nodes registers themselves with\n * the creating host element when created. This ensures that all client dom\n * is readied in the proper order, maintaining the desired guarantee.\n *\n * @private\n */\nconst hostStack = [];\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Total number of Polymer element instances created.\n * @type {number}\n */\nexport let instanceCount = 0;\n\nexport function incrementInstanceCount() {\n  instanceCount++;\n}\n\n/**\n * Array of Polymer element classes that have been finalized.\n * @type {!Array<!PolymerElementConstructor>}\n */\nexport const registrations = [];\n\n/**\n * @param {!PolymerElementConstructor} prototype Element prototype to log\n * @private\n */\nfunction _regLog(prototype) {\n  console.log('[' + /** @type {?} */(prototype).is + ']: registered');\n}\n\n/**\n * Registers a class prototype for telemetry purposes.\n * @param {!PolymerElementConstructor} prototype Element prototype to register\n * @protected\n */\nexport function register(prototype) {\n  registrations.push(prototype);\n}\n\n/**\n * Logs all elements registered with an `is` to the console.\n * @public\n */\nexport function dumpRegistrations() {\n  registrations.forEach(_regLog);\n}","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '../utils/boot.js';\n\nimport { dedupingMixin } from '../utils/mixin.js';\nimport { register, incrementInstanceCount } from '../utils/telemetry.js';\nimport { PropertiesChanged } from './properties-changed.js';\n\n/**\n * Creates a copy of `props` with each property normalized such that\n * upgraded it is an object with at least a type property { type: Type}.\n *\n * @param {!Object} props Properties to normalize\n * @return {!Object} Copy of input `props` with normalized properties that\n * are in the form {type: Type}\n * @private\n */\nfunction normalizeProperties(props) {\n  const output = {};\n  for (let p in props) {\n    const o = props[p];\n    output[p] = (typeof o === 'function') ? {type: o} : o;\n  }\n  return output;\n}\n\n/**\n * Mixin that provides a minimal starting point to using the PropertiesChanged\n * mixin by providing a mechanism to declare properties in a static\n * getter (e.g. static get properties() { return { foo: String } }). Changes\n * are reported via the `_propertiesChanged` method.\n *\n * This mixin provides no specific support for rendering. Users are expected\n * to create a ShadowRoot and put content into it and update it in whatever\n * way makes sense. This can be done in reaction to properties changing by\n * implementing `_propertiesChanged`.\n *\n * @mixinFunction\n * @polymer\n * @appliesMixin PropertiesChanged\n * @summary Mixin that provides a minimal starting point for using\n * the PropertiesChanged mixin by providing a declarative `properties` object.\n * @template T\n * @param {function(new:T)} superClass Class to apply mixin to.\n * @return {function(new:T)} superClass with mixin applied.\n */\nexport const PropertiesMixin = dedupingMixin(superClass => {\n\n /**\n  * @constructor\n  * @implements {Polymer_PropertiesChanged}\n  * @private\n  */\n const base = PropertiesChanged(superClass);\n\n /**\n  * Returns the super class constructor for the given class, if it is an\n  * instance of the PropertiesMixin.\n  *\n  * @param {!PropertiesMixinConstructor} constructor PropertiesMixin constructor\n  * @return {?PropertiesMixinConstructor} Super class constructor\n  */\n function superPropertiesClass(constructor) {\n   const superCtor = Object.getPrototypeOf(constructor);\n\n   // Note, the `PropertiesMixin` class below only refers to the class\n   // generated by this call to the mixin; the instanceof test only works\n   // because the mixin is deduped and guaranteed only to apply once, hence\n   // all constructors in a proto chain will see the same `PropertiesMixin`\n   return (superCtor.prototype instanceof PropertiesMixin) ?\n     /** @type {!PropertiesMixinConstructor} */ (superCtor) : null;\n }\n\n /**\n  * Returns a memoized version of the `properties` object for the\n  * given class. Properties not in object format are converted to at\n  * least {type}.\n  *\n  * @param {PropertiesMixinConstructor} constructor PropertiesMixin constructor\n  * @return {Object} Memoized properties object\n  */\n function ownProperties(constructor) {\n   if (!constructor.hasOwnProperty(JSCompiler_renameProperty('__ownProperties', constructor))) {\n     let props = null;\n\n     if (constructor.hasOwnProperty(JSCompiler_renameProperty('properties', constructor))) {\n       const properties = constructor.properties;\n\n       if (properties) {\n        props = normalizeProperties(properties);\n       }\n     }\n\n     constructor.__ownProperties = props;\n   }\n   return constructor.__ownProperties;\n }\n\n /**\n  * @polymer\n  * @mixinClass\n  * @extends {base}\n  * @implements {Polymer_PropertiesMixin}\n  * @unrestricted\n  */\n class PropertiesMixin extends base {\n\n   /**\n    * Implements standard custom elements getter to observes the attributes\n    * listed in `properties`.\n    * @suppress {missingProperties} Interfaces in closure do not inherit statics, but classes do\n    * @nocollapse\n    */\n   static get observedAttributes() {\n     if (!this.hasOwnProperty(JSCompiler_renameProperty('__observedAttributes', this))) {\n       register(this.prototype);\n       const props = this._properties;\n       this.__observedAttributes = props ? Object.keys(props).map(p => this.prototype._addPropertyToAttributeMap(p)) : [];\n     }\n     return this.__observedAttributes;\n   }\n\n   /**\n    * Finalizes an element definition, including ensuring any super classes\n    * are also finalized. This includes ensuring property\n    * accessors exist on the element prototype. This method calls\n    * `_finalizeClass` to finalize each constructor in the prototype chain.\n    * @return {void}\n    * @nocollapse\n    */\n   static finalize() {\n     if (!this.hasOwnProperty(JSCompiler_renameProperty('__finalized', this))) {\n       const superCtor = superPropertiesClass(/** @type {!PropertiesMixinConstructor} */(this));\n       if (superCtor) {\n         superCtor.finalize();\n       }\n       this.__finalized = true;\n       this._finalizeClass();\n     }\n   }\n\n   /**\n    * Finalize an element class. This includes ensuring property\n    * accessors exist on the element prototype. This method is called by\n    * `finalize` and finalizes the class constructor.\n    *\n    * @protected\n    * @nocollapse\n    */\n   static _finalizeClass() {\n     const props = ownProperties(/** @type {!PropertiesMixinConstructor} */(this));\n     if (props) {\n       /** @type {?} */ (this).createProperties(props);\n     }\n   }\n\n   /**\n    * Returns a memoized version of all properties, including those inherited\n    * from super classes. Properties not in object format are converted to\n    * at least {type}.\n    *\n    * @return {Object} Object containing properties for this class\n    * @protected\n    * @nocollapse\n    */\n   static get _properties() {\n     if (!this.hasOwnProperty(\n       JSCompiler_renameProperty('__properties', this))) {\n       const superCtor = superPropertiesClass(/** @type {!PropertiesMixinConstructor} */(this));\n       this.__properties = Object.assign({},\n         superCtor && superCtor._properties,\n         ownProperties(/** @type {PropertiesMixinConstructor} */(this)));\n     }\n     return this.__properties;\n   }\n\n   /**\n    * Overrides `PropertiesChanged` method to return type specified in the\n    * static `properties` object for the given property.\n    * @param {string} name Name of property\n    * @return {*} Type to which to deserialize attribute\n    *\n    * @protected\n    * @nocollapse\n    */\n   static typeForProperty(name) {\n     const info = this._properties[name];\n     return info && info.type;\n   }\n\n   /**\n    * Overrides `PropertiesChanged` method and adds a call to\n    * `finalize` which lazily configures the element's property accessors.\n    * @override\n    * @return {void}\n    */\n   _initializeProperties() {\n     incrementInstanceCount();\n     this.constructor.finalize();\n     super._initializeProperties();\n   }\n\n   /**\n    * Called when the element is added to a document.\n    * Calls `_enableProperties` to turn on property system from\n    * `PropertiesChanged`.\n    * @suppress {missingProperties} Super may or may not implement the callback\n    * @return {void}\n    * @override\n    */\n   connectedCallback() {\n     if (super.connectedCallback) {\n       super.connectedCallback();\n     }\n     this._enableProperties();\n   }\n\n   /**\n    * Called when the element is removed from a document\n    * @suppress {missingProperties} Super may or may not implement the callback\n    * @return {void}\n    * @override\n    */\n   disconnectedCallback() {\n     if (super.disconnectedCallback) {\n       super.disconnectedCallback();\n     }\n   }\n\n }\n\n return PropertiesMixin;\n\n});\n","/**\n * @fileoverview\n * @suppress {checkPrototypalTypes}\n * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport '../utils/boot.js';\n\nimport { rootPath, strictTemplatePolicy, allowTemplateFromDomModule, legacyOptimizations, legacyWarnings, syncInitialRender, supportsAdoptingStyleSheets, useAdoptedStyleSheetsWithBuiltCSS } from '../utils/settings.js';\nimport { dedupingMixin } from '../utils/mixin.js';\nimport { stylesFromTemplate, stylesFromModuleImports } from '../utils/style-gather.js';\nimport { pathFromUrl, resolveCss, resolveUrl } from '../utils/resolve-url.js';\nimport { DomModule } from '../elements/dom-module.js';\nimport { PropertyEffects } from './property-effects.js';\nimport { PropertiesMixin } from './properties-mixin.js';\nimport { wrap } from '../utils/wrap.js';\n\n/**\n * Current Polymer version in Semver notation.\n * @type {string} Semver notation of the current version of Polymer.\n */\nexport const version = '3.5.2';\n\nexport const builtCSS = window.ShadyCSS && window.ShadyCSS['cssBuild'];\n\n/**\n * Element class mixin that provides the core API for Polymer's meta-programming\n * features including template stamping, data-binding, attribute deserialization,\n * and property change observation.\n *\n * Subclassers may provide the following static getters to return metadata\n * used to configure Polymer's features for the class:\n *\n * - `static get is()`: When the template is provided via a `dom-module`,\n *   users should return the `dom-module` id from a static `is` getter.  If\n *   no template is needed or the template is provided directly via the\n *   `template` getter, there is no need to define `is` for the element.\n *\n * - `static get template()`: Users may provide the template directly (as\n *   opposed to via `dom-module`) by implementing a static `template` getter.\n *   The getter must return an `HTMLTemplateElement`.\n *\n * - `static get properties()`: Should return an object describing\n *   property-related metadata used by Polymer features (key: property name\n *   value: object containing property metadata). Valid keys in per-property\n *   metadata include:\n *   - `type` (String|Number|Object|Array|...): Used by\n *     `attributeChangedCallback` to determine how string-based attributes\n *     are deserialized to JavaScript property values.\n *   - `notify` (boolean): Causes a change in the property to fire a\n *     non-bubbling event called `<property>-changed`. Elements that have\n *     enabled two-way binding to the property use this event to observe changes.\n *   - `readOnly` (boolean): Creates a getter for the property, but no setter.\n *     To set a read-only property, use the private setter method\n *     `_setProperty(property, value)`.\n *   - `observer` (string): Observer method name that will be called when\n *     the property changes. The arguments of the method are\n *     `(value, previousValue)`.\n *   - `computed` (string): String describing method and dependent properties\n *     for computing the value of this property (e.g. `'computeFoo(bar, zot)'`).\n *     Computed properties are read-only by default and can only be changed\n *     via the return value of the computing method.\n *\n * - `static get observers()`: Array of strings describing multi-property\n *   observer methods and their dependent properties (e.g.\n *   `'observeABC(a, b, c)'`).\n *\n * The base class provides default implementations for the following standard\n * custom element lifecycle callbacks; users may override these, but should\n * call the super method to ensure\n * - `constructor`: Run when the element is created or upgraded\n * - `connectedCallback`: Run each time the element is connected to the\n *   document\n * - `disconnectedCallback`: Run each time the element is disconnected from\n *   the document\n * - `attributeChangedCallback`: Run each time an attribute in\n *   `observedAttributes` is set or removed (note: this element's default\n *   `observedAttributes` implementation will automatically return an array\n *   of dash-cased attributes based on `properties`)\n *\n * @mixinFunction\n * @polymer\n * @appliesMixin PropertyEffects\n * @appliesMixin PropertiesMixin\n * @property rootPath {string} Set to the value of `rootPath`,\n *   which defaults to the main document path\n * @property importPath {string} Set to the value of the class's static\n *   `importPath` property, which defaults to the path of this element's\n *   `dom-module` (when `is` is used), but can be overridden for other\n *   import strategies.\n * @summary Element class mixin that provides the core API for Polymer's\n * meta-programming features.\n * @template T\n * @param {function(new:T)} superClass Class to apply mixin to.\n * @return {function(new:T)} superClass with mixin applied.\n */\nexport const ElementMixin = dedupingMixin(base => {\n  /**\n   * @constructor\n   * @implements {Polymer_PropertyEffects}\n   * @implements {Polymer_PropertiesMixin}\n   * @extends {HTMLElement}\n   * @private\n   */\n  const polymerElementBase = PropertiesMixin(PropertyEffects(base));\n\n  /**\n   * Returns a list of properties with default values.\n   * This list is created as an optimization since it is a subset of\n   * the list returned from `_properties`.\n   * This list is used in `_initializeProperties` to set property defaults.\n   *\n   * @param {PolymerElementConstructor} constructor Element class\n   * @return {PolymerElementProperties} Flattened properties for this class\n   *   that have default values\n   * @private\n   */\n  function propertyDefaults(constructor) {\n    if (!constructor.hasOwnProperty(\n      JSCompiler_renameProperty('__propertyDefaults', constructor))) {\n      constructor.__propertyDefaults = null;\n      let props = constructor._properties;\n      for (let p in props) {\n        let info = props[p];\n        if ('value' in info) {\n          constructor.__propertyDefaults = constructor.__propertyDefaults || {};\n          constructor.__propertyDefaults[p] = info;\n        }\n      }\n    }\n    return constructor.__propertyDefaults;\n  }\n\n  /**\n   * Returns a memoized version of the `observers` array.\n   * @param {PolymerElementConstructor} constructor Element class\n   * @return {Array} Array containing own observers for the given class\n   * @protected\n   */\n  function ownObservers(constructor) {\n    if (!constructor.hasOwnProperty(\n      JSCompiler_renameProperty('__ownObservers', constructor))) {\n      constructor.__ownObservers =\n          constructor.hasOwnProperty(\n              JSCompiler_renameProperty('observers', constructor)) ?\n          /** @type {PolymerElementConstructor} */ (constructor).observers :\n          null;\n    }\n    return constructor.__ownObservers;\n  }\n\n  /**\n   * Creates effects for a property.\n   *\n   * Note, once a property has been set to\n   * `readOnly`, `computed`, `reflectToAttribute`, or `notify`\n   * these values may not be changed. For example, a subclass cannot\n   * alter these settings. However, additional `observers` may be added\n   * by subclasses.\n   *\n   * The info object should contain property metadata as follows:\n   *\n   * * `type`: {function} type to which an attribute matching the property\n   * is deserialized. Note the property is camel-cased from a dash-cased\n   * attribute. For example, 'foo-bar' attribute is deserialized to a\n   * property named 'fooBar'.\n   *\n   * * `readOnly`: {boolean} creates a readOnly property and\n   * makes a private setter for the private of the form '_setFoo' for a\n   * property 'foo',\n   *\n   * * `computed`: {string} creates a computed property. A computed property\n   * is also automatically set to `readOnly: true`. The value is calculated\n   * by running a method and arguments parsed from the given string. For\n   * example 'compute(foo)' will compute a given property when the\n   * 'foo' property changes by executing the 'compute' method. This method\n   * must return the computed value.\n   *\n   * * `reflectToAttribute`: {boolean} If true, the property value is reflected\n   * to an attribute of the same name. Note, the attribute is dash-cased\n   * so a property named 'fooBar' is reflected as 'foo-bar'.\n   *\n   * * `notify`: {boolean} sends a non-bubbling notification event when\n   * the property changes. For example, a property named 'foo' sends an\n   * event named 'foo-changed' with `event.detail` set to the value of\n   * the property.\n   *\n   * * observer: {string} name of a method that runs when the property\n   * changes. The arguments of the method are (value, previousValue).\n   *\n   * Note: Users may want control over modifying property\n   * effects via subclassing. For example, a user might want to make a\n   * reflectToAttribute property not do so in a subclass. We've chosen to\n   * disable this because it leads to additional complication.\n   * For example, a readOnly effect generates a special setter. If a subclass\n   * disables the effect, the setter would fail unexpectedly.\n   * Based on feedback, we may want to try to make effects more malleable\n   * and/or provide an advanced api for manipulating them.\n   *\n   * @param {!PolymerElement} proto Element class prototype to add accessors\n   *   and effects to\n   * @param {string} name Name of the property.\n   * @param {Object} info Info object from which to create property effects.\n   * Supported keys:\n   * @param {Object} allProps Flattened map of all properties defined in this\n   *   element (including inherited properties)\n   * @return {void}\n   * @private\n   */\n  function createPropertyFromConfig(proto, name, info, allProps) {\n    // computed forces readOnly...\n    if (info.computed) {\n      info.readOnly = true;\n    }\n    // Note, since all computed properties are readOnly, this prevents\n    // adding additional computed property effects (which leads to a confusing\n    // setup where multiple triggers for setting a property)\n    // While we do have `hasComputedEffect` this is set on the property's\n    // dependencies rather than itself.\n    if (info.computed) {\n      if (proto._hasReadOnlyEffect(name)) {\n        console.warn(`Cannot redefine computed property '${name}'.`);\n      } else {\n        proto._createComputedProperty(name, info.computed, allProps);\n      }\n    }\n    if (info.readOnly && !proto._hasReadOnlyEffect(name)) {\n      proto._createReadOnlyProperty(name, !info.computed);\n    } else if (info.readOnly === false && proto._hasReadOnlyEffect(name)) {\n      console.warn(`Cannot make readOnly property '${name}' non-readOnly.`);\n    }\n    if (info.reflectToAttribute && !proto._hasReflectEffect(name)) {\n      proto._createReflectedProperty(name);\n    } else if (info.reflectToAttribute === false && proto._hasReflectEffect(name)) {\n      console.warn(`Cannot make reflected property '${name}' non-reflected.`);\n    }\n    if (info.notify && !proto._hasNotifyEffect(name)) {\n      proto._createNotifyingProperty(name);\n    } else if (info.notify === false && proto._hasNotifyEffect(name)) {\n      console.warn(`Cannot make notify property '${name}' non-notify.`);\n    }\n    // always add observer\n    if (info.observer) {\n      proto._createPropertyObserver(name, info.observer, allProps[info.observer]);\n    }\n    // always create the mapping from attribute back to property for deserialization.\n    proto._addPropertyToAttributeMap(name);\n  }\n\n  /**\n   * Process all style elements in the element template. Styles with the\n   * `include` attribute are processed such that any styles in\n   * the associated \"style modules\" are included in the element template.\n   * @param {PolymerElementConstructor} klass Element class\n   * @param {!HTMLTemplateElement} template Template to process\n   * @param {string} is Name of element\n   * @param {string} baseURI Base URI for element\n   * @private\n   */\n  function processElementStyles(klass, template, is, baseURI) {\n    if (!builtCSS) {\n      const templateStyles = template.content.querySelectorAll('style');\n      const stylesWithImports = stylesFromTemplate(template);\n      // insert styles from <link rel=\"import\" type=\"css\"> at the top of the template\n      const linkedStyles = stylesFromModuleImports(is);\n      const firstTemplateChild = template.content.firstElementChild;\n      for (let idx = 0; idx < linkedStyles.length; idx++) {\n        let s = linkedStyles[idx];\n        s.textContent = klass._processStyleText(s.textContent, baseURI);\n        template.content.insertBefore(s, firstTemplateChild);\n      }\n      // keep track of the last \"concrete\" style in the template we have encountered\n      let templateStyleIndex = 0;\n      // ensure all gathered styles are actually in this template.\n      for (let i = 0; i < stylesWithImports.length; i++) {\n        let s = stylesWithImports[i];\n        let templateStyle = templateStyles[templateStyleIndex];\n        // if the style is not in this template, it's been \"included\" and\n        // we put a clone of it in the template before the style that included it\n        if (templateStyle !== s) {\n          s = s.cloneNode(true);\n          templateStyle.parentNode.insertBefore(s, templateStyle);\n        } else {\n          templateStyleIndex++;\n        }\n        s.textContent = klass._processStyleText(s.textContent, baseURI);\n      }\n    }\n    if (window.ShadyCSS) {\n      window.ShadyCSS.prepareTemplate(template, is);\n    }\n    // Support for `adoptedStylesheets` relies on using native Shadow DOM\n    // and built CSS. Built CSS is required because runtime transformation of\n    // `@apply` is not supported. This is because ShadyCSS relies on being able\n    // to update a `style` element in the element template and this is\n    // removed when using `adoptedStyleSheets`.\n    // Note, it would be more efficient to allow style includes to become\n    // separate stylesheets; however, because of `@apply` these are\n    // potentially not shareable and sharing the ones that could be shared\n    // would require some coordination. To keep it simple, all the includes\n    // and styles are collapsed into a single shareable stylesheet.\n    if (useAdoptedStyleSheetsWithBuiltCSS && builtCSS &&\n        supportsAdoptingStyleSheets) {\n      // Remove styles in template and make a shareable stylesheet\n      const styles = template.content.querySelectorAll('style');\n      if (styles) {\n        let css = '';\n        Array.from(styles).forEach(s => {\n          css += s.textContent;\n          s.parentNode.removeChild(s);\n        });\n        klass._styleSheet = new CSSStyleSheet();\n        klass._styleSheet.replaceSync(css);\n      }\n    }\n  }\n\n  /**\n   * Look up template from dom-module for element\n   *\n   * @param {string} is Element name to look up\n   * @return {?HTMLTemplateElement|undefined} Template found in dom module, or\n   *   undefined if not found\n   * @protected\n   */\n  function getTemplateFromDomModule(is) {\n    let template = null;\n    // Under strictTemplatePolicy in 3.x+, dom-module lookup is only allowed\n    // when opted-in via allowTemplateFromDomModule\n    if (is && (!strictTemplatePolicy || allowTemplateFromDomModule)) {\n      template = /** @type {?HTMLTemplateElement} */ (\n          DomModule.import(is, 'template'));\n      // Under strictTemplatePolicy, require any element with an `is`\n      // specified to have a dom-module\n      if (strictTemplatePolicy && !template) {\n        throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${is}`);\n      }\n    }\n    return template;\n  }\n\n  /**\n   * @polymer\n   * @mixinClass\n   * @unrestricted\n   * @implements {Polymer_ElementMixin}\n   * @extends {polymerElementBase}\n   */\n  class PolymerElement extends polymerElementBase {\n\n    /**\n     * Current Polymer version in Semver notation.\n     * @type {string} Semver notation of the current version of Polymer.\n     * @nocollapse\n     */\n    static get polymerElementVersion() {\n      return version;\n    }\n\n    /**\n     * Override of PropertiesMixin _finalizeClass to create observers and\n     * find the template.\n     * @return {void}\n     * @protected\n     * @suppress {missingProperties} Interfaces in closure do not inherit statics, but classes do\n     * @nocollapse\n     */\n    static _finalizeClass() {\n      // TODO(https://github.com/google/closure-compiler/issues/3240):\n      //     Change back to just super.methodCall()\n      polymerElementBase._finalizeClass.call(this);\n      const observers = ownObservers(this);\n      if (observers) {\n        this.createObservers(observers, this._properties);\n      }\n      this._prepareTemplate();\n    }\n\n    /** @nocollapse */\n    static _prepareTemplate() {\n      // note: create \"working\" template that is finalized at instance time\n      let template = /** @type {PolymerElementConstructor} */ (this).template;\n      if (template) {\n        if (typeof template === 'string') {\n          console.error('template getter must return HTMLTemplateElement');\n          template = null;\n        } else if (!legacyOptimizations) {\n          template = template.cloneNode(true);\n        }\n      }\n\n      /** @override */\n      this.prototype._template = template;\n    }\n\n    /**\n     * Override of PropertiesChanged createProperties to create accessors\n     * and property effects for all of the properties.\n     * @param {!Object} props .\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createProperties(props) {\n      for (let p in props) {\n        createPropertyFromConfig(\n            /** @type {?} */ (this.prototype), p, props[p], props);\n      }\n    }\n\n    /**\n     * Creates observers for the given `observers` array.\n     * Leverages `PropertyEffects` to create observers.\n     * @param {Object} observers Array of observer descriptors for\n     *   this class\n     * @param {Object} dynamicFns Object containing keys for any properties\n     *   that are functions and should trigger the effect when the function\n     *   reference is changed\n     * @return {void}\n     * @protected\n     * @nocollapse\n     */\n    static createObservers(observers, dynamicFns) {\n      const proto = this.prototype;\n      for (let i=0; i < observers.length; i++) {\n        proto._createMethodObserver(observers[i], dynamicFns);\n      }\n    }\n\n    /**\n     * Returns the template that will be stamped into this element's shadow root.\n     *\n     * If a `static get is()` getter is defined, the default implementation will\n     * return the first `<template>` in a `dom-module` whose `id` matches this\n     * element's `is` (note that a `_template` property on the class prototype\n     * takes precedence over the `dom-module` template, to maintain legacy\n     * element semantics; a subclass will subsequently fall back to its super\n     * class template if neither a `prototype._template` or a `dom-module` for\n     * the class's `is` was found).\n     *\n     * Users may override this getter to return an arbitrary template\n     * (in which case the `is` getter is unnecessary). The template returned\n     * must be an `HTMLTemplateElement`.\n     *\n     * Note that when subclassing, if the super class overrode the default\n     * implementation and the subclass would like to provide an alternate\n     * template via a `dom-module`, it should override this getter and\n     * return `DomModule.import(this.is, 'template')`.\n     *\n     * If a subclass would like to modify the super class template, it should\n     * clone it rather than modify it in place.  If the getter does expensive\n     * work such as cloning/modifying a template, it should memoize the\n     * template for maximum performance:\n     *\n     *   let memoizedTemplate;\n     *   class MySubClass extends MySuperClass {\n     *     static get template() {\n     *       if (!memoizedTemplate) {\n     *         memoizedTemplate = super.template.cloneNode(true);\n     *         let subContent = document.createElement('div');\n     *         subContent.textContent = 'This came from MySubClass';\n     *         memoizedTemplate.content.appendChild(subContent);\n     *       }\n     *       return memoizedTemplate;\n     *     }\n     *   }\n     *\n     * @return {!HTMLTemplateElement|string} Template to be stamped\n     * @nocollapse\n     */\n    static get template() {\n      // Explanation of template-related properties:\n      // - constructor.template (this getter): the template for the class.\n      //     This can come from the prototype (for legacy elements), from a\n      //     dom-module, or from the super class's template (or can be overridden\n      //     altogether by the user)\n      // - constructor._template: memoized version of constructor.template\n      // - prototype._template: working template for the element, which will be\n      //     parsed and modified in place. It is a cloned version of\n      //     constructor.template, saved in _finalizeClass(). Note that before\n      //     this getter is called, for legacy elements this could be from a\n      //     _template field on the info object passed to Polymer(), a behavior,\n      //     or set in registered(); once the static getter runs, a clone of it\n      //     will overwrite it on the prototype as the working template.\n      if (!this.hasOwnProperty(JSCompiler_renameProperty('_template', this))) {\n        let protoTemplate = this.prototype.hasOwnProperty(\n          JSCompiler_renameProperty('_template', this.prototype)) ?\n          this.prototype._template : undefined;\n        // Accept a function for the legacy Polymer({_template:...}) field for\n        // lazy parsing\n        if (typeof protoTemplate === 'function') {\n          protoTemplate = protoTemplate();\n        }\n        this._template =\n          // If user has put template on prototype (e.g. in legacy via registered\n          // callback or info object), prefer that first. Note that `null` is\n          // used as a sentinel to indicate \"no template\" and can be used to\n          // override a super template, whereas `undefined` is used as a\n          // sentinel to mean \"fall-back to default template lookup\" via\n          // dom-module and/or super.template.\n          protoTemplate !== undefined ? protoTemplate :\n          // Look in dom-module associated with this element's is\n          ((this.hasOwnProperty(JSCompiler_renameProperty('is', this)) &&\n          (getTemplateFromDomModule(/** @type {PolymerElementConstructor}*/ (this).is))) ||\n          // Next look for superclass template (call the super impl this\n          // way so that `this` points to the superclass)\n          Object.getPrototypeOf(/** @type {PolymerElementConstructor}*/ (this).prototype).constructor.template);\n      }\n      return this._template;\n    }\n\n    /**\n     * Set the template.\n     *\n     * @param {!HTMLTemplateElement|string} value Template to set.\n     * @nocollapse\n     */\n    static set template(value) {\n      this._template = value;\n    }\n\n    /**\n     * Path matching the url from which the element was imported.\n     *\n     * This path is used to resolve url's in template style cssText.\n     * The `importPath` property is also set on element instances and can be\n     * used to create bindings relative to the import path.\n     *\n     * For elements defined in ES modules, users should implement\n     * `static get importMeta() { return import.meta; }`, and the default\n     * implementation of `importPath` will  return `import.meta.url`'s path.\n     * For elements defined in HTML imports, this getter will return the path\n     * to the document containing a `dom-module` element matching this\n     * element's static `is` property.\n     *\n     * Note, this path should contain a trailing `/`.\n     *\n     * @return {string} The import path for this element class\n     * @suppress {missingProperties}\n     * @nocollapse\n     */\n    static get importPath() {\n      if (!this.hasOwnProperty(JSCompiler_renameProperty('_importPath', this))) {\n        const meta = this.importMeta;\n        if (meta) {\n          this._importPath = pathFromUrl(meta.url);\n        } else {\n          const module = DomModule.import(/** @type {PolymerElementConstructor} */ (this).is);\n          this._importPath = (module && module.assetpath) ||\n            Object.getPrototypeOf(/** @type {PolymerElementConstructor}*/ (this).prototype).constructor.importPath;\n        }\n      }\n      return this._importPath;\n    }\n\n    constructor() {\n      super();\n      /** @type {HTMLTemplateElement} */\n      this._template;\n      /** @type {string} */\n      this._importPath;\n      /** @type {string} */\n      this.rootPath;\n      /** @type {string} */\n      this.importPath;\n      /** @type {StampedTemplate | HTMLElement | ShadowRoot} */\n      this.root;\n      /** @type {!Object<string, !Element>} */\n      this.$;\n    }\n\n    /**\n     * Overrides the default `PropertyAccessors` to ensure class\n     * metaprogramming related to property accessors and effects has\n     * completed (calls `finalize`).\n     *\n     * It also initializes any property defaults provided via `value` in\n     * `properties` metadata.\n     *\n     * @return {void}\n     * @override\n     * @suppress {invalidCasts,missingProperties} go/missingfnprops\n     */\n    _initializeProperties() {\n      this.constructor.finalize();\n      // note: finalize template when we have access to `localName` to\n      // avoid dependence on `is` for polyfilling styling.\n      this.constructor._finalizeTemplate(/** @type {!HTMLElement} */(this).localName);\n      super._initializeProperties();\n      // set path defaults\n      this.rootPath = rootPath;\n      this.importPath = this.constructor.importPath;\n      // apply property defaults...\n      let p$ = propertyDefaults(this.constructor);\n      if (!p$) {\n        return;\n      }\n      for (let p in p$) {\n        let info = p$[p];\n        if (this._canApplyPropertyDefault(p)) {\n          let value = typeof info.value == 'function' ?\n            info.value.call(this) :\n            info.value;\n          // Set via `_setProperty` if there is an accessor, to enable\n          // initializing readOnly property defaults\n          if (this._hasAccessor(p)) {\n            this._setPendingProperty(p, value, true);\n          } else {\n            this[p] = value;\n          }\n        }\n      }\n    }\n\n    /**\n     * Determines if a property dfeault can be applied. For example, this\n     * prevents a default from being applied when a property that has no\n     * accessor is overridden by its host before upgrade (e.g. via a binding).\n     * @override\n     * @param {string} property Name of the property\n     * @return {boolean} Returns true if the property default can be applied.\n     */\n    _canApplyPropertyDefault(property) {\n      return !this.hasOwnProperty(property);\n    }\n\n    /**\n     * Gather style text for a style element in the template.\n     *\n     * @param {string} cssText Text containing styling to process\n     * @param {string} baseURI Base URI to rebase CSS paths against\n     * @return {string} The processed CSS text\n     * @protected\n     * @nocollapse\n     */\n    static _processStyleText(cssText, baseURI) {\n      return resolveCss(cssText, baseURI);\n    }\n\n    /**\n    * Configures an element `proto` to function with a given `template`.\n    * The element name `is` and extends `ext` must be specified for ShadyCSS\n    * style scoping.\n    *\n    * @param {string} is Tag name (or type extension name) for this element\n    * @return {void}\n    * @protected\n    * @nocollapse\n    */\n    static _finalizeTemplate(is) {\n      /** @const {HTMLTemplateElement} */\n      const template = this.prototype._template;\n      if (template && !template.__polymerFinalized) {\n        template.__polymerFinalized = true;\n        const importPath = this.importPath;\n        const baseURI = importPath ? resolveUrl(importPath) : '';\n        // e.g. support `include=\"module-name\"`, and ShadyCSS\n        processElementStyles(this, template, is, baseURI);\n        this.prototype._bindTemplate(template);\n      }\n    }\n\n    /**\n     * Provides a default implementation of the standard Custom Elements\n     * `connectedCallback`.\n     *\n     * The default implementation enables the property effects system and\n     * flushes any pending properties, and updates shimmed CSS properties\n     * when using the ShadyCSS scoping/custom properties polyfill.\n     *\n     * @override\n     * @suppress {missingProperties, invalidCasts} Super may or may not\n     *     implement the callback\n     * @return {void}\n     */\n    connectedCallback() {\n      if (window.ShadyCSS && this._template) {\n        window.ShadyCSS.styleElement(/** @type {!HTMLElement} */(this));\n      }\n      super.connectedCallback();\n    }\n\n    /**\n     * Stamps the element template.\n     *\n     * @return {void}\n     * @override\n     */\n    ready() {\n      if (this._template) {\n        this.root = this._stampTemplate(this._template);\n        this.$ = this.root.$;\n      }\n      super.ready();\n    }\n\n    /**\n     * Implements `PropertyEffects`'s `_readyClients` call. Attaches\n     * element dom by calling `_attachDom` with the dom stamped from the\n     * element's template via `_stampTemplate`. Note that this allows\n     * client dom to be attached to the element prior to any observers\n     * running.\n     *\n     * @return {void}\n     * @override\n     */\n    _readyClients() {\n      if (this._template) {\n        this.root = this._attachDom(/** @type {StampedTemplate} */(this.root));\n      }\n      // The super._readyClients here sets the clients initialized flag.\n      // We must wait to do this until after client dom is created/attached\n      // so that this flag can be checked to prevent notifications fired\n      // during this process from being handled before clients are ready.\n      super._readyClients();\n    }\n\n\n    /**\n     * Attaches an element's stamped dom to itself. By default,\n     * this method creates a `shadowRoot` and adds the dom to it.\n     * However, this method may be overridden to allow an element\n     * to put its dom in another location.\n     *\n     * @override\n     * @throws {Error}\n     * @suppress {missingReturn}\n     * @param {StampedTemplate} dom to attach to the element.\n     * @return {ShadowRoot} node to which the dom has been attached.\n     */\n    _attachDom(dom) {\n      const n = wrap(this);\n      if (n.attachShadow) {\n        if (dom) {\n          if (!n.shadowRoot) {\n            n.attachShadow({mode: 'open', shadyUpgradeFragment: dom});\n            n.shadowRoot.appendChild(dom);\n            // When `adoptedStyleSheets` is supported a stylesheet is made\n            // available on the element constructor.\n            if (this.constructor._styleSheet) {\n              n.shadowRoot.adoptedStyleSheets = [this.constructor._styleSheet];\n            }\n          }\n          if (syncInitialRender && window.ShadyDOM) {\n            window.ShadyDOM.flushInitial(n.shadowRoot);\n          }\n          return n.shadowRoot;\n        }\n        return null;\n      } else {\n        throw new Error('ShadowDOM not available. ' +\n          // TODO(sorvell): move to compile-time conditional when supported\n        'PolymerElement can create dom as children instead of in ' +\n        'ShadowDOM by setting `this.root = this;\\` before \\`ready\\`.');\n      }\n    }\n\n    /**\n     * When using the ShadyCSS scoping and custom property shim, causes all\n     * shimmed styles in this element (and its subtree) to be updated\n     * based on current custom property values.\n     *\n     * The optional parameter overrides inline custom property styles with an\n     * object of properties where the keys are CSS properties, and the values\n     * are strings.\n     *\n     * Example: `this.updateStyles({'--color': 'blue'})`\n     *\n     * These properties are retained unless a value of `null` is set.\n     *\n     * Note: This function does not support updating CSS mixins.\n     * You can not dynamically change the value of an `@apply`.\n     *\n     * @override\n     * @param {Object=} properties Bag of custom property key/values to\n     *   apply to this element.\n     * @return {void}\n     * @suppress {invalidCasts}\n     */\n    updateStyles(properties) {\n      if (window.ShadyCSS) {\n        window.ShadyCSS.styleSubtree(/** @type {!HTMLElement} */(this), properties);\n      }\n    }\n\n    /**\n     * Rewrites a given URL relative to a base URL. The base URL defaults to\n     * the original location of the document containing the `dom-module` for\n     * this element. This method will return the same URL before and after\n     * bundling.\n     *\n     * Note that this function performs no resolution for URLs that start\n     * with `/` (absolute URLs) or `#` (hash identifiers).  For general purpose\n     * URL resolution, use `window.URL`.\n     *\n     * @override\n     * @param {string} url URL to resolve.\n     * @param {string=} base Optional base URL to resolve against, defaults\n     * to the element's `importPath`\n     * @return {string} Rewritten URL relative to base\n     */\n    resolveUrl(url, base) {\n      if (!base && this.importPath) {\n        base = resolveUrl(this.importPath);\n      }\n      return resolveUrl(url, base);\n    }\n\n    /**\n     * Overrides `PropertyEffects` to add map of dynamic functions on\n     * template info, for consumption by `PropertyEffects` template binding\n     * code. This map determines which method templates should have accessors\n     * created for them.\n     *\n     * @param {!HTMLTemplateElement} template Template\n     * @param {!TemplateInfo} templateInfo Template metadata for current template\n     * @param {!NodeInfo} nodeInfo Node metadata for current template.\n     * @return {boolean} .\n     * @suppress {missingProperties} Interfaces in closure do not inherit statics, but classes do\n     * @nocollapse\n     */\n    static _parseTemplateContent(template, templateInfo, nodeInfo) {\n      templateInfo.dynamicFns = templateInfo.dynamicFns || this._properties;\n      // TODO(https://github.com/google/closure-compiler/issues/3240):\n      //     Change back to just super.methodCall()\n      return polymerElementBase._parseTemplateContent.call(\n        this, template, templateInfo, nodeInfo);\n    }\n\n    /**\n     * Overrides `PropertyEffects` to warn on use of undeclared properties in\n     * template.\n     *\n     * @param {Object} templateInfo Template metadata to add effect to\n     * @param {string} prop Property that should trigger the effect\n     * @param {Object=} effect Effect metadata object\n     * @return {void}\n     * @protected\n     * @suppress {missingProperties} Interfaces in closure do not inherit statics, but classes do\n     * @nocollapse\n     */\n    static _addTemplatePropertyEffect(templateInfo, prop, effect) {\n      // Warn if properties are used in template without being declared.\n      // Properties must be listed in `properties` to be included in\n      // `observedAttributes` since CE V1 reads that at registration time, and\n      // since we want to keep template parsing lazy, we can't automatically\n      // add undeclared properties used in templates to `observedAttributes`.\n      // The warning is only enabled in `legacyOptimizations` mode, since\n      // we don't want to spam existing users who might have adopted the\n      // shorthand when attribute deserialization is not important.\n      if (legacyWarnings && !(prop in this._properties) &&\n          // Methods used in templates with no dependencies (or only literal\n          // dependencies) become accessors with template effects; ignore these\n          !(effect.info.part.signature && effect.info.part.signature.static) &&\n          // Warnings for bindings added to nested templates are handled by\n          // templatizer so ignore both the host-to-template bindings\n          // (`hostProp`) and TemplateInstance-to-child bindings\n          // (`nestedTemplate`)\n          !effect.info.part.hostProp && !templateInfo.nestedTemplate) {\n        console.warn(`Property '${prop}' used in template but not declared in 'properties'; ` +\n          `attribute will not be observed.`);\n      }\n      // TODO(https://github.com/google/closure-compiler/issues/3240):\n      //     Change back to just super.methodCall()\n      return polymerElementBase._addTemplatePropertyEffect.call(\n        this, templateInfo, prop, effect);\n    }\n\n  }\n\n  return PolymerElement;\n});\n\n/**\n * When using the ShadyCSS scoping and custom property shim, causes all\n * shimmed `styles` (via `custom-style`) in the document (and its subtree)\n * to be updated based on current custom property values.\n *\n * The optional parameter overrides inline custom property styles with an\n * object of properties where the keys are CSS properties, and the values\n * are strings.\n *\n * Example: `updateStyles({'--color': 'blue'})`\n *\n * These properties are retained unless a value of `null` is set.\n *\n * @param {Object=} props Bag of custom property key/values to\n *   apply to the document.\n * @return {void}\n */\nexport const updateStyles = function(props) {\n  if (window.ShadyCSS) {\n    window.ShadyCSS.styleDocument(props);\n  }\n};\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport './boot.js';\n\n/**\n * Our TrustedTypePolicy for HTML which is declared using the Polymer html\n * template tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n *\n * @type {!TrustedTypePolicy|undefined}\n */\nconst policy = window.trustedTypes &&\n    trustedTypes.createPolicy('polymer-html-literal', {createHTML: (s) => s});\n\n/**\n * Class representing a static string value which can be used to filter\n * strings by asseting that they have been created via this class. The\n * `value` property returns the string passed to the constructor.\n */\nclass LiteralString {\n  /**\n   * @param {!ITemplateArray} strings Constant parts of tagged template literal\n   * @param {!Array<*>} values Variable parts of tagged template literal\n   */\n  constructor(strings, values) {\n    assertValidTemplateStringParameters(strings, values);\n    const string = values.reduce(\n        (acc, v, idx) => acc + literalValue(v) + strings[idx + 1], strings[0]);\n    /** @type {string} */\n    this.value = string.toString();\n  }\n  /**\n   * @return {string} LiteralString string value\n   * @override\n   */\n  toString() {\n    return this.value;\n  }\n}\n\n/**\n * @param {*} value Object to stringify into HTML\n * @return {string} HTML stringified form of `obj`\n */\nfunction literalValue(value) {\n  if (value instanceof LiteralString) {\n    return /** @type {!LiteralString} */(value).value;\n  } else {\n    throw new Error(\n        `non-literal value passed to Polymer's htmlLiteral function: ${value}`\n    );\n  }\n}\n\n/**\n * @param {*} value Object to stringify into HTML\n * @return {string} HTML stringified form of `obj`\n */\nfunction htmlValue(value) {\n  if (value instanceof HTMLTemplateElement) {\n    // This might be an mXSS risk  mainly in the case where this template\n    // contains untrusted content that was believed to be sanitized.\n    // However we can't just use the XMLSerializer here because it misencodes\n    // `>` characters inside style tags.\n    // For an example of an actual case that hit this encoding issue,\n    // see b/198592167\n    return /** @type {!HTMLTemplateElement } */(value).innerHTML;\n  } else if (value instanceof LiteralString) {\n    return literalValue(value);\n  } else {\n    throw new Error(\n        `non-template value passed to Polymer's html function: ${value}`);\n  }\n}\n\n/**\n * A template literal tag that creates an HTML <template> element from the\n * contents of the string.\n *\n * This allows you to write a Polymer Template in JavaScript.\n *\n * Templates can be composed by interpolating `HTMLTemplateElement`s in\n * expressions in the JavaScript template literal. The nested template's\n * `innerHTML` is included in the containing template.  The only other\n * values allowed in expressions are those returned from `htmlLiteral`\n * which ensures only literal values from JS source ever reach the HTML, to\n * guard against XSS risks.\n *\n * All other values are disallowed in expressions to help prevent XSS\n * attacks; however, `htmlLiteral` can be used to compose static\n * string values into templates. This is useful to compose strings into\n * places that do not accept html, like the css text of a `style`\n * element.\n *\n * Example:\n *\n *     static get template() {\n *       return html`\n *         <style>:host{ content:\"...\" }</style>\n *         <div class=\"shadowed\">${this.partialTemplate}</div>\n *         ${super.template}\n *       `;\n *     }\n *     static get partialTemplate() { return html`<span>Partial!</span>`; }\n *\n * @param {!ITemplateArray} strings Constant parts of tagged template literal\n * @param {...*} values Variable parts of tagged template literal\n * @return {!HTMLTemplateElement} Constructed HTMLTemplateElement\n */\nexport const html = function html(strings, ...values) {\n  assertValidTemplateStringParameters(strings, values);\n  const template =\n      /** @type {!HTMLTemplateElement} */ (document.createElement('template'));\n  let value = values.reduce(\n      (acc, v, idx) => acc + htmlValue(v) + strings[idx + 1], strings[0]);\n  if (policy) {\n    value = policy.createHTML(value);\n  }\n  template.innerHTML = value;\n  return template;\n};\n\n/**\n * @param {!ITemplateArray} strings Constant parts of tagged template literal\n * @param {!Array<*>} values Array of values from quasis\n */\nconst assertValidTemplateStringParameters = (strings, values) => {\n  // Note: if/when https://github.com/tc39/proposal-array-is-template-object\n  // is standardized, use that instead when available, as it can perform an\n  // unforgable check (though of course, the function itself can be forged).\n  if (!Array.isArray(strings) || !Array.isArray(strings.raw) ||\n      (values.length !== strings.length - 1)) {\n    // This is either caused by a browser bug, a compiler bug, or someone\n    // calling the html template tag function as a regular function.\n    //\n    throw new TypeError('Invalid call to the html template tag');\n  }\n};\n\n/**\n * An html literal tag that can be used with `html` to compose.\n * a literal string.\n *\n * Example:\n *\n *     static get template() {\n *       return html`\n *         <style>\n *           :host { display: block; }\n *           ${this.styleTemplate()}\n *         </style>\n *         <div class=\"shadowed\">${staticValue}</div>\n *         ${super.template}\n *       `;\n *     }\n *     static get styleTemplate() {\n *        return htmlLiteral`.shadowed { background: gray; }`;\n *     }\n *\n * @param {!ITemplateArray} strings Constant parts of tagged template literal\n * @param {...*} values Variable parts of tagged template literal\n * @return {!LiteralString} Constructed literal string\n */\nexport const htmlLiteral = function(strings, ...values) {\n  return new LiteralString(strings, values);\n};\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport { ElementMixin, version } from './lib/mixins/element-mixin.js';\nexport { html } from './lib/utils/html-tag.js';\n\nexport { version };\n\n/**\n * Base class that provides the core API for Polymer's meta-programming\n * features including template stamping, data-binding, attribute deserialization,\n * and property change observation.\n *\n * @customElement\n * @polymer\n * @constructor\n * @implements {Polymer_ElementMixin}\n * @extends HTMLElement\n * @appliesMixin ElementMixin\n * @summary Custom element base class that provides the core API for Polymer's\n *   key meta-programming features including template stamping, data-binding,\n *   attribute deserialization, and property change observation\n */\nexport const PolymerElement = ElementMixin(HTMLElement);\n","const appliedClassMixins = new WeakMap();\n\n/** Vefify if the Mixin was previously applyed\n * @private\n * @param {function} mixin      Mixin being applyed\n * @param {object} superClass   Class receiving the new mixin\n * @returns {boolean}\n */\nfunction wasMixinPreviouslyApplied(mixin, superClass) {\n  let klass = superClass;\n  while (klass) {\n    if (appliedClassMixins.get(klass) === mixin) {\n      return true;\n    }\n    klass = Object.getPrototypeOf(klass);\n  }\n  return false;\n}\n\n/** Apply each mixin in the chain to make sure they are not applied more than once to the final class.\n * @export\n * @param {function} mixin      Mixin to be applyed\n * @returns {object}            Mixed class with mixin applied\n */\nexport function dedupeMixin(mixin) {\n  return superClass => {\n    if (wasMixinPreviouslyApplied(mixin, superClass)) {\n      return superClass;\n    }\n    const mixedClass = mixin(superClass);\n    appliedClassMixins.set(mixedClass, mixin);\n    return mixedClass;\n  };\n}\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { dedupeMixin } from '@open-wc/dedupe-mixin';\n\n/**\n * @typedef ReactiveController\n * @type {import('lit').ReactiveController}\n */\n\n/**\n * A mixin for connecting controllers to the element.\n *\n * @polymerMixin\n */\nexport const ControllerMixin = dedupeMixin((superClass) => {\n  // If the superclass extends from LitElement,\n  // use its own controllers implementation.\n  if (typeof superClass.prototype.addController === 'function') {\n    return superClass;\n  }\n\n  return class ControllerMixinClass extends superClass {\n    constructor() {\n      super();\n\n      /**\n       * @type {Set<ReactiveController>}\n       */\n      this.__controllers = new Set();\n    }\n\n    /** @protected */\n    connectedCallback() {\n      super.connectedCallback();\n\n      this.__controllers.forEach((c) => {\n        if (c.hostConnected) {\n          c.hostConnected();\n        }\n      });\n    }\n\n    /** @protected */\n    disconnectedCallback() {\n      super.disconnectedCallback();\n\n      this.__controllers.forEach((c) => {\n        if (c.hostDisconnected) {\n          c.hostDisconnected();\n        }\n      });\n    }\n\n    /**\n     * Registers a controller to participate in the element update cycle.\n     *\n     * @param {ReactiveController} controller\n     * @protected\n     */\n    addController(controller) {\n      this.__controllers.add(controller);\n      // Call hostConnected if a controller is added after the element is attached.\n      if (this.$ !== undefined && this.isConnected && controller.hostConnected) {\n        controller.hostConnected();\n      }\n    }\n\n    /**\n     * Removes a controller from the element.\n     *\n     * @param {ReactiveController} controller\n     * @protected\n     */\n    removeController(controller) {\n      this.__controllers.delete(controller);\n    }\n  };\n});\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*[\\*!]\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /*! vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.2';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @fileoverview\n *\n * This module provides a number of strategies for enqueuing asynchronous\n * tasks. Each sub-module provides a standard `run(fn)` interface that returns a\n * handle, and a `cancel(handle)` interface for canceling async tasks before\n * they run.\n *\n * @summary Module that provides a number of strategies for enqueuing\n * asynchronous tasks.\n */\n\nlet microtaskCurrHandle = 0;\nlet microtaskLastHandle = 0;\nconst microtaskCallbacks = [];\nlet microtaskScheduled = false;\n\nfunction microtaskFlush() {\n  microtaskScheduled = false;\n  const len = microtaskCallbacks.length;\n  for (let i = 0; i < len; i++) {\n    const cb = microtaskCallbacks[i];\n    if (cb) {\n      try {\n        cb();\n      } catch (e) {\n        setTimeout(() => {\n          throw e;\n        });\n      }\n    }\n  }\n  microtaskCallbacks.splice(0, len);\n  microtaskLastHandle += len;\n}\n\n/**\n * Async interface wrapper around `setTimeout`.\n *\n * @namespace\n * @summary Async interface wrapper around `setTimeout`.\n */\nconst timeOut = {\n  /**\n   * Returns a sub-module with the async interface providing the provided\n   * delay.\n   *\n   * @memberof timeOut\n   * @param {number=} delay Time to wait before calling callbacks in ms\n   * @return {!AsyncInterface} An async timeout interface\n   */\n  after(delay) {\n    return {\n      run(fn) {\n        return window.setTimeout(fn, delay);\n      },\n      cancel(handle) {\n        window.clearTimeout(handle);\n      },\n    };\n  },\n  /**\n   * Enqueues a function called in the next task.\n   *\n   * @memberof timeOut\n   * @param {!Function} fn Callback to run\n   * @param {number=} delay Delay in milliseconds\n   * @return {number} Handle used for canceling task\n   */\n  run(fn, delay) {\n    return window.setTimeout(fn, delay);\n  },\n  /**\n   * Cancels a previously enqueued `timeOut` callback.\n   *\n   * @memberof timeOut\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    window.clearTimeout(handle);\n  },\n};\nexport { timeOut };\n\n/**\n * Async interface wrapper around `requestAnimationFrame`.\n *\n * @namespace\n * @summary Async interface wrapper around `requestAnimationFrame`.\n */\nconst animationFrame = {\n  /**\n   * Enqueues a function called at `requestAnimationFrame` timing.\n   *\n   * @memberof animationFrame\n   * @param {function(number):void} fn Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(fn) {\n    return window.requestAnimationFrame(fn);\n  },\n  /**\n   * Cancels a previously enqueued `animationFrame` callback.\n   *\n   * @memberof animationFrame\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    window.cancelAnimationFrame(handle);\n  },\n};\nexport { animationFrame };\n\n/**\n * Async interface wrapper around `requestIdleCallback`.  Falls back to\n * `setTimeout` on browsers that do not support `requestIdleCallback`.\n *\n * @namespace\n * @summary Async interface wrapper around `requestIdleCallback`.\n */\nconst idlePeriod = {\n  /**\n   * Enqueues a function called at `requestIdleCallback` timing.\n   *\n   * @memberof idlePeriod\n   * @param {function(!IdleDeadline):void} fn Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(fn) {\n    return window.requestIdleCallback ? window.requestIdleCallback(fn) : window.setTimeout(fn, 16);\n  },\n  /**\n   * Cancels a previously enqueued `idlePeriod` callback.\n   *\n   * @memberof idlePeriod\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    if (window.cancelIdleCallback) {\n      window.cancelIdleCallback(handle);\n    } else {\n      window.clearTimeout(handle);\n    }\n  },\n};\nexport { idlePeriod };\n\n/**\n * Async interface for enqueuing callbacks that run at microtask timing.\n *\n * @namespace\n * @summary Async interface for enqueuing callbacks that run at microtask\n *   timing.\n */\nconst microTask = {\n  /**\n   * Enqueues a function called at microtask timing.\n   *\n   * @memberof microTask\n   * @param {!Function=} callback Callback to run\n   * @return {number} Handle used for canceling task\n   */\n  run(callback) {\n    if (!microtaskScheduled) {\n      microtaskScheduled = true;\n      queueMicrotask(() => microtaskFlush());\n    }\n    microtaskCallbacks.push(callback);\n    const result = microtaskCurrHandle;\n    microtaskCurrHandle += 1;\n    return result;\n  },\n\n  /**\n   * Cancels a previously enqueued `microTask` callback.\n   *\n   * @memberof microTask\n   * @param {number} handle Handle returned from `run` of callback to cancel\n   * @return {void}\n   */\n  cancel(handle) {\n    const idx = handle - microtaskLastHandle;\n    if (idx >= 0) {\n      if (!microtaskCallbacks[idx]) {\n        throw new Error(`invalid async handle: ${handle}`);\n      }\n      microtaskCallbacks[idx] = null;\n    }\n  },\n};\nexport { microTask };\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nconst debouncerQueue = new Set();\n\n/**\n * @summary Collapse multiple callbacks into one invocation after a timer.\n */\nexport class Debouncer {\n  /**\n   * Creates a debouncer if no debouncer is passed as a parameter\n   * or it cancels an active debouncer otherwise. The following\n   * example shows how a debouncer can be called multiple times within a\n   * microtask and \"debounced\" such that the provided callback function is\n   * called once. Add this method to a custom element:\n   *\n   * ```js\n   * import {microTask} from '@vaadin/component-base/src/async.js';\n   * import {Debouncer} from '@vaadin/component-base/src/debounce.js';\n   * // ...\n   *\n   * _debounceWork() {\n   *   this._debounceJob = Debouncer.debounce(this._debounceJob,\n   *       microTask, () => this._doWork());\n   * }\n   * ```\n   *\n   * If the `_debounceWork` method is called multiple times within the same\n   * microtask, the `_doWork` function will be called only once at the next\n   * microtask checkpoint.\n   *\n   * Note: In testing it is often convenient to avoid asynchrony. To accomplish\n   * this with a debouncer, you can use `enqueueDebouncer` and\n   * `flush`. For example, extend the above example by adding\n   * `enqueueDebouncer(this._debounceJob)` at the end of the\n   * `_debounceWork` method. Then in a test, call `flush` to ensure\n   * the debouncer has completed.\n   *\n   * @param {Debouncer?} debouncer Debouncer object.\n   * @param {!AsyncInterface} asyncModule Object with Async interface\n   * @param {function()} callback Callback to run.\n   * @return {!Debouncer} Returns a debouncer object.\n   */\n  static debounce(debouncer, asyncModule, callback) {\n    if (debouncer instanceof Debouncer) {\n      // Cancel the async callback, but leave in debouncerQueue if it was\n      // enqueued, to maintain 1.x flush order\n      debouncer._cancelAsync();\n    } else {\n      debouncer = new Debouncer();\n    }\n    debouncer.setConfig(asyncModule, callback);\n    return debouncer;\n  }\n\n  constructor() {\n    this._asyncModule = null;\n    this._callback = null;\n    this._timer = null;\n  }\n\n  /**\n   * Sets the scheduler; that is, a module with the Async interface,\n   * a callback and optional arguments to be passed to the run function\n   * from the async module.\n   *\n   * @param {!AsyncInterface} asyncModule Object with Async interface.\n   * @param {function()} callback Callback to run.\n   * @return {void}\n   */\n  setConfig(asyncModule, callback) {\n    this._asyncModule = asyncModule;\n    this._callback = callback;\n    this._timer = this._asyncModule.run(() => {\n      this._timer = null;\n      debouncerQueue.delete(this);\n      this._callback();\n    });\n  }\n\n  /**\n   * Cancels an active debouncer and returns a reference to itself.\n   *\n   * @return {void}\n   */\n  cancel() {\n    if (this.isActive()) {\n      this._cancelAsync();\n      // Canceling a debouncer removes its spot from the flush queue,\n      // so if a debouncer is manually canceled and re-debounced, it\n      // will reset its flush order (this is a very minor difference from 1.x)\n      // Re-debouncing via the `debounce` API retains the 1.x FIFO flush order\n      debouncerQueue.delete(this);\n    }\n  }\n\n  /**\n   * Cancels a debouncer's async callback.\n   *\n   * @return {void}\n   */\n  _cancelAsync() {\n    if (this.isActive()) {\n      this._asyncModule.cancel(/** @type {number} */ (this._timer));\n      this._timer = null;\n    }\n  }\n\n  /**\n   * Flushes an active debouncer and returns a reference to itself.\n   *\n   * @return {void}\n   */\n  flush() {\n    if (this.isActive()) {\n      this.cancel();\n      this._callback();\n    }\n  }\n\n  /**\n   * Returns true if the debouncer is active.\n   *\n   * @return {boolean} True if active.\n   */\n  isActive() {\n    return this._timer != null;\n  }\n}\n\n/**\n * Adds a `Debouncer` to a list of globally flushable tasks.\n *\n * @param {!Debouncer} debouncer Debouncer to enqueue\n * @return {void}\n */\nexport function enqueueDebouncer(debouncer) {\n  debouncerQueue.add(debouncer);\n}\n\n/**\n * Flushes any enqueued debouncers\n *\n * @return {boolean} Returns whether any debouncers were flushed\n */\nexport function flushDebouncers() {\n  const didFlush = Boolean(debouncerQueue.size);\n  // If new debouncers are added while flushing, Set.forEach will ensure\n  // newly added ones are also flushed\n  debouncerQueue.forEach((debouncer) => {\n    try {\n      debouncer.flush();\n    } catch (e) {\n      setTimeout(() => {\n        throw e;\n      });\n    }\n  });\n  return didFlush;\n}\n\nexport const flush = () => {\n  let debouncers;\n  do {\n    debouncers = flushDebouncers();\n  } while (debouncers);\n};\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * Array of Vaadin custom element classes that have been subscribed to the dir changes.\n */\nconst directionSubscribers = [];\n\nfunction alignDirs(element, documentDir, elementDir = element.getAttribute('dir')) {\n  if (documentDir) {\n    element.setAttribute('dir', documentDir);\n  } else if (elementDir != null) {\n    element.removeAttribute('dir');\n  }\n}\n\nfunction getDocumentDir() {\n  return document.documentElement.getAttribute('dir');\n}\n\nfunction directionUpdater() {\n  const documentDir = getDocumentDir();\n  directionSubscribers.forEach((element) => {\n    alignDirs(element, documentDir);\n  });\n}\n\nconst directionObserver = new MutationObserver(directionUpdater);\ndirectionObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['dir'] });\n\n/**\n * A mixin to handle `dir` attribute based on the one set on the `<html>` element.\n *\n * @polymerMixin\n */\nexport const DirMixin = (superClass) =>\n  class VaadinDirMixin extends superClass {\n    static get properties() {\n      return {\n        /**\n         * @protected\n         */\n        dir: {\n          type: String,\n          value: '',\n          reflectToAttribute: true,\n          converter: {\n            fromAttribute: (attr) => {\n              return !attr ? '' : attr;\n            },\n            toAttribute: (prop) => {\n              return prop === '' ? null : prop;\n            },\n          },\n        },\n      };\n    }\n\n    /**\n     * @return {boolean}\n     * @protected\n     */\n    get __isRTL() {\n      return this.getAttribute('dir') === 'rtl';\n    }\n\n    /** @protected */\n    connectedCallback() {\n      super.connectedCallback();\n\n      if (!this.hasAttribute('dir') || this.__restoreSubscription) {\n        this.__subscribe();\n        alignDirs(this, getDocumentDir(), null);\n      }\n    }\n\n    /** @protected */\n    attributeChangedCallback(name, oldValue, newValue) {\n      super.attributeChangedCallback(name, oldValue, newValue);\n      if (name !== 'dir') {\n        return;\n      }\n\n      const documentDir = getDocumentDir();\n\n      // New value equals to the document direction and the element is not subscribed to the changes\n      const newValueEqlDocDir = newValue === documentDir && directionSubscribers.indexOf(this) === -1;\n      // Value was emptied and the element is not subscribed to the changes\n      const newValueEmptied = !newValue && oldValue && directionSubscribers.indexOf(this) === -1;\n      // New value is different and the old equals to document direction and the element is not subscribed to the changes\n      const newDiffValue = newValue !== documentDir && oldValue === documentDir;\n\n      if (newValueEqlDocDir || newValueEmptied) {\n        this.__subscribe();\n        alignDirs(this, documentDir, newValue);\n      } else if (newDiffValue) {\n        this.__unsubscribe();\n      }\n    }\n\n    /** @protected */\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.__restoreSubscription = directionSubscribers.includes(this);\n      this.__unsubscribe();\n    }\n\n    /** @protected */\n    _valueToNodeAttribute(node, value, attribute) {\n      // Override default Polymer attribute reflection to match native behavior of HTMLElement.dir property\n      // If the property contains an empty string then it should not create an empty attribute\n      if (attribute === 'dir' && value === '' && !node.hasAttribute('dir')) {\n        return;\n      }\n      super._valueToNodeAttribute(node, value, attribute);\n    }\n\n    /** @protected */\n    _attributeToProperty(attribute, value, type) {\n      // Override default Polymer attribute reflection to match native behavior of HTMLElement.dir property\n      // If the attribute is removed, then the dir property should contain an empty string instead of null\n      if (attribute === 'dir' && !value) {\n        this.dir = '';\n      } else {\n        super._attributeToProperty(attribute, value, type);\n      }\n    }\n\n    /** @private */\n    __subscribe() {\n      if (!directionSubscribers.includes(this)) {\n        directionSubscribers.push(this);\n      }\n    }\n\n    /** @private */\n    __unsubscribe() {\n      if (directionSubscribers.includes(this)) {\n        directionSubscribers.splice(directionSubscribers.indexOf(this), 1);\n      }\n    }\n  };\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { setCancelSyntheticClickEvents } from '@polymer/polymer/lib/utils/settings.js';\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nimport { idlePeriod } from './async.js';\nimport { Debouncer, enqueueDebouncer } from './debounce.js';\nimport { DirMixin } from './dir-mixin.js';\n\n// This setting affects the legacy Polymer gestures which get activated\n// once you import any iron component e.g iron-icon.\n// It has to be explicitly disabled to prevent click issues in iOS + VoiceOver\n// for buttons that are based on `[role=button]` e.g vaadin-button.\nsetCancelSyntheticClickEvents(false);\n\nif (!window.Vaadin) {\n  window.Vaadin = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nif (!window.Vaadin.registrations) {\n  window.Vaadin.registrations = [];\n}\n\nif (!window.Vaadin.developmentModeCallback) {\n  window.Vaadin.developmentModeCallback = {};\n}\n\nwindow.Vaadin.developmentModeCallback['vaadin-usage-statistics'] = function () {\n  usageStatistics();\n};\n\nlet statsJob;\n\nconst registered = new Set();\n\n/**\n * @polymerMixin\n * @mixes DirMixin\n */\nexport const ElementMixin = (superClass) =>\n  class VaadinElementMixin extends DirMixin(superClass) {\n    /** @protected */\n    static finalize() {\n      super.finalize();\n\n      const { is } = this;\n\n      // Registers a class prototype for telemetry purposes.\n      if (is && !registered.has(is)) {\n        window.Vaadin.registrations.push(this);\n        registered.add(is);\n\n        if (window.Vaadin.developmentModeCallback) {\n          statsJob = Debouncer.debounce(statsJob, idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          });\n          enqueueDebouncer(statsJob);\n        }\n      }\n    }\n\n    constructor() {\n      super();\n\n      if (document.doctype === null) {\n        console.warn(\n          'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.',\n        );\n      }\n    }\n  };\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * Returns an array of ancestor root nodes for the given node.\n *\n * A root node is either a document node or a document fragment node (Shadow Root).\n * The array is collected by a bottom-up DOM traversing that starts with the given node\n * and involves both the light DOM and ancestor shadow DOM trees.\n *\n * @param {Node} node\n * @return {Node[]}\n */\nexport function getAncestorRootNodes(node) {\n  const result = [];\n\n  while (node) {\n    if (node.nodeType === Node.DOCUMENT_NODE) {\n      result.push(node);\n      break;\n    }\n\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      result.push(node);\n      node = node.host;\n      continue;\n    }\n\n    if (node.assignedSlot) {\n      node = node.assignedSlot;\n      continue;\n    }\n\n    node = node.parentNode;\n  }\n\n  return result;\n}\n\n/**\n * Returns the list of flattened elements for the given `node`.\n * This list consists of a node's children and, for any children that are\n * `<slot>` elements, the expanded flattened list of `assignedElements`.\n *\n * @param {Node} node\n * @return {Element[]}\n */\nexport function getFlattenedElements(node) {\n  const result = [];\n  let elements;\n  if (node.localName === 'slot') {\n    elements = node.assignedElements();\n  } else {\n    result.push(node);\n    elements = [...node.children];\n  }\n  elements.forEach((elem) => result.push(...getFlattenedElements(elem)));\n  return result;\n}\n\n/**\n * Traverses the given node and its parents, including those that are across\n * the shadow root boundaries, until it finds a node that matches the selector.\n *\n * @param {string} selector The CSS selector to match against\n * @param {Node} node The starting node for the traversal\n * @return {Node | null} The closest matching element, or null if no match is found\n */\nexport function getClosestElement(selector, node) {\n  if (!node) {\n    return null;\n  }\n\n  return node.closest(selector) || getClosestElement(selector, node.getRootNode().host);\n}\n\n/**\n * Takes a string with values separated by space and returns a set the values\n *\n * @param {string} value\n * @return {Set<string>}\n */\nexport function deserializeAttributeValue(value) {\n  if (!value) {\n    return new Set();\n  }\n\n  return new Set(value.split(' '));\n}\n\n/**\n * Takes a set of string values and returns a string with values separated by space\n *\n * @param {Set<string>} values\n * @return {string}\n */\nexport function serializeAttributeValue(values) {\n  return values ? [...values].join(' ') : '';\n}\n\n/**\n * Adds a value to an attribute containing space-delimited values.\n *\n * @param {HTMLElement} element\n * @param {string} attr\n * @param {string} value\n */\nexport function addValueToAttribute(element, attr, value) {\n  const values = deserializeAttributeValue(element.getAttribute(attr));\n  values.add(value);\n  element.setAttribute(attr, serializeAttributeValue(values));\n}\n\n/**\n * Removes a value from an attribute containing space-delimited values.\n * If the value is the last one, the whole attribute is removed.\n *\n * @param {HTMLElement} element\n * @param {string} attr\n * @param {string} value\n */\nexport function removeValueFromAttribute(element, attr, value) {\n  const values = deserializeAttributeValue(element.getAttribute(attr));\n  values.delete(value);\n  if (values.size === 0) {\n    element.removeAttribute(attr);\n    return;\n  }\n  element.setAttribute(attr, serializeAttributeValue(values));\n}\n\n/**\n * Returns true if the given node is an empty text node, false otherwise.\n *\n * @param {Node} node\n * @return {boolean}\n */\nexport function isEmptyTextNode(node) {\n  return node.nodeType === Node.TEXT_NODE && node.textContent.trim() === '';\n}\n","/**\n * @license\n * Copyright (c) 2023 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * A helper for observing slot changes.\n */\nexport class SlotObserver {\n  constructor(slot, callback) {\n    /** @type HTMLSlotElement */\n    this.slot = slot;\n\n    /** @type Function */\n    this.callback = callback;\n\n    /** @type {Node[]} */\n    this._storedNodes = [];\n\n    this._connected = false;\n    this._scheduled = false;\n\n    this._boundSchedule = () => {\n      this._schedule();\n    };\n\n    this.connect();\n    this._schedule();\n  }\n\n  /**\n   * Activates an observer. This method is automatically called when\n   * a `SlotObserver` is created. It should only be called to  re-activate\n   * an observer that has been deactivated via the `disconnect` method.\n   */\n  connect() {\n    this.slot.addEventListener('slotchange', this._boundSchedule);\n    this._connected = true;\n  }\n\n  /**\n   * Deactivates the observer. After calling this method the observer callback\n   * will not be called when changes to slotted nodes occur. The `connect` method\n   * may be subsequently called to reactivate the observer.\n   */\n  disconnect() {\n    this.slot.removeEventListener('slotchange', this._boundSchedule);\n    this._connected = false;\n  }\n\n  /** @private */\n  _schedule() {\n    if (!this._scheduled) {\n      this._scheduled = true;\n\n      queueMicrotask(() => {\n        this.flush();\n      });\n    }\n  }\n\n  /**\n   * Run the observer callback synchronously.\n   */\n  flush() {\n    if (!this._connected) {\n      return;\n    }\n\n    this._scheduled = false;\n\n    this._processNodes();\n  }\n\n  /** @private */\n  _processNodes() {\n    const currentNodes = this.slot.assignedNodes({ flatten: true });\n\n    let addedNodes = [];\n    const removedNodes = [];\n    const movedNodes = [];\n\n    if (currentNodes.length) {\n      addedNodes = currentNodes.filter((node) => !this._storedNodes.includes(node));\n    }\n\n    if (this._storedNodes.length) {\n      this._storedNodes.forEach((node, index) => {\n        const idx = currentNodes.indexOf(node);\n        if (idx === -1) {\n          removedNodes.push(node);\n        } else if (idx !== index) {\n          movedNodes.push(node);\n        }\n      });\n    }\n\n    if (addedNodes.length || removedNodes.length || movedNodes.length) {\n      this.callback({ addedNodes, currentNodes, movedNodes, removedNodes });\n    }\n\n    this._storedNodes = currentNodes;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\nlet uniqueId = 0;\n\n/**\n * Resets the unique id counter.\n *\n * @return {void}\n */\nexport function resetUniqueId() {\n  uniqueId = 0;\n}\n\n/**\n * Returns a unique integer id.\n *\n * @return {number}\n */\nexport function generateUniqueId() {\n  // eslint-disable-next-line no-plusplus\n  return uniqueId++;\n}\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { isEmptyTextNode } from './dom-utils.js';\nimport { SlotObserver } from './slot-observer.js';\nimport { generateUniqueId } from './unique-id-utils.js';\n\n/**\n * A controller for providing content to slot element and observing changes.\n */\nexport class SlotController extends EventTarget {\n  /**\n   * Ensure that every instance has unique ID.\n   *\n   * @param {HTMLElement} host\n   * @param {string} slotName\n   * @return {string}\n   * @protected\n   */\n  static generateId(host, prefix = 'default') {\n    return `${prefix}-${host.localName}-${generateUniqueId()}`;\n  }\n\n  constructor(host, slotName, tagName, config = {}) {\n    super();\n\n    const { initializer, multiple, observe, useUniqueId, uniqueIdPrefix } = config;\n\n    this.host = host;\n    this.slotName = slotName;\n    this.tagName = tagName;\n    this.observe = typeof observe === 'boolean' ? observe : true;\n    this.multiple = typeof multiple === 'boolean' ? multiple : false;\n    this.slotInitializer = initializer;\n\n    if (multiple) {\n      this.nodes = [];\n    }\n\n    // Only generate the default ID if requested by the controller.\n    if (useUniqueId) {\n      this.defaultId = this.constructor.generateId(host, uniqueIdPrefix || slotName);\n    }\n  }\n\n  hostConnected() {\n    if (!this.initialized) {\n      if (this.multiple) {\n        this.initMultiple();\n      } else {\n        this.initSingle();\n      }\n\n      if (this.observe) {\n        this.observeSlot();\n      }\n\n      this.initialized = true;\n    }\n  }\n\n  /** @protected */\n  initSingle() {\n    let node = this.getSlotChild();\n\n    if (!node) {\n      node = this.attachDefaultNode();\n      this.initNode(node);\n    } else {\n      this.node = node;\n      this.initAddedNode(node);\n    }\n  }\n\n  /** @protected */\n  initMultiple() {\n    const children = this.getSlotChildren();\n\n    if (children.length === 0) {\n      const defaultNode = this.attachDefaultNode();\n      if (defaultNode) {\n        this.nodes = [defaultNode];\n        this.initNode(defaultNode);\n      }\n    } else {\n      this.nodes = children;\n      children.forEach((node) => {\n        this.initAddedNode(node);\n      });\n    }\n  }\n\n  /**\n   * Create and attach default node using the provided tag name, if any.\n   * @return {Node | undefined}\n   * @protected\n   */\n  attachDefaultNode() {\n    const { host, slotName, tagName } = this;\n\n    // Check if the node was created previously and if so, reuse it.\n    let node = this.defaultNode;\n\n    // Tag name is optional, sometimes we don't init default content.\n    if (!node && tagName) {\n      node = document.createElement(tagName);\n      if (node instanceof Element) {\n        if (slotName !== '') {\n          node.setAttribute('slot', slotName);\n        }\n        this.defaultNode = node;\n      }\n    }\n\n    if (node) {\n      this.node = node;\n      host.appendChild(node);\n    }\n\n    return node;\n  }\n\n  /**\n   * Return the list of nodes matching the slot managed by the controller.\n   * @return {Node}\n   */\n  getSlotChildren() {\n    const { slotName } = this;\n    return Array.from(this.host.childNodes).filter((node) => {\n      // Ignore nodes with data-slot-ignore attribute\n      if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute('data-slot-ignore')) {\n        return false;\n      }\n      // Either an element (any slot) or a text node (only un-named slot).\n      return (\n        (node.nodeType === Node.ELEMENT_NODE && node.slot === slotName) ||\n        (node.nodeType === Node.TEXT_NODE && node.textContent.trim() && slotName === '')\n      );\n    });\n  }\n\n  /**\n   * Return a reference to the node managed by the controller.\n   * @return {Node}\n   */\n  getSlotChild() {\n    return this.getSlotChildren()[0];\n  }\n\n  /**\n   * Run `slotInitializer` for the node managed by the controller.\n   *\n   * @param {Node} node\n   * @protected\n   */\n  initNode(node) {\n    const { slotInitializer } = this;\n    // Don't try to bind `this` to initializer (normally it's arrow function).\n    // Instead, pass the host as a first argument to access component's state.\n    if (slotInitializer) {\n      slotInitializer(node, this.host);\n    }\n  }\n\n  /**\n   * Override to initialize the newly added custom node.\n   *\n   * @param {Node} _node\n   * @protected\n   */\n  initCustomNode(_node) {}\n\n  /**\n   * Override to teardown slotted node when it's removed.\n   *\n   * @param {Node} _node\n   * @protected\n   */\n  teardownNode(_node) {}\n\n  /**\n   * Run both `initCustomNode` and `initNode` for a custom slotted node.\n   *\n   * @param {Node} node\n   * @protected\n   */\n  initAddedNode(node) {\n    if (node !== this.defaultNode) {\n      this.initCustomNode(node);\n      this.initNode(node);\n    }\n  }\n\n  /**\n   * Setup the observer to manage slot content changes.\n   * @protected\n   */\n  observeSlot() {\n    const { slotName } = this;\n    const selector = slotName === '' ? 'slot:not([name])' : `slot[name=${slotName}]`;\n    const slot = this.host.shadowRoot.querySelector(selector);\n\n    this.__slotObserver = new SlotObserver(slot, ({ addedNodes, removedNodes }) => {\n      const current = this.multiple ? this.nodes : [this.node];\n\n      // Calling `slot.assignedNodes()` includes whitespace text nodes in case of default slot:\n      // unlike comment nodes, they are not filtered out. So we need to manually ignore them.\n      // Also ignore nodes with data-slot-ignore attribute.\n      const newNodes = addedNodes.filter(\n        (node) =>\n          !isEmptyTextNode(node) &&\n          !current.includes(node) &&\n          !(node.nodeType === Node.ELEMENT_NODE && node.hasAttribute('data-slot-ignore')),\n      );\n\n      if (removedNodes.length) {\n        this.nodes = current.filter((node) => !removedNodes.includes(node));\n\n        removedNodes.forEach((node) => {\n          this.teardownNode(node);\n        });\n      }\n\n      if (newNodes && newNodes.length > 0) {\n        if (this.multiple) {\n          // Remove default node if exists\n          if (this.defaultNode) {\n            this.defaultNode.remove();\n          }\n          this.nodes = [...current, ...newNodes].filter((node) => node !== this.defaultNode);\n          newNodes.forEach((node) => {\n            this.initAddedNode(node);\n          });\n        } else {\n          // Remove previous node if exists\n          if (this.node) {\n            this.node.remove();\n          }\n          this.node = newNodes[0];\n          this.initAddedNode(this.node);\n        }\n      }\n    });\n  }\n}\n","/**\n * @license\n * Copyright (c) 2022 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { SlotController } from './slot-controller.js';\n\n/**\n * A controller that manages the slotted tooltip element.\n */\nexport class TooltipController extends SlotController {\n  constructor(host) {\n    // Do not provide slot factory to create tooltip lazily.\n    super(host, 'tooltip');\n\n    this.setTarget(host);\n    this.__onContentChange = this.__onContentChange.bind(this);\n  }\n\n  /**\n   * Override to initialize the newly added custom tooltip.\n   *\n   * @param {Node} tooltipNode\n   * @protected\n   * @override\n   */\n  initCustomNode(tooltipNode) {\n    tooltipNode.target = this.target;\n\n    if (this.ariaTarget !== undefined) {\n      tooltipNode.ariaTarget = this.ariaTarget;\n    }\n\n    if (this.context !== undefined) {\n      tooltipNode.context = this.context;\n    }\n\n    if (this.manual !== undefined) {\n      tooltipNode.manual = this.manual;\n    }\n\n    if (this.opened !== undefined) {\n      tooltipNode.opened = this.opened;\n    }\n\n    if (this.position !== undefined) {\n      tooltipNode._position = this.position;\n    }\n\n    if (this.shouldShow !== undefined) {\n      tooltipNode.shouldShow = this.shouldShow;\n    }\n\n    if (!this.manual) {\n      this.host.setAttribute('has-tooltip', '');\n    }\n    this.__notifyChange(tooltipNode);\n    tooltipNode.addEventListener('content-changed', this.__onContentChange);\n  }\n\n  /**\n   * Override to notify the host when the tooltip is removed.\n   *\n   * @param {Node} tooltipNode\n   * @protected\n   * @override\n   */\n  teardownNode(tooltipNode) {\n    if (!this.manual) {\n      this.host.removeAttribute('has-tooltip');\n    }\n    tooltipNode.removeEventListener('content-changed', this.__onContentChange);\n    this.__notifyChange(null);\n  }\n\n  /**\n   * Set an HTML element for linking with the tooltip overlay\n   * via `aria-describedby` attribute used by screen readers.\n   * @param {HTMLElement} ariaTarget\n   */\n  setAriaTarget(ariaTarget) {\n    this.ariaTarget = ariaTarget;\n\n    const tooltipNode = this.node;\n    if (tooltipNode) {\n      tooltipNode.ariaTarget = ariaTarget;\n    }\n  }\n\n  /**\n   * Set a context object to be used by generator.\n   * @param {object} context\n   */\n  setContext(context) {\n    this.context = context;\n\n    const tooltipNode = this.node;\n    if (tooltipNode) {\n      tooltipNode.context = context;\n    }\n  }\n\n  /**\n   * Toggle manual state on the slotted tooltip.\n   * @param {boolean} manual\n   */\n  setManual(manual) {\n    this.manual = manual;\n\n    const tooltipNode = this.node;\n    if (tooltipNode) {\n      tooltipNode.manual = manual;\n    }\n  }\n\n  /**\n   * Toggle opened state on the slotted tooltip.\n   * @param {boolean} opened\n   */\n  setOpened(opened) {\n    this.opened = opened;\n\n    const tooltipNode = this.node;\n    if (tooltipNode) {\n      tooltipNode.opened = opened;\n    }\n  }\n\n  /**\n   * Set default position for the slotted tooltip.\n   * This can be overridden by setting the position\n   * using corresponding property or attribute.\n   * @param {string} position\n   */\n  setPosition(position) {\n    this.position = position;\n\n    const tooltipNode = this.node;\n    if (tooltipNode) {\n      tooltipNode._position = position;\n    }\n  }\n\n  /**\n   * Set function used to detect whether to show\n   * the tooltip based on a condition.\n   * @param {Function} shouldShow\n   */\n  setShouldShow(shouldShow) {\n    this.shouldShow = shouldShow;\n\n    const tooltipNode = this.node;\n    if (tooltipNode) {\n      tooltipNode.shouldShow = shouldShow;\n    }\n  }\n\n  /**\n   * Set an HTML element to attach the tooltip to.\n   * @param {HTMLElement} target\n   */\n  setTarget(target) {\n    this.target = target;\n\n    const tooltipNode = this.node;\n    if (tooltipNode) {\n      tooltipNode.target = target;\n    }\n  }\n\n  /** @private */\n  __onContentChange(event) {\n    this.__notifyChange(event.target);\n  }\n\n  /** @private */\n  __notifyChange(node) {\n    this.dispatchEvent(new CustomEvent('tooltip-changed', { detail: { node } }));\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { css } from 'lit';\n\nexport const buttonStyles = css`\n  :host {\n    display: inline-block;\n    position: relative;\n    outline: none;\n    white-space: nowrap;\n    -webkit-user-select: none;\n    user-select: none;\n  }\n\n  :host([hidden]) {\n    display: none !important;\n  }\n\n  :host([disabled]) {\n    pointer-events: var(--_vaadin-button-disabled-pointer-events, none);\n    cursor: not-allowed;\n  }\n\n  /* Aligns the button with form fields when placed on the same line.\n  Note, to make it work, the form fields should have the same \"::before\" pseudo-element. */\n  .vaadin-button-container::before {\n    content: '\\\\2003';\n    display: inline-block;\n    width: 0;\n    max-height: 100%;\n  }\n\n  .vaadin-button-container {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    min-height: inherit;\n    text-shadow: inherit;\n  }\n\n  [part='prefix'],\n  [part='suffix'] {\n    flex: none;\n  }\n\n  [part='label'] {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  @media (forced-colors: active) {\n    :host {\n      outline: 1px solid;\n      outline-offset: -1px;\n    }\n\n    :host([focused]) {\n      outline-width: 2px;\n    }\n\n    :host([disabled]) {\n      outline-color: GrayText;\n    }\n  }\n`;\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\n/**\n * @fileoverview\n *\n * Module for adding listeners to a node for the following normalized\n * cross-platform \"gesture\" events:\n * - `down` - mouse or touch went down\n * - `up` - mouse or touch went up\n * - `tap` - mouse click or finger tap\n * - `track` - mouse drag or touch move\n *\n * @summary Module for adding cross-platform gesture event listeners.\n */\n\nimport { microTask } from './async.js';\n\nconst passiveTouchGestures = false;\nconst wrap = (node) => node;\n\n// Detect native touch action support\nconst HAS_NATIVE_TA = typeof document.head.style.touchAction === 'string';\nconst GESTURE_KEY = '__polymerGestures';\nconst HANDLED_OBJ = '__polymerGesturesHandled';\nconst TOUCH_ACTION = '__polymerGesturesTouchAction';\n// Radius for tap and track\nconst TAP_DISTANCE = 25;\nconst TRACK_DISTANCE = 5;\n// Number of last N track positions to keep\nconst TRACK_LENGTH = 2;\n\nconst MOUSE_EVENTS = ['mousedown', 'mousemove', 'mouseup', 'click'];\n// An array of bitmask values for mapping MouseEvent.which to MouseEvent.buttons\nconst MOUSE_WHICH_TO_BUTTONS = [0, 1, 4, 2];\nconst MOUSE_HAS_BUTTONS = (function () {\n  try {\n    return new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (_) {\n    return false;\n  }\n})();\n\n/**\n * @param {string} name Possible mouse event name\n * @return {boolean} true if mouse event, false if not\n */\nfunction isMouseEvent(name) {\n  return MOUSE_EVENTS.indexOf(name) > -1;\n}\n\n/* eslint no-empty: [\"error\", { \"allowEmptyCatch\": true }] */\n// check for passive event listeners\nlet supportsPassive = false;\n(function () {\n  try {\n    const opts = Object.defineProperty({}, 'passive', {\n      // eslint-disable-next-line getter-return\n      get() {\n        supportsPassive = true;\n      },\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (_) {}\n})();\n\n/**\n * Generate settings for event listeners, dependant on `passiveTouchGestures`\n *\n * @param {string} eventName Event name to determine if `{passive}` option is\n *   needed\n * @return {{passive: boolean} | undefined} Options to use for addEventListener\n *   and removeEventListener\n */\nfunction PASSIVE_TOUCH(eventName) {\n  if (isMouseEvent(eventName) || eventName === 'touchend') {\n    return;\n  }\n  if (HAS_NATIVE_TA && supportsPassive && passiveTouchGestures) {\n    return { passive: true };\n  }\n}\n\n// Check for touch-only devices\nconst IS_TOUCH_ONLY = navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/u);\n\n// Defined at https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#enabling-and-disabling-form-controls:-the-disabled-attribute\n/** @type {!Object<boolean>} */\nconst canBeDisabled = {\n  button: true,\n  command: true,\n  fieldset: true,\n  input: true,\n  keygen: true,\n  optgroup: true,\n  option: true,\n  select: true,\n  textarea: true,\n};\n\n/**\n * @param {MouseEvent} ev event to test for left mouse button down\n * @return {boolean} has left mouse button down\n */\nfunction hasLeftMouseButton(ev) {\n  const type = ev.type;\n  // Exit early if the event is not a mouse event\n  if (!isMouseEvent(type)) {\n    return false;\n  }\n  // Ev.button is not reliable for mousemove (0 is overloaded as both left button and no buttons)\n  // instead we use ev.buttons (bitmask of buttons) or fall back to ev.which (deprecated, 0 for no buttons, 1 for left button)\n  if (type === 'mousemove') {\n    // Allow undefined for testing events\n    let buttons = ev.buttons === undefined ? 1 : ev.buttons;\n    if (ev instanceof window.MouseEvent && !MOUSE_HAS_BUTTONS) {\n      buttons = MOUSE_WHICH_TO_BUTTONS[ev.which] || 0;\n    }\n    // Buttons is a bitmask, check that the left button bit is set (1)\n    return Boolean(buttons & 1);\n  }\n  // Allow undefined for testing events\n  const button = ev.button === undefined ? 0 : ev.button;\n  // Ev.button is 0 in mousedown/mouseup/click for left button activation\n  return button === 0;\n}\n\nfunction isSyntheticClick(ev) {\n  if (ev.type === 'click') {\n    // Ev.detail is 0 for HTMLElement.click in most browsers\n    if (ev.detail === 0) {\n      return true;\n    }\n    // In the worst case, check that the x/y position of the click is within\n    // the bounding box of the target of the event\n    // Thanks IE 10 >:(\n    const t = _findOriginalTarget(ev);\n    // Make sure the target of the event is an element so we can use getBoundingClientRect,\n    // if not, just assume it is a synthetic click\n    if (!t.nodeType || /** @type {Element} */ (t).nodeType !== Node.ELEMENT_NODE) {\n      return true;\n    }\n    const bcr = /** @type {Element} */ (t).getBoundingClientRect();\n    // Use page x/y to account for scrolling\n    const x = ev.pageX,\n      y = ev.pageY;\n    // Ev is a synthetic click if the position is outside the bounding box of the target\n    return !(x >= bcr.left && x <= bcr.right && y >= bcr.top && y <= bcr.bottom);\n  }\n  return false;\n}\n\nconst POINTERSTATE = {\n  mouse: {\n    target: null,\n    mouseIgnoreJob: null,\n  },\n  touch: {\n    x: 0,\n    y: 0,\n    id: -1,\n    scrollDecided: false,\n  },\n};\n\nfunction firstTouchAction(ev) {\n  let ta = 'auto';\n  const path = getComposedPath(ev);\n  for (let i = 0, n; i < path.length; i++) {\n    n = path[i];\n    if (n[TOUCH_ACTION]) {\n      ta = n[TOUCH_ACTION];\n      break;\n    }\n  }\n  return ta;\n}\n\nfunction trackDocument(stateObj, movefn, upfn) {\n  stateObj.movefn = movefn;\n  stateObj.upfn = upfn;\n  document.addEventListener('mousemove', movefn);\n  document.addEventListener('mouseup', upfn);\n}\n\nfunction untrackDocument(stateObj) {\n  document.removeEventListener('mousemove', stateObj.movefn);\n  document.removeEventListener('mouseup', stateObj.upfn);\n  stateObj.movefn = null;\n  stateObj.upfn = null;\n}\n\n/**\n * Returns the composedPath for the given event.\n * @param {Event} event to process\n * @return {!Array<!EventTarget>} Path of the event\n */\nconst getComposedPath =\n  window.ShadyDOM && window.ShadyDOM.noPatch\n    ? window.ShadyDOM.composedPath\n    : (event) => (event.composedPath && event.composedPath()) || [];\n\n/** @type {!Object<string, !GestureRecognizer>} */\nexport const gestures = {};\n\n/** @type {!Array<!GestureRecognizer>} */\nexport const recognizers = [];\n\n/**\n * Finds the element rendered on the screen at the provided coordinates.\n *\n * Similar to `document.elementFromPoint`, but pierces through\n * shadow roots.\n *\n * @param {number} x Horizontal pixel coordinate\n * @param {number} y Vertical pixel coordinate\n * @return {Element} Returns the deepest shadowRoot inclusive element\n * found at the screen position given.\n */\nexport function deepTargetFind(x, y) {\n  let node = document.elementFromPoint(x, y);\n  let next = node;\n  // This code path is only taken when native ShadowDOM is used\n  // if there is a shadowroot, it may have a node at x/y\n  // if there is not a shadowroot, exit the loop\n  while (next && next.shadowRoot && !window.ShadyDOM) {\n    // If there is a node at x/y in the shadowroot, look deeper\n    const oldNext = next;\n    next = next.shadowRoot.elementFromPoint(x, y);\n    // On Safari, elementFromPoint may return the shadowRoot host\n    if (oldNext === next) {\n      break;\n    }\n    if (next) {\n      node = next;\n    }\n  }\n  return node;\n}\n\n/**\n * A cheaper check than ev.composedPath()[0];\n *\n * @private\n * @param {Event|Touch} ev Event.\n * @return {EventTarget} Returns the event target.\n */\nfunction _findOriginalTarget(ev) {\n  const path = getComposedPath(/** @type {?Event} */ (ev));\n  // It shouldn't be, but sometimes path is empty (window on Safari).\n  return path.length > 0 ? path[0] : ev.target;\n}\n\n/**\n * @private\n * @param {Event} ev Event.\n * @return {void}\n */\nfunction _handleNative(ev) {\n  const type = ev.type;\n  const node = ev.currentTarget;\n  const gobj = node[GESTURE_KEY];\n  if (!gobj) {\n    return;\n  }\n  const gs = gobj[type];\n  if (!gs) {\n    return;\n  }\n  if (!ev[HANDLED_OBJ]) {\n    ev[HANDLED_OBJ] = {};\n    if (type.startsWith('touch')) {\n      const t = ev.changedTouches[0];\n      if (type === 'touchstart') {\n        // Only handle the first finger\n        if (ev.touches.length === 1) {\n          POINTERSTATE.touch.id = t.identifier;\n        }\n      }\n      if (POINTERSTATE.touch.id !== t.identifier) {\n        return;\n      }\n      if (!HAS_NATIVE_TA) {\n        if (type === 'touchstart' || type === 'touchmove') {\n          _handleTouchAction(ev);\n        }\n      }\n    }\n  }\n  const handled = ev[HANDLED_OBJ];\n  // Used to ignore synthetic mouse events\n  if (handled.skip) {\n    return;\n  }\n  // Reset recognizer state\n  for (let i = 0, r; i < recognizers.length; i++) {\n    r = recognizers[i];\n    if (gs[r.name] && !handled[r.name]) {\n      if (r.flow && r.flow.start.indexOf(ev.type) > -1 && r.reset) {\n        r.reset();\n      }\n    }\n  }\n  // Enforce gesture recognizer order\n  for (let i = 0, r; i < recognizers.length; i++) {\n    r = recognizers[i];\n    if (gs[r.name] && !handled[r.name]) {\n      handled[r.name] = true;\n      r[type](ev);\n    }\n  }\n}\n\n/**\n * @private\n * @param {TouchEvent} ev Event.\n * @return {void}\n */\nfunction _handleTouchAction(ev) {\n  const t = ev.changedTouches[0];\n  const type = ev.type;\n  if (type === 'touchstart') {\n    POINTERSTATE.touch.x = t.clientX;\n    POINTERSTATE.touch.y = t.clientY;\n    POINTERSTATE.touch.scrollDecided = false;\n  } else if (type === 'touchmove') {\n    if (POINTERSTATE.touch.scrollDecided) {\n      return;\n    }\n    POINTERSTATE.touch.scrollDecided = true;\n    const ta = firstTouchAction(ev);\n    let shouldPrevent = false;\n    const dx = Math.abs(POINTERSTATE.touch.x - t.clientX);\n    const dy = Math.abs(POINTERSTATE.touch.y - t.clientY);\n    if (!ev.cancelable) {\n      // Scrolling is happening\n    } else if (ta === 'none') {\n      shouldPrevent = true;\n    } else if (ta === 'pan-x') {\n      shouldPrevent = dy > dx;\n    } else if (ta === 'pan-y') {\n      shouldPrevent = dx > dy;\n    }\n    if (shouldPrevent) {\n      ev.preventDefault();\n    } else {\n      prevent('track');\n    }\n  }\n}\n\n/**\n * Adds an event listener to a node for the given gesture type.\n *\n * @param {!EventTarget} node Node to add listener on\n * @param {string} evType Gesture type: `down`, `up`, `track`, or `tap`\n * @param {!function(!Event):void} handler Event listener function to call\n * @return {boolean} Returns true if a gesture event listener was added.\n */\nexport function addListener(node, evType, handler) {\n  if (gestures[evType]) {\n    _add(node, evType, handler);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Removes an event listener from a node for the given gesture type.\n *\n * @param {!EventTarget} node Node to remove listener from\n * @param {string} evType Gesture type: `down`, `up`, `track`, or `tap`\n * @param {!function(!Event):void} handler Event listener function previously passed to\n *  `addListener`.\n * @return {boolean} Returns true if a gesture event listener was removed.\n */\nexport function removeListener(node, evType, handler) {\n  if (gestures[evType]) {\n    _remove(node, evType, handler);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Automate the event listeners for the native events\n *\n * @private\n * @param {!EventTarget} node Node on which to add the event.\n * @param {string} evType Event type to add.\n * @param {function(!Event)} handler Event handler function.\n * @return {void}\n */\nfunction _add(node, evType, handler) {\n  const recognizer = gestures[evType];\n  const deps = recognizer.deps;\n  const name = recognizer.name;\n  let gobj = node[GESTURE_KEY];\n  if (!gobj) {\n    node[GESTURE_KEY] = gobj = {};\n  }\n  for (let i = 0, dep, gd; i < deps.length; i++) {\n    dep = deps[i];\n    // Don't add mouse handlers on iOS because they cause gray selection overlays\n    if (IS_TOUCH_ONLY && isMouseEvent(dep) && dep !== 'click') {\n      continue;\n    }\n    gd = gobj[dep];\n    if (!gd) {\n      gobj[dep] = gd = { _count: 0 };\n    }\n    if (gd._count === 0) {\n      node.addEventListener(dep, _handleNative, PASSIVE_TOUCH(dep));\n    }\n    gd[name] = (gd[name] || 0) + 1;\n    gd._count = (gd._count || 0) + 1;\n  }\n  node.addEventListener(evType, handler);\n  if (recognizer.touchAction) {\n    setTouchAction(node, recognizer.touchAction);\n  }\n}\n\n/**\n * Automate event listener removal for native events\n *\n * @private\n * @param {!EventTarget} node Node on which to remove the event.\n * @param {string} evType Event type to remove.\n * @param {function(!Event): void} handler Event handler function.\n * @return {void}\n */\nfunction _remove(node, evType, handler) {\n  const recognizer = gestures[evType];\n  const deps = recognizer.deps;\n  const name = recognizer.name;\n  const gobj = node[GESTURE_KEY];\n  if (gobj) {\n    for (let i = 0, dep, gd; i < deps.length; i++) {\n      dep = deps[i];\n      gd = gobj[dep];\n      if (gd && gd[name]) {\n        gd[name] = (gd[name] || 1) - 1;\n        gd._count = (gd._count || 1) - 1;\n        if (gd._count === 0) {\n          node.removeEventListener(dep, _handleNative, PASSIVE_TOUCH(dep));\n        }\n      }\n    }\n  }\n  node.removeEventListener(evType, handler);\n}\n\n/**\n * Registers a new gesture event recognizer for adding new custom\n * gesture event types.\n *\n * @param {!GestureRecognizer} recog Gesture recognizer descriptor\n * @return {void}\n */\nexport function register(recog) {\n  recognizers.push(recog);\n  recog.emits.forEach((emit) => {\n    gestures[emit] = recog;\n  });\n}\n\n/**\n * @private\n * @param {string} evName Event name.\n * @return {Object} Returns the gesture for the given event name.\n */\nfunction _findRecognizerByEvent(evName) {\n  for (let i = 0, r; i < recognizers.length; i++) {\n    r = recognizers[i];\n    for (let j = 0, n; j < r.emits.length; j++) {\n      n = r.emits[j];\n      if (n === evName) {\n        return r;\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Sets scrolling direction on node.\n *\n * This value is checked on first move, thus it should be called prior to\n * adding event listeners.\n *\n * @param {!EventTarget} node Node to set touch action setting on\n * @param {string} value Touch action value\n * @return {void}\n */\nexport function setTouchAction(node, value) {\n  if (HAS_NATIVE_TA && node instanceof HTMLElement) {\n    // NOTE: add touchAction async so that events can be added in\n    // custom element constructors. Otherwise we run afoul of custom\n    // elements restriction against settings attributes (style) in the\n    // constructor.\n    microTask.run(() => {\n      node.style.touchAction = value;\n    });\n  }\n  node[TOUCH_ACTION] = value;\n}\n\n/**\n * Dispatches an event on the `target` element of `type` with the given\n * `detail`.\n * @private\n * @param {!EventTarget} target The element on which to fire an event.\n * @param {string} type The type of event to fire.\n * @param {!Object=} detail The detail object to populate on the event.\n * @return {void}\n */\nfunction _fire(target, type, detail) {\n  const ev = new Event(type, { bubbles: true, cancelable: true, composed: true });\n  ev.detail = detail;\n  wrap(/** @type {!Node} */ (target)).dispatchEvent(ev);\n  // Forward `preventDefault` in a clean way\n  if (ev.defaultPrevented) {\n    const preventer = detail.preventer || detail.sourceEvent;\n    if (preventer && preventer.preventDefault) {\n      preventer.preventDefault();\n    }\n  }\n}\n\n/**\n * Prevents the dispatch and default action of the given event name.\n *\n * @param {string} evName Event name.\n * @return {void}\n */\nexport function prevent(evName) {\n  const recognizer = _findRecognizerByEvent(evName);\n  if (recognizer.info) {\n    recognizer.info.prevent = true;\n  }\n}\n\nregister({\n  name: 'downup',\n  deps: ['mousedown', 'touchstart', 'touchend'],\n  flow: {\n    start: ['mousedown', 'touchstart'],\n    end: ['mouseup', 'touchend'],\n  },\n  emits: ['down', 'up'],\n\n  info: {\n    movefn: null,\n    upfn: null,\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @return {void}\n   */\n  reset() {\n    untrackDocument(this.info);\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {MouseEvent} e\n   * @return {void}\n   */\n  mousedown(e) {\n    if (!hasLeftMouseButton(e)) {\n      return;\n    }\n    const t = _findOriginalTarget(e);\n    const self = this;\n    const movefn = (e) => {\n      if (!hasLeftMouseButton(e)) {\n        downupFire('up', t, e);\n        untrackDocument(self.info);\n      }\n    };\n    const upfn = (e) => {\n      if (hasLeftMouseButton(e)) {\n        downupFire('up', t, e);\n      }\n      untrackDocument(self.info);\n    };\n    trackDocument(this.info, movefn, upfn);\n    downupFire('down', t, e);\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {TouchEvent} e\n   * @return {void}\n   */\n  touchstart(e) {\n    downupFire('down', _findOriginalTarget(e), e.changedTouches[0], e);\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {TouchEvent} e\n   * @return {void}\n   */\n  touchend(e) {\n    downupFire('up', _findOriginalTarget(e), e.changedTouches[0], e);\n  },\n});\n\n/**\n * @param {string} type\n * @param {EventTarget} target\n * @param {Event|Touch} event\n * @param {Event=} preventer\n * @return {void}\n */\nfunction downupFire(type, target, event, preventer) {\n  if (!target) {\n    return;\n  }\n  _fire(target, type, {\n    x: event.clientX,\n    y: event.clientY,\n    sourceEvent: event,\n    preventer,\n    prevent(e) {\n      return prevent(e);\n    },\n  });\n}\n\nregister({\n  name: 'track',\n  touchAction: 'none',\n  deps: ['mousedown', 'touchstart', 'touchmove', 'touchend'],\n  flow: {\n    start: ['mousedown', 'touchstart'],\n    end: ['mouseup', 'touchend'],\n  },\n  emits: ['track'],\n\n  info: {\n    x: 0,\n    y: 0,\n    state: 'start',\n    started: false,\n    moves: [],\n    /** @this {GestureInfo} */\n    addMove(move) {\n      if (this.moves.length > TRACK_LENGTH) {\n        this.moves.shift();\n      }\n      this.moves.push(move);\n    },\n    movefn: null,\n    upfn: null,\n    prevent: false,\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @return {void}\n   */\n  reset() {\n    this.info.state = 'start';\n    this.info.started = false;\n    this.info.moves = [];\n    this.info.x = 0;\n    this.info.y = 0;\n    this.info.prevent = false;\n    untrackDocument(this.info);\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {MouseEvent} e\n   * @return {void}\n   */\n  mousedown(e) {\n    if (!hasLeftMouseButton(e)) {\n      return;\n    }\n    const t = _findOriginalTarget(e);\n    const self = this;\n    const movefn = (e) => {\n      const x = e.clientX,\n        y = e.clientY;\n      if (trackHasMovedEnough(self.info, x, y)) {\n        // First move is 'start', subsequent moves are 'move', mouseup is 'end'\n        self.info.state = self.info.started ? (e.type === 'mouseup' ? 'end' : 'track') : 'start';\n        if (self.info.state === 'start') {\n          // If and only if tracking, always prevent tap\n          prevent('tap');\n        }\n        self.info.addMove({ x, y });\n        if (!hasLeftMouseButton(e)) {\n          // Always fire \"end\"\n          self.info.state = 'end';\n          untrackDocument(self.info);\n        }\n        if (t) {\n          trackFire(self.info, t, e);\n        }\n        self.info.started = true;\n      }\n    };\n    const upfn = (e) => {\n      if (self.info.started) {\n        movefn(e);\n      }\n\n      // Remove the temporary listeners\n      untrackDocument(self.info);\n    };\n    // Add temporary document listeners as mouse retargets\n    trackDocument(this.info, movefn, upfn);\n    this.info.x = e.clientX;\n    this.info.y = e.clientY;\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {TouchEvent} e\n   * @return {void}\n   */\n  touchstart(e) {\n    const ct = e.changedTouches[0];\n    this.info.x = ct.clientX;\n    this.info.y = ct.clientY;\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {TouchEvent} e\n   * @return {void}\n   */\n  touchmove(e) {\n    const t = _findOriginalTarget(e);\n    const ct = e.changedTouches[0];\n    const x = ct.clientX,\n      y = ct.clientY;\n    if (trackHasMovedEnough(this.info, x, y)) {\n      if (this.info.state === 'start') {\n        // If and only if tracking, always prevent tap\n        prevent('tap');\n      }\n      this.info.addMove({ x, y });\n      trackFire(this.info, t, ct);\n      this.info.state = 'track';\n      this.info.started = true;\n    }\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {TouchEvent} e\n   * @return {void}\n   */\n  touchend(e) {\n    const t = _findOriginalTarget(e);\n    const ct = e.changedTouches[0];\n    // Only trackend if track was started and not aborted\n    if (this.info.started) {\n      // Reset started state on up\n      this.info.state = 'end';\n      this.info.addMove({ x: ct.clientX, y: ct.clientY });\n      trackFire(this.info, t, ct);\n    }\n  },\n});\n\n/**\n * @param {!GestureInfo} info\n * @param {number} x\n * @param {number} y\n * @return {boolean}\n */\nfunction trackHasMovedEnough(info, x, y) {\n  if (info.prevent) {\n    return false;\n  }\n  if (info.started) {\n    return true;\n  }\n  const dx = Math.abs(info.x - x);\n  const dy = Math.abs(info.y - y);\n  return dx >= TRACK_DISTANCE || dy >= TRACK_DISTANCE;\n}\n\n/**\n * @param {!GestureInfo} info\n * @param {?EventTarget} target\n * @param {Touch} touch\n * @return {void}\n */\nfunction trackFire(info, target, touch) {\n  if (!target) {\n    return;\n  }\n  const secondlast = info.moves[info.moves.length - 2];\n  const lastmove = info.moves[info.moves.length - 1];\n  const dx = lastmove.x - info.x;\n  const dy = lastmove.y - info.y;\n  let ddx,\n    ddy = 0;\n  if (secondlast) {\n    ddx = lastmove.x - secondlast.x;\n    ddy = lastmove.y - secondlast.y;\n  }\n  _fire(target, 'track', {\n    state: info.state,\n    x: touch.clientX,\n    y: touch.clientY,\n    dx,\n    dy,\n    ddx,\n    ddy,\n    sourceEvent: touch,\n    hover() {\n      return deepTargetFind(touch.clientX, touch.clientY);\n    },\n  });\n}\n\nregister({\n  name: 'tap',\n  deps: ['mousedown', 'click', 'touchstart', 'touchend'],\n  flow: {\n    start: ['mousedown', 'touchstart'],\n    end: ['click', 'touchend'],\n  },\n  emits: ['tap'],\n  info: {\n    x: NaN,\n    y: NaN,\n    prevent: false,\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @return {void}\n   */\n  reset() {\n    this.info.x = NaN;\n    this.info.y = NaN;\n    this.info.prevent = false;\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {MouseEvent} e\n   * @return {void}\n   */\n  mousedown(e) {\n    if (hasLeftMouseButton(e)) {\n      this.info.x = e.clientX;\n      this.info.y = e.clientY;\n    }\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {MouseEvent} e\n   * @return {void}\n   */\n  click(e) {\n    if (hasLeftMouseButton(e)) {\n      trackForward(this.info, e);\n    }\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {TouchEvent} e\n   * @return {void}\n   */\n  touchstart(e) {\n    const touch = e.changedTouches[0];\n    this.info.x = touch.clientX;\n    this.info.y = touch.clientY;\n  },\n\n  /**\n   * @this {GestureRecognizer}\n   * @param {TouchEvent} e\n   * @return {void}\n   */\n  touchend(e) {\n    trackForward(this.info, e.changedTouches[0], e);\n  },\n});\n\n/**\n * @param {!GestureInfo} info\n * @param {Event | Touch} e\n * @param {Event=} preventer\n * @return {void}\n */\nfunction trackForward(info, e, preventer) {\n  const dx = Math.abs(e.clientX - info.x);\n  const dy = Math.abs(e.clientY - info.y);\n  // Find original target from `preventer` for TouchEvents, or `e` for MouseEvents\n  const t = _findOriginalTarget(preventer || e);\n  if (!t || (canBeDisabled[/** @type {!HTMLElement} */ (t).localName] && t.hasAttribute('disabled'))) {\n    return;\n  }\n  // Dx,dy can be NaN if `click` has been simulated and there was no `down` for `start`\n  if (isNaN(dx) || isNaN(dy) || (dx <= TAP_DISTANCE && dy <= TAP_DISTANCE) || isSyntheticClick(e)) {\n    // Prevent taps from being generated if an event has canceled them\n    if (!info.prevent) {\n      _fire(t, 'tap', {\n        x: e.clientX,\n        y: e.clientY,\n        sourceEvent: e,\n        preventer,\n      });\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { dedupeMixin } from '@open-wc/dedupe-mixin';\n\n/**\n * A mixin to provide disabled property for field components.\n *\n * @polymerMixin\n */\nexport const DisabledMixin = dedupeMixin(\n  (superclass) =>\n    class DisabledMixinClass extends superclass {\n      static get properties() {\n        return {\n          /**\n           * If true, the user cannot interact with this element.\n           */\n          disabled: {\n            type: Boolean,\n            value: false,\n            observer: '_disabledChanged',\n            reflectToAttribute: true,\n            sync: true,\n          },\n        };\n      }\n\n      /**\n       * @param {boolean} disabled\n       * @protected\n       */\n      _disabledChanged(disabled) {\n        this._setAriaDisabled(disabled);\n      }\n\n      /**\n       * @param {boolean} disabled\n       * @protected\n       */\n      _setAriaDisabled(disabled) {\n        if (disabled) {\n          this.setAttribute('aria-disabled', 'true');\n        } else {\n          this.removeAttribute('aria-disabled');\n        }\n      }\n\n      /**\n       * Overrides the default element `click` method in order to prevent\n       * firing the `click` event when the element is disabled.\n       * @protected\n       * @override\n       */\n      click() {\n        if (!this.disabled) {\n          super.click();\n        }\n      }\n    },\n);\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { dedupeMixin } from '@open-wc/dedupe-mixin';\n\n/**\n * A mixin that manages keyboard handling.\n * The mixin subscribes to the keyboard events while an actual implementation\n * for the event handlers is left to the client (a component or another mixin).\n *\n * @polymerMixin\n */\nexport const KeyboardMixin = dedupeMixin(\n  (superclass) =>\n    class KeyboardMixinClass extends superclass {\n      /** @protected */\n      ready() {\n        super.ready();\n\n        this.addEventListener('keydown', (event) => {\n          this._onKeyDown(event);\n        });\n\n        this.addEventListener('keyup', (event) => {\n          this._onKeyUp(event);\n        });\n      }\n\n      /**\n       * A handler for the `keydown` event. By default, it calls\n       * separate methods for handling \"Enter\" and \"Escape\" keys.\n       * Override the method to implement your own behavior.\n       *\n       * @param {KeyboardEvent} event\n       * @protected\n       */\n      _onKeyDown(event) {\n        switch (event.key) {\n          case 'Enter':\n            this._onEnter(event);\n            break;\n          case 'Escape':\n            this._onEscape(event);\n            break;\n          default:\n            break;\n        }\n      }\n\n      /**\n       * A handler for the `keyup` event. By default, it does nothing.\n       * Override the method to implement your own behavior.\n       *\n       * @param {KeyboardEvent} _event\n       * @protected\n       */\n      _onKeyUp(_event) {\n        // To be implemented.\n      }\n\n      /**\n       * A handler for the \"Enter\" key. By default, it does nothing.\n       * Override the method to implement your own behavior.\n       *\n       * @param {KeyboardEvent} _event\n       * @protected\n       */\n      _onEnter(_event) {\n        // To be implemented.\n      }\n\n      /**\n       * A handler for the \"Escape\" key. By default, it does nothing.\n       * Override the method to implement your own behavior.\n       *\n       * @param {KeyboardEvent} _event\n       * @protected\n       */\n      _onEscape(_event) {\n        // To be implemented.\n      }\n    },\n);\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { addListener } from '@vaadin/component-base/src/gestures.js';\nimport { DisabledMixin } from './disabled-mixin.js';\nimport { KeyboardMixin } from './keyboard-mixin.js';\n\n/**\n * A mixin to toggle the `active` attribute.\n *\n * The attribute is set whenever the user activates the element by a pointer\n * or presses an activation key on the element from the keyboard.\n *\n * The attribute is removed as soon as the element is deactivated\n * by the pointer or by releasing the activation key.\n *\n * @polymerMixin\n * @mixes DisabledMixin\n * @mixes KeyboardMixin\n */\nexport const ActiveMixin = (superclass) =>\n  class ActiveMixinClass extends DisabledMixin(KeyboardMixin(superclass)) {\n    /**\n     * An array of activation keys.\n     *\n     * See possible values here:\n     * https://developer.mozilla.org/ru/docs/Web/API/KeyboardEvent/key/Key_Values\n     *\n     * @protected\n     * @return {!Array<!string>}\n     */\n    get _activeKeys() {\n      return [' '];\n    }\n\n    /** @protected */\n    ready() {\n      super.ready();\n\n      addListener(this, 'down', (event) => {\n        if (this._shouldSetActive(event)) {\n          this._setActive(true);\n        }\n      });\n\n      addListener(this, 'up', () => {\n        this._setActive(false);\n      });\n    }\n\n    /** @protected */\n    disconnectedCallback() {\n      super.disconnectedCallback();\n\n      // When the element is disconnecting from the DOM at the moment being active,\n      // the `active` attribute needs to be manually removed from the element.\n      // Otherwise, it will preserve on the element until the element is activated once again.\n      // The case reproduces for `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n      this._setActive(false);\n    }\n\n    /**\n     * @param {KeyboardEvent | MouseEvent} _event\n     * @protected\n     */\n    _shouldSetActive(_event) {\n      return !this.disabled;\n    }\n\n    /**\n     * Sets the `active` attribute on the element if an activation key is pressed.\n     *\n     * @param {KeyboardEvent} event\n     * @protected\n     * @override\n     */\n    _onKeyDown(event) {\n      super._onKeyDown(event);\n\n      if (this._shouldSetActive(event) && this._activeKeys.includes(event.key)) {\n        this._setActive(true);\n\n        // Element can become hidden before the `keyup` event, e.g. on button click.\n        // Use document listener to ensure `active` attribute is removed correctly.\n        document.addEventListener(\n          'keyup',\n          (e) => {\n            if (this._activeKeys.includes(e.key)) {\n              this._setActive(false);\n            }\n          },\n          { once: true },\n        );\n      }\n    }\n\n    /**\n     * Toggles the `active` attribute on the element.\n     *\n     * @param {boolean} active\n     * @protected\n     */\n    _setActive(active) {\n      this.toggleAttribute('active', active);\n    }\n  };\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n// We consider the keyboard to be active if the window has received a keydown\n// event since the last mousedown event.\nlet keyboardActive = false;\n\n// Listen for top-level keydown and mousedown events.\n// Use capture phase so we detect events even if they're handled.\nwindow.addEventListener(\n  'keydown',\n  () => {\n    keyboardActive = true;\n  },\n  { capture: true },\n);\n\nwindow.addEventListener(\n  'mousedown',\n  () => {\n    keyboardActive = false;\n  },\n  { capture: true },\n);\n\n/**\n * Returns the actually focused element by traversing shadow\n * trees recursively to ensure it's the leaf element.\n *\n * @return {Element}\n */\nexport function getDeepActiveElement() {\n  let host = document.activeElement || document.body;\n  while (host.shadowRoot && host.shadowRoot.activeElement) {\n    host = host.shadowRoot.activeElement;\n  }\n  return host;\n}\n\n/**\n * Returns true if the window has received a keydown\n * event since the last mousedown event.\n *\n * @return {boolean}\n */\nexport function isKeyboardActive() {\n  return keyboardActive;\n}\n\n/**\n * Returns true if the element is hidden directly with `display: none` or `visibility: hidden`,\n * false otherwise.\n *\n * The method doesn't traverse the element's ancestors, it only checks for the CSS properties\n * set directly to or inherited by the element.\n *\n * @param {HTMLElement} element\n * @return {boolean}\n */\nfunction isElementHiddenDirectly(element) {\n  // Check inline style first to save a re-flow.\n  const style = element.style;\n  if (style.visibility === 'hidden' || style.display === 'none') {\n    return true;\n  }\n\n  const computedStyle = window.getComputedStyle(element);\n  if (computedStyle.visibility === 'hidden' || computedStyle.display === 'none') {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Returns if element `a` has lower tab order compared to element `b`\n * (both elements are assumed to be focusable and tabbable).\n * Elements with tabindex = 0 have lower tab order compared to elements\n * with tabindex > 0.\n * If both have same tabindex, it returns false.\n *\n * @param {HTMLElement} a\n * @param {HTMLElement} b\n * @return {boolean}\n */\nfunction hasLowerTabOrder(a, b) {\n  // Normalize tabIndexes\n  // e.g. in Firefox `<div contenteditable>` has `tabIndex = -1`\n  const ati = Math.max(a.tabIndex, 0);\n  const bti = Math.max(b.tabIndex, 0);\n  return ati === 0 || bti === 0 ? bti > ati : ati > bti;\n}\n\n/**\n * Merge sort iterator, merges the two arrays into one, sorted by tabindex.\n *\n * @param {HTMLElement[]} left\n * @param {HTMLElement[]} right\n * @return {HTMLElement[]}\n */\nfunction mergeSortByTabIndex(left, right) {\n  const result = [];\n  while (left.length > 0 && right.length > 0) {\n    if (hasLowerTabOrder(left[0], right[0])) {\n      result.push(right.shift());\n    } else {\n      result.push(left.shift());\n    }\n  }\n\n  return result.concat(left, right);\n}\n\n/**\n * Sorts an array of elements by tabindex. Returns a new array.\n *\n * @param {HTMLElement[]} elements\n * @return {HTMLElement[]}\n */\nfunction sortElementsByTabIndex(elements) {\n  // Implement a merge sort as Array.prototype.sort does a non-stable sort\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n  const len = elements.length;\n  if (len < 2) {\n    return elements;\n  }\n  const pivot = Math.ceil(len / 2);\n  const left = sortElementsByTabIndex(elements.slice(0, pivot));\n  const right = sortElementsByTabIndex(elements.slice(pivot));\n\n  return mergeSortByTabIndex(left, right);\n}\n\n/**\n * Returns true if the element is hidden, false otherwise.\n *\n * An element is treated as hidden when any of the following conditions are met:\n * - the element itself or one of its ancestors has `display: none`.\n * - the element has or inherits `visibility: hidden`.\n *\n * @param {HTMLElement} element\n * @return {boolean}\n */\nexport function isElementHidden(element) {\n  if (element.checkVisibility) {\n    return !element.checkVisibility({ visibilityProperty: true });\n  }\n\n  // TODO: checkVisibility is supported only from Safari 17.4, so we still need to\n  // keep the custom implementation as a fallback for older versions until Vaadin 25:\n\n  // `offsetParent` is `null` when the element itself\n  // or one of its ancestors is hidden with `display: none`.\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n  // However `offsetParent` is also null when the element is using fixed\n  // positioning, so additionally check if the element takes up layout space.\n  if (element.offsetParent === null && element.clientWidth === 0 && element.clientHeight === 0) {\n    return true;\n  }\n\n  return isElementHiddenDirectly(element);\n}\n\n/**\n * Returns true if the element is focusable, otherwise false.\n *\n * The list of focusable elements is taken from http://stackoverflow.com/a/1600194/4228703.\n * However, there isn't a definite list, it's up to the browser.\n * The only standard we have is DOM Level 2 HTML https://www.w3.org/TR/DOM-Level-2-HTML/html.html,\n * according to which the only elements that have a `focus()` method are:\n * - HTMLInputElement\n * - HTMLSelectElement\n * - HTMLTextAreaElement\n * - HTMLAnchorElement\n *\n * This notably omits HTMLButtonElement and HTMLAreaElement.\n * Referring to these tests with tabbables in different browsers\n * http://allyjs.io/data-tables/focusable.html\n *\n * @param {HTMLElement} element\n * @return {boolean}\n */\nexport function isElementFocusable(element) {\n  // The element cannot be focused if its `tabindex` attribute is set to `-1`.\n  if (element.matches('[tabindex=\"-1\"]')) {\n    return false;\n  }\n\n  // Elements that cannot be focused if they have a `disabled` attribute.\n  if (element.matches('input, select, textarea, button, object')) {\n    return element.matches(':not([disabled])');\n  }\n\n  // Elements that can be focused even if they have a `disabled` attribute.\n  return element.matches('a[href], area[href], iframe, [tabindex], [contentEditable]');\n}\n\n/**\n * Returns true if the element is focused, false otherwise.\n *\n * @param {HTMLElement} element\n * @return {boolean}\n */\nexport function isElementFocused(element) {\n  return element.getRootNode().activeElement === element;\n}\n\n/**\n * Returns the normalized element tabindex. If not focusable, returns -1.\n * It checks for the attribute \"tabindex\" instead of the element property\n * `tabIndex` since browsers assign different values to it.\n * e.g. in Firefox `<div contenteditable>` has `tabIndex = -1`\n *\n * @param {HTMLElement} element\n * @return {number}\n */\nfunction normalizeTabIndex(element) {\n  if (!isElementFocusable(element)) {\n    return -1;\n  }\n\n  const tabIndex = element.getAttribute('tabindex') || 0;\n  return Number(tabIndex);\n}\n\n/**\n * Searches for nodes that are tabbable and adds them to the `result` array.\n * Returns if the `result` array needs to be sorted by tabindex.\n *\n * @param {Node} node The starting point for the search; added to `result` if tabbable.\n * @param {HTMLElement[]} result\n * @return {boolean}\n * @private\n */\nfunction collectFocusableNodes(node, result) {\n  if (node.nodeType !== Node.ELEMENT_NODE || isElementHiddenDirectly(node)) {\n    // Don't traverse children if the node is not an HTML element or not visible.\n    return false;\n  }\n\n  const element = /** @type {HTMLElement} */ (node);\n  const tabIndex = normalizeTabIndex(element);\n  let needsSort = tabIndex > 0;\n  if (tabIndex >= 0) {\n    result.push(element);\n  }\n\n  let children = [];\n  if (element.localName === 'slot') {\n    children = element.assignedNodes({ flatten: true });\n  } else {\n    // Use shadow root if possible, will check for distributed nodes.\n    children = (element.shadowRoot || element).children;\n  }\n  [...children].forEach((child) => {\n    // Ensure method is always invoked to collect focusable children.\n    needsSort = collectFocusableNodes(child, result) || needsSort;\n  });\n  return needsSort;\n}\n\n/**\n * Returns a tab-ordered array of focusable elements for a root element.\n * The resulting array will include the root element if it is focusable.\n *\n * The method traverses nodes in shadow DOM trees too if any.\n *\n * @param {HTMLElement} element\n * @return {HTMLElement[]}\n */\nexport function getFocusableElements(element) {\n  const focusableElements = [];\n  const needsSortByTabIndex = collectFocusableNodes(element, focusableElements);\n  // If there is at least one element with tabindex > 0,\n  // we need to sort the final array by tabindex.\n  if (needsSortByTabIndex) {\n    return sortElementsByTabIndex(focusableElements);\n  }\n  return focusableElements;\n}\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { dedupeMixin } from '@open-wc/dedupe-mixin';\nimport { isKeyboardActive } from './focus-utils.js';\n\n/**\n * A mixin to handle `focused` and `focus-ring` attributes based on focus.\n *\n * @polymerMixin\n */\nexport const FocusMixin = dedupeMixin(\n  (superclass) =>\n    class FocusMixinClass extends superclass {\n      /**\n       * @protected\n       * @return {boolean}\n       */\n      get _keyboardActive() {\n        return isKeyboardActive();\n      }\n\n      /** @protected */\n      ready() {\n        this.addEventListener('focusin', (e) => {\n          if (this._shouldSetFocus(e)) {\n            this._setFocused(true);\n          }\n        });\n\n        this.addEventListener('focusout', (e) => {\n          if (this._shouldRemoveFocus(e)) {\n            this._setFocused(false);\n          }\n        });\n\n        // In super.ready() other 'focusin' and 'focusout' listeners might be\n        // added, so we call it after our own ones to ensure they execute first.\n        // Issue to watch out: when incorrect, <vaadin-combo-box> refocuses the\n        // input field on iOS after \"Done\" is pressed.\n        super.ready();\n      }\n\n      /** @protected */\n      disconnectedCallback() {\n        super.disconnectedCallback();\n\n        // In non-Chrome browsers, blur does not fire on the element when it is disconnected.\n        // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n        if (this.hasAttribute('focused')) {\n          this._setFocused(false);\n        }\n      }\n\n      /**\n       * @param {FocusOptions=} options\n       * @protected\n       * @override\n       */\n      focus(options) {\n        super.focus(options);\n\n        // Set focus-ring attribute on programmatic focus by default\n        // unless explicitly disabled by `{ focusVisible: false }`.\n        if (!(options && options.focusVisible === false)) {\n          this.setAttribute('focus-ring', '');\n        }\n      }\n\n      /**\n       * Override to change how focused and focus-ring attributes are set.\n       *\n       * @param {boolean} focused\n       * @protected\n       */\n      _setFocused(focused) {\n        this.toggleAttribute('focused', focused);\n\n        // Focus-ring is true when the element was focused from the keyboard.\n        // Focus Ring [A11ycasts]: https://youtu.be/ilj2P5-5CjI\n        this.toggleAttribute('focus-ring', focused && this._keyboardActive);\n      }\n\n      /**\n       * Override to define if the field receives focus based on the event.\n       *\n       * @param {FocusEvent} _event\n       * @return {boolean}\n       * @protected\n       */\n      _shouldSetFocus(_event) {\n        return true;\n      }\n\n      /**\n       * Override to define if the field loses focus based on the event.\n       *\n       * @param {FocusEvent} _event\n       * @return {boolean}\n       * @protected\n       */\n      _shouldRemoveFocus(_event) {\n        return true;\n      }\n    },\n);\n","/**\n * @license\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { DisabledMixin } from './disabled-mixin.js';\n\n/**\n * A mixin to toggle the `tabindex` attribute.\n *\n * The attribute is set to -1 whenever the user disables the element\n * and restored with the last known value once the element is enabled.\n *\n * @polymerMixin\n * @mixes DisabledMixin\n */\nexport const TabindexMixin = (superclass) =>\n  class TabindexMixinClass extends DisabledMixin(superclass) {\n    static get properties() {\n      return {\n        /**\n         * Indicates whether the element can be focused and where it participates in sequential keyboard navigation.\n         *\n         * @protected\n         */\n        tabindex: {\n          type: Number,\n          reflectToAttribute: true,\n          observer: '_tabindexChanged',\n          sync: true,\n        },\n\n        /**\n         * Stores the last known tabindex since the element has been disabled.\n         *\n         * @protected\n         */\n        _lastTabIndex: {\n          type: Number,\n        },\n      };\n    }\n\n    /**\n     * When the element gets disabled, the observer saves the last known tabindex\n     * and makes the element not focusable by setting tabindex to -1.\n     * As soon as the element gets enabled, the observer restores the last known tabindex\n     * so that the element can be focusable again.\n     *\n     * @protected\n     * @override\n     */\n    _disabledChanged(disabled, oldDisabled) {\n      super._disabledChanged(disabled, oldDisabled);\n\n      if (this.__shouldAllowFocusWhenDisabled()) {\n        return;\n      }\n\n      if (disabled) {\n        if (this.tabindex !== undefined) {\n          this._lastTabIndex = this.tabindex;\n        }\n        this.setAttribute('tabindex', '-1');\n      } else if (oldDisabled) {\n        if (this._lastTabIndex !== undefined) {\n          this.setAttribute('tabindex', this._lastTabIndex);\n        } else {\n          this.tabindex = undefined;\n        }\n      }\n    }\n\n    /**\n     * When the user has changed tabindex while the element is disabled,\n     * the observer reverts tabindex to -1 and rather saves the new tabindex value to apply it later.\n     * The new value will be applied as soon as the element becomes enabled.\n     *\n     * @protected\n     */\n    _tabindexChanged(tabindex) {\n      if (this.__shouldAllowFocusWhenDisabled()) {\n        return;\n      }\n\n      if (this.disabled && tabindex !== -1) {\n        this._lastTabIndex = tabindex;\n        this.setAttribute('tabindex', '-1');\n      }\n    }\n\n    /**\n     * Overrides the native `focus` method in order to prevent\n     * focusing the element when it is disabled. Note, setting\n     * `tabindex` to -1 does not prevent the element from being\n     * programmatically focusable.\n     *\n     * @param {FocusOptions=} options\n     * @protected\n     * @override\n     */\n    focus(options) {\n      if (!this.disabled || this.__shouldAllowFocusWhenDisabled()) {\n        super.focus(options);\n      }\n    }\n\n    /**\n     * Returns whether the component should be focusable when disabled.\n     * Returns false by default.\n     *\n     * @private\n     * @return {boolean}\n     */\n    __shouldAllowFocusWhenDisabled() {\n      return false;\n    }\n  };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { ActiveMixin } from '@vaadin/a11y-base/src/active-mixin.js';\nimport { FocusMixin } from '@vaadin/a11y-base/src/focus-mixin.js';\nimport { TabindexMixin } from '@vaadin/a11y-base/src/tabindex-mixin.js';\n\nconst INTERACTION_EVENTS = ['mousedown', 'mouseup', 'click', 'dblclick', 'keypress', 'keydown', 'keyup'];\n\n/**\n * A mixin providing common button functionality.\n *\n * @polymerMixin\n * @mixes ActiveMixin\n * @mixes FocusMixin\n * @mixes TabindexMixin\n */\nexport const ButtonMixin = (superClass) =>\n  class ButtonMixinClass extends ActiveMixin(TabindexMixin(FocusMixin(superClass))) {\n    constructor() {\n      super();\n\n      this.__onInteractionEvent = this.__onInteractionEvent.bind(this);\n\n      INTERACTION_EVENTS.forEach((eventType) => {\n        this.addEventListener(eventType, this.__onInteractionEvent, true);\n      });\n\n      // Set tabindex to 0 by default\n      this.tabindex = 0;\n    }\n\n    /**\n     * By default, `Space` is the only possible activation key for a focusable HTML element.\n     * Nonetheless, the button is an exception as it can be also activated by pressing `Enter`.\n     * See the \"Keyboard Support\" section in https://www.w3.org/TR/wai-aria-practices/examples/button/button.html.\n     *\n     * @protected\n     * @override\n     */\n    get _activeKeys() {\n      return ['Enter', ' '];\n    }\n\n    /** @protected */\n    ready() {\n      super.ready();\n\n      // By default, if the user hasn't provided a custom role,\n      // the role attribute is set to \"button\".\n      if (!this.hasAttribute('role')) {\n        this.setAttribute('role', 'button');\n      }\n\n      if (this.__shouldAllowFocusWhenDisabled()) {\n        this.style.setProperty('--_vaadin-button-disabled-pointer-events', 'auto');\n      }\n    }\n\n    /**\n     * Since the button component is designed on the base of the `[role=button]` attribute,\n     * and doesn't have a native <button> inside, in order to be fully accessible from the keyboard,\n     * it should manually fire the `click` event once an activation key is pressed,\n     * as it follows from the WAI-ARIA specifications:\n     * https://www.w3.org/TR/wai-aria-practices-1.1/#button\n     *\n     * According to the UI Events specifications,\n     * the `click` event should be fired exactly on `keydown`:\n     * https://www.w3.org/TR/uievents/#event-type-keydown\n     *\n     * @param {KeyboardEvent} event\n     * @protected\n     * @override\n     */\n    _onKeyDown(event) {\n      super._onKeyDown(event);\n\n      if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n        return;\n      }\n\n      if (this._activeKeys.includes(event.key)) {\n        event.preventDefault();\n\n        // `DisabledMixin` overrides the standard `click()` method\n        // so that it doesn't fire the `click` event when the element is disabled.\n        this.click();\n      }\n    }\n\n    /** @private */\n    __onInteractionEvent(event) {\n      if (this.__shouldSuppressInteractionEvent(event)) {\n        event.stopImmediatePropagation();\n      }\n    }\n\n    /**\n     * Returns whether to suppress interaction events like `click`, `keydown`, etc.\n     * By default suppresses all interaction events when the button is disabled.\n     *\n     * @private\n     */\n    __shouldSuppressInteractionEvent(_event) {\n      return this.disabled;\n    }\n  };\n","/**\n * @license\n * Copyright (c) 2017 - 2025 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport { html, PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { ControllerMixin } from '@vaadin/component-base/src/controller-mixin.js';\nimport { defineCustomElement } from '@vaadin/component-base/src/define.js';\nimport { ElementMixin } from '@vaadin/component-base/src/element-mixin.js';\nimport { TooltipController } from '@vaadin/component-base/src/tooltip-controller.js';\nimport { registerStyles, ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { buttonStyles } from './vaadin-button-core-styles.js';\nimport { ButtonMixin } from './vaadin-button-mixin.js';\n\nregisterStyles('vaadin-button', buttonStyles, { moduleId: 'vaadin-button-styles' });\n\n/**\n * `<vaadin-button>` is an accessible and customizable button that allows users to perform actions.\n *\n * ```html\n * <vaadin-button>Press me</vaadin-button>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------|-------------\n * `label`   | The label (text) inside the button.\n * `prefix`  | A slot for content before the label (e.g. an icon).\n * `suffix`  | A slot for content after the label (e.g. an icon).\n *\n * The following state attributes are available for styling:\n *\n * Attribute      | Description\n * ---------------|-------------\n * `active`       | Set when the button is pressed down, either with mouse, touch or the keyboard\n * `disabled`     | Set when the button is disabled\n * `focus-ring`   | Set when the button is focused using the keyboard\n * `focused`      | Set when the button is focused\n * `has-tooltip`  | Set when the button has a slotted tooltip\n *\n * See [Styling Components](https://vaadin.com/docs/latest/styling/styling-components) documentation.\n *\n * @customElement\n * @extends HTMLElement\n * @mixes ButtonMixin\n * @mixes ControllerMixin\n * @mixes ElementMixin\n * @mixes ThemableMixin\n */\nclass Button extends ButtonMixin(ElementMixin(ThemableMixin(ControllerMixin(PolymerElement)))) {\n  static get properties() {\n    return {\n      /**\n       * When disabled, the button is rendered as \"dimmed\" and prevents all\n       * user interactions (mouse and keyboard).\n       *\n       * Since disabled buttons are not focusable and cannot react to hover\n       * events by default, it can cause accessibility issues by making them\n       * entirely invisible to assistive technologies, and prevents the use\n       * of Tooltips to explain why the action is not available. This can be\n       * addressed by enabling the feature flag `accessibleDisabledButtons`,\n       * which makes disabled buttons focusable and hoverable, while still\n       * preventing them from being triggered:\n       *\n       * ```\n       * // Set before any button is attached to the DOM.\n       * window.Vaadin.featureFlags.accessibleDisabledButtons = true\n       * ```\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  static get is() {\n    return 'vaadin-button';\n  }\n\n  static get template() {\n    return html`\n      <div class=\"vaadin-button-container\">\n        <span part=\"prefix\" aria-hidden=\"true\">\n          <slot name=\"prefix\"></slot>\n        </span>\n        <span part=\"label\">\n          <slot></slot>\n        </span>\n        <span part=\"suffix\" aria-hidden=\"true\">\n          <slot name=\"suffix\"></slot>\n        </span>\n\n        <slot name=\"tooltip\"></slot>\n      </div>\n    `;\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n\n    this._tooltipController = new TooltipController(this);\n    this.addController(this._tooltipController);\n  }\n\n  /** @override */\n  __shouldAllowFocusWhenDisabled() {\n    return window.Vaadin.featureFlags.accessibleDisabledButtons;\n  }\n}\n\ndefineCustomElement(Button);\n\nexport { Button };\n","import { LitElement, html, css } from 'lit';\nimport { customElement } from 'lit/decorators.js';\nimport '@vaadin/button';\n\n@customElement('landing-view')\nexport class LandingView extends LitElement {\n  static styles = css`\n    .landing-container {\n      min-height: 100vh;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0b3b9e 100%);\n      padding: 2rem;\n      color: white;\n      text-align: center;\n    }\n    \n    .card {\n      background: rgba(255, 255, 255, 0.07);\n      backdrop-filter: blur(14px);\n      -webkit-backdrop-filter: blur(14px);\n      width: 100%;\n      max-width: 800px;\n      border-radius: 16px;\n      box-shadow: 0 20px 40px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.08);\n      padding: 2.5rem;\n      border: 1px solid rgba(255,255,255,0.12);\n    }\n    \n    h1 {\n      font-size: 2.5rem;\n      margin-bottom: 1.5rem;\n      color: #ffffff;\n    }\n    \n    .subtitle {\n      font-size: 1.25rem;\n      margin-bottom: 2rem;\n      color: rgba(255, 255, 255, 0.8);\n      line-height: 1.6;\n    }\n    \n    .features {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n      gap: 1.5rem;\n      margin: 2.5rem 0;\n      text-align: left;\n    }\n    \n    .feature {\n      background: rgba(255, 255, 255, 0.05);\n      border-radius: 12px;\n      padding: 1.5rem;\n      border: 1px solid rgba(255,255,255,0.1);\n    }\n    \n    .feature h3 {\n      margin-top: 0;\n      color: #60a5fa;\n      font-weight: 600;\n      letter-spacing: 0.5px;\n    }\n    \n    .premium-glow {\n      text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);\n      letter-spacing: 0.5px;\n    }\n    \n    .premium {\n      color: #ffd700;\n      font-weight: 600;\n      position: relative;\n      display: inline-block;\n    }\n    \n    .premium:after {\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 2px;\n      bottom: -4px;\n      left: 0;\n      background: linear-gradient(90deg, transparent, #ffd700, transparent);\n    }\n    \n    .buttons {\n      display: flex;\n      gap: 1rem;\n      justify-content: center;\n      margin-top: 2rem;\n    }\n    \n    vaadin-button {\n      padding: 0.75rem 2rem;\n      font-weight: 500;\n      border-radius: 8px;\n      transition: all 0.2s;\n    }\n    \n    vaadin-button[theme~=\"primary\"] {\n      background: #3b82f6;\n      color: white;\n      border: none;\n    }\n    \n    vaadin-button[theme~=\"primary\"]:hover {\n      background: #2563eb;\n      transform: translateY(-2px);\n    }\n    \n    vaadin-button[theme~=\"secondary\"] {\n      background: rgba(255, 255, 255, 0.1);\n      color: white;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n    }\n    \n    vaadin-button[theme~=\"secondary\"]:hover {\n      background: rgba(255, 255, 255, 0.15);\n      transform: translateY(-2px);\n    }\n  `;\n\n  render() {\n    return html`\n      <div class=\"landing-container\">\n        <div class=\"card\">\n          <h1>Welcome to <span class=\"premium\">Aurelian</span></h1>\n          <p class=\"subtitle\">\n            The CRM of distinction for those who lead. \n            Where exceptional businesses cultivate lasting relationships.\n          </p>\n          \n          <div class=\"features\">\n            <div class=\"feature\">\n              <h3>Easy to Use</h3>\n              <p>Intuitive interface designed for both beginners and professionals.</p>\n            </div>\n            <div class=\"feature\">\n              <h3>Powerful Features</h3>\n              <p>All the tools you need to manage your customer relationships effectively.</p>\n            </div>\n            <div class=\"feature\">\n              <h3>Secure & Reliable</h3>\n              <p>Your data is protected with the latest security measures.</p>\n            </div>\n          </div>\n          \n          <div class=\"buttons\">\n            <vaadin-button theme=\"primary\" @click=${(e: Event) => this.onNavigate(e, '/register')}>Create Account</vaadin-button>\n            <vaadin-button theme=\"secondary\" @click=${(e: Event) => this.onNavigate(e, '/login')}>Log In</vaadin-button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  // Simplified navigation that uses Vaadin Router.go() when possible.\n  private onNavigate(e: Event, path: string) {\n    // Prevent any default behaviour that might cause a full page reload\n    if (e && typeof (e as Event).preventDefault === 'function') {\n      e.preventDefault();\n    }\n    if (e && typeof (e as Event).stopPropagation === 'function') {\n      e.stopPropagation();\n    }\n\n    // eslint-disable-next-line no-console\n    console.debug('[landing-view] navigate ->', path, 'current=', window.location.pathname);\n\n    // Always try to use the Router.go helper via dynamic import. This is the most reliable\n    // way to programmatically navigate with Vaadin Router in different build setups.\n    import('@vaadin/router')\n      .then(({ Router }) => {\n        if (typeof (Router as any).go === 'function') {\n          (Router as any).go(path);\n          return;\n        }\n        // If static helper not available, attempt to use the global instance if present\n        const r = (window as any).vaadin && (window as any).vaadin.router;\n        if (r && typeof r.go === 'function') {\n          r.go(path);\n          return;\n        }\n        if (r && typeof r.render === 'function') {\n          r.render(path);\n          return;\n        }\n\n        // As a last resort use history API and dispatch a popstate\n        history.pushState({}, '', path);\n        window.dispatchEvent(new PopStateEvent('popstate'));\n      })\n      .catch(err => {\n        // eslint-disable-next-line no-console\n        console.error('[landing-view] navigation import failed, falling back to location.href', err);\n        window.location.href = path;\n      });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'landing-view': LandingView;\n  }\n}\n","import { Router } from '@vaadin/router';\nimport './views/login-view';\nimport './views/register-view';\nimport './views/landing-view';\n\ndeclare global {\n  interface Window {\n    vaadin: {\n      router?: Router;\n      [key: string]: any;\n    };\n  }\n}\n\nasync function initializeApp() {\n  try {\n    const outlet = document.getElementById('outlet');\n    if (!outlet) {\n      throw new Error('Could not find the outlet element');\n    }\n\n    // Initialize the router\n    const router = new Router(outlet);\n    \n    // Make router available globally for navigation\n    window.vaadin = window.vaadin || {};\n    window.vaadin.router = router;\n    \n    // Set up routes\n    router.setRoutes([\n      {\n        path: '/',\n        component: 'landing-view',\n        action: () => {\n          // Ensure the component is loaded\n          import('./views/landing-view');\n        }\n      },\n      {\n        path: '/login',\n        component: 'login-view',\n        action: () => {\n          // Check if already logged in\n          if (localStorage.getItem('user')) {\n            window.location.href = '/';\n            return;\n          }\n          import('./views/login-view');\n        }\n      },\n      {\n        path: '/register',\n        component: 'register-view',\n        action: () => {\n          // Check if already logged in\n          if (localStorage.getItem('user')) {\n            window.location.href = '/';\n            return;\n          }\n          import('./views/register-view');\n        }\n      },\n      // Add a catch-all route for 404\n      {\n        path: '(.*)',\n        component: 'landing-view',\n        action: () => {\n          import('./views/landing-view');\n        }\n      }\n    ]);\n\n    // Check authentication status on page load\n    const isLoggedIn = localStorage.getItem('user') !== null;\n    const currentPath = window.location.pathname;\n    \n    // Redirect to login if not authenticated and not on a public page\n    if (!isLoggedIn && !['/login', '/register', '/'].includes(currentPath)) {\n      window.location.href = '/login';\n    }\n    // Redirect to home if already logged in and trying to access auth pages\n    else if (isLoggedIn && ['/login', '/register'].includes(currentPath)) {\n      window.location.href = '/';\n    }\n\n    // Remove loading indicator\n    const loading = document.querySelector('#outlet > div');\n    if (loading) {\n      loading.remove();\n    }\n\n  } catch (error) {\n    console.error('Failed to initialize the app:', error);\n    const errorDiv = document.createElement('div');\n    errorDiv.style.color = 'red';\n    errorDiv.style.padding = '20px';\n    errorDiv.style.textAlign = 'center';\n    errorDiv.innerHTML = `\n      <h2>Application Error</h2>\n      <p>Failed to initialize the application. Please check the console for more details.</p>\n      <p>${error instanceof Error ? error.message : String(error)}</p>\n      <button onclick=\"window.location.reload()\" style=\"margin-top: 10px; padding: 8px 16px; cursor: pointer;\">\n        Reload Application\n      </button>\n    `;\n    \n    const app = document.getElementById('app') || document.body;\n    app.innerHTML = '';\n    app.appendChild(errorDiv);\n  }\n}\n\n// Initialize the app when the DOM is fully loaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initializeApp);\n} else {\n  initializeApp();\n}\n"],"file":"assets/main-4lynpRKZ.js"}