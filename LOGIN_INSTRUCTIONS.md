# üîê –õ–û–ì–ò–ù –ò–ù–°–¢–†–£–ö–¶–ò–ò

## –¢–µ—Å—Ç–æ–≤–∏—è –ê–∫–∞—É–Ω—Ç

**Email/Username:** `test1`  
**Password:** `123456789`

---

## –ö–∞–∫ –†–∞–±–æ—Ç–∏ –õ–æ–≥–∏–Ω –§–ª–æ—É

### 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (3000)
- –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –≤—ä–≤–µ–¥–µ `test1` / `123456789`
- –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –∫–∞—Ç–æ **username** –≤ –ø–∞–º–µ—Ç
- –ö–ª–∏–∫–≤–∞ "Log in"

### 2. API Request
```
POST /api/auth/login
Content-Type: application/json

{
  "username": "test1",
  "password": "123456789"
}
```

### 3. Backend (9192)
- AuthController –ø–æ–ª—É—á–∞–≤–∞ request
- –ü–æ–∑–∏–≤–∞ `UserService.authenticate("test1", "123456789")`
- UserService –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è —Å email "test1" –µ –≤ –ë–î
- –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –∫–æ–¥–∏—Ä–∞–Ω–∞ –ø–∞—Ä–æ–ª–∞ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞ –Ω–∞ "123456789"
- –í—Ä—ä—â–∞ —É—Å–ø–µ—à–µ–Ω response

### 4. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ó–∞–ø–∞–∑–≤–∞–Ω–µ
- –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∑–∞–ø–∞–∑–≤–∞ authentication —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ `localStorage`:
  - `isAuthenticated: true`
  - `authHeader: Basic dGVzdDE6MTIzNDU2Nzg5` (Base64 encoded)
  - `username: test1`
  - `user: { ... user data ... }`

### 5. –õ–æ–≥–∞—É—Ç
- –ü—Ä–∏ –ª–æ–≥–∞—É—Ç, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —á–∏—Å—Ç–≤–∞ –≤—Å–∏—á–∫–∏ localStorage –∑–∞–ø–∏—Å–∏
- –í—Ä—ä—â–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –∫—ä–º login —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞

---

## –ó–∞—â–æ –ó–∞–ª–µ–∑–µ –ü—Ä–µ–¥–∏ –Ω–æ –°–µ–≥–∞ –ù–µ?

**–ü—Ä–æ–±–ª–µ–º:** –ü–∞—Ä–æ–ª–∞-—Ç–∞ –Ω–µ –±—è—Ö–∞ –∫–æ–¥–∏—Ä–∞–Ω–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ –≤ DataInitializer

**–†–µ—à–µ–Ω–∏–µ:**  
- –ü—Ä–æ–º–µ–Ω–∏—Ö–º–µ DataInitializer –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞ **bcrypt** –∫–æ–¥–∏—Ä–∞–Ω–∏ –ø–∞—Ä–æ–ª–∏
- –¢–µ—Å—Ç–æ–≤–∏—è –∞–∫–∞—É–Ω—Ç `test1` –≤–µ—á–µ –∏–º–∞ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–æ–¥–∏—Ä–∞–Ω–∞ –ø–∞—Ä–æ–ª–∞
- Password encoder –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–∞ –¥–∞ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ bcrypt —Ö–µ—à–æ–≤–∏

---

## –î—Ä—É–≥–∏ –¢–µ—Å—Ç–æ–≤–∏ –ê–∫–∞—É–Ω—Ç–∏

| Email | –ü–∞—Ä–æ–ª–∞ | –†–æ–ª—è |
|-------|--------|------|
| `test1` | `123456789` | CLIENT |
| `admin@crm.com` | —Å—ä—â–æ—Ç–æ –∫–∞—Ç–æ –∏–∑–±—Ä–∞–Ω–∏—á | ADMIN |
| `maria@crm.com` | —Å—ä—â–æ—Ç–æ | LEADER |
| `ivan@crm.com` | —Å—ä—â–æ—Ç–æ | LEADER |

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ë–∞–∑–∞—Ç–∞

–í—Å–∏—á–∫–∏ –∞–∫–∞—É–Ω—Ç–∏ —Å–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Å `DataInitializer.java` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –±–µ–∫–µ–Ω–¥–∞.

–ó–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏:
```
URL: http://localhost:9192/h2-console
JDBC URL: jdbc:h2:mem:crmdb
User: sa
Password: (empty)
```

Query:
```sql
SELECT email, password, role FROM "user" LIMIT 10;
```

---

## –õ–æ–≥–æ–≤–µ –ü—Ä–∏ –£—Å–ø–µ—à–µ–Ω –õ–æ–≥–∏–Ω

Backend —â–µ –ø–æ–∫–∞–∑–∞:
```
Login attempt for username/email: test1
User found: test1, checking password match
Password matches: true
Login successful for: test1
```

Frontend console:
```
[ApiService] Login successful for user: test1
[AuthService] User authenticated: test1
```

---

## –ê–∫–æ –ù–µ –†–∞–±–æ—Ç–∏

1. **–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –±–µ–∫–µ–Ω–¥–∞ –µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω:**
   ```bash
   curl http://localhost:9192/h2-console
   ```

2. **–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –ª–æ–≥–æ–≤–µ—Ç–µ –Ω–∞ –±–µ–∫–µ–Ω–¥–∞** –∑–∞ "Login attempt" —Å—ä–æ–±—â–µ–Ω–∏–µ

3. **–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ localStorage –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (DevTools ‚Üí Application ‚Üí Local Storage)**

4. **–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —á–µ –ø–∞—Ä–æ–ª—è –µ —Ç–æ—á–Ω–æ `123456789`** (–±–µ–∑ spaces)

5. **–†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –æ–±–∞ —Å–µ—Ä–≤—ä—Ä–∞** (—É–±–∏–π—Ç–µ –ø—Ä–æ—Ü–µ—Å–∏—Ç–µ –∏ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ)

---

## üéØ –í–ê–ñ–ù–û

–õ–æ–≥–∏–Ω —Å–∏—Å—Ç–µ–º–∞—Ç–∞ —Ä–∞–±–æ—Ç–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ —Å–µ–≥–∞. –í—Å—è–∫–æ –∏–∑–ª–∏–∑–∞–Ω–µ –∏ –≤–ª–∏–∑–∞–Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º–∏.

